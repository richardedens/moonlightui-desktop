!function(global,factory){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=global.document?factory(global,!0):function(w){if(!w.document)throw new Error("jQuery requires a window with a document");return factory(w)}:factory(global)}("undefined"!=typeof window?window:this,function(window,noGlobal){"use strict";function DOMEval(code,doc){doc=doc||document;var script=doc.createElement("script");script.text=code,doc.head.appendChild(script).parentNode.removeChild(script)}function isArrayLike(obj){var length=!!obj&&"length"in obj&&obj.length,type=jQuery.type(obj);return"function"!==type&&!jQuery.isWindow(obj)&&("array"===type||0===length||"number"==typeof length&&length>0&&length-1 in obj)}function winnow(elements,qualifier,not){if(jQuery.isFunction(qualifier))return jQuery.grep(elements,function(elem,i){return!!qualifier.call(elem,i,elem)!==not});if(qualifier.nodeType)return jQuery.grep(elements,function(elem){return elem===qualifier!==not});if("string"==typeof qualifier){if(risSimple.test(qualifier))return jQuery.filter(qualifier,elements,not);qualifier=jQuery.filter(qualifier,elements)}return jQuery.grep(elements,function(elem){return indexOf.call(qualifier,elem)>-1!==not&&1===elem.nodeType})}function sibling(cur,dir){for(;(cur=cur[dir])&&1!==cur.nodeType;);return cur}function createOptions(options){var object={};return jQuery.each(options.match(rnotwhite)||[],function(_,flag){object[flag]=!0}),object}function Identity(v){return v}function Thrower(ex){throw ex}function adoptValue(value,resolve,reject){var method;try{value&&jQuery.isFunction(method=value.promise)?method.call(value).done(resolve).fail(reject):value&&jQuery.isFunction(method=value.then)?method.call(value,resolve,reject):resolve.call(void 0,value)}catch(value){reject.call(void 0,value)}}function completed(){document.removeEventListener("DOMContentLoaded",completed),window.removeEventListener("load",completed),jQuery.ready()}function Data(){this.expando=jQuery.expando+Data.uid++}function dataAttr(elem,key,data){var name;if(void 0===data&&1===elem.nodeType)if(name="data-"+key.replace(rmultiDash,"-$&").toLowerCase(),data=elem.getAttribute(name),"string"==typeof data){try{data="true"===data||"false"!==data&&("null"===data?null:+data+""===data?+data:rbrace.test(data)?JSON.parse(data):data)}catch(e){}dataUser.set(elem,key,data)}else data=void 0;return data}function adjustCSS(elem,prop,valueParts,tween){var adjusted,scale=1,maxIterations=20,currentValue=tween?function(){return tween.cur()}:function(){return jQuery.css(elem,prop,"")},initial=currentValue(),unit=valueParts&&valueParts[3]||(jQuery.cssNumber[prop]?"":"px"),initialInUnit=(jQuery.cssNumber[prop]||"px"!==unit&&+initial)&&rcssNum.exec(jQuery.css(elem,prop));if(initialInUnit&&initialInUnit[3]!==unit){unit=unit||initialInUnit[3],valueParts=valueParts||[],initialInUnit=+initial||1;do scale=scale||".5",initialInUnit/=scale,jQuery.style(elem,prop,initialInUnit+unit);while(scale!==(scale=currentValue()/initial)&&1!==scale&&--maxIterations)}return valueParts&&(initialInUnit=+initialInUnit||+initial||0,adjusted=valueParts[1]?initialInUnit+(valueParts[1]+1)*valueParts[2]:+valueParts[2],tween&&(tween.unit=unit,tween.start=initialInUnit,tween.end=adjusted)),adjusted}function getDefaultDisplay(elem){var temp,doc=elem.ownerDocument,nodeName=elem.nodeName,display=defaultDisplayMap[nodeName];return display?display:(temp=doc.body.appendChild(doc.createElement(nodeName)),display=jQuery.css(temp,"display"),temp.parentNode.removeChild(temp),"none"===display&&(display="block"),defaultDisplayMap[nodeName]=display,display)}function showHide(elements,show){for(var display,elem,values=[],index=0,length=elements.length;index<length;index++)elem=elements[index],elem.style&&(display=elem.style.display,show?("none"===display&&(values[index]=dataPriv.get(elem,"display")||null,values[index]||(elem.style.display="")),""===elem.style.display&&isHiddenWithinTree(elem)&&(values[index]=getDefaultDisplay(elem))):"none"!==display&&(values[index]="none",dataPriv.set(elem,"display",display)));for(index=0;index<length;index++)null!=values[index]&&(elements[index].style.display=values[index]);return elements}function getAll(context,tag){var ret="undefined"!=typeof context.getElementsByTagName?context.getElementsByTagName(tag||"*"):"undefined"!=typeof context.querySelectorAll?context.querySelectorAll(tag||"*"):[];return void 0===tag||tag&&jQuery.nodeName(context,tag)?jQuery.merge([context],ret):ret}function setGlobalEval(elems,refElements){for(var i=0,l=elems.length;i<l;i++)dataPriv.set(elems[i],"globalEval",!refElements||dataPriv.get(refElements[i],"globalEval"))}function buildFragment(elems,context,scripts,selection,ignored){for(var elem,tmp,tag,wrap,contains,j,fragment=context.createDocumentFragment(),nodes=[],i=0,l=elems.length;i<l;i++)if(elem=elems[i],elem||0===elem)if("object"===jQuery.type(elem))jQuery.merge(nodes,elem.nodeType?[elem]:elem);else if(rhtml.test(elem)){for(tmp=tmp||fragment.appendChild(context.createElement("div")),tag=(rtagName.exec(elem)||["",""])[1].toLowerCase(),wrap=wrapMap[tag]||wrapMap._default,tmp.innerHTML=wrap[1]+jQuery.htmlPrefilter(elem)+wrap[2],j=wrap[0];j--;)tmp=tmp.lastChild;jQuery.merge(nodes,tmp.childNodes),tmp=fragment.firstChild,tmp.textContent=""}else nodes.push(context.createTextNode(elem));for(fragment.textContent="",i=0;elem=nodes[i++];)if(selection&&jQuery.inArray(elem,selection)>-1)ignored&&ignored.push(elem);else if(contains=jQuery.contains(elem.ownerDocument,elem),tmp=getAll(fragment.appendChild(elem),"script"),contains&&setGlobalEval(tmp),scripts)for(j=0;elem=tmp[j++];)rscriptType.test(elem.type||"")&&scripts.push(elem);return fragment}function returnTrue(){return!0}function returnFalse(){return!1}function safeActiveElement(){try{return document.activeElement}catch(err){}}function on(elem,types,selector,data,fn,one){var origFn,type;if("object"==typeof types){"string"!=typeof selector&&(data=data||selector,selector=void 0);for(type in types)on(elem,type,selector,data,types[type],one);return elem}if(null==data&&null==fn?(fn=selector,data=selector=void 0):null==fn&&("string"==typeof selector?(fn=data,data=void 0):(fn=data,data=selector,selector=void 0)),fn===!1)fn=returnFalse;else if(!fn)return elem;return 1===one&&(origFn=fn,fn=function(event){return jQuery().off(event),origFn.apply(this,arguments)},fn.guid=origFn.guid||(origFn.guid=jQuery.guid++)),elem.each(function(){jQuery.event.add(this,types,fn,data,selector)})}function manipulationTarget(elem,content){return jQuery.nodeName(elem,"table")&&jQuery.nodeName(11!==content.nodeType?content:content.firstChild,"tr")?elem.getElementsByTagName("tbody")[0]||elem:elem}function disableScript(elem){return elem.type=(null!==elem.getAttribute("type"))+"/"+elem.type,elem}function restoreScript(elem){var match=rscriptTypeMasked.exec(elem.type);return match?elem.type=match[1]:elem.removeAttribute("type"),elem}function cloneCopyEvent(src,dest){var i,l,type,pdataOld,pdataCur,udataOld,udataCur,events;if(1===dest.nodeType){if(dataPriv.hasData(src)&&(pdataOld=dataPriv.access(src),pdataCur=dataPriv.set(dest,pdataOld),events=pdataOld.events)){delete pdataCur.handle,pdataCur.events={};for(type in events)for(i=0,l=events[type].length;i<l;i++)jQuery.event.add(dest,type,events[type][i])}dataUser.hasData(src)&&(udataOld=dataUser.access(src),udataCur=jQuery.extend({},udataOld),dataUser.set(dest,udataCur))}}function fixInput(src,dest){var nodeName=dest.nodeName.toLowerCase();"input"===nodeName&&rcheckableType.test(src.type)?dest.checked=src.checked:"input"!==nodeName&&"textarea"!==nodeName||(dest.defaultValue=src.defaultValue)}function domManip(collection,args,callback,ignored){args=concat.apply([],args);var fragment,first,scripts,hasScripts,node,doc,i=0,l=collection.length,iNoClone=l-1,value=args[0],isFunction=jQuery.isFunction(value);if(isFunction||l>1&&"string"==typeof value&&!support.checkClone&&rchecked.test(value))return collection.each(function(index){var self=collection.eq(index);isFunction&&(args[0]=value.call(this,index,self.html())),domManip(self,args,callback,ignored)});if(l&&(fragment=buildFragment(args,collection[0].ownerDocument,!1,collection,ignored),first=fragment.firstChild,1===fragment.childNodes.length&&(fragment=first),first||ignored)){for(scripts=jQuery.map(getAll(fragment,"script"),disableScript),hasScripts=scripts.length;i<l;i++)node=fragment,i!==iNoClone&&(node=jQuery.clone(node,!0,!0),hasScripts&&jQuery.merge(scripts,getAll(node,"script"))),callback.call(collection[i],node,i);if(hasScripts)for(doc=scripts[scripts.length-1].ownerDocument,jQuery.map(scripts,restoreScript),i=0;i<hasScripts;i++)node=scripts[i],rscriptType.test(node.type||"")&&!dataPriv.access(node,"globalEval")&&jQuery.contains(doc,node)&&(node.src?jQuery._evalUrl&&jQuery._evalUrl(node.src):DOMEval(node.textContent.replace(rcleanScript,""),doc))}return collection}function remove(elem,selector,keepData){for(var node,nodes=selector?jQuery.filter(selector,elem):elem,i=0;null!=(node=nodes[i]);i++)keepData||1!==node.nodeType||jQuery.cleanData(getAll(node)),node.parentNode&&(keepData&&jQuery.contains(node.ownerDocument,node)&&setGlobalEval(getAll(node,"script")),node.parentNode.removeChild(node));return elem}function curCSS(elem,name,computed){var width,minWidth,maxWidth,ret,style=elem.style;return computed=computed||getStyles(elem),computed&&(ret=computed.getPropertyValue(name)||computed[name],""!==ret||jQuery.contains(elem.ownerDocument,elem)||(ret=jQuery.style(elem,name)),!support.pixelMarginRight()&&rnumnonpx.test(ret)&&rmargin.test(name)&&(width=style.width,minWidth=style.minWidth,maxWidth=style.maxWidth,style.minWidth=style.maxWidth=style.width=ret,ret=computed.width,style.width=width,style.minWidth=minWidth,style.maxWidth=maxWidth)),void 0!==ret?ret+"":ret}function addGetHookIf(conditionFn,hookFn){return{get:function(){return conditionFn()?void delete this.get:(this.get=hookFn).apply(this,arguments)}}}function vendorPropName(name){if(name in emptyStyle)return name;for(var capName=name[0].toUpperCase()+name.slice(1),i=cssPrefixes.length;i--;)if(name=cssPrefixes[i]+capName,name in emptyStyle)return name}function setPositiveNumber(elem,value,subtract){var matches=rcssNum.exec(value);return matches?Math.max(0,matches[2]-(subtract||0))+(matches[3]||"px"):value}function augmentWidthOrHeight(elem,name,extra,isBorderBox,styles){for(var i=extra===(isBorderBox?"border":"content")?4:"width"===name?1:0,val=0;i<4;i+=2)"margin"===extra&&(val+=jQuery.css(elem,extra+cssExpand[i],!0,styles)),isBorderBox?("content"===extra&&(val-=jQuery.css(elem,"padding"+cssExpand[i],!0,styles)),"margin"!==extra&&(val-=jQuery.css(elem,"border"+cssExpand[i]+"Width",!0,styles))):(val+=jQuery.css(elem,"padding"+cssExpand[i],!0,styles),"padding"!==extra&&(val+=jQuery.css(elem,"border"+cssExpand[i]+"Width",!0,styles)));return val}function getWidthOrHeight(elem,name,extra){var val,valueIsBorderBox=!0,styles=getStyles(elem),isBorderBox="border-box"===jQuery.css(elem,"boxSizing",!1,styles);if(elem.getClientRects().length&&(val=elem.getBoundingClientRect()[name]),val<=0||null==val){if(val=curCSS(elem,name,styles),(val<0||null==val)&&(val=elem.style[name]),rnumnonpx.test(val))return val;valueIsBorderBox=isBorderBox&&(support.boxSizingReliable()||val===elem.style[name]),val=parseFloat(val)||0}return val+augmentWidthOrHeight(elem,name,extra||(isBorderBox?"border":"content"),valueIsBorderBox,styles)+"px"}function Tween(elem,options,prop,end,easing){return new Tween.prototype.init(elem,options,prop,end,easing)}function raf(){timerId&&(window.requestAnimationFrame(raf),jQuery.fx.tick())}function createFxNow(){return window.setTimeout(function(){fxNow=void 0}),fxNow=jQuery.now()}function genFx(type,includeWidth){var which,i=0,attrs={height:type};for(includeWidth=includeWidth?1:0;i<4;i+=2-includeWidth)which=cssExpand[i],attrs["margin"+which]=attrs["padding"+which]=type;return includeWidth&&(attrs.opacity=attrs.width=type),attrs}function createTween(value,prop,animation){for(var tween,collection=(Animation.tweeners[prop]||[]).concat(Animation.tweeners["*"]),index=0,length=collection.length;index<length;index++)if(tween=collection[index].call(animation,prop,value))return tween}function defaultPrefilter(elem,props,opts){var prop,value,toggle,hooks,oldfire,propTween,restoreDisplay,display,isBox="width"in props||"height"in props,anim=this,orig={},style=elem.style,hidden=elem.nodeType&&isHiddenWithinTree(elem),dataShow=dataPriv.get(elem,"fxshow");opts.queue||(hooks=jQuery._queueHooks(elem,"fx"),null==hooks.unqueued&&(hooks.unqueued=0,oldfire=hooks.empty.fire,hooks.empty.fire=function(){hooks.unqueued||oldfire()}),hooks.unqueued++,anim.always(function(){anim.always(function(){hooks.unqueued--,jQuery.queue(elem,"fx").length||hooks.empty.fire()})}));for(prop in props)if(value=props[prop],rfxtypes.test(value)){if(delete props[prop],toggle=toggle||"toggle"===value,value===(hidden?"hide":"show")){if("show"!==value||!dataShow||void 0===dataShow[prop])continue;hidden=!0}orig[prop]=dataShow&&dataShow[prop]||jQuery.style(elem,prop)}if(propTween=!jQuery.isEmptyObject(props),propTween||!jQuery.isEmptyObject(orig)){isBox&&1===elem.nodeType&&(opts.overflow=[style.overflow,style.overflowX,style.overflowY],restoreDisplay=dataShow&&dataShow.display,null==restoreDisplay&&(restoreDisplay=dataPriv.get(elem,"display")),display=jQuery.css(elem,"display"),"none"===display&&(restoreDisplay?display=restoreDisplay:(showHide([elem],!0),restoreDisplay=elem.style.display||restoreDisplay,display=jQuery.css(elem,"display"),showHide([elem]))),("inline"===display||"inline-block"===display&&null!=restoreDisplay)&&"none"===jQuery.css(elem,"float")&&(propTween||(anim.done(function(){style.display=restoreDisplay}),null==restoreDisplay&&(display=style.display,restoreDisplay="none"===display?"":display)),style.display="inline-block")),opts.overflow&&(style.overflow="hidden",anim.always(function(){style.overflow=opts.overflow[0],style.overflowX=opts.overflow[1],style.overflowY=opts.overflow[2]})),propTween=!1;for(prop in orig)propTween||(dataShow?"hidden"in dataShow&&(hidden=dataShow.hidden):dataShow=dataPriv.access(elem,"fxshow",{display:restoreDisplay}),toggle&&(dataShow.hidden=!hidden),hidden&&showHide([elem],!0),anim.done(function(){hidden||showHide([elem]),dataPriv.remove(elem,"fxshow");for(prop in orig)jQuery.style(elem,prop,orig[prop])})),propTween=createTween(hidden?dataShow[prop]:0,prop,anim),prop in dataShow||(dataShow[prop]=propTween.start,hidden&&(propTween.end=propTween.start,propTween.start=0))}}function propFilter(props,specialEasing){var index,name,easing,value,hooks;for(index in props)if(name=jQuery.camelCase(index),easing=specialEasing[name],value=props[index],jQuery.isArray(value)&&(easing=value[1],value=props[index]=value[0]),index!==name&&(props[name]=value,delete props[index]),hooks=jQuery.cssHooks[name],hooks&&"expand"in hooks){value=hooks.expand(value),delete props[name];for(index in value)index in props||(props[index]=value[index],specialEasing[index]=easing)}else specialEasing[name]=easing}function Animation(elem,properties,options){var result,stopped,index=0,length=Animation.prefilters.length,deferred=jQuery.Deferred().always(function(){delete tick.elem}),tick=function(){if(stopped)return!1;for(var currentTime=fxNow||createFxNow(),remaining=Math.max(0,animation.startTime+animation.duration-currentTime),temp=remaining/animation.duration||0,percent=1-temp,index=0,length=animation.tweens.length;index<length;index++)animation.tweens[index].run(percent);return deferred.notifyWith(elem,[animation,percent,remaining]),percent<1&&length?remaining:(deferred.resolveWith(elem,[animation]),!1)},animation=deferred.promise({elem:elem,props:jQuery.extend({},properties),opts:jQuery.extend(!0,{specialEasing:{},easing:jQuery.easing._default},options),originalProperties:properties,originalOptions:options,startTime:fxNow||createFxNow(),duration:options.duration,tweens:[],createTween:function(prop,end){var tween=jQuery.Tween(elem,animation.opts,prop,end,animation.opts.specialEasing[prop]||animation.opts.easing);return animation.tweens.push(tween),tween},stop:function(gotoEnd){var index=0,length=gotoEnd?animation.tweens.length:0;if(stopped)return this;for(stopped=!0;index<length;index++)animation.tweens[index].run(1);return gotoEnd?(deferred.notifyWith(elem,[animation,1,0]),deferred.resolveWith(elem,[animation,gotoEnd])):deferred.rejectWith(elem,[animation,gotoEnd]),this}}),props=animation.props;for(propFilter(props,animation.opts.specialEasing);index<length;index++)if(result=Animation.prefilters[index].call(animation,elem,props,animation.opts))return jQuery.isFunction(result.stop)&&(jQuery._queueHooks(animation.elem,animation.opts.queue).stop=jQuery.proxy(result.stop,result)),result;return jQuery.map(props,createTween,animation),jQuery.isFunction(animation.opts.start)&&animation.opts.start.call(elem,animation),jQuery.fx.timer(jQuery.extend(tick,{elem:elem,anim:animation,queue:animation.opts.queue})),animation.progress(animation.opts.progress).done(animation.opts.done,animation.opts.complete).fail(animation.opts.fail).always(animation.opts.always)}function getClass(elem){return elem.getAttribute&&elem.getAttribute("class")||""}function buildParams(prefix,obj,traditional,add){var name;if(jQuery.isArray(obj))jQuery.each(obj,function(i,v){traditional||rbracket.test(prefix)?add(prefix,v):buildParams(prefix+"["+("object"==typeof v&&null!=v?i:"")+"]",v,traditional,add)});else if(traditional||"object"!==jQuery.type(obj))add(prefix,obj);else for(name in obj)buildParams(prefix+"["+name+"]",obj[name],traditional,add)}function addToPrefiltersOrTransports(structure){return function(dataTypeExpression,func){"string"!=typeof dataTypeExpression&&(func=dataTypeExpression,dataTypeExpression="*");var dataType,i=0,dataTypes=dataTypeExpression.toLowerCase().match(rnotwhite)||[];if(jQuery.isFunction(func))for(;dataType=dataTypes[i++];)"+"===dataType[0]?(dataType=dataType.slice(1)||"*",(structure[dataType]=structure[dataType]||[]).unshift(func)):(structure[dataType]=structure[dataType]||[]).push(func)}}function inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR){function inspect(dataType){var selected;return inspected[dataType]=!0,jQuery.each(structure[dataType]||[],function(_,prefilterOrFactory){var dataTypeOrTransport=prefilterOrFactory(options,originalOptions,jqXHR);return"string"!=typeof dataTypeOrTransport||seekingTransport||inspected[dataTypeOrTransport]?seekingTransport?!(selected=dataTypeOrTransport):void 0:(options.dataTypes.unshift(dataTypeOrTransport),inspect(dataTypeOrTransport),!1)}),selected}var inspected={},seekingTransport=structure===transports;return inspect(options.dataTypes[0])||!inspected["*"]&&inspect("*")}function ajaxExtend(target,src){var key,deep,flatOptions=jQuery.ajaxSettings.flatOptions||{};for(key in src)void 0!==src[key]&&((flatOptions[key]?target:deep||(deep={}))[key]=src[key]);return deep&&jQuery.extend(!0,target,deep),target}function ajaxHandleResponses(s,jqXHR,responses){for(var ct,type,finalDataType,firstDataType,contents=s.contents,dataTypes=s.dataTypes;"*"===dataTypes[0];)dataTypes.shift(),void 0===ct&&(ct=s.mimeType||jqXHR.getResponseHeader("Content-Type"));if(ct)for(type in contents)if(contents[type]&&contents[type].test(ct)){dataTypes.unshift(type);break}if(dataTypes[0]in responses)finalDataType=dataTypes[0];else{for(type in responses){if(!dataTypes[0]||s.converters[type+" "+dataTypes[0]]){finalDataType=type;break}firstDataType||(firstDataType=type)}finalDataType=finalDataType||firstDataType}if(finalDataType)return finalDataType!==dataTypes[0]&&dataTypes.unshift(finalDataType),responses[finalDataType]}function ajaxConvert(s,response,jqXHR,isSuccess){var conv2,current,conv,tmp,prev,converters={},dataTypes=s.dataTypes.slice();if(dataTypes[1])for(conv in s.converters)converters[conv.toLowerCase()]=s.converters[conv];for(current=dataTypes.shift();current;)if(s.responseFields[current]&&(jqXHR[s.responseFields[current]]=response),!prev&&isSuccess&&s.dataFilter&&(response=s.dataFilter(response,s.dataType)),prev=current,current=dataTypes.shift())if("*"===current)current=prev;else if("*"!==prev&&prev!==current){if(conv=converters[prev+" "+current]||converters["* "+current],!conv)for(conv2 in converters)if(tmp=conv2.split(" "),tmp[1]===current&&(conv=converters[prev+" "+tmp[0]]||converters["* "+tmp[0]])){conv===!0?conv=converters[conv2]:converters[conv2]!==!0&&(current=tmp[0],dataTypes.unshift(tmp[1]));break}if(conv!==!0)if(conv&&s.throws)response=conv(response);else try{response=conv(response)}catch(e){return{state:"parsererror",error:conv?e:"No conversion from "+prev+" to "+current}}}return{state:"success",data:response}}function getWindow(elem){return jQuery.isWindow(elem)?elem:9===elem.nodeType&&elem.defaultView}var arr=[],document=window.document,getProto=Object.getPrototypeOf,slice=arr.slice,concat=arr.concat,push=arr.push,indexOf=arr.indexOf,class2type={},toString=class2type.toString,hasOwn=class2type.hasOwnProperty,fnToString=hasOwn.toString,ObjectFunctionString=fnToString.call(Object),support={},version="3.1.0",jQuery=function(selector,context){return new jQuery.fn.init(selector,context)},rtrim=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,rmsPrefix=/^-ms-/,rdashAlpha=/-([a-z])/g,fcamelCase=function(all,letter){return letter.toUpperCase()};jQuery.fn=jQuery.prototype={jquery:version,constructor:jQuery,length:0,toArray:function(){return slice.call(this)},get:function(num){return null!=num?num<0?this[num+this.length]:this[num]:slice.call(this)},pushStack:function(elems){var ret=jQuery.merge(this.constructor(),elems);return ret.prevObject=this,ret},each:function(callback){return jQuery.each(this,callback)},map:function(callback){return this.pushStack(jQuery.map(this,function(elem,i){return callback.call(elem,i,elem)}))},slice:function(){return this.pushStack(slice.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(i){var len=this.length,j=+i+(i<0?len:0);return this.pushStack(j>=0&&j<len?[this[j]]:[])},end:function(){return this.prevObject||this.constructor()},push:push,sort:arr.sort,splice:arr.splice},jQuery.extend=jQuery.fn.extend=function(){var options,name,src,copy,copyIsArray,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=!1;for("boolean"==typeof target&&(deep=target,target=arguments[i]||{},i++),"object"==typeof target||jQuery.isFunction(target)||(target={}),i===length&&(target=this,i--);i<length;i++)if(null!=(options=arguments[i]))for(name in options)src=target[name],copy=options[name],target!==copy&&(deep&&copy&&(jQuery.isPlainObject(copy)||(copyIsArray=jQuery.isArray(copy)))?(copyIsArray?(copyIsArray=!1,clone=src&&jQuery.isArray(src)?src:[]):clone=src&&jQuery.isPlainObject(src)?src:{},target[name]=jQuery.extend(deep,clone,copy)):void 0!==copy&&(target[name]=copy));return target},jQuery.extend({expando:"jQuery"+(version+Math.random()).replace(/\D/g,""),isReady:!0,error:function(msg){throw new Error(msg)},noop:function(){},isFunction:function(obj){return"function"===jQuery.type(obj)},isArray:Array.isArray,isWindow:function(obj){return null!=obj&&obj===obj.window},isNumeric:function(obj){var type=jQuery.type(obj);return("number"===type||"string"===type)&&!isNaN(obj-parseFloat(obj))},isPlainObject:function(obj){var proto,Ctor;return!(!obj||"[object Object]"!==toString.call(obj))&&(!(proto=getProto(obj))||(Ctor=hasOwn.call(proto,"constructor")&&proto.constructor,"function"==typeof Ctor&&fnToString.call(Ctor)===ObjectFunctionString))},isEmptyObject:function(obj){var name;for(name in obj)return!1;return!0},type:function(obj){return null==obj?obj+"":"object"==typeof obj||"function"==typeof obj?class2type[toString.call(obj)]||"object":typeof obj},globalEval:function(code){DOMEval(code)},camelCase:function(string){return string.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase)},nodeName:function(elem,name){return elem.nodeName&&elem.nodeName.toLowerCase()===name.toLowerCase()},each:function(obj,callback){var length,i=0;if(isArrayLike(obj))for(length=obj.length;i<length&&callback.call(obj[i],i,obj[i])!==!1;i++);else for(i in obj)if(callback.call(obj[i],i,obj[i])===!1)break;return obj},trim:function(text){return null==text?"":(text+"").replace(rtrim,"")},makeArray:function(arr,results){var ret=results||[];return null!=arr&&(isArrayLike(Object(arr))?jQuery.merge(ret,"string"==typeof arr?[arr]:arr):push.call(ret,arr)),ret},inArray:function(elem,arr,i){return null==arr?-1:indexOf.call(arr,elem,i)},merge:function(first,second){for(var len=+second.length,j=0,i=first.length;j<len;j++)first[i++]=second[j];return first.length=i,first},grep:function(elems,callback,invert){for(var callbackInverse,matches=[],i=0,length=elems.length,callbackExpect=!invert;i<length;i++)callbackInverse=!callback(elems[i],i),callbackInverse!==callbackExpect&&matches.push(elems[i]);return matches},map:function(elems,callback,arg){var length,value,i=0,ret=[];if(isArrayLike(elems))for(length=elems.length;i<length;i++)value=callback(elems[i],i,arg),null!=value&&ret.push(value);else for(i in elems)value=callback(elems[i],i,arg),null!=value&&ret.push(value);return concat.apply([],ret)},guid:1,proxy:function(fn,context){var tmp,args,proxy;if("string"==typeof context&&(tmp=fn[context],context=fn,fn=tmp),jQuery.isFunction(fn))return args=slice.call(arguments,2),proxy=function(){return fn.apply(context||this,args.concat(slice.call(arguments)))},proxy.guid=fn.guid=fn.guid||jQuery.guid++,proxy},now:Date.now,support:support}),"function"==typeof Symbol&&(jQuery.fn[Symbol.iterator]=arr[Symbol.iterator]),jQuery.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(i,name){class2type["[object "+name+"]"]=name.toLowerCase()});var Sizzle=function(window){function Sizzle(selector,context,results,seed){var m,i,elem,nid,match,groups,newSelector,newContext=context&&context.ownerDocument,nodeType=context?context.nodeType:9;if(results=results||[],"string"!=typeof selector||!selector||1!==nodeType&&9!==nodeType&&11!==nodeType)return results;if(!seed&&((context?context.ownerDocument||context:preferredDoc)!==document&&setDocument(context),context=context||document,documentIsHTML)){if(11!==nodeType&&(match=rquickExpr.exec(selector)))if(m=match[1]){if(9===nodeType){if(!(elem=context.getElementById(m)))return results;if(elem.id===m)return results.push(elem),results}else if(newContext&&(elem=newContext.getElementById(m))&&contains(context,elem)&&elem.id===m)return results.push(elem),results}else{if(match[2])return push.apply(results,context.getElementsByTagName(selector)),results;if((m=match[3])&&support.getElementsByClassName&&context.getElementsByClassName)return push.apply(results,context.getElementsByClassName(m)),results}if(support.qsa&&!compilerCache[selector+" "]&&(!rbuggyQSA||!rbuggyQSA.test(selector))){if(1!==nodeType)newContext=context,newSelector=selector;else if("object"!==context.nodeName.toLowerCase()){for((nid=context.getAttribute("id"))?nid=nid.replace(rcssescape,fcssescape):context.setAttribute("id",nid=expando),groups=tokenize(selector),i=groups.length;i--;)groups[i]="#"+nid+" "+toSelector(groups[i]);newSelector=groups.join(","),newContext=rsibling.test(selector)&&testContext(context.parentNode)||context}if(newSelector)try{return push.apply(results,newContext.querySelectorAll(newSelector)),results}catch(qsaError){}finally{nid===expando&&context.removeAttribute("id")}}}return select(selector.replace(rtrim,"$1"),context,results,seed)}function createCache(){function cache(key,value){return keys.push(key+" ")>Expr.cacheLength&&delete cache[keys.shift()],cache[key+" "]=value}var keys=[];return cache}function markFunction(fn){return fn[expando]=!0,fn}function assert(fn){var el=document.createElement("fieldset");try{return!!fn(el)}catch(e){return!1}finally{el.parentNode&&el.parentNode.removeChild(el),el=null}}function addHandle(attrs,handler){for(var arr=attrs.split("|"),i=arr.length;i--;)Expr.attrHandle[arr[i]]=handler}function siblingCheck(a,b){var cur=b&&a,diff=cur&&1===a.nodeType&&1===b.nodeType&&a.sourceIndex-b.sourceIndex;if(diff)return diff;if(cur)for(;cur=cur.nextSibling;)if(cur===b)return-1;return a?1:-1}function createInputPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return"input"===name&&elem.type===type}}function createButtonPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return("input"===name||"button"===name)&&elem.type===type}}function createDisabledPseudo(disabled){return function(elem){return"label"in elem&&elem.disabled===disabled||"form"in elem&&elem.disabled===disabled||"form"in elem&&elem.disabled===!1&&(elem.isDisabled===disabled||elem.isDisabled!==!disabled&&("label"in elem||!disabledAncestor(elem))!==disabled)}}function createPositionalPseudo(fn){return markFunction(function(argument){return argument=+argument,markFunction(function(seed,matches){for(var j,matchIndexes=fn([],seed.length,argument),i=matchIndexes.length;i--;)seed[j=matchIndexes[i]]&&(seed[j]=!(matches[j]=seed[j]))})})}function testContext(context){return context&&"undefined"!=typeof context.getElementsByTagName&&context}function setFilters(){}function toSelector(tokens){for(var i=0,len=tokens.length,selector="";i<len;i++)selector+=tokens[i].value;return selector}function addCombinator(matcher,combinator,base){var dir=combinator.dir,skip=combinator.next,key=skip||dir,checkNonElements=base&&"parentNode"===key,doneName=done++;return combinator.first?function(elem,context,xml){for(;elem=elem[dir];)if(1===elem.nodeType||checkNonElements)return matcher(elem,context,xml)}:function(elem,context,xml){var oldCache,uniqueCache,outerCache,newCache=[dirruns,doneName];if(xml){for(;elem=elem[dir];)if((1===elem.nodeType||checkNonElements)&&matcher(elem,context,xml))return!0}else for(;elem=elem[dir];)if(1===elem.nodeType||checkNonElements)if(outerCache=elem[expando]||(elem[expando]={}),uniqueCache=outerCache[elem.uniqueID]||(outerCache[elem.uniqueID]={}),skip&&skip===elem.nodeName.toLowerCase())elem=elem[dir]||elem;else{if((oldCache=uniqueCache[key])&&oldCache[0]===dirruns&&oldCache[1]===doneName)return newCache[2]=oldCache[2];if(uniqueCache[key]=newCache,newCache[2]=matcher(elem,context,xml))return!0}}}function elementMatcher(matchers){return matchers.length>1?function(elem,context,xml){for(var i=matchers.length;i--;)if(!matchers[i](elem,context,xml))return!1;return!0}:matchers[0]}function multipleContexts(selector,contexts,results){for(var i=0,len=contexts.length;i<len;i++)Sizzle(selector,contexts[i],results);return results}function condense(unmatched,map,filter,context,xml){for(var elem,newUnmatched=[],i=0,len=unmatched.length,mapped=null!=map;i<len;i++)(elem=unmatched[i])&&(filter&&!filter(elem,context,xml)||(newUnmatched.push(elem),mapped&&map.push(i)));return newUnmatched}function setMatcher(preFilter,selector,matcher,postFilter,postFinder,postSelector){return postFilter&&!postFilter[expando]&&(postFilter=setMatcher(postFilter)),postFinder&&!postFinder[expando]&&(postFinder=setMatcher(postFinder,postSelector)),markFunction(function(seed,results,context,xml){var temp,i,elem,preMap=[],postMap=[],preexisting=results.length,elems=seed||multipleContexts(selector||"*",context.nodeType?[context]:context,[]),matcherIn=!preFilter||!seed&&selector?elems:condense(elems,preMap,preFilter,context,xml),matcherOut=matcher?postFinder||(seed?preFilter:preexisting||postFilter)?[]:results:matcherIn;if(matcher&&matcher(matcherIn,matcherOut,context,xml),postFilter)for(temp=condense(matcherOut,postMap),postFilter(temp,[],context,xml),i=temp.length;i--;)(elem=temp[i])&&(matcherOut[postMap[i]]=!(matcherIn[postMap[i]]=elem));if(seed){if(postFinder||preFilter){if(postFinder){for(temp=[],i=matcherOut.length;i--;)(elem=matcherOut[i])&&temp.push(matcherIn[i]=elem);postFinder(null,matcherOut=[],temp,xml)}for(i=matcherOut.length;i--;)(elem=matcherOut[i])&&(temp=postFinder?indexOf(seed,elem):preMap[i])>-1&&(seed[temp]=!(results[temp]=elem));
}}else matcherOut=condense(matcherOut===results?matcherOut.splice(preexisting,matcherOut.length):matcherOut),postFinder?postFinder(null,results,matcherOut,xml):push.apply(results,matcherOut)})}function matcherFromTokens(tokens){for(var checkContext,matcher,j,len=tokens.length,leadingRelative=Expr.relative[tokens[0].type],implicitRelative=leadingRelative||Expr.relative[" "],i=leadingRelative?1:0,matchContext=addCombinator(function(elem){return elem===checkContext},implicitRelative,!0),matchAnyContext=addCombinator(function(elem){return indexOf(checkContext,elem)>-1},implicitRelative,!0),matchers=[function(elem,context,xml){var ret=!leadingRelative&&(xml||context!==outermostContext)||((checkContext=context).nodeType?matchContext(elem,context,xml):matchAnyContext(elem,context,xml));return checkContext=null,ret}];i<len;i++)if(matcher=Expr.relative[tokens[i].type])matchers=[addCombinator(elementMatcher(matchers),matcher)];else{if(matcher=Expr.filter[tokens[i].type].apply(null,tokens[i].matches),matcher[expando]){for(j=++i;j<len&&!Expr.relative[tokens[j].type];j++);return setMatcher(i>1&&elementMatcher(matchers),i>1&&toSelector(tokens.slice(0,i-1).concat({value:" "===tokens[i-2].type?"*":""})).replace(rtrim,"$1"),matcher,i<j&&matcherFromTokens(tokens.slice(i,j)),j<len&&matcherFromTokens(tokens=tokens.slice(j)),j<len&&toSelector(tokens))}matchers.push(matcher)}return elementMatcher(matchers)}function matcherFromGroupMatchers(elementMatchers,setMatchers){var bySet=setMatchers.length>0,byElement=elementMatchers.length>0,superMatcher=function(seed,context,xml,results,outermost){var elem,j,matcher,matchedCount=0,i="0",unmatched=seed&&[],setMatched=[],contextBackup=outermostContext,elems=seed||byElement&&Expr.find.TAG("*",outermost),dirrunsUnique=dirruns+=null==contextBackup?1:Math.random()||.1,len=elems.length;for(outermost&&(outermostContext=context===document||context||outermost);i!==len&&null!=(elem=elems[i]);i++){if(byElement&&elem){for(j=0,context||elem.ownerDocument===document||(setDocument(elem),xml=!documentIsHTML);matcher=elementMatchers[j++];)if(matcher(elem,context||document,xml)){results.push(elem);break}outermost&&(dirruns=dirrunsUnique)}bySet&&((elem=!matcher&&elem)&&matchedCount--,seed&&unmatched.push(elem))}if(matchedCount+=i,bySet&&i!==matchedCount){for(j=0;matcher=setMatchers[j++];)matcher(unmatched,setMatched,context,xml);if(seed){if(matchedCount>0)for(;i--;)unmatched[i]||setMatched[i]||(setMatched[i]=pop.call(results));setMatched=condense(setMatched)}push.apply(results,setMatched),outermost&&!seed&&setMatched.length>0&&matchedCount+setMatchers.length>1&&Sizzle.uniqueSort(results)}return outermost&&(dirruns=dirrunsUnique,outermostContext=contextBackup),unmatched};return bySet?markFunction(superMatcher):superMatcher}var i,support,Expr,getText,isXML,tokenize,compile,select,outermostContext,sortInput,hasDuplicate,setDocument,document,docElem,documentIsHTML,rbuggyQSA,rbuggyMatches,matches,contains,expando="sizzle"+1*new Date,preferredDoc=window.document,dirruns=0,done=0,classCache=createCache(),tokenCache=createCache(),compilerCache=createCache(),sortOrder=function(a,b){return a===b&&(hasDuplicate=!0),0},hasOwn={}.hasOwnProperty,arr=[],pop=arr.pop,push_native=arr.push,push=arr.push,slice=arr.slice,indexOf=function(list,elem){for(var i=0,len=list.length;i<len;i++)if(list[i]===elem)return i;return-1},booleans="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",whitespace="[\\x20\\t\\r\\n\\f]",identifier="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",attributes="\\["+whitespace+"*("+identifier+")(?:"+whitespace+"*([*^$|!~]?=)"+whitespace+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+identifier+"))|)"+whitespace+"*\\]",pseudos=":("+identifier+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+attributes+")*)|.*)\\)|)",rwhitespace=new RegExp(whitespace+"+","g"),rtrim=new RegExp("^"+whitespace+"+|((?:^|[^\\\\])(?:\\\\.)*)"+whitespace+"+$","g"),rcomma=new RegExp("^"+whitespace+"*,"+whitespace+"*"),rcombinators=new RegExp("^"+whitespace+"*([>+~]|"+whitespace+")"+whitespace+"*"),rattributeQuotes=new RegExp("="+whitespace+"*([^\\]'\"]*?)"+whitespace+"*\\]","g"),rpseudo=new RegExp(pseudos),ridentifier=new RegExp("^"+identifier+"$"),matchExpr={ID:new RegExp("^#("+identifier+")"),CLASS:new RegExp("^\\.("+identifier+")"),TAG:new RegExp("^("+identifier+"|[*])"),ATTR:new RegExp("^"+attributes),PSEUDO:new RegExp("^"+pseudos),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+whitespace+"*(even|odd|(([+-]|)(\\d*)n|)"+whitespace+"*(?:([+-]|)"+whitespace+"*(\\d+)|))"+whitespace+"*\\)|)","i"),bool:new RegExp("^(?:"+booleans+")$","i"),needsContext:new RegExp("^"+whitespace+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+whitespace+"*((?:-\\d)?\\d*)"+whitespace+"*\\)|)(?=[^-]|$)","i")},rinputs=/^(?:input|select|textarea|button)$/i,rheader=/^h\d$/i,rnative=/^[^{]+\{\s*\[native \w/,rquickExpr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,rsibling=/[+~]/,runescape=new RegExp("\\\\([\\da-f]{1,6}"+whitespace+"?|("+whitespace+")|.)","ig"),funescape=function(_,escaped,escapedWhitespace){var high="0x"+escaped-65536;return high!==high||escapedWhitespace?escaped:high<0?String.fromCharCode(high+65536):String.fromCharCode(high>>10|55296,1023&high|56320)},rcssescape=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g,fcssescape=function(ch,asCodePoint){return asCodePoint?"\0"===ch?"�":ch.slice(0,-1)+"\\"+ch.charCodeAt(ch.length-1).toString(16)+" ":"\\"+ch},unloadHandler=function(){setDocument()},disabledAncestor=addCombinator(function(elem){return elem.disabled===!0},{dir:"parentNode",next:"legend"});try{push.apply(arr=slice.call(preferredDoc.childNodes),preferredDoc.childNodes),arr[preferredDoc.childNodes.length].nodeType}catch(e){push={apply:arr.length?function(target,els){push_native.apply(target,slice.call(els))}:function(target,els){for(var j=target.length,i=0;target[j++]=els[i++];);target.length=j-1}}}support=Sizzle.support={},isXML=Sizzle.isXML=function(elem){var documentElement=elem&&(elem.ownerDocument||elem).documentElement;return!!documentElement&&"HTML"!==documentElement.nodeName},setDocument=Sizzle.setDocument=function(node){var hasCompare,subWindow,doc=node?node.ownerDocument||node:preferredDoc;return doc!==document&&9===doc.nodeType&&doc.documentElement?(document=doc,docElem=document.documentElement,documentIsHTML=!isXML(document),preferredDoc!==document&&(subWindow=document.defaultView)&&subWindow.top!==subWindow&&(subWindow.addEventListener?subWindow.addEventListener("unload",unloadHandler,!1):subWindow.attachEvent&&subWindow.attachEvent("onunload",unloadHandler)),support.attributes=assert(function(el){return el.className="i",!el.getAttribute("className")}),support.getElementsByTagName=assert(function(el){return el.appendChild(document.createComment("")),!el.getElementsByTagName("*").length}),support.getElementsByClassName=rnative.test(document.getElementsByClassName),support.getById=assert(function(el){return docElem.appendChild(el).id=expando,!document.getElementsByName||!document.getElementsByName(expando).length}),support.getById?(Expr.find.ID=function(id,context){if("undefined"!=typeof context.getElementById&&documentIsHTML){var m=context.getElementById(id);return m?[m]:[]}},Expr.filter.ID=function(id){var attrId=id.replace(runescape,funescape);return function(elem){return elem.getAttribute("id")===attrId}}):(delete Expr.find.ID,Expr.filter.ID=function(id){var attrId=id.replace(runescape,funescape);return function(elem){var node="undefined"!=typeof elem.getAttributeNode&&elem.getAttributeNode("id");return node&&node.value===attrId}}),Expr.find.TAG=support.getElementsByTagName?function(tag,context){return"undefined"!=typeof context.getElementsByTagName?context.getElementsByTagName(tag):support.qsa?context.querySelectorAll(tag):void 0}:function(tag,context){var elem,tmp=[],i=0,results=context.getElementsByTagName(tag);if("*"===tag){for(;elem=results[i++];)1===elem.nodeType&&tmp.push(elem);return tmp}return results},Expr.find.CLASS=support.getElementsByClassName&&function(className,context){if("undefined"!=typeof context.getElementsByClassName&&documentIsHTML)return context.getElementsByClassName(className)},rbuggyMatches=[],rbuggyQSA=[],(support.qsa=rnative.test(document.querySelectorAll))&&(assert(function(el){docElem.appendChild(el).innerHTML="<a id='"+expando+"'></a><select id='"+expando+"-\r\\' msallowcapture=''><option selected=''></option></select>",el.querySelectorAll("[msallowcapture^='']").length&&rbuggyQSA.push("[*^$]="+whitespace+"*(?:''|\"\")"),el.querySelectorAll("[selected]").length||rbuggyQSA.push("\\["+whitespace+"*(?:value|"+booleans+")"),el.querySelectorAll("[id~="+expando+"-]").length||rbuggyQSA.push("~="),el.querySelectorAll(":checked").length||rbuggyQSA.push(":checked"),el.querySelectorAll("a#"+expando+"+*").length||rbuggyQSA.push(".#.+[+~]")}),assert(function(el){el.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var input=document.createElement("input");input.setAttribute("type","hidden"),el.appendChild(input).setAttribute("name","D"),el.querySelectorAll("[name=d]").length&&rbuggyQSA.push("name"+whitespace+"*[*^$|!~]?="),2!==el.querySelectorAll(":enabled").length&&rbuggyQSA.push(":enabled",":disabled"),docElem.appendChild(el).disabled=!0,2!==el.querySelectorAll(":disabled").length&&rbuggyQSA.push(":enabled",":disabled"),el.querySelectorAll("*,:x"),rbuggyQSA.push(",.*:")})),(support.matchesSelector=rnative.test(matches=docElem.matches||docElem.webkitMatchesSelector||docElem.mozMatchesSelector||docElem.oMatchesSelector||docElem.msMatchesSelector))&&assert(function(el){support.disconnectedMatch=matches.call(el,"*"),matches.call(el,"[s!='']:x"),rbuggyMatches.push("!=",pseudos)}),rbuggyQSA=rbuggyQSA.length&&new RegExp(rbuggyQSA.join("|")),rbuggyMatches=rbuggyMatches.length&&new RegExp(rbuggyMatches.join("|")),hasCompare=rnative.test(docElem.compareDocumentPosition),contains=hasCompare||rnative.test(docElem.contains)?function(a,b){var adown=9===a.nodeType?a.documentElement:a,bup=b&&b.parentNode;return a===bup||!(!bup||1!==bup.nodeType||!(adown.contains?adown.contains(bup):a.compareDocumentPosition&&16&a.compareDocumentPosition(bup)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},sortOrder=hasCompare?function(a,b){if(a===b)return hasDuplicate=!0,0;var compare=!a.compareDocumentPosition-!b.compareDocumentPosition;return compare?compare:(compare=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&compare||!support.sortDetached&&b.compareDocumentPosition(a)===compare?a===document||a.ownerDocument===preferredDoc&&contains(preferredDoc,a)?-1:b===document||b.ownerDocument===preferredDoc&&contains(preferredDoc,b)?1:sortInput?indexOf(sortInput,a)-indexOf(sortInput,b):0:4&compare?-1:1)}:function(a,b){if(a===b)return hasDuplicate=!0,0;var cur,i=0,aup=a.parentNode,bup=b.parentNode,ap=[a],bp=[b];if(!aup||!bup)return a===document?-1:b===document?1:aup?-1:bup?1:sortInput?indexOf(sortInput,a)-indexOf(sortInput,b):0;if(aup===bup)return siblingCheck(a,b);for(cur=a;cur=cur.parentNode;)ap.unshift(cur);for(cur=b;cur=cur.parentNode;)bp.unshift(cur);for(;ap[i]===bp[i];)i++;return i?siblingCheck(ap[i],bp[i]):ap[i]===preferredDoc?-1:bp[i]===preferredDoc?1:0},document):document},Sizzle.matches=function(expr,elements){return Sizzle(expr,null,null,elements)},Sizzle.matchesSelector=function(elem,expr){if((elem.ownerDocument||elem)!==document&&setDocument(elem),expr=expr.replace(rattributeQuotes,"='$1']"),support.matchesSelector&&documentIsHTML&&!compilerCache[expr+" "]&&(!rbuggyMatches||!rbuggyMatches.test(expr))&&(!rbuggyQSA||!rbuggyQSA.test(expr)))try{var ret=matches.call(elem,expr);if(ret||support.disconnectedMatch||elem.document&&11!==elem.document.nodeType)return ret}catch(e){}return Sizzle(expr,document,null,[elem]).length>0},Sizzle.contains=function(context,elem){return(context.ownerDocument||context)!==document&&setDocument(context),contains(context,elem)},Sizzle.attr=function(elem,name){(elem.ownerDocument||elem)!==document&&setDocument(elem);var fn=Expr.attrHandle[name.toLowerCase()],val=fn&&hasOwn.call(Expr.attrHandle,name.toLowerCase())?fn(elem,name,!documentIsHTML):void 0;return void 0!==val?val:support.attributes||!documentIsHTML?elem.getAttribute(name):(val=elem.getAttributeNode(name))&&val.specified?val.value:null},Sizzle.escape=function(sel){return(sel+"").replace(rcssescape,fcssescape)},Sizzle.error=function(msg){throw new Error("Syntax error, unrecognized expression: "+msg)},Sizzle.uniqueSort=function(results){var elem,duplicates=[],j=0,i=0;if(hasDuplicate=!support.detectDuplicates,sortInput=!support.sortStable&&results.slice(0),results.sort(sortOrder),hasDuplicate){for(;elem=results[i++];)elem===results[i]&&(j=duplicates.push(i));for(;j--;)results.splice(duplicates[j],1)}return sortInput=null,results},getText=Sizzle.getText=function(elem){var node,ret="",i=0,nodeType=elem.nodeType;if(nodeType){if(1===nodeType||9===nodeType||11===nodeType){if("string"==typeof elem.textContent)return elem.textContent;for(elem=elem.firstChild;elem;elem=elem.nextSibling)ret+=getText(elem)}else if(3===nodeType||4===nodeType)return elem.nodeValue}else for(;node=elem[i++];)ret+=getText(node);return ret},Expr=Sizzle.selectors={cacheLength:50,createPseudo:markFunction,match:matchExpr,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(match){return match[1]=match[1].replace(runescape,funescape),match[3]=(match[3]||match[4]||match[5]||"").replace(runescape,funescape),"~="===match[2]&&(match[3]=" "+match[3]+" "),match.slice(0,4)},CHILD:function(match){return match[1]=match[1].toLowerCase(),"nth"===match[1].slice(0,3)?(match[3]||Sizzle.error(match[0]),match[4]=+(match[4]?match[5]+(match[6]||1):2*("even"===match[3]||"odd"===match[3])),match[5]=+(match[7]+match[8]||"odd"===match[3])):match[3]&&Sizzle.error(match[0]),match},PSEUDO:function(match){var excess,unquoted=!match[6]&&match[2];return matchExpr.CHILD.test(match[0])?null:(match[3]?match[2]=match[4]||match[5]||"":unquoted&&rpseudo.test(unquoted)&&(excess=tokenize(unquoted,!0))&&(excess=unquoted.indexOf(")",unquoted.length-excess)-unquoted.length)&&(match[0]=match[0].slice(0,excess),match[2]=unquoted.slice(0,excess)),match.slice(0,3))}},filter:{TAG:function(nodeNameSelector){var nodeName=nodeNameSelector.replace(runescape,funescape).toLowerCase();return"*"===nodeNameSelector?function(){return!0}:function(elem){return elem.nodeName&&elem.nodeName.toLowerCase()===nodeName}},CLASS:function(className){var pattern=classCache[className+" "];return pattern||(pattern=new RegExp("(^|"+whitespace+")"+className+"("+whitespace+"|$)"))&&classCache(className,function(elem){return pattern.test("string"==typeof elem.className&&elem.className||"undefined"!=typeof elem.getAttribute&&elem.getAttribute("class")||"")})},ATTR:function(name,operator,check){return function(elem){var result=Sizzle.attr(elem,name);return null==result?"!="===operator:!operator||(result+="","="===operator?result===check:"!="===operator?result!==check:"^="===operator?check&&0===result.indexOf(check):"*="===operator?check&&result.indexOf(check)>-1:"$="===operator?check&&result.slice(-check.length)===check:"~="===operator?(" "+result.replace(rwhitespace," ")+" ").indexOf(check)>-1:"|="===operator&&(result===check||result.slice(0,check.length+1)===check+"-"))}},CHILD:function(type,what,argument,first,last){var simple="nth"!==type.slice(0,3),forward="last"!==type.slice(-4),ofType="of-type"===what;return 1===first&&0===last?function(elem){return!!elem.parentNode}:function(elem,context,xml){var cache,uniqueCache,outerCache,node,nodeIndex,start,dir=simple!==forward?"nextSibling":"previousSibling",parent=elem.parentNode,name=ofType&&elem.nodeName.toLowerCase(),useCache=!xml&&!ofType,diff=!1;if(parent){if(simple){for(;dir;){for(node=elem;node=node[dir];)if(ofType?node.nodeName.toLowerCase()===name:1===node.nodeType)return!1;start=dir="only"===type&&!start&&"nextSibling"}return!0}if(start=[forward?parent.firstChild:parent.lastChild],forward&&useCache){for(node=parent,outerCache=node[expando]||(node[expando]={}),uniqueCache=outerCache[node.uniqueID]||(outerCache[node.uniqueID]={}),cache=uniqueCache[type]||[],nodeIndex=cache[0]===dirruns&&cache[1],diff=nodeIndex&&cache[2],node=nodeIndex&&parent.childNodes[nodeIndex];node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop();)if(1===node.nodeType&&++diff&&node===elem){uniqueCache[type]=[dirruns,nodeIndex,diff];break}}else if(useCache&&(node=elem,outerCache=node[expando]||(node[expando]={}),uniqueCache=outerCache[node.uniqueID]||(outerCache[node.uniqueID]={}),cache=uniqueCache[type]||[],nodeIndex=cache[0]===dirruns&&cache[1],diff=nodeIndex),diff===!1)for(;(node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop())&&((ofType?node.nodeName.toLowerCase()!==name:1!==node.nodeType)||!++diff||(useCache&&(outerCache=node[expando]||(node[expando]={}),uniqueCache=outerCache[node.uniqueID]||(outerCache[node.uniqueID]={}),uniqueCache[type]=[dirruns,diff]),node!==elem)););return diff-=last,diff===first||diff%first===0&&diff/first>=0}}},PSEUDO:function(pseudo,argument){var args,fn=Expr.pseudos[pseudo]||Expr.setFilters[pseudo.toLowerCase()]||Sizzle.error("unsupported pseudo: "+pseudo);return fn[expando]?fn(argument):fn.length>1?(args=[pseudo,pseudo,"",argument],Expr.setFilters.hasOwnProperty(pseudo.toLowerCase())?markFunction(function(seed,matches){for(var idx,matched=fn(seed,argument),i=matched.length;i--;)idx=indexOf(seed,matched[i]),seed[idx]=!(matches[idx]=matched[i])}):function(elem){return fn(elem,0,args)}):fn}},pseudos:{not:markFunction(function(selector){var input=[],results=[],matcher=compile(selector.replace(rtrim,"$1"));return matcher[expando]?markFunction(function(seed,matches,context,xml){for(var elem,unmatched=matcher(seed,null,xml,[]),i=seed.length;i--;)(elem=unmatched[i])&&(seed[i]=!(matches[i]=elem))}):function(elem,context,xml){return input[0]=elem,matcher(input,null,xml,results),input[0]=null,!results.pop()}}),has:markFunction(function(selector){return function(elem){return Sizzle(selector,elem).length>0}}),contains:markFunction(function(text){return text=text.replace(runescape,funescape),function(elem){return(elem.textContent||elem.innerText||getText(elem)).indexOf(text)>-1}}),lang:markFunction(function(lang){return ridentifier.test(lang||"")||Sizzle.error("unsupported lang: "+lang),lang=lang.replace(runescape,funescape).toLowerCase(),function(elem){var elemLang;do if(elemLang=documentIsHTML?elem.lang:elem.getAttribute("xml:lang")||elem.getAttribute("lang"))return elemLang=elemLang.toLowerCase(),elemLang===lang||0===elemLang.indexOf(lang+"-");while((elem=elem.parentNode)&&1===elem.nodeType);return!1}}),target:function(elem){var hash=window.location&&window.location.hash;return hash&&hash.slice(1)===elem.id},root:function(elem){return elem===docElem},focus:function(elem){return elem===document.activeElement&&(!document.hasFocus||document.hasFocus())&&!!(elem.type||elem.href||~elem.tabIndex)},enabled:createDisabledPseudo(!1),disabled:createDisabledPseudo(!0),checked:function(elem){var nodeName=elem.nodeName.toLowerCase();return"input"===nodeName&&!!elem.checked||"option"===nodeName&&!!elem.selected},selected:function(elem){return elem.parentNode&&elem.parentNode.selectedIndex,elem.selected===!0},empty:function(elem){for(elem=elem.firstChild;elem;elem=elem.nextSibling)if(elem.nodeType<6)return!1;return!0},parent:function(elem){return!Expr.pseudos.empty(elem)},header:function(elem){return rheader.test(elem.nodeName)},input:function(elem){return rinputs.test(elem.nodeName)},button:function(elem){var name=elem.nodeName.toLowerCase();return"input"===name&&"button"===elem.type||"button"===name},text:function(elem){var attr;return"input"===elem.nodeName.toLowerCase()&&"text"===elem.type&&(null==(attr=elem.getAttribute("type"))||"text"===attr.toLowerCase())},first:createPositionalPseudo(function(){return[0]}),last:createPositionalPseudo(function(matchIndexes,length){return[length-1]}),eq:createPositionalPseudo(function(matchIndexes,length,argument){return[argument<0?argument+length:argument]}),even:createPositionalPseudo(function(matchIndexes,length){for(var i=0;i<length;i+=2)matchIndexes.push(i);return matchIndexes}),odd:createPositionalPseudo(function(matchIndexes,length){for(var i=1;i<length;i+=2)matchIndexes.push(i);return matchIndexes}),lt:createPositionalPseudo(function(matchIndexes,length,argument){for(var i=argument<0?argument+length:argument;--i>=0;)matchIndexes.push(i);return matchIndexes}),gt:createPositionalPseudo(function(matchIndexes,length,argument){for(var i=argument<0?argument+length:argument;++i<length;)matchIndexes.push(i);return matchIndexes})}},Expr.pseudos.nth=Expr.pseudos.eq;for(i in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})Expr.pseudos[i]=createInputPseudo(i);for(i in{submit:!0,reset:!0})Expr.pseudos[i]=createButtonPseudo(i);return setFilters.prototype=Expr.filters=Expr.pseudos,Expr.setFilters=new setFilters,tokenize=Sizzle.tokenize=function(selector,parseOnly){var matched,match,tokens,type,soFar,groups,preFilters,cached=tokenCache[selector+" "];if(cached)return parseOnly?0:cached.slice(0);for(soFar=selector,groups=[],preFilters=Expr.preFilter;soFar;){matched&&!(match=rcomma.exec(soFar))||(match&&(soFar=soFar.slice(match[0].length)||soFar),groups.push(tokens=[])),matched=!1,(match=rcombinators.exec(soFar))&&(matched=match.shift(),tokens.push({value:matched,type:match[0].replace(rtrim," ")}),soFar=soFar.slice(matched.length));for(type in Expr.filter)!(match=matchExpr[type].exec(soFar))||preFilters[type]&&!(match=preFilters[type](match))||(matched=match.shift(),tokens.push({value:matched,type:type,matches:match}),soFar=soFar.slice(matched.length));if(!matched)break}return parseOnly?soFar.length:soFar?Sizzle.error(selector):tokenCache(selector,groups).slice(0)},compile=Sizzle.compile=function(selector,match){var i,setMatchers=[],elementMatchers=[],cached=compilerCache[selector+" "];if(!cached){for(match||(match=tokenize(selector)),i=match.length;i--;)cached=matcherFromTokens(match[i]),cached[expando]?setMatchers.push(cached):elementMatchers.push(cached);cached=compilerCache(selector,matcherFromGroupMatchers(elementMatchers,setMatchers)),cached.selector=selector}return cached},select=Sizzle.select=function(selector,context,results,seed){var i,tokens,token,type,find,compiled="function"==typeof selector&&selector,match=!seed&&tokenize(selector=compiled.selector||selector);if(results=results||[],1===match.length){if(tokens=match[0]=match[0].slice(0),tokens.length>2&&"ID"===(token=tokens[0]).type&&support.getById&&9===context.nodeType&&documentIsHTML&&Expr.relative[tokens[1].type]){if(context=(Expr.find.ID(token.matches[0].replace(runescape,funescape),context)||[])[0],!context)return results;compiled&&(context=context.parentNode),selector=selector.slice(tokens.shift().value.length)}for(i=matchExpr.needsContext.test(selector)?0:tokens.length;i--&&(token=tokens[i],!Expr.relative[type=token.type]);)if((find=Expr.find[type])&&(seed=find(token.matches[0].replace(runescape,funescape),rsibling.test(tokens[0].type)&&testContext(context.parentNode)||context))){if(tokens.splice(i,1),selector=seed.length&&toSelector(tokens),!selector)return push.apply(results,seed),results;break}}return(compiled||compile(selector,match))(seed,context,!documentIsHTML,results,!context||rsibling.test(selector)&&testContext(context.parentNode)||context),results},support.sortStable=expando.split("").sort(sortOrder).join("")===expando,support.detectDuplicates=!!hasDuplicate,setDocument(),support.sortDetached=assert(function(el){return 1&el.compareDocumentPosition(document.createElement("fieldset"))}),assert(function(el){return el.innerHTML="<a href='#'></a>","#"===el.firstChild.getAttribute("href")})||addHandle("type|href|height|width",function(elem,name,isXML){if(!isXML)return elem.getAttribute(name,"type"===name.toLowerCase()?1:2)}),support.attributes&&assert(function(el){return el.innerHTML="<input/>",el.firstChild.setAttribute("value",""),""===el.firstChild.getAttribute("value")})||addHandle("value",function(elem,name,isXML){if(!isXML&&"input"===elem.nodeName.toLowerCase())return elem.defaultValue}),assert(function(el){return null==el.getAttribute("disabled")})||addHandle(booleans,function(elem,name,isXML){var val;if(!isXML)return elem[name]===!0?name.toLowerCase():(val=elem.getAttributeNode(name))&&val.specified?val.value:null}),Sizzle}(window);jQuery.find=Sizzle,jQuery.expr=Sizzle.selectors,jQuery.expr[":"]=jQuery.expr.pseudos,jQuery.uniqueSort=jQuery.unique=Sizzle.uniqueSort,jQuery.text=Sizzle.getText,jQuery.isXMLDoc=Sizzle.isXML,jQuery.contains=Sizzle.contains,jQuery.escapeSelector=Sizzle.escape;var dir=function(elem,dir,until){for(var matched=[],truncate=void 0!==until;(elem=elem[dir])&&9!==elem.nodeType;)if(1===elem.nodeType){if(truncate&&jQuery(elem).is(until))break;matched.push(elem)}return matched},siblings=function(n,elem){for(var matched=[];n;n=n.nextSibling)1===n.nodeType&&n!==elem&&matched.push(n);return matched},rneedsContext=jQuery.expr.match.needsContext,rsingleTag=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,risSimple=/^.[^:#\[\.,]*$/;jQuery.filter=function(expr,elems,not){var elem=elems[0];return not&&(expr=":not("+expr+")"),1===elems.length&&1===elem.nodeType?jQuery.find.matchesSelector(elem,expr)?[elem]:[]:jQuery.find.matches(expr,jQuery.grep(elems,function(elem){return 1===elem.nodeType}))},jQuery.fn.extend({find:function(selector){var i,ret,len=this.length,self=this;if("string"!=typeof selector)return this.pushStack(jQuery(selector).filter(function(){for(i=0;i<len;i++)if(jQuery.contains(self[i],this))return!0}));for(ret=this.pushStack([]),i=0;i<len;i++)jQuery.find(selector,self[i],ret);return len>1?jQuery.uniqueSort(ret):ret},filter:function(selector){return this.pushStack(winnow(this,selector||[],!1))},not:function(selector){return this.pushStack(winnow(this,selector||[],!0))},is:function(selector){return!!winnow(this,"string"==typeof selector&&rneedsContext.test(selector)?jQuery(selector):selector||[],!1).length}});var rootjQuery,rquickExpr=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,init=jQuery.fn.init=function(selector,context,root){var match,elem;if(!selector)return this;if(root=root||rootjQuery,"string"==typeof selector){if(match="<"===selector[0]&&">"===selector[selector.length-1]&&selector.length>=3?[null,selector,null]:rquickExpr.exec(selector),!match||!match[1]&&context)return!context||context.jquery?(context||root).find(selector):this.constructor(context).find(selector);if(match[1]){if(context=context instanceof jQuery?context[0]:context,jQuery.merge(this,jQuery.parseHTML(match[1],context&&context.nodeType?context.ownerDocument||context:document,!0)),rsingleTag.test(match[1])&&jQuery.isPlainObject(context))for(match in context)jQuery.isFunction(this[match])?this[match](context[match]):this.attr(match,context[match]);return this}return elem=document.getElementById(match[2]),elem&&(this[0]=elem,this.length=1),this}return selector.nodeType?(this[0]=selector,this.length=1,this):jQuery.isFunction(selector)?void 0!==root.ready?root.ready(selector):selector(jQuery):jQuery.makeArray(selector,this)};init.prototype=jQuery.fn,rootjQuery=jQuery(document);var rparentsprev=/^(?:parents|prev(?:Until|All))/,guaranteedUnique={children:!0,contents:!0,next:!0,prev:!0};jQuery.fn.extend({has:function(target){var targets=jQuery(target,this),l=targets.length;return this.filter(function(){for(var i=0;i<l;i++)if(jQuery.contains(this,targets[i]))return!0})},closest:function(selectors,context){var cur,i=0,l=this.length,matched=[],targets="string"!=typeof selectors&&jQuery(selectors);if(!rneedsContext.test(selectors))for(;i<l;i++)for(cur=this[i];cur&&cur!==context;cur=cur.parentNode)if(cur.nodeType<11&&(targets?targets.index(cur)>-1:1===cur.nodeType&&jQuery.find.matchesSelector(cur,selectors))){matched.push(cur);break}return this.pushStack(matched.length>1?jQuery.uniqueSort(matched):matched)},index:function(elem){return elem?"string"==typeof elem?indexOf.call(jQuery(elem),this[0]):indexOf.call(this,elem.jquery?elem[0]:elem):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(selector,context){return this.pushStack(jQuery.uniqueSort(jQuery.merge(this.get(),jQuery(selector,context))))},addBack:function(selector){return this.add(null==selector?this.prevObject:this.prevObject.filter(selector))}}),jQuery.each({parent:function(elem){var parent=elem.parentNode;return parent&&11!==parent.nodeType?parent:null},parents:function(elem){return dir(elem,"parentNode")},parentsUntil:function(elem,i,until){return dir(elem,"parentNode",until)},next:function(elem){return sibling(elem,"nextSibling")},prev:function(elem){return sibling(elem,"previousSibling")},nextAll:function(elem){return dir(elem,"nextSibling")},prevAll:function(elem){return dir(elem,"previousSibling")},nextUntil:function(elem,i,until){return dir(elem,"nextSibling",until)},prevUntil:function(elem,i,until){return dir(elem,"previousSibling",until)},siblings:function(elem){return siblings((elem.parentNode||{}).firstChild,elem)},children:function(elem){return siblings(elem.firstChild)},contents:function(elem){return elem.contentDocument||jQuery.merge([],elem.childNodes)}},function(name,fn){jQuery.fn[name]=function(until,selector){var matched=jQuery.map(this,fn,until);return"Until"!==name.slice(-5)&&(selector=until),selector&&"string"==typeof selector&&(matched=jQuery.filter(selector,matched)),this.length>1&&(guaranteedUnique[name]||jQuery.uniqueSort(matched),rparentsprev.test(name)&&matched.reverse()),this.pushStack(matched)}});var rnotwhite=/\S+/g;jQuery.Callbacks=function(options){options="string"==typeof options?createOptions(options):jQuery.extend({},options);var firing,memory,fired,locked,list=[],queue=[],firingIndex=-1,fire=function(){for(locked=options.once,fired=firing=!0;queue.length;firingIndex=-1)for(memory=queue.shift();++firingIndex<list.length;)list[firingIndex].apply(memory[0],memory[1])===!1&&options.stopOnFalse&&(firingIndex=list.length,memory=!1);options.memory||(memory=!1),firing=!1,locked&&(list=memory?[]:"")},self={add:function(){return list&&(memory&&!firing&&(firingIndex=list.length-1,queue.push(memory)),function add(args){jQuery.each(args,function(_,arg){jQuery.isFunction(arg)?options.unique&&self.has(arg)||list.push(arg):arg&&arg.length&&"string"!==jQuery.type(arg)&&add(arg)})}(arguments),memory&&!firing&&fire()),this},remove:function(){return jQuery.each(arguments,function(_,arg){for(var index;(index=jQuery.inArray(arg,list,index))>-1;)list.splice(index,1),index<=firingIndex&&firingIndex--}),this},has:function(fn){return fn?jQuery.inArray(fn,list)>-1:list.length>0},empty:function(){return list&&(list=[]),this},disable:function(){return locked=queue=[],list=memory="",this},disabled:function(){return!list},lock:function(){return locked=queue=[],memory||firing||(list=memory=""),this},locked:function(){return!!locked},fireWith:function(context,args){return locked||(args=args||[],args=[context,args.slice?args.slice():args],queue.push(args),firing||fire()),this},fire:function(){return self.fireWith(this,arguments),this},fired:function(){return!!fired}};return self},jQuery.extend({Deferred:function(func){var tuples=[["notify","progress",jQuery.Callbacks("memory"),jQuery.Callbacks("memory"),2],["resolve","done",jQuery.Callbacks("once memory"),jQuery.Callbacks("once memory"),0,"resolved"],["reject","fail",jQuery.Callbacks("once memory"),jQuery.Callbacks("once memory"),1,"rejected"]],state="pending",promise={state:function(){return state},always:function(){return deferred.done(arguments).fail(arguments),this},catch:function(fn){return promise.then(null,fn)},pipe:function(){var fns=arguments;return jQuery.Deferred(function(newDefer){
jQuery.each(tuples,function(i,tuple){var fn=jQuery.isFunction(fns[tuple[4]])&&fns[tuple[4]];deferred[tuple[1]](function(){var returned=fn&&fn.apply(this,arguments);returned&&jQuery.isFunction(returned.promise)?returned.promise().progress(newDefer.notify).done(newDefer.resolve).fail(newDefer.reject):newDefer[tuple[0]+"With"](this,fn?[returned]:arguments)})}),fns=null}).promise()},then:function(onFulfilled,onRejected,onProgress){function resolve(depth,deferred,handler,special){return function(){var that=this,args=arguments,mightThrow=function(){var returned,then;if(!(depth<maxDepth)){if(returned=handler.apply(that,args),returned===deferred.promise())throw new TypeError("Thenable self-resolution");then=returned&&("object"==typeof returned||"function"==typeof returned)&&returned.then,jQuery.isFunction(then)?special?then.call(returned,resolve(maxDepth,deferred,Identity,special),resolve(maxDepth,deferred,Thrower,special)):(maxDepth++,then.call(returned,resolve(maxDepth,deferred,Identity,special),resolve(maxDepth,deferred,Thrower,special),resolve(maxDepth,deferred,Identity,deferred.notifyWith))):(handler!==Identity&&(that=void 0,args=[returned]),(special||deferred.resolveWith)(that,args))}},process=special?mightThrow:function(){try{mightThrow()}catch(e){jQuery.Deferred.exceptionHook&&jQuery.Deferred.exceptionHook(e,process.stackTrace),depth+1>=maxDepth&&(handler!==Thrower&&(that=void 0,args=[e]),deferred.rejectWith(that,args))}};depth?process():(jQuery.Deferred.getStackHook&&(process.stackTrace=jQuery.Deferred.getStackHook()),window.setTimeout(process))}}var maxDepth=0;return jQuery.Deferred(function(newDefer){tuples[0][3].add(resolve(0,newDefer,jQuery.isFunction(onProgress)?onProgress:Identity,newDefer.notifyWith)),tuples[1][3].add(resolve(0,newDefer,jQuery.isFunction(onFulfilled)?onFulfilled:Identity)),tuples[2][3].add(resolve(0,newDefer,jQuery.isFunction(onRejected)?onRejected:Thrower))}).promise()},promise:function(obj){return null!=obj?jQuery.extend(obj,promise):promise}},deferred={};return jQuery.each(tuples,function(i,tuple){var list=tuple[2],stateString=tuple[5];promise[tuple[1]]=list.add,stateString&&list.add(function(){state=stateString},tuples[3-i][2].disable,tuples[0][2].lock),list.add(tuple[3].fire),deferred[tuple[0]]=function(){return deferred[tuple[0]+"With"](this===deferred?void 0:this,arguments),this},deferred[tuple[0]+"With"]=list.fireWith}),promise.promise(deferred),func&&func.call(deferred,deferred),deferred},when:function(singleValue){var remaining=arguments.length,i=remaining,resolveContexts=Array(i),resolveValues=slice.call(arguments),master=jQuery.Deferred(),updateFunc=function(i){return function(value){resolveContexts[i]=this,resolveValues[i]=arguments.length>1?slice.call(arguments):value,--remaining||master.resolveWith(resolveContexts,resolveValues)}};if(remaining<=1&&(adoptValue(singleValue,master.done(updateFunc(i)).resolve,master.reject),"pending"===master.state()||jQuery.isFunction(resolveValues[i]&&resolveValues[i].then)))return master.then();for(;i--;)adoptValue(resolveValues[i],updateFunc(i),master.reject);return master.promise()}});var rerrorNames=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;jQuery.Deferred.exceptionHook=function(error,stack){window.console&&window.console.warn&&error&&rerrorNames.test(error.name)&&window.console.warn("jQuery.Deferred exception: "+error.message,error.stack,stack)},jQuery.readyException=function(error){window.setTimeout(function(){throw error})};var readyList=jQuery.Deferred();jQuery.fn.ready=function(fn){return readyList.then(fn).catch(function(error){jQuery.readyException(error)}),this},jQuery.extend({isReady:!1,readyWait:1,holdReady:function(hold){hold?jQuery.readyWait++:jQuery.ready(!0)},ready:function(wait){(wait===!0?--jQuery.readyWait:jQuery.isReady)||(jQuery.isReady=!0,wait!==!0&&--jQuery.readyWait>0||readyList.resolveWith(document,[jQuery]))}}),jQuery.ready.then=readyList.then,"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?window.setTimeout(jQuery.ready):(document.addEventListener("DOMContentLoaded",completed),window.addEventListener("load",completed));var access=function(elems,fn,key,value,chainable,emptyGet,raw){var i=0,len=elems.length,bulk=null==key;if("object"===jQuery.type(key)){chainable=!0;for(i in key)access(elems,fn,i,key[i],!0,emptyGet,raw)}else if(void 0!==value&&(chainable=!0,jQuery.isFunction(value)||(raw=!0),bulk&&(raw?(fn.call(elems,value),fn=null):(bulk=fn,fn=function(elem,key,value){return bulk.call(jQuery(elem),value)})),fn))for(;i<len;i++)fn(elems[i],key,raw?value:value.call(elems[i],i,fn(elems[i],key)));return chainable?elems:bulk?fn.call(elems):len?fn(elems[0],key):emptyGet},acceptData=function(owner){return 1===owner.nodeType||9===owner.nodeType||!+owner.nodeType};Data.uid=1,Data.prototype={cache:function(owner){var value=owner[this.expando];return value||(value={},acceptData(owner)&&(owner.nodeType?owner[this.expando]=value:Object.defineProperty(owner,this.expando,{value:value,configurable:!0}))),value},set:function(owner,data,value){var prop,cache=this.cache(owner);if("string"==typeof data)cache[jQuery.camelCase(data)]=value;else for(prop in data)cache[jQuery.camelCase(prop)]=data[prop];return cache},get:function(owner,key){return void 0===key?this.cache(owner):owner[this.expando]&&owner[this.expando][jQuery.camelCase(key)]},access:function(owner,key,value){return void 0===key||key&&"string"==typeof key&&void 0===value?this.get(owner,key):(this.set(owner,key,value),void 0!==value?value:key)},remove:function(owner,key){var i,cache=owner[this.expando];if(void 0!==cache){if(void 0!==key){jQuery.isArray(key)?key=key.map(jQuery.camelCase):(key=jQuery.camelCase(key),key=key in cache?[key]:key.match(rnotwhite)||[]),i=key.length;for(;i--;)delete cache[key[i]]}(void 0===key||jQuery.isEmptyObject(cache))&&(owner.nodeType?owner[this.expando]=void 0:delete owner[this.expando])}},hasData:function(owner){var cache=owner[this.expando];return void 0!==cache&&!jQuery.isEmptyObject(cache)}};var dataPriv=new Data,dataUser=new Data,rbrace=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,rmultiDash=/[A-Z]/g;jQuery.extend({hasData:function(elem){return dataUser.hasData(elem)||dataPriv.hasData(elem)},data:function(elem,name,data){return dataUser.access(elem,name,data)},removeData:function(elem,name){dataUser.remove(elem,name)},_data:function(elem,name,data){return dataPriv.access(elem,name,data)},_removeData:function(elem,name){dataPriv.remove(elem,name)}}),jQuery.fn.extend({data:function(key,value){var i,name,data,elem=this[0],attrs=elem&&elem.attributes;if(void 0===key){if(this.length&&(data=dataUser.get(elem),1===elem.nodeType&&!dataPriv.get(elem,"hasDataAttrs"))){for(i=attrs.length;i--;)attrs[i]&&(name=attrs[i].name,0===name.indexOf("data-")&&(name=jQuery.camelCase(name.slice(5)),dataAttr(elem,name,data[name])));dataPriv.set(elem,"hasDataAttrs",!0)}return data}return"object"==typeof key?this.each(function(){dataUser.set(this,key)}):access(this,function(value){var data;if(elem&&void 0===value){if(data=dataUser.get(elem,key),void 0!==data)return data;if(data=dataAttr(elem,key),void 0!==data)return data}else this.each(function(){dataUser.set(this,key,value)})},null,value,arguments.length>1,null,!0)},removeData:function(key){return this.each(function(){dataUser.remove(this,key)})}}),jQuery.extend({queue:function(elem,type,data){var queue;if(elem)return type=(type||"fx")+"queue",queue=dataPriv.get(elem,type),data&&(!queue||jQuery.isArray(data)?queue=dataPriv.access(elem,type,jQuery.makeArray(data)):queue.push(data)),queue||[]},dequeue:function(elem,type){type=type||"fx";var queue=jQuery.queue(elem,type),startLength=queue.length,fn=queue.shift(),hooks=jQuery._queueHooks(elem,type),next=function(){jQuery.dequeue(elem,type)};"inprogress"===fn&&(fn=queue.shift(),startLength--),fn&&("fx"===type&&queue.unshift("inprogress"),delete hooks.stop,fn.call(elem,next,hooks)),!startLength&&hooks&&hooks.empty.fire()},_queueHooks:function(elem,type){var key=type+"queueHooks";return dataPriv.get(elem,key)||dataPriv.access(elem,key,{empty:jQuery.Callbacks("once memory").add(function(){dataPriv.remove(elem,[type+"queue",key])})})}}),jQuery.fn.extend({queue:function(type,data){var setter=2;return"string"!=typeof type&&(data=type,type="fx",setter--),arguments.length<setter?jQuery.queue(this[0],type):void 0===data?this:this.each(function(){var queue=jQuery.queue(this,type,data);jQuery._queueHooks(this,type),"fx"===type&&"inprogress"!==queue[0]&&jQuery.dequeue(this,type)})},dequeue:function(type){return this.each(function(){jQuery.dequeue(this,type)})},clearQueue:function(type){return this.queue(type||"fx",[])},promise:function(type,obj){var tmp,count=1,defer=jQuery.Deferred(),elements=this,i=this.length,resolve=function(){--count||defer.resolveWith(elements,[elements])};for("string"!=typeof type&&(obj=type,type=void 0),type=type||"fx";i--;)tmp=dataPriv.get(elements[i],type+"queueHooks"),tmp&&tmp.empty&&(count++,tmp.empty.add(resolve));return resolve(),defer.promise(obj)}});var pnum=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,rcssNum=new RegExp("^(?:([+-])=|)("+pnum+")([a-z%]*)$","i"),cssExpand=["Top","Right","Bottom","Left"],isHiddenWithinTree=function(elem,el){return elem=el||elem,"none"===elem.style.display||""===elem.style.display&&jQuery.contains(elem.ownerDocument,elem)&&"none"===jQuery.css(elem,"display")},swap=function(elem,options,callback,args){var ret,name,old={};for(name in options)old[name]=elem.style[name],elem.style[name]=options[name];ret=callback.apply(elem,args||[]);for(name in options)elem.style[name]=old[name];return ret},defaultDisplayMap={};jQuery.fn.extend({show:function(){return showHide(this,!0)},hide:function(){return showHide(this)},toggle:function(state){return"boolean"==typeof state?state?this.show():this.hide():this.each(function(){isHiddenWithinTree(this)?jQuery(this).show():jQuery(this).hide()})}});var rcheckableType=/^(?:checkbox|radio)$/i,rtagName=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,rscriptType=/^$|\/(?:java|ecma)script/i,wrapMap={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};wrapMap.optgroup=wrapMap.option,wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead,wrapMap.th=wrapMap.td;var rhtml=/<|&#?\w+;/;!function(){var fragment=document.createDocumentFragment(),div=fragment.appendChild(document.createElement("div")),input=document.createElement("input");input.setAttribute("type","radio"),input.setAttribute("checked","checked"),input.setAttribute("name","t"),div.appendChild(input),support.checkClone=div.cloneNode(!0).cloneNode(!0).lastChild.checked,div.innerHTML="<textarea>x</textarea>",support.noCloneChecked=!!div.cloneNode(!0).lastChild.defaultValue}();var documentElement=document.documentElement,rkeyEvent=/^key/,rmouseEvent=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,rtypenamespace=/^([^.]*)(?:\.(.+)|)/;jQuery.event={global:{},add:function(elem,types,handler,data,selector){var handleObjIn,eventHandle,tmp,events,t,handleObj,special,handlers,type,namespaces,origType,elemData=dataPriv.get(elem);if(elemData)for(handler.handler&&(handleObjIn=handler,handler=handleObjIn.handler,selector=handleObjIn.selector),selector&&jQuery.find.matchesSelector(documentElement,selector),handler.guid||(handler.guid=jQuery.guid++),(events=elemData.events)||(events=elemData.events={}),(eventHandle=elemData.handle)||(eventHandle=elemData.handle=function(e){return"undefined"!=typeof jQuery&&jQuery.event.triggered!==e.type?jQuery.event.dispatch.apply(elem,arguments):void 0}),types=(types||"").match(rnotwhite)||[""],t=types.length;t--;)tmp=rtypenamespace.exec(types[t])||[],type=origType=tmp[1],namespaces=(tmp[2]||"").split(".").sort(),type&&(special=jQuery.event.special[type]||{},type=(selector?special.delegateType:special.bindType)||type,special=jQuery.event.special[type]||{},handleObj=jQuery.extend({type:type,origType:origType,data:data,handler:handler,guid:handler.guid,selector:selector,needsContext:selector&&jQuery.expr.match.needsContext.test(selector),namespace:namespaces.join(".")},handleObjIn),(handlers=events[type])||(handlers=events[type]=[],handlers.delegateCount=0,special.setup&&special.setup.call(elem,data,namespaces,eventHandle)!==!1||elem.addEventListener&&elem.addEventListener(type,eventHandle)),special.add&&(special.add.call(elem,handleObj),handleObj.handler.guid||(handleObj.handler.guid=handler.guid)),selector?handlers.splice(handlers.delegateCount++,0,handleObj):handlers.push(handleObj),jQuery.event.global[type]=!0)},remove:function(elem,types,handler,selector,mappedTypes){var j,origCount,tmp,events,t,handleObj,special,handlers,type,namespaces,origType,elemData=dataPriv.hasData(elem)&&dataPriv.get(elem);if(elemData&&(events=elemData.events)){for(types=(types||"").match(rnotwhite)||[""],t=types.length;t--;)if(tmp=rtypenamespace.exec(types[t])||[],type=origType=tmp[1],namespaces=(tmp[2]||"").split(".").sort(),type){for(special=jQuery.event.special[type]||{},type=(selector?special.delegateType:special.bindType)||type,handlers=events[type]||[],tmp=tmp[2]&&new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"),origCount=j=handlers.length;j--;)handleObj=handlers[j],!mappedTypes&&origType!==handleObj.origType||handler&&handler.guid!==handleObj.guid||tmp&&!tmp.test(handleObj.namespace)||selector&&selector!==handleObj.selector&&("**"!==selector||!handleObj.selector)||(handlers.splice(j,1),handleObj.selector&&handlers.delegateCount--,special.remove&&special.remove.call(elem,handleObj));origCount&&!handlers.length&&(special.teardown&&special.teardown.call(elem,namespaces,elemData.handle)!==!1||jQuery.removeEvent(elem,type,elemData.handle),delete events[type])}else for(type in events)jQuery.event.remove(elem,type+types[t],handler,selector,!0);jQuery.isEmptyObject(events)&&dataPriv.remove(elem,"handle events")}},dispatch:function(nativeEvent){var i,j,ret,matched,handleObj,handlerQueue,event=jQuery.event.fix(nativeEvent),args=new Array(arguments.length),handlers=(dataPriv.get(this,"events")||{})[event.type]||[],special=jQuery.event.special[event.type]||{};for(args[0]=event,i=1;i<arguments.length;i++)args[i]=arguments[i];if(event.delegateTarget=this,!special.preDispatch||special.preDispatch.call(this,event)!==!1){for(handlerQueue=jQuery.event.handlers.call(this,event,handlers),i=0;(matched=handlerQueue[i++])&&!event.isPropagationStopped();)for(event.currentTarget=matched.elem,j=0;(handleObj=matched.handlers[j++])&&!event.isImmediatePropagationStopped();)event.rnamespace&&!event.rnamespace.test(handleObj.namespace)||(event.handleObj=handleObj,event.data=handleObj.data,ret=((jQuery.event.special[handleObj.origType]||{}).handle||handleObj.handler).apply(matched.elem,args),void 0!==ret&&(event.result=ret)===!1&&(event.preventDefault(),event.stopPropagation()));return special.postDispatch&&special.postDispatch.call(this,event),event.result}},handlers:function(event,handlers){var i,matches,sel,handleObj,handlerQueue=[],delegateCount=handlers.delegateCount,cur=event.target;if(delegateCount&&cur.nodeType&&("click"!==event.type||isNaN(event.button)||event.button<1))for(;cur!==this;cur=cur.parentNode||this)if(1===cur.nodeType&&(cur.disabled!==!0||"click"!==event.type)){for(matches=[],i=0;i<delegateCount;i++)handleObj=handlers[i],sel=handleObj.selector+" ",void 0===matches[sel]&&(matches[sel]=handleObj.needsContext?jQuery(sel,this).index(cur)>-1:jQuery.find(sel,this,null,[cur]).length),matches[sel]&&matches.push(handleObj);matches.length&&handlerQueue.push({elem:cur,handlers:matches})}return delegateCount<handlers.length&&handlerQueue.push({elem:this,handlers:handlers.slice(delegateCount)}),handlerQueue},addProp:function(name,hook){Object.defineProperty(jQuery.Event.prototype,name,{enumerable:!0,configurable:!0,get:jQuery.isFunction(hook)?function(){if(this.originalEvent)return hook(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[name]},set:function(value){Object.defineProperty(this,name,{enumerable:!0,configurable:!0,writable:!0,value:value})}})},fix:function(originalEvent){return originalEvent[jQuery.expando]?originalEvent:new jQuery.Event(originalEvent)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==safeActiveElement()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===safeActiveElement()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&jQuery.nodeName(this,"input"))return this.click(),!1},_default:function(event){return jQuery.nodeName(event.target,"a")}},beforeunload:{postDispatch:function(event){void 0!==event.result&&event.originalEvent&&(event.originalEvent.returnValue=event.result)}}}},jQuery.removeEvent=function(elem,type,handle){elem.removeEventListener&&elem.removeEventListener(type,handle)},jQuery.Event=function(src,props){return this instanceof jQuery.Event?(src&&src.type?(this.originalEvent=src,this.type=src.type,this.isDefaultPrevented=src.defaultPrevented||void 0===src.defaultPrevented&&src.returnValue===!1?returnTrue:returnFalse,this.target=src.target&&3===src.target.nodeType?src.target.parentNode:src.target,this.currentTarget=src.currentTarget,this.relatedTarget=src.relatedTarget):this.type=src,props&&jQuery.extend(this,props),this.timeStamp=src&&src.timeStamp||jQuery.now(),void(this[jQuery.expando]=!0)):new jQuery.Event(src,props)},jQuery.Event.prototype={constructor:jQuery.Event,isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=returnTrue,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=returnTrue,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=returnTrue,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},jQuery.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(event){var button=event.button;return null==event.which&&rkeyEvent.test(event.type)?null!=event.charCode?event.charCode:event.keyCode:!event.which&&void 0!==button&&rmouseEvent.test(event.type)?1&button?1:2&button?3:4&button?2:0:event.which}},jQuery.event.addProp),jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(orig,fix){jQuery.event.special[orig]={delegateType:fix,bindType:fix,handle:function(event){var ret,target=this,related=event.relatedTarget,handleObj=event.handleObj;return related&&(related===target||jQuery.contains(target,related))||(event.type=handleObj.origType,ret=handleObj.handler.apply(this,arguments),event.type=fix),ret}}}),jQuery.fn.extend({on:function(types,selector,data,fn){return on(this,types,selector,data,fn)},one:function(types,selector,data,fn){return on(this,types,selector,data,fn,1)},off:function(types,selector,fn){var handleObj,type;if(types&&types.preventDefault&&types.handleObj)return handleObj=types.handleObj,jQuery(types.delegateTarget).off(handleObj.namespace?handleObj.origType+"."+handleObj.namespace:handleObj.origType,handleObj.selector,handleObj.handler),this;if("object"==typeof types){for(type in types)this.off(type,selector,types[type]);return this}return selector!==!1&&"function"!=typeof selector||(fn=selector,selector=void 0),fn===!1&&(fn=returnFalse),this.each(function(){jQuery.event.remove(this,types,fn,selector)})}});var rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,rnoInnerhtml=/<script|<style|<link/i,rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,rscriptTypeMasked=/^true\/(.*)/,rcleanScript=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;jQuery.extend({htmlPrefilter:function(html){return html.replace(rxhtmlTag,"<$1></$2>")},clone:function(elem,dataAndEvents,deepDataAndEvents){var i,l,srcElements,destElements,clone=elem.cloneNode(!0),inPage=jQuery.contains(elem.ownerDocument,elem);if(!(support.noCloneChecked||1!==elem.nodeType&&11!==elem.nodeType||jQuery.isXMLDoc(elem)))for(destElements=getAll(clone),srcElements=getAll(elem),i=0,l=srcElements.length;i<l;i++)fixInput(srcElements[i],destElements[i]);if(dataAndEvents)if(deepDataAndEvents)for(srcElements=srcElements||getAll(elem),destElements=destElements||getAll(clone),i=0,l=srcElements.length;i<l;i++)cloneCopyEvent(srcElements[i],destElements[i]);else cloneCopyEvent(elem,clone);return destElements=getAll(clone,"script"),destElements.length>0&&setGlobalEval(destElements,!inPage&&getAll(elem,"script")),clone},cleanData:function(elems){for(var data,elem,type,special=jQuery.event.special,i=0;void 0!==(elem=elems[i]);i++)if(acceptData(elem)){if(data=elem[dataPriv.expando]){if(data.events)for(type in data.events)special[type]?jQuery.event.remove(elem,type):jQuery.removeEvent(elem,type,data.handle);elem[dataPriv.expando]=void 0}elem[dataUser.expando]&&(elem[dataUser.expando]=void 0)}}}),jQuery.fn.extend({detach:function(selector){return remove(this,selector,!0)},remove:function(selector){return remove(this,selector)},text:function(value){return access(this,function(value){return void 0===value?jQuery.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=value)})},null,value,arguments.length)},append:function(){return domManip(this,arguments,function(elem){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var target=manipulationTarget(this,elem);target.appendChild(elem)}})},prepend:function(){return domManip(this,arguments,function(elem){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var target=manipulationTarget(this,elem);target.insertBefore(elem,target.firstChild)}})},before:function(){return domManip(this,arguments,function(elem){this.parentNode&&this.parentNode.insertBefore(elem,this)})},after:function(){return domManip(this,arguments,function(elem){this.parentNode&&this.parentNode.insertBefore(elem,this.nextSibling)})},empty:function(){for(var elem,i=0;null!=(elem=this[i]);i++)1===elem.nodeType&&(jQuery.cleanData(getAll(elem,!1)),elem.textContent="");return this},clone:function(dataAndEvents,deepDataAndEvents){return dataAndEvents=null!=dataAndEvents&&dataAndEvents,deepDataAndEvents=null==deepDataAndEvents?dataAndEvents:deepDataAndEvents,this.map(function(){return jQuery.clone(this,dataAndEvents,deepDataAndEvents)})},html:function(value){return access(this,function(value){var elem=this[0]||{},i=0,l=this.length;if(void 0===value&&1===elem.nodeType)return elem.innerHTML;if("string"==typeof value&&!rnoInnerhtml.test(value)&&!wrapMap[(rtagName.exec(value)||["",""])[1].toLowerCase()]){value=jQuery.htmlPrefilter(value);try{for(;i<l;i++)elem=this[i]||{},1===elem.nodeType&&(jQuery.cleanData(getAll(elem,!1)),elem.innerHTML=value);elem=0}catch(e){}}elem&&this.empty().append(value)},null,value,arguments.length)},replaceWith:function(){var ignored=[];return domManip(this,arguments,function(elem){var parent=this.parentNode;jQuery.inArray(this,ignored)<0&&(jQuery.cleanData(getAll(this)),parent&&parent.replaceChild(elem,this))},ignored)}}),jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(name,original){jQuery.fn[name]=function(selector){for(var elems,ret=[],insert=jQuery(selector),last=insert.length-1,i=0;i<=last;i++)elems=i===last?this:this.clone(!0),jQuery(insert[i])[original](elems),push.apply(ret,elems.get());return this.pushStack(ret)}});var rmargin=/^margin/,rnumnonpx=new RegExp("^("+pnum+")(?!px)[a-z%]+$","i"),getStyles=function(elem){var view=elem.ownerDocument.defaultView;return view&&view.opener||(view=window),view.getComputedStyle(elem)};!function(){function computeStyleTests(){if(div){div.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",div.innerHTML="",documentElement.appendChild(container);var divStyle=window.getComputedStyle(div);pixelPositionVal="1%"!==divStyle.top,reliableMarginLeftVal="2px"===divStyle.marginLeft,boxSizingReliableVal="4px"===divStyle.width,div.style.marginRight="50%",pixelMarginRightVal="4px"===divStyle.marginRight,documentElement.removeChild(container),div=null}}var pixelPositionVal,boxSizingReliableVal,pixelMarginRightVal,reliableMarginLeftVal,container=document.createElement("div"),div=document.createElement("div");div.style&&(div.style.backgroundClip="content-box",div.cloneNode(!0).style.backgroundClip="",support.clearCloneStyle="content-box"===div.style.backgroundClip,container.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",container.appendChild(div),jQuery.extend(support,{pixelPosition:function(){return computeStyleTests(),pixelPositionVal},boxSizingReliable:function(){return computeStyleTests(),boxSizingReliableVal},pixelMarginRight:function(){return computeStyleTests(),pixelMarginRightVal},reliableMarginLeft:function(){return computeStyleTests(),reliableMarginLeftVal}}))}();var rdisplayswap=/^(none|table(?!-c[ea]).+)/,cssShow={position:"absolute",visibility:"hidden",display:"block"},cssNormalTransform={letterSpacing:"0",fontWeight:"400"},cssPrefixes=["Webkit","Moz","ms"],emptyStyle=document.createElement("div").style;jQuery.extend({cssHooks:{opacity:{get:function(elem,computed){if(computed){var ret=curCSS(elem,"opacity");return""===ret?"1":ret}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(elem,name,value,extra){if(elem&&3!==elem.nodeType&&8!==elem.nodeType&&elem.style){var ret,type,hooks,origName=jQuery.camelCase(name),style=elem.style;return name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(origName)||origName),hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName],void 0===value?hooks&&"get"in hooks&&void 0!==(ret=hooks.get(elem,!1,extra))?ret:style[name]:(type=typeof value,"string"===type&&(ret=rcssNum.exec(value))&&ret[1]&&(value=adjustCSS(elem,name,ret),type="number"),null!=value&&value===value&&("number"===type&&(value+=ret&&ret[3]||(jQuery.cssNumber[origName]?"":"px")),support.clearCloneStyle||""!==value||0!==name.indexOf("background")||(style[name]="inherit"),hooks&&"set"in hooks&&void 0===(value=hooks.set(elem,value,extra))||(style[name]=value)),void 0)}},css:function(elem,name,extra,styles){var val,num,hooks,origName=jQuery.camelCase(name);return name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(origName)||origName),hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName],hooks&&"get"in hooks&&(val=hooks.get(elem,!0,extra)),void 0===val&&(val=curCSS(elem,name,styles)),"normal"===val&&name in cssNormalTransform&&(val=cssNormalTransform[name]),""===extra||extra?(num=parseFloat(val),extra===!0||isFinite(num)?num||0:val):val}}),jQuery.each(["height","width"],function(i,name){jQuery.cssHooks[name]={get:function(elem,computed,extra){if(computed)return!rdisplayswap.test(jQuery.css(elem,"display"))||elem.getClientRects().length&&elem.getBoundingClientRect().width?getWidthOrHeight(elem,name,extra):swap(elem,cssShow,function(){return getWidthOrHeight(elem,name,extra)})},set:function(elem,value,extra){var matches,styles=extra&&getStyles(elem),subtract=extra&&augmentWidthOrHeight(elem,name,extra,"border-box"===jQuery.css(elem,"boxSizing",!1,styles),styles);return subtract&&(matches=rcssNum.exec(value))&&"px"!==(matches[3]||"px")&&(elem.style[name]=value,value=jQuery.css(elem,name)),setPositiveNumber(elem,value,subtract)}}}),jQuery.cssHooks.marginLeft=addGetHookIf(support.reliableMarginLeft,function(elem,computed){if(computed)return(parseFloat(curCSS(elem,"marginLeft"))||elem.getBoundingClientRect().left-swap(elem,{marginLeft:0},function(){return elem.getBoundingClientRect().left}))+"px"}),jQuery.each({margin:"",padding:"",border:"Width"},function(prefix,suffix){jQuery.cssHooks[prefix+suffix]={expand:function(value){for(var i=0,expanded={},parts="string"==typeof value?value.split(" "):[value];i<4;i++)expanded[prefix+cssExpand[i]+suffix]=parts[i]||parts[i-2]||parts[0];return expanded}},rmargin.test(prefix)||(jQuery.cssHooks[prefix+suffix].set=setPositiveNumber)}),jQuery.fn.extend({css:function(name,value){return access(this,function(elem,name,value){var styles,len,map={},i=0;if(jQuery.isArray(name)){for(styles=getStyles(elem),len=name.length;i<len;i++)map[name[i]]=jQuery.css(elem,name[i],!1,styles);return map}return void 0!==value?jQuery.style(elem,name,value):jQuery.css(elem,name)},name,value,arguments.length>1)}}),jQuery.Tween=Tween,Tween.prototype={constructor:Tween,init:function(elem,options,prop,end,easing,unit){this.elem=elem,this.prop=prop,this.easing=easing||jQuery.easing._default,this.options=options,this.start=this.now=this.cur(),this.end=end,this.unit=unit||(jQuery.cssNumber[prop]?"":"px")},cur:function(){var hooks=Tween.propHooks[this.prop];return hooks&&hooks.get?hooks.get(this):Tween.propHooks._default.get(this)},run:function(percent){var eased,hooks=Tween.propHooks[this.prop];return this.options.duration?this.pos=eased=jQuery.easing[this.easing](percent,this.options.duration*percent,0,1,this.options.duration):this.pos=eased=percent,this.now=(this.end-this.start)*eased+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),hooks&&hooks.set?hooks.set(this):Tween.propHooks._default.set(this),this}},Tween.prototype.init.prototype=Tween.prototype,Tween.propHooks={_default:{get:function(tween){var result;return 1!==tween.elem.nodeType||null!=tween.elem[tween.prop]&&null==tween.elem.style[tween.prop]?tween.elem[tween.prop]:(result=jQuery.css(tween.elem,tween.prop,""),result&&"auto"!==result?result:0)},set:function(tween){jQuery.fx.step[tween.prop]?jQuery.fx.step[tween.prop](tween):1!==tween.elem.nodeType||null==tween.elem.style[jQuery.cssProps[tween.prop]]&&!jQuery.cssHooks[tween.prop]?tween.elem[tween.prop]=tween.now:jQuery.style(tween.elem,tween.prop,tween.now+tween.unit)}}},Tween.propHooks.scrollTop=Tween.propHooks.scrollLeft={set:function(tween){tween.elem.nodeType&&tween.elem.parentNode&&(tween.elem[tween.prop]=tween.now)}},jQuery.easing={linear:function(p){return p},swing:function(p){return.5-Math.cos(p*Math.PI)/2},_default:"swing"},jQuery.fx=Tween.prototype.init,jQuery.fx.step={};var fxNow,timerId,rfxtypes=/^(?:toggle|show|hide)$/,rrun=/queueHooks$/;jQuery.Animation=jQuery.extend(Animation,{tweeners:{"*":[function(prop,value){var tween=this.createTween(prop,value);return adjustCSS(tween.elem,prop,rcssNum.exec(value),tween),tween}]},tweener:function(props,callback){jQuery.isFunction(props)?(callback=props,props=["*"]):props=props.match(rnotwhite);for(var prop,index=0,length=props.length;index<length;index++)prop=props[index],Animation.tweeners[prop]=Animation.tweeners[prop]||[],Animation.tweeners[prop].unshift(callback)},prefilters:[defaultPrefilter],prefilter:function(callback,prepend){prepend?Animation.prefilters.unshift(callback):Animation.prefilters.push(callback)}}),jQuery.speed=function(speed,easing,fn){var opt=speed&&"object"==typeof speed?jQuery.extend({},speed):{complete:fn||!fn&&easing||jQuery.isFunction(speed)&&speed,duration:speed,easing:fn&&easing||easing&&!jQuery.isFunction(easing)&&easing};return jQuery.fx.off||document.hidden?opt.duration=0:opt.duration="number"==typeof opt.duration?opt.duration:opt.duration in jQuery.fx.speeds?jQuery.fx.speeds[opt.duration]:jQuery.fx.speeds._default,
null!=opt.queue&&opt.queue!==!0||(opt.queue="fx"),opt.old=opt.complete,opt.complete=function(){jQuery.isFunction(opt.old)&&opt.old.call(this),opt.queue&&jQuery.dequeue(this,opt.queue)},opt},jQuery.fn.extend({fadeTo:function(speed,to,easing,callback){return this.filter(isHiddenWithinTree).css("opacity",0).show().end().animate({opacity:to},speed,easing,callback)},animate:function(prop,speed,easing,callback){var empty=jQuery.isEmptyObject(prop),optall=jQuery.speed(speed,easing,callback),doAnimation=function(){var anim=Animation(this,jQuery.extend({},prop),optall);(empty||dataPriv.get(this,"finish"))&&anim.stop(!0)};return doAnimation.finish=doAnimation,empty||optall.queue===!1?this.each(doAnimation):this.queue(optall.queue,doAnimation)},stop:function(type,clearQueue,gotoEnd){var stopQueue=function(hooks){var stop=hooks.stop;delete hooks.stop,stop(gotoEnd)};return"string"!=typeof type&&(gotoEnd=clearQueue,clearQueue=type,type=void 0),clearQueue&&type!==!1&&this.queue(type||"fx",[]),this.each(function(){var dequeue=!0,index=null!=type&&type+"queueHooks",timers=jQuery.timers,data=dataPriv.get(this);if(index)data[index]&&data[index].stop&&stopQueue(data[index]);else for(index in data)data[index]&&data[index].stop&&rrun.test(index)&&stopQueue(data[index]);for(index=timers.length;index--;)timers[index].elem!==this||null!=type&&timers[index].queue!==type||(timers[index].anim.stop(gotoEnd),dequeue=!1,timers.splice(index,1));!dequeue&&gotoEnd||jQuery.dequeue(this,type)})},finish:function(type){return type!==!1&&(type=type||"fx"),this.each(function(){var index,data=dataPriv.get(this),queue=data[type+"queue"],hooks=data[type+"queueHooks"],timers=jQuery.timers,length=queue?queue.length:0;for(data.finish=!0,jQuery.queue(this,type,[]),hooks&&hooks.stop&&hooks.stop.call(this,!0),index=timers.length;index--;)timers[index].elem===this&&timers[index].queue===type&&(timers[index].anim.stop(!0),timers.splice(index,1));for(index=0;index<length;index++)queue[index]&&queue[index].finish&&queue[index].finish.call(this);delete data.finish})}}),jQuery.each(["toggle","show","hide"],function(i,name){var cssFn=jQuery.fn[name];jQuery.fn[name]=function(speed,easing,callback){return null==speed||"boolean"==typeof speed?cssFn.apply(this,arguments):this.animate(genFx(name,!0),speed,easing,callback)}}),jQuery.each({slideDown:genFx("show"),slideUp:genFx("hide"),slideToggle:genFx("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(name,props){jQuery.fn[name]=function(speed,easing,callback){return this.animate(props,speed,easing,callback)}}),jQuery.timers=[],jQuery.fx.tick=function(){var timer,i=0,timers=jQuery.timers;for(fxNow=jQuery.now();i<timers.length;i++)timer=timers[i],timer()||timers[i]!==timer||timers.splice(i--,1);timers.length||jQuery.fx.stop(),fxNow=void 0},jQuery.fx.timer=function(timer){jQuery.timers.push(timer),timer()?jQuery.fx.start():jQuery.timers.pop()},jQuery.fx.interval=13,jQuery.fx.start=function(){timerId||(timerId=window.requestAnimationFrame?window.requestAnimationFrame(raf):window.setInterval(jQuery.fx.tick,jQuery.fx.interval))},jQuery.fx.stop=function(){window.cancelAnimationFrame?window.cancelAnimationFrame(timerId):window.clearInterval(timerId),timerId=null},jQuery.fx.speeds={slow:600,fast:200,_default:400},jQuery.fn.delay=function(time,type){return time=jQuery.fx?jQuery.fx.speeds[time]||time:time,type=type||"fx",this.queue(type,function(next,hooks){var timeout=window.setTimeout(next,time);hooks.stop=function(){window.clearTimeout(timeout)}})},function(){var input=document.createElement("input"),select=document.createElement("select"),opt=select.appendChild(document.createElement("option"));input.type="checkbox",support.checkOn=""!==input.value,support.optSelected=opt.selected,input=document.createElement("input"),input.value="t",input.type="radio",support.radioValue="t"===input.value}();var boolHook,attrHandle=jQuery.expr.attrHandle;jQuery.fn.extend({attr:function(name,value){return access(this,jQuery.attr,name,value,arguments.length>1)},removeAttr:function(name){return this.each(function(){jQuery.removeAttr(this,name)})}}),jQuery.extend({attr:function(elem,name,value){var ret,hooks,nType=elem.nodeType;if(3!==nType&&8!==nType&&2!==nType)return"undefined"==typeof elem.getAttribute?jQuery.prop(elem,name,value):(1===nType&&jQuery.isXMLDoc(elem)||(hooks=jQuery.attrHooks[name.toLowerCase()]||(jQuery.expr.match.bool.test(name)?boolHook:void 0)),void 0!==value?null===value?void jQuery.removeAttr(elem,name):hooks&&"set"in hooks&&void 0!==(ret=hooks.set(elem,value,name))?ret:(elem.setAttribute(name,value+""),value):hooks&&"get"in hooks&&null!==(ret=hooks.get(elem,name))?ret:(ret=jQuery.find.attr(elem,name),null==ret?void 0:ret))},attrHooks:{type:{set:function(elem,value){if(!support.radioValue&&"radio"===value&&jQuery.nodeName(elem,"input")){var val=elem.value;return elem.setAttribute("type",value),val&&(elem.value=val),value}}}},removeAttr:function(elem,value){var name,i=0,attrNames=value&&value.match(rnotwhite);if(attrNames&&1===elem.nodeType)for(;name=attrNames[i++];)elem.removeAttribute(name)}}),boolHook={set:function(elem,value,name){return value===!1?jQuery.removeAttr(elem,name):elem.setAttribute(name,name),name}},jQuery.each(jQuery.expr.match.bool.source.match(/\w+/g),function(i,name){var getter=attrHandle[name]||jQuery.find.attr;attrHandle[name]=function(elem,name,isXML){var ret,handle,lowercaseName=name.toLowerCase();return isXML||(handle=attrHandle[lowercaseName],attrHandle[lowercaseName]=ret,ret=null!=getter(elem,name,isXML)?lowercaseName:null,attrHandle[lowercaseName]=handle),ret}});var rfocusable=/^(?:input|select|textarea|button)$/i,rclickable=/^(?:a|area)$/i;jQuery.fn.extend({prop:function(name,value){return access(this,jQuery.prop,name,value,arguments.length>1)},removeProp:function(name){return this.each(function(){delete this[jQuery.propFix[name]||name]})}}),jQuery.extend({prop:function(elem,name,value){var ret,hooks,nType=elem.nodeType;if(3!==nType&&8!==nType&&2!==nType)return 1===nType&&jQuery.isXMLDoc(elem)||(name=jQuery.propFix[name]||name,hooks=jQuery.propHooks[name]),void 0!==value?hooks&&"set"in hooks&&void 0!==(ret=hooks.set(elem,value,name))?ret:elem[name]=value:hooks&&"get"in hooks&&null!==(ret=hooks.get(elem,name))?ret:elem[name]},propHooks:{tabIndex:{get:function(elem){var tabindex=jQuery.find.attr(elem,"tabindex");return tabindex?parseInt(tabindex,10):rfocusable.test(elem.nodeName)||rclickable.test(elem.nodeName)&&elem.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),support.optSelected||(jQuery.propHooks.selected={get:function(elem){var parent=elem.parentNode;return parent&&parent.parentNode&&parent.parentNode.selectedIndex,null},set:function(elem){var parent=elem.parentNode;parent&&(parent.selectedIndex,parent.parentNode&&parent.parentNode.selectedIndex)}}),jQuery.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){jQuery.propFix[this.toLowerCase()]=this});var rclass=/[\t\r\n\f]/g;jQuery.fn.extend({addClass:function(value){var classes,elem,cur,curValue,clazz,j,finalValue,i=0;if(jQuery.isFunction(value))return this.each(function(j){jQuery(this).addClass(value.call(this,j,getClass(this)))});if("string"==typeof value&&value)for(classes=value.match(rnotwhite)||[];elem=this[i++];)if(curValue=getClass(elem),cur=1===elem.nodeType&&(" "+curValue+" ").replace(rclass," ")){for(j=0;clazz=classes[j++];)cur.indexOf(" "+clazz+" ")<0&&(cur+=clazz+" ");finalValue=jQuery.trim(cur),curValue!==finalValue&&elem.setAttribute("class",finalValue)}return this},removeClass:function(value){var classes,elem,cur,curValue,clazz,j,finalValue,i=0;if(jQuery.isFunction(value))return this.each(function(j){jQuery(this).removeClass(value.call(this,j,getClass(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof value&&value)for(classes=value.match(rnotwhite)||[];elem=this[i++];)if(curValue=getClass(elem),cur=1===elem.nodeType&&(" "+curValue+" ").replace(rclass," ")){for(j=0;clazz=classes[j++];)for(;cur.indexOf(" "+clazz+" ")>-1;)cur=cur.replace(" "+clazz+" "," ");finalValue=jQuery.trim(cur),curValue!==finalValue&&elem.setAttribute("class",finalValue)}return this},toggleClass:function(value,stateVal){var type=typeof value;return"boolean"==typeof stateVal&&"string"===type?stateVal?this.addClass(value):this.removeClass(value):jQuery.isFunction(value)?this.each(function(i){jQuery(this).toggleClass(value.call(this,i,getClass(this),stateVal),stateVal)}):this.each(function(){var className,i,self,classNames;if("string"===type)for(i=0,self=jQuery(this),classNames=value.match(rnotwhite)||[];className=classNames[i++];)self.hasClass(className)?self.removeClass(className):self.addClass(className);else void 0!==value&&"boolean"!==type||(className=getClass(this),className&&dataPriv.set(this,"__className__",className),this.setAttribute&&this.setAttribute("class",className||value===!1?"":dataPriv.get(this,"__className__")||""))})},hasClass:function(selector){var className,elem,i=0;for(className=" "+selector+" ";elem=this[i++];)if(1===elem.nodeType&&(" "+getClass(elem)+" ").replace(rclass," ").indexOf(className)>-1)return!0;return!1}});var rreturn=/\r/g,rspaces=/[\x20\t\r\n\f]+/g;jQuery.fn.extend({val:function(value){var hooks,ret,isFunction,elem=this[0];{if(arguments.length)return isFunction=jQuery.isFunction(value),this.each(function(i){var val;1===this.nodeType&&(val=isFunction?value.call(this,i,jQuery(this).val()):value,null==val?val="":"number"==typeof val?val+="":jQuery.isArray(val)&&(val=jQuery.map(val,function(value){return null==value?"":value+""})),hooks=jQuery.valHooks[this.type]||jQuery.valHooks[this.nodeName.toLowerCase()],hooks&&"set"in hooks&&void 0!==hooks.set(this,val,"value")||(this.value=val))});if(elem)return hooks=jQuery.valHooks[elem.type]||jQuery.valHooks[elem.nodeName.toLowerCase()],hooks&&"get"in hooks&&void 0!==(ret=hooks.get(elem,"value"))?ret:(ret=elem.value,"string"==typeof ret?ret.replace(rreturn,""):null==ret?"":ret)}}}),jQuery.extend({valHooks:{option:{get:function(elem){var val=jQuery.find.attr(elem,"value");return null!=val?val:jQuery.trim(jQuery.text(elem)).replace(rspaces," ")}},select:{get:function(elem){for(var value,option,options=elem.options,index=elem.selectedIndex,one="select-one"===elem.type,values=one?null:[],max=one?index+1:options.length,i=index<0?max:one?index:0;i<max;i++)if(option=options[i],(option.selected||i===index)&&!option.disabled&&(!option.parentNode.disabled||!jQuery.nodeName(option.parentNode,"optgroup"))){if(value=jQuery(option).val(),one)return value;values.push(value)}return values},set:function(elem,value){for(var optionSet,option,options=elem.options,values=jQuery.makeArray(value),i=options.length;i--;)option=options[i],(option.selected=jQuery.inArray(jQuery.valHooks.option.get(option),values)>-1)&&(optionSet=!0);return optionSet||(elem.selectedIndex=-1),values}}}}),jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]={set:function(elem,value){if(jQuery.isArray(value))return elem.checked=jQuery.inArray(jQuery(elem).val(),value)>-1}},support.checkOn||(jQuery.valHooks[this].get=function(elem){return null===elem.getAttribute("value")?"on":elem.value})});var rfocusMorph=/^(?:focusinfocus|focusoutblur)$/;jQuery.extend(jQuery.event,{trigger:function(event,data,elem,onlyHandlers){var i,cur,tmp,bubbleType,ontype,handle,special,eventPath=[elem||document],type=hasOwn.call(event,"type")?event.type:event,namespaces=hasOwn.call(event,"namespace")?event.namespace.split("."):[];if(cur=tmp=elem=elem||document,3!==elem.nodeType&&8!==elem.nodeType&&!rfocusMorph.test(type+jQuery.event.triggered)&&(type.indexOf(".")>-1&&(namespaces=type.split("."),type=namespaces.shift(),namespaces.sort()),ontype=type.indexOf(":")<0&&"on"+type,event=event[jQuery.expando]?event:new jQuery.Event(type,"object"==typeof event&&event),event.isTrigger=onlyHandlers?2:3,event.namespace=namespaces.join("."),event.rnamespace=event.namespace?new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,event.result=void 0,event.target||(event.target=elem),data=null==data?[event]:jQuery.makeArray(data,[event]),special=jQuery.event.special[type]||{},onlyHandlers||!special.trigger||special.trigger.apply(elem,data)!==!1)){if(!onlyHandlers&&!special.noBubble&&!jQuery.isWindow(elem)){for(bubbleType=special.delegateType||type,rfocusMorph.test(bubbleType+type)||(cur=cur.parentNode);cur;cur=cur.parentNode)eventPath.push(cur),tmp=cur;tmp===(elem.ownerDocument||document)&&eventPath.push(tmp.defaultView||tmp.parentWindow||window)}for(i=0;(cur=eventPath[i++])&&!event.isPropagationStopped();)event.type=i>1?bubbleType:special.bindType||type,handle=(dataPriv.get(cur,"events")||{})[event.type]&&dataPriv.get(cur,"handle"),handle&&handle.apply(cur,data),handle=ontype&&cur[ontype],handle&&handle.apply&&acceptData(cur)&&(event.result=handle.apply(cur,data),event.result===!1&&event.preventDefault());return event.type=type,onlyHandlers||event.isDefaultPrevented()||special._default&&special._default.apply(eventPath.pop(),data)!==!1||!acceptData(elem)||ontype&&jQuery.isFunction(elem[type])&&!jQuery.isWindow(elem)&&(tmp=elem[ontype],tmp&&(elem[ontype]=null),jQuery.event.triggered=type,elem[type](),jQuery.event.triggered=void 0,tmp&&(elem[ontype]=tmp)),event.result}},simulate:function(type,elem,event){var e=jQuery.extend(new jQuery.Event,event,{type:type,isSimulated:!0});jQuery.event.trigger(e,null,elem)}}),jQuery.fn.extend({trigger:function(type,data){return this.each(function(){jQuery.event.trigger(type,data,this)})},triggerHandler:function(type,data){var elem=this[0];if(elem)return jQuery.event.trigger(type,data,elem,!0)}}),jQuery.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(i,name){jQuery.fn[name]=function(data,fn){return arguments.length>0?this.on(name,null,data,fn):this.trigger(name)}}),jQuery.fn.extend({hover:function(fnOver,fnOut){return this.mouseenter(fnOver).mouseleave(fnOut||fnOver)}}),support.focusin="onfocusin"in window,support.focusin||jQuery.each({focus:"focusin",blur:"focusout"},function(orig,fix){var handler=function(event){jQuery.event.simulate(fix,event.target,jQuery.event.fix(event))};jQuery.event.special[fix]={setup:function(){var doc=this.ownerDocument||this,attaches=dataPriv.access(doc,fix);attaches||doc.addEventListener(orig,handler,!0),dataPriv.access(doc,fix,(attaches||0)+1)},teardown:function(){var doc=this.ownerDocument||this,attaches=dataPriv.access(doc,fix)-1;attaches?dataPriv.access(doc,fix,attaches):(doc.removeEventListener(orig,handler,!0),dataPriv.remove(doc,fix))}}});var location=window.location,nonce=jQuery.now(),rquery=/\?/;jQuery.parseXML=function(data){var xml;if(!data||"string"!=typeof data)return null;try{xml=(new window.DOMParser).parseFromString(data,"text/xml")}catch(e){xml=void 0}return xml&&!xml.getElementsByTagName("parsererror").length||jQuery.error("Invalid XML: "+data),xml};var rbracket=/\[\]$/,rCRLF=/\r?\n/g,rsubmitterTypes=/^(?:submit|button|image|reset|file)$/i,rsubmittable=/^(?:input|select|textarea|keygen)/i;jQuery.param=function(a,traditional){var prefix,s=[],add=function(key,valueOrFunction){var value=jQuery.isFunction(valueOrFunction)?valueOrFunction():valueOrFunction;s[s.length]=encodeURIComponent(key)+"="+encodeURIComponent(null==value?"":value)};if(jQuery.isArray(a)||a.jquery&&!jQuery.isPlainObject(a))jQuery.each(a,function(){add(this.name,this.value)});else for(prefix in a)buildParams(prefix,a[prefix],traditional,add);return s.join("&")},jQuery.fn.extend({serialize:function(){return jQuery.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var elements=jQuery.prop(this,"elements");return elements?jQuery.makeArray(elements):this}).filter(function(){var type=this.type;return this.name&&!jQuery(this).is(":disabled")&&rsubmittable.test(this.nodeName)&&!rsubmitterTypes.test(type)&&(this.checked||!rcheckableType.test(type))}).map(function(i,elem){var val=jQuery(this).val();return null==val?null:jQuery.isArray(val)?jQuery.map(val,function(val){return{name:elem.name,value:val.replace(rCRLF,"\r\n")}}):{name:elem.name,value:val.replace(rCRLF,"\r\n")}}).get()}});var r20=/%20/g,rhash=/#.*$/,rts=/([?&])_=[^&]*/,rheaders=/^(.*?):[ \t]*([^\r\n]*)$/gm,rlocalProtocol=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,rnoContent=/^(?:GET|HEAD)$/,rprotocol=/^\/\//,prefilters={},transports={},allTypes="*/".concat("*"),originAnchor=document.createElement("a");originAnchor.href=location.href,jQuery.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:location.href,type:"GET",isLocal:rlocalProtocol.test(location.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":allTypes,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":jQuery.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(target,settings){return settings?ajaxExtend(ajaxExtend(target,jQuery.ajaxSettings),settings):ajaxExtend(jQuery.ajaxSettings,target)},ajaxPrefilter:addToPrefiltersOrTransports(prefilters),ajaxTransport:addToPrefiltersOrTransports(transports),ajax:function(url,options){function done(status,nativeStatusText,responses,headers){var isSuccess,success,error,response,modified,statusText=nativeStatusText;completed||(completed=!0,timeoutTimer&&window.clearTimeout(timeoutTimer),transport=void 0,responseHeadersString=headers||"",jqXHR.readyState=status>0?4:0,isSuccess=status>=200&&status<300||304===status,responses&&(response=ajaxHandleResponses(s,jqXHR,responses)),response=ajaxConvert(s,response,jqXHR,isSuccess),isSuccess?(s.ifModified&&(modified=jqXHR.getResponseHeader("Last-Modified"),modified&&(jQuery.lastModified[cacheURL]=modified),modified=jqXHR.getResponseHeader("etag"),modified&&(jQuery.etag[cacheURL]=modified)),204===status||"HEAD"===s.type?statusText="nocontent":304===status?statusText="notmodified":(statusText=response.state,success=response.data,error=response.error,isSuccess=!error)):(error=statusText,!status&&statusText||(statusText="error",status<0&&(status=0))),jqXHR.status=status,jqXHR.statusText=(nativeStatusText||statusText)+"",isSuccess?deferred.resolveWith(callbackContext,[success,statusText,jqXHR]):deferred.rejectWith(callbackContext,[jqXHR,statusText,error]),jqXHR.statusCode(statusCode),statusCode=void 0,fireGlobals&&globalEventContext.trigger(isSuccess?"ajaxSuccess":"ajaxError",[jqXHR,s,isSuccess?success:error]),completeDeferred.fireWith(callbackContext,[jqXHR,statusText]),fireGlobals&&(globalEventContext.trigger("ajaxComplete",[jqXHR,s]),--jQuery.active||jQuery.event.trigger("ajaxStop")))}"object"==typeof url&&(options=url,url=void 0),options=options||{};var transport,cacheURL,responseHeadersString,responseHeaders,timeoutTimer,urlAnchor,completed,fireGlobals,i,uncached,s=jQuery.ajaxSetup({},options),callbackContext=s.context||s,globalEventContext=s.context&&(callbackContext.nodeType||callbackContext.jquery)?jQuery(callbackContext):jQuery.event,deferred=jQuery.Deferred(),completeDeferred=jQuery.Callbacks("once memory"),statusCode=s.statusCode||{},requestHeaders={},requestHeadersNames={},strAbort="canceled",jqXHR={readyState:0,getResponseHeader:function(key){var match;if(completed){if(!responseHeaders)for(responseHeaders={};match=rheaders.exec(responseHeadersString);)responseHeaders[match[1].toLowerCase()]=match[2];match=responseHeaders[key.toLowerCase()]}return null==match?null:match},getAllResponseHeaders:function(){return completed?responseHeadersString:null},setRequestHeader:function(name,value){return null==completed&&(name=requestHeadersNames[name.toLowerCase()]=requestHeadersNames[name.toLowerCase()]||name,requestHeaders[name]=value),this},overrideMimeType:function(type){return null==completed&&(s.mimeType=type),this},statusCode:function(map){var code;if(map)if(completed)jqXHR.always(map[jqXHR.status]);else for(code in map)statusCode[code]=[statusCode[code],map[code]];return this},abort:function(statusText){var finalText=statusText||strAbort;return transport&&transport.abort(finalText),done(0,finalText),this}};if(deferred.promise(jqXHR),s.url=((url||s.url||location.href)+"").replace(rprotocol,location.protocol+"//"),s.type=options.method||options.type||s.method||s.type,s.dataTypes=(s.dataType||"*").toLowerCase().match(rnotwhite)||[""],null==s.crossDomain){urlAnchor=document.createElement("a");try{urlAnchor.href=s.url,urlAnchor.href=urlAnchor.href,s.crossDomain=originAnchor.protocol+"//"+originAnchor.host!=urlAnchor.protocol+"//"+urlAnchor.host}catch(e){s.crossDomain=!0}}if(s.data&&s.processData&&"string"!=typeof s.data&&(s.data=jQuery.param(s.data,s.traditional)),inspectPrefiltersOrTransports(prefilters,s,options,jqXHR),completed)return jqXHR;fireGlobals=jQuery.event&&s.global,fireGlobals&&0===jQuery.active++&&jQuery.event.trigger("ajaxStart"),s.type=s.type.toUpperCase(),s.hasContent=!rnoContent.test(s.type),cacheURL=s.url.replace(rhash,""),s.hasContent?s.data&&s.processData&&0===(s.contentType||"").indexOf("application/x-www-form-urlencoded")&&(s.data=s.data.replace(r20,"+")):(uncached=s.url.slice(cacheURL.length),s.data&&(cacheURL+=(rquery.test(cacheURL)?"&":"?")+s.data,delete s.data),s.cache===!1&&(cacheURL=cacheURL.replace(rts,""),uncached=(rquery.test(cacheURL)?"&":"?")+"_="+nonce++ +uncached),s.url=cacheURL+uncached),s.ifModified&&(jQuery.lastModified[cacheURL]&&jqXHR.setRequestHeader("If-Modified-Since",jQuery.lastModified[cacheURL]),jQuery.etag[cacheURL]&&jqXHR.setRequestHeader("If-None-Match",jQuery.etag[cacheURL])),(s.data&&s.hasContent&&s.contentType!==!1||options.contentType)&&jqXHR.setRequestHeader("Content-Type",s.contentType),jqXHR.setRequestHeader("Accept",s.dataTypes[0]&&s.accepts[s.dataTypes[0]]?s.accepts[s.dataTypes[0]]+("*"!==s.dataTypes[0]?", "+allTypes+"; q=0.01":""):s.accepts["*"]);for(i in s.headers)jqXHR.setRequestHeader(i,s.headers[i]);if(s.beforeSend&&(s.beforeSend.call(callbackContext,jqXHR,s)===!1||completed))return jqXHR.abort();if(strAbort="abort",completeDeferred.add(s.complete),jqXHR.done(s.success),jqXHR.fail(s.error),transport=inspectPrefiltersOrTransports(transports,s,options,jqXHR)){if(jqXHR.readyState=1,fireGlobals&&globalEventContext.trigger("ajaxSend",[jqXHR,s]),completed)return jqXHR;s.async&&s.timeout>0&&(timeoutTimer=window.setTimeout(function(){jqXHR.abort("timeout")},s.timeout));try{completed=!1,transport.send(requestHeaders,done)}catch(e){if(completed)throw e;done(-1,e)}}else done(-1,"No Transport");return jqXHR},getJSON:function(url,data,callback){return jQuery.get(url,data,callback,"json")},getScript:function(url,callback){return jQuery.get(url,void 0,callback,"script")}}),jQuery.each(["get","post"],function(i,method){jQuery[method]=function(url,data,callback,type){return jQuery.isFunction(data)&&(type=type||callback,callback=data,data=void 0),jQuery.ajax(jQuery.extend({url:url,type:method,dataType:type,data:data,success:callback},jQuery.isPlainObject(url)&&url))}}),jQuery._evalUrl=function(url){return jQuery.ajax({url:url,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},jQuery.fn.extend({wrapAll:function(html){var wrap;return this[0]&&(jQuery.isFunction(html)&&(html=html.call(this[0])),wrap=jQuery(html,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&wrap.insertBefore(this[0]),wrap.map(function(){for(var elem=this;elem.firstElementChild;)elem=elem.firstElementChild;return elem}).append(this)),this},wrapInner:function(html){return jQuery.isFunction(html)?this.each(function(i){jQuery(this).wrapInner(html.call(this,i))}):this.each(function(){var self=jQuery(this),contents=self.contents();contents.length?contents.wrapAll(html):self.append(html)})},wrap:function(html){var isFunction=jQuery.isFunction(html);return this.each(function(i){jQuery(this).wrapAll(isFunction?html.call(this,i):html)})},unwrap:function(selector){return this.parent(selector).not("body").each(function(){jQuery(this).replaceWith(this.childNodes)}),this}}),jQuery.expr.pseudos.hidden=function(elem){return!jQuery.expr.pseudos.visible(elem)},jQuery.expr.pseudos.visible=function(elem){return!!(elem.offsetWidth||elem.offsetHeight||elem.getClientRects().length)},jQuery.ajaxSettings.xhr=function(){try{return new window.XMLHttpRequest}catch(e){}};var xhrSuccessStatus={0:200,1223:204},xhrSupported=jQuery.ajaxSettings.xhr();support.cors=!!xhrSupported&&"withCredentials"in xhrSupported,support.ajax=xhrSupported=!!xhrSupported,jQuery.ajaxTransport(function(options){var callback,errorCallback;if(support.cors||xhrSupported&&!options.crossDomain)return{send:function(headers,complete){var i,xhr=options.xhr();if(xhr.open(options.type,options.url,options.async,options.username,options.password),options.xhrFields)for(i in options.xhrFields)xhr[i]=options.xhrFields[i];options.mimeType&&xhr.overrideMimeType&&xhr.overrideMimeType(options.mimeType),options.crossDomain||headers["X-Requested-With"]||(headers["X-Requested-With"]="XMLHttpRequest");for(i in headers)xhr.setRequestHeader(i,headers[i]);callback=function(type){return function(){callback&&(callback=errorCallback=xhr.onload=xhr.onerror=xhr.onabort=xhr.onreadystatechange=null,"abort"===type?xhr.abort():"error"===type?"number"!=typeof xhr.status?complete(0,"error"):complete(xhr.status,xhr.statusText):complete(xhrSuccessStatus[xhr.status]||xhr.status,xhr.statusText,"text"!==(xhr.responseType||"text")||"string"!=typeof xhr.responseText?{binary:xhr.response}:{text:xhr.responseText},xhr.getAllResponseHeaders()))}},xhr.onload=callback(),errorCallback=xhr.onerror=callback("error"),void 0!==xhr.onabort?xhr.onabort=errorCallback:xhr.onreadystatechange=function(){4===xhr.readyState&&window.setTimeout(function(){callback&&errorCallback()})},callback=callback("abort");try{xhr.send(options.hasContent&&options.data||null)}catch(e){if(callback)throw e}},abort:function(){callback&&callback()}}}),jQuery.ajaxPrefilter(function(s){s.crossDomain&&(s.contents.script=!1)}),jQuery.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(text){return jQuery.globalEval(text),text}}}),jQuery.ajaxPrefilter("script",function(s){void 0===s.cache&&(s.cache=!1),s.crossDomain&&(s.type="GET")}),jQuery.ajaxTransport("script",function(s){if(s.crossDomain){var script,callback;return{send:function(_,complete){script=jQuery("<script>").prop({charset:s.scriptCharset,src:s.url}).on("load error",callback=function(evt){script.remove(),callback=null,evt&&complete("error"===evt.type?404:200,evt.type)}),document.head.appendChild(script[0])},abort:function(){callback&&callback()}}}});var oldCallbacks=[],rjsonp=/(=)\?(?=&|$)|\?\?/;jQuery.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var callback=oldCallbacks.pop()||jQuery.expando+"_"+nonce++;return this[callback]=!0,callback}}),jQuery.ajaxPrefilter("json jsonp",function(s,originalSettings,jqXHR){var callbackName,overwritten,responseContainer,jsonProp=s.jsonp!==!1&&(rjsonp.test(s.url)?"url":"string"==typeof s.data&&0===(s.contentType||"").indexOf("application/x-www-form-urlencoded")&&rjsonp.test(s.data)&&"data");if(jsonProp||"jsonp"===s.dataTypes[0])return callbackName=s.jsonpCallback=jQuery.isFunction(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback,jsonProp?s[jsonProp]=s[jsonProp].replace(rjsonp,"$1"+callbackName):s.jsonp!==!1&&(s.url+=(rquery.test(s.url)?"&":"?")+s.jsonp+"="+callbackName),s.converters["script json"]=function(){return responseContainer||jQuery.error(callbackName+" was not called"),responseContainer[0]},s.dataTypes[0]="json",overwritten=window[callbackName],window[callbackName]=function(){responseContainer=arguments},jqXHR.always(function(){void 0===overwritten?jQuery(window).removeProp(callbackName):window[callbackName]=overwritten,s[callbackName]&&(s.jsonpCallback=originalSettings.jsonpCallback,oldCallbacks.push(callbackName)),responseContainer&&jQuery.isFunction(overwritten)&&overwritten(responseContainer[0]),responseContainer=overwritten=void 0}),"script"}),support.createHTMLDocument=function(){var body=document.implementation.createHTMLDocument("").body;return body.innerHTML="<form></form><form></form>",2===body.childNodes.length}(),jQuery.parseHTML=function(data,context,keepScripts){if("string"!=typeof data)return[];"boolean"==typeof context&&(keepScripts=context,context=!1);var base,parsed,scripts;return context||(support.createHTMLDocument?(context=document.implementation.createHTMLDocument(""),base=context.createElement("base"),base.href=document.location.href,context.head.appendChild(base)):context=document),parsed=rsingleTag.exec(data),scripts=!keepScripts&&[],parsed?[context.createElement(parsed[1])]:(parsed=buildFragment([data],context,scripts),scripts&&scripts.length&&jQuery(scripts).remove(),jQuery.merge([],parsed.childNodes))},jQuery.fn.load=function(url,params,callback){var selector,type,response,self=this,off=url.indexOf(" ");return off>-1&&(selector=jQuery.trim(url.slice(off)),url=url.slice(0,off)),jQuery.isFunction(params)?(callback=params,params=void 0):params&&"object"==typeof params&&(type="POST"),self.length>0&&jQuery.ajax({url:url,type:type||"GET",dataType:"html",data:params}).done(function(responseText){response=arguments,self.html(selector?jQuery("<div>").append(jQuery.parseHTML(responseText)).find(selector):responseText)}).always(callback&&function(jqXHR,status){self.each(function(){callback.apply(this,response||[jqXHR.responseText,status,jqXHR])})}),this},jQuery.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(i,type){jQuery.fn[type]=function(fn){return this.on(type,fn)}}),jQuery.expr.pseudos.animated=function(elem){return jQuery.grep(jQuery.timers,function(fn){return elem===fn.elem}).length},jQuery.offset={setOffset:function(elem,options,i){var curPosition,curLeft,curCSSTop,curTop,curOffset,curCSSLeft,calculatePosition,position=jQuery.css(elem,"position"),curElem=jQuery(elem),props={};"static"===position&&(elem.style.position="relative"),curOffset=curElem.offset(),curCSSTop=jQuery.css(elem,"top"),curCSSLeft=jQuery.css(elem,"left"),calculatePosition=("absolute"===position||"fixed"===position)&&(curCSSTop+curCSSLeft).indexOf("auto")>-1,calculatePosition?(curPosition=curElem.position(),curTop=curPosition.top,curLeft=curPosition.left):(curTop=parseFloat(curCSSTop)||0,curLeft=parseFloat(curCSSLeft)||0),jQuery.isFunction(options)&&(options=options.call(elem,i,jQuery.extend({},curOffset))),null!=options.top&&(props.top=options.top-curOffset.top+curTop),null!=options.left&&(props.left=options.left-curOffset.left+curLeft),"using"in options?options.using.call(elem,props):curElem.css(props)}},jQuery.fn.extend({offset:function(options){if(arguments.length)return void 0===options?this:this.each(function(i){jQuery.offset.setOffset(this,options,i)});var docElem,win,rect,doc,elem=this[0];if(elem)return elem.getClientRects().length?(rect=elem.getBoundingClientRect(),rect.width||rect.height?(doc=elem.ownerDocument,win=getWindow(doc),docElem=doc.documentElement,{top:rect.top+win.pageYOffset-docElem.clientTop,left:rect.left+win.pageXOffset-docElem.clientLeft}):rect):{top:0,left:0}},position:function(){if(this[0]){var offsetParent,offset,elem=this[0],parentOffset={top:0,left:0};return"fixed"===jQuery.css(elem,"position")?offset=elem.getBoundingClientRect():(offsetParent=this.offsetParent(),offset=this.offset(),jQuery.nodeName(offsetParent[0],"html")||(parentOffset=offsetParent.offset()),parentOffset={top:parentOffset.top+jQuery.css(offsetParent[0],"borderTopWidth",!0),left:parentOffset.left+jQuery.css(offsetParent[0],"borderLeftWidth",!0)
}),{top:offset.top-parentOffset.top-jQuery.css(elem,"marginTop",!0),left:offset.left-parentOffset.left-jQuery.css(elem,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var offsetParent=this.offsetParent;offsetParent&&"static"===jQuery.css(offsetParent,"position");)offsetParent=offsetParent.offsetParent;return offsetParent||documentElement})}}),jQuery.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(method,prop){var top="pageYOffset"===prop;jQuery.fn[method]=function(val){return access(this,function(elem,method,val){var win=getWindow(elem);return void 0===val?win?win[prop]:elem[method]:void(win?win.scrollTo(top?win.pageXOffset:val,top?val:win.pageYOffset):elem[method]=val)},method,val,arguments.length)}}),jQuery.each(["top","left"],function(i,prop){jQuery.cssHooks[prop]=addGetHookIf(support.pixelPosition,function(elem,computed){if(computed)return computed=curCSS(elem,prop),rnumnonpx.test(computed)?jQuery(elem).position()[prop]+"px":computed})}),jQuery.each({Height:"height",Width:"width"},function(name,type){jQuery.each({padding:"inner"+name,content:type,"":"outer"+name},function(defaultExtra,funcName){jQuery.fn[funcName]=function(margin,value){var chainable=arguments.length&&(defaultExtra||"boolean"!=typeof margin),extra=defaultExtra||(margin===!0||value===!0?"margin":"border");return access(this,function(elem,type,value){var doc;return jQuery.isWindow(elem)?0===funcName.indexOf("outer")?elem["inner"+name]:elem.document.documentElement["client"+name]:9===elem.nodeType?(doc=elem.documentElement,Math.max(elem.body["scroll"+name],doc["scroll"+name],elem.body["offset"+name],doc["offset"+name],doc["client"+name])):void 0===value?jQuery.css(elem,type,extra):jQuery.style(elem,type,value,extra)},type,chainable?margin:void 0,chainable)}})}),jQuery.fn.extend({bind:function(types,data,fn){return this.on(types,null,data,fn)},unbind:function(types,fn){return this.off(types,null,fn)},delegate:function(selector,types,data,fn){return this.on(types,selector,data,fn)},undelegate:function(selector,types,fn){return 1===arguments.length?this.off(selector,"**"):this.off(types,selector||"**",fn)}}),jQuery.parseJSON=JSON.parse,"function"==typeof define&&define.amd&&define("jquery",[],function(){return jQuery});var _jQuery=window.jQuery,_$=window.$;return jQuery.noConflict=function(deep){return window.$===jQuery&&(window.$=_$),deep&&window.jQuery===jQuery&&(window.jQuery=_jQuery),jQuery},noGlobal||(window.jQuery=window.$=jQuery),jQuery}),function(factory){"function"==typeof define&&define.amd?define(["jquery"],factory):factory(jQuery)}(function($){$.ui=$.ui||{};var widgetUuid=($.ui.version="1.12.0",0),widgetSlice=Array.prototype.slice;$.cleanData=function(orig){return function(elems){var events,elem,i;for(i=0;null!=(elem=elems[i]);i++)try{events=$._data(elem,"events"),events&&events.remove&&$(elem).triggerHandler("remove")}catch(e){}orig(elems)}}($.cleanData),$.widget=function(name,base,prototype){var existingConstructor,constructor,basePrototype,proxiedPrototype={},namespace=name.split(".")[0];name=name.split(".")[1];var fullName=namespace+"-"+name;return prototype||(prototype=base,base=$.Widget),$.isArray(prototype)&&(prototype=$.extend.apply(null,[{}].concat(prototype))),$.expr[":"][fullName.toLowerCase()]=function(elem){return!!$.data(elem,fullName)},$[namespace]=$[namespace]||{},existingConstructor=$[namespace][name],constructor=$[namespace][name]=function(options,element){return this._createWidget?void(arguments.length&&this._createWidget(options,element)):new constructor(options,element)},$.extend(constructor,existingConstructor,{version:prototype.version,_proto:$.extend({},prototype),_childConstructors:[]}),basePrototype=new base,basePrototype.options=$.widget.extend({},basePrototype.options),$.each(prototype,function(prop,value){return $.isFunction(value)?void(proxiedPrototype[prop]=function(){function _super(){return base.prototype[prop].apply(this,arguments)}function _superApply(args){return base.prototype[prop].apply(this,args)}return function(){var returnValue,__super=this._super,__superApply=this._superApply;return this._super=_super,this._superApply=_superApply,returnValue=value.apply(this,arguments),this._super=__super,this._superApply=__superApply,returnValue}}()):void(proxiedPrototype[prop]=value)}),constructor.prototype=$.widget.extend(basePrototype,{widgetEventPrefix:existingConstructor?basePrototype.widgetEventPrefix||name:name},proxiedPrototype,{constructor:constructor,namespace:namespace,widgetName:name,widgetFullName:fullName}),existingConstructor?($.each(existingConstructor._childConstructors,function(i,child){var childPrototype=child.prototype;$.widget(childPrototype.namespace+"."+childPrototype.widgetName,constructor,child._proto)}),delete existingConstructor._childConstructors):base._childConstructors.push(constructor),$.widget.bridge(name,constructor),constructor},$.widget.extend=function(target){for(var key,value,input=widgetSlice.call(arguments,1),inputIndex=0,inputLength=input.length;inputIndex<inputLength;inputIndex++)for(key in input[inputIndex])value=input[inputIndex][key],input[inputIndex].hasOwnProperty(key)&&void 0!==value&&($.isPlainObject(value)?target[key]=$.isPlainObject(target[key])?$.widget.extend({},target[key],value):$.widget.extend({},value):target[key]=value);return target},$.widget.bridge=function(name,object){var fullName=object.prototype.widgetFullName||name;$.fn[name]=function(options){var isMethodCall="string"==typeof options,args=widgetSlice.call(arguments,1),returnValue=this;return isMethodCall?this.each(function(){var methodValue,instance=$.data(this,fullName);return"instance"===options?(returnValue=instance,!1):instance?$.isFunction(instance[options])&&"_"!==options.charAt(0)?(methodValue=instance[options].apply(instance,args),methodValue!==instance&&void 0!==methodValue?(returnValue=methodValue&&methodValue.jquery?returnValue.pushStack(methodValue.get()):methodValue,!1):void 0):$.error("no such method '"+options+"' for "+name+" widget instance"):$.error("cannot call methods on "+name+" prior to initialization; attempted to call method '"+options+"'")}):(args.length&&(options=$.widget.extend.apply(null,[options].concat(args))),this.each(function(){var instance=$.data(this,fullName);instance?(instance.option(options||{}),instance._init&&instance._init()):$.data(this,fullName,new object(options,this))})),returnValue}},$.Widget=function(){},$.Widget._childConstructors=[],$.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(options,element){element=$(element||this.defaultElement||this)[0],this.element=$(element),this.uuid=widgetUuid++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=$(),this.hoverable=$(),this.focusable=$(),this.classesElementLookup={},element!==this&&($.data(element,this.widgetFullName,this),this._on(!0,this.element,{remove:function(event){event.target===element&&this.destroy()}}),this.document=$(element.style?element.ownerDocument:element.document||element),this.window=$(this.document[0].defaultView||this.document[0].parentWindow)),this.options=$.widget.extend({},this.options,this._getCreateOptions(),options),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:$.noop,_create:$.noop,_init:$.noop,destroy:function(){var that=this;this._destroy(),$.each(this.classesElementLookup,function(key,value){that._removeClass(value,key)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:$.noop,widget:function(){return this.element},option:function(key,value){var parts,curOption,i,options=key;if(0===arguments.length)return $.widget.extend({},this.options);if("string"==typeof key)if(options={},parts=key.split("."),key=parts.shift(),parts.length){for(curOption=options[key]=$.widget.extend({},this.options[key]),i=0;i<parts.length-1;i++)curOption[parts[i]]=curOption[parts[i]]||{},curOption=curOption[parts[i]];if(key=parts.pop(),1===arguments.length)return void 0===curOption[key]?null:curOption[key];curOption[key]=value}else{if(1===arguments.length)return void 0===this.options[key]?null:this.options[key];options[key]=value}return this._setOptions(options),this},_setOptions:function(options){var key;for(key in options)this._setOption(key,options[key]);return this},_setOption:function(key,value){return"classes"===key&&this._setOptionClasses(value),this.options[key]=value,"disabled"===key&&this._setOptionDisabled(value),this},_setOptionClasses:function(value){var classKey,elements,currentElements;for(classKey in value)currentElements=this.classesElementLookup[classKey],value[classKey]!==this.options.classes[classKey]&&currentElements&&currentElements.length&&(elements=$(currentElements.get()),this._removeClass(currentElements,classKey),elements.addClass(this._classes({element:elements,keys:classKey,classes:value,add:!0})))},_setOptionDisabled:function(value){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!value),value&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(options){function processClassString(classes,checkOption){var current,i;for(i=0;i<classes.length;i++)current=that.classesElementLookup[classes[i]]||$(),current=$(options.add?$.unique(current.get().concat(options.element.get())):current.not(options.element).get()),that.classesElementLookup[classes[i]]=current,full.push(classes[i]),checkOption&&options.classes[classes[i]]&&full.push(options.classes[classes[i]])}var full=[],that=this;return options=$.extend({element:this.element,classes:this.options.classes||{}},options),options.keys&&processClassString(options.keys.match(/\S+/g)||[],!0),options.extra&&processClassString(options.extra.match(/\S+/g)||[]),full.join(" ")},_removeClass:function(element,keys,extra){return this._toggleClass(element,keys,extra,!1)},_addClass:function(element,keys,extra){return this._toggleClass(element,keys,extra,!0)},_toggleClass:function(element,keys,extra,add){add="boolean"==typeof add?add:extra;var shift="string"==typeof element||null===element,options={extra:shift?keys:extra,keys:shift?element:keys,element:shift?this.element:element,add:add};return options.element.toggleClass(this._classes(options),add),this},_on:function(suppressDisabledCheck,element,handlers){var delegateElement,instance=this;"boolean"!=typeof suppressDisabledCheck&&(handlers=element,element=suppressDisabledCheck,suppressDisabledCheck=!1),handlers?(element=delegateElement=$(element),this.bindings=this.bindings.add(element)):(handlers=element,element=this.element,delegateElement=this.widget()),$.each(handlers,function(event,handler){function handlerProxy(){if(suppressDisabledCheck||instance.options.disabled!==!0&&!$(this).hasClass("ui-state-disabled"))return("string"==typeof handler?instance[handler]:handler).apply(instance,arguments)}"string"!=typeof handler&&(handlerProxy.guid=handler.guid=handler.guid||handlerProxy.guid||$.guid++);var match=event.match(/^([\w:-]*)\s*(.*)$/),eventName=match[1]+instance.eventNamespace,selector=match[2];selector?delegateElement.on(eventName,selector,handlerProxy):element.on(eventName,handlerProxy)})},_off:function(element,eventName){eventName=(eventName||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,element.off(eventName).off(eventName),this.bindings=$(this.bindings.not(element).get()),this.focusable=$(this.focusable.not(element).get()),this.hoverable=$(this.hoverable.not(element).get())},_delay:function(handler,delay){function handlerProxy(){return("string"==typeof handler?instance[handler]:handler).apply(instance,arguments)}var instance=this;return setTimeout(handlerProxy,delay||0)},_hoverable:function(element){this.hoverable=this.hoverable.add(element),this._on(element,{mouseenter:function(event){this._addClass($(event.currentTarget),null,"ui-state-hover")},mouseleave:function(event){this._removeClass($(event.currentTarget),null,"ui-state-hover")}})},_focusable:function(element){this.focusable=this.focusable.add(element),this._on(element,{focusin:function(event){this._addClass($(event.currentTarget),null,"ui-state-focus")},focusout:function(event){this._removeClass($(event.currentTarget),null,"ui-state-focus")}})},_trigger:function(type,event,data){var prop,orig,callback=this.options[type];if(data=data||{},event=$.Event(event),event.type=(type===this.widgetEventPrefix?type:this.widgetEventPrefix+type).toLowerCase(),event.target=this.element[0],orig=event.originalEvent)for(prop in orig)prop in event||(event[prop]=orig[prop]);return this.element.trigger(event,data),!($.isFunction(callback)&&callback.apply(this.element[0],[event].concat(data))===!1||event.isDefaultPrevented())}},$.each({show:"fadeIn",hide:"fadeOut"},function(method,defaultEffect){$.Widget.prototype["_"+method]=function(element,options,callback){"string"==typeof options&&(options={effect:options});var hasOptions,effectName=options?options===!0||"number"==typeof options?defaultEffect:options.effect||defaultEffect:method;options=options||{},"number"==typeof options&&(options={duration:options}),hasOptions=!$.isEmptyObject(options),options.complete=callback,options.delay&&element.delay(options.delay),hasOptions&&$.effects&&$.effects.effect[effectName]?element[method](options):effectName!==method&&element[effectName]?element[effectName](options.duration,options.easing,callback):element.queue(function(next){$(this)[method](),callback&&callback.call(element[0]),next()})}});$.widget;!function(){function getOffsets(offsets,width,height){return[parseFloat(offsets[0])*(rpercent.test(offsets[0])?width/100:1),parseFloat(offsets[1])*(rpercent.test(offsets[1])?height/100:1)]}function parseCss(element,property){return parseInt($.css(element,property),10)||0}function getDimensions(elem){var raw=elem[0];return 9===raw.nodeType?{width:elem.width(),height:elem.height(),offset:{top:0,left:0}}:$.isWindow(raw)?{width:elem.width(),height:elem.height(),offset:{top:elem.scrollTop(),left:elem.scrollLeft()}}:raw.preventDefault?{width:0,height:0,offset:{top:raw.pageY,left:raw.pageX}}:{width:elem.outerWidth(),height:elem.outerHeight(),offset:elem.offset()}}var cachedScrollbarWidth,supportsOffsetFractions,max=Math.max,abs=Math.abs,round=Math.round,rhorizontal=/left|center|right/,rvertical=/top|center|bottom/,roffset=/[\+\-]\d+(\.[\d]+)?%?/,rposition=/^\w+/,rpercent=/%$/,_position=$.fn.position;supportsOffsetFractions=function(){var element=$("<div>").css("position","absolute").appendTo("body").offset({top:1.5,left:1.5}),support=1.5===element.offset().top;return element.remove(),supportsOffsetFractions=function(){return support},support},$.position={scrollbarWidth:function(){if(void 0!==cachedScrollbarWidth)return cachedScrollbarWidth;var w1,w2,div=$("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),innerDiv=div.children()[0];return $("body").append(div),w1=innerDiv.offsetWidth,div.css("overflow","scroll"),w2=innerDiv.offsetWidth,w1===w2&&(w2=div[0].clientWidth),div.remove(),cachedScrollbarWidth=w1-w2},getScrollInfo:function(within){var overflowX=within.isWindow||within.isDocument?"":within.element.css("overflow-x"),overflowY=within.isWindow||within.isDocument?"":within.element.css("overflow-y"),hasOverflowX="scroll"===overflowX||"auto"===overflowX&&within.width<within.element[0].scrollWidth,hasOverflowY="scroll"===overflowY||"auto"===overflowY&&within.height<within.element[0].scrollHeight;return{width:hasOverflowY?$.position.scrollbarWidth():0,height:hasOverflowX?$.position.scrollbarWidth():0}},getWithinInfo:function(element){var withinElement=$(element||window),isWindow=$.isWindow(withinElement[0]),isDocument=!!withinElement[0]&&9===withinElement[0].nodeType,hasOffset=!isWindow&&!isDocument;return{element:withinElement,isWindow:isWindow,isDocument:isDocument,offset:hasOffset?$(element).offset():{left:0,top:0},scrollLeft:withinElement.scrollLeft(),scrollTop:withinElement.scrollTop(),width:withinElement.outerWidth(),height:withinElement.outerHeight()}}},$.fn.position=function(options){if(!options||!options.of)return _position.apply(this,arguments);options=$.extend({},options);var atOffset,targetWidth,targetHeight,targetOffset,basePosition,dimensions,target=$(options.of),within=$.position.getWithinInfo(options.within),scrollInfo=$.position.getScrollInfo(within),collision=(options.collision||"flip").split(" "),offsets={};return dimensions=getDimensions(target),target[0].preventDefault&&(options.at="left top"),targetWidth=dimensions.width,targetHeight=dimensions.height,targetOffset=dimensions.offset,basePosition=$.extend({},targetOffset),$.each(["my","at"],function(){var horizontalOffset,verticalOffset,pos=(options[this]||"").split(" ");1===pos.length&&(pos=rhorizontal.test(pos[0])?pos.concat(["center"]):rvertical.test(pos[0])?["center"].concat(pos):["center","center"]),pos[0]=rhorizontal.test(pos[0])?pos[0]:"center",pos[1]=rvertical.test(pos[1])?pos[1]:"center",horizontalOffset=roffset.exec(pos[0]),verticalOffset=roffset.exec(pos[1]),offsets[this]=[horizontalOffset?horizontalOffset[0]:0,verticalOffset?verticalOffset[0]:0],options[this]=[rposition.exec(pos[0])[0],rposition.exec(pos[1])[0]]}),1===collision.length&&(collision[1]=collision[0]),"right"===options.at[0]?basePosition.left+=targetWidth:"center"===options.at[0]&&(basePosition.left+=targetWidth/2),"bottom"===options.at[1]?basePosition.top+=targetHeight:"center"===options.at[1]&&(basePosition.top+=targetHeight/2),atOffset=getOffsets(offsets.at,targetWidth,targetHeight),basePosition.left+=atOffset[0],basePosition.top+=atOffset[1],this.each(function(){var collisionPosition,using,elem=$(this),elemWidth=elem.outerWidth(),elemHeight=elem.outerHeight(),marginLeft=parseCss(this,"marginLeft"),marginTop=parseCss(this,"marginTop"),collisionWidth=elemWidth+marginLeft+parseCss(this,"marginRight")+scrollInfo.width,collisionHeight=elemHeight+marginTop+parseCss(this,"marginBottom")+scrollInfo.height,position=$.extend({},basePosition),myOffset=getOffsets(offsets.my,elem.outerWidth(),elem.outerHeight());"right"===options.my[0]?position.left-=elemWidth:"center"===options.my[0]&&(position.left-=elemWidth/2),"bottom"===options.my[1]?position.top-=elemHeight:"center"===options.my[1]&&(position.top-=elemHeight/2),position.left+=myOffset[0],position.top+=myOffset[1],supportsOffsetFractions()||(position.left=round(position.left),position.top=round(position.top)),collisionPosition={marginLeft:marginLeft,marginTop:marginTop},$.each(["left","top"],function(i,dir){$.ui.position[collision[i]]&&$.ui.position[collision[i]][dir](position,{targetWidth:targetWidth,targetHeight:targetHeight,elemWidth:elemWidth,elemHeight:elemHeight,collisionPosition:collisionPosition,collisionWidth:collisionWidth,collisionHeight:collisionHeight,offset:[atOffset[0]+myOffset[0],atOffset[1]+myOffset[1]],my:options.my,at:options.at,within:within,elem:elem})}),options.using&&(using=function(props){var left=targetOffset.left-position.left,right=left+targetWidth-elemWidth,top=targetOffset.top-position.top,bottom=top+targetHeight-elemHeight,feedback={target:{element:target,left:targetOffset.left,top:targetOffset.top,width:targetWidth,height:targetHeight},element:{element:elem,left:position.left,top:position.top,width:elemWidth,height:elemHeight},horizontal:right<0?"left":left>0?"right":"center",vertical:bottom<0?"top":top>0?"bottom":"middle"};targetWidth<elemWidth&&abs(left+right)<targetWidth&&(feedback.horizontal="center"),targetHeight<elemHeight&&abs(top+bottom)<targetHeight&&(feedback.vertical="middle"),max(abs(left),abs(right))>max(abs(top),abs(bottom))?feedback.important="horizontal":feedback.important="vertical",options.using.call(this,props,feedback)}),elem.offset($.extend(position,{using:using}))})},$.ui.position={fit:{left:function(position,data){var newOverRight,within=data.within,withinOffset=within.isWindow?within.scrollLeft:within.offset.left,outerWidth=within.width,collisionPosLeft=position.left-data.collisionPosition.marginLeft,overLeft=withinOffset-collisionPosLeft,overRight=collisionPosLeft+data.collisionWidth-outerWidth-withinOffset;data.collisionWidth>outerWidth?overLeft>0&&overRight<=0?(newOverRight=position.left+overLeft+data.collisionWidth-outerWidth-withinOffset,position.left+=overLeft-newOverRight):overRight>0&&overLeft<=0?position.left=withinOffset:overLeft>overRight?position.left=withinOffset+outerWidth-data.collisionWidth:position.left=withinOffset:overLeft>0?position.left+=overLeft:overRight>0?position.left-=overRight:position.left=max(position.left-collisionPosLeft,position.left)},top:function(position,data){var newOverBottom,within=data.within,withinOffset=within.isWindow?within.scrollTop:within.offset.top,outerHeight=data.within.height,collisionPosTop=position.top-data.collisionPosition.marginTop,overTop=withinOffset-collisionPosTop,overBottom=collisionPosTop+data.collisionHeight-outerHeight-withinOffset;data.collisionHeight>outerHeight?overTop>0&&overBottom<=0?(newOverBottom=position.top+overTop+data.collisionHeight-outerHeight-withinOffset,position.top+=overTop-newOverBottom):overBottom>0&&overTop<=0?position.top=withinOffset:overTop>overBottom?position.top=withinOffset+outerHeight-data.collisionHeight:position.top=withinOffset:overTop>0?position.top+=overTop:overBottom>0?position.top-=overBottom:position.top=max(position.top-collisionPosTop,position.top)}},flip:{left:function(position,data){var newOverRight,newOverLeft,within=data.within,withinOffset=within.offset.left+within.scrollLeft,outerWidth=within.width,offsetLeft=within.isWindow?within.scrollLeft:within.offset.left,collisionPosLeft=position.left-data.collisionPosition.marginLeft,overLeft=collisionPosLeft-offsetLeft,overRight=collisionPosLeft+data.collisionWidth-outerWidth-offsetLeft,myOffset="left"===data.my[0]?-data.elemWidth:"right"===data.my[0]?data.elemWidth:0,atOffset="left"===data.at[0]?data.targetWidth:"right"===data.at[0]?-data.targetWidth:0,offset=-2*data.offset[0];overLeft<0?(newOverRight=position.left+myOffset+atOffset+offset+data.collisionWidth-outerWidth-withinOffset,(newOverRight<0||newOverRight<abs(overLeft))&&(position.left+=myOffset+atOffset+offset)):overRight>0&&(newOverLeft=position.left-data.collisionPosition.marginLeft+myOffset+atOffset+offset-offsetLeft,(newOverLeft>0||abs(newOverLeft)<overRight)&&(position.left+=myOffset+atOffset+offset))},top:function(position,data){var newOverTop,newOverBottom,within=data.within,withinOffset=within.offset.top+within.scrollTop,outerHeight=within.height,offsetTop=within.isWindow?within.scrollTop:within.offset.top,collisionPosTop=position.top-data.collisionPosition.marginTop,overTop=collisionPosTop-offsetTop,overBottom=collisionPosTop+data.collisionHeight-outerHeight-offsetTop,top="top"===data.my[1],myOffset=top?-data.elemHeight:"bottom"===data.my[1]?data.elemHeight:0,atOffset="top"===data.at[1]?data.targetHeight:"bottom"===data.at[1]?-data.targetHeight:0,offset=-2*data.offset[1];overTop<0?(newOverBottom=position.top+myOffset+atOffset+offset+data.collisionHeight-outerHeight-withinOffset,(newOverBottom<0||newOverBottom<abs(overTop))&&(position.top+=myOffset+atOffset+offset)):overBottom>0&&(newOverTop=position.top-data.collisionPosition.marginTop+myOffset+atOffset+offset-offsetTop,(newOverTop>0||abs(newOverTop)<overBottom)&&(position.top+=myOffset+atOffset+offset))}},flipfit:{left:function(){$.ui.position.flip.left.apply(this,arguments),$.ui.position.fit.left.apply(this,arguments)},top:function(){$.ui.position.flip.top.apply(this,arguments),$.ui.position.fit.top.apply(this,arguments)}}}}();var mouseHandled=($.ui.position,$.extend($.expr[":"],{data:$.expr.createPseudo?$.expr.createPseudo(function(dataName){return function(elem){return!!$.data(elem,dataName)}}):function(elem,i,match){return!!$.data(elem,match[3])}}),$.fn.extend({disableSelection:function(){var eventType="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.on(eventType+".ui-disableSelection",function(event){event.preventDefault()})}}(),enableSelection:function(){return this.off(".ui-disableSelection")}}),$.fn.scrollParent=function(includeHidden){var position=this.css("position"),excludeStaticParent="absolute"===position,overflowRegex=includeHidden?/(auto|scroll|hidden)/:/(auto|scroll)/,scrollParent=this.parents().filter(function(){var parent=$(this);return(!excludeStaticParent||"static"!==parent.css("position"))&&overflowRegex.test(parent.css("overflow")+parent.css("overflow-y")+parent.css("overflow-x"))}).eq(0);return"fixed"!==position&&scrollParent.length?scrollParent:$(this[0].ownerDocument||document)},$.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),!1);$(document).on("mouseup",function(){mouseHandled=!1});$.widget("ui.mouse",{version:"1.12.0",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var that=this;this.element.on("mousedown."+this.widgetName,function(event){return that._mouseDown(event)}).on("click."+this.widgetName,function(event){if(!0===$.data(event.target,that.widgetName+".preventClickEvent"))return $.removeData(event.target,that.widgetName+".preventClickEvent"),event.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(event){if(!mouseHandled){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(event),this._mouseDownEvent=event;var that=this,btnIsLeft=1===event.which,elIsCancel=!("string"!=typeof this.options.cancel||!event.target.nodeName)&&$(event.target).closest(this.options.cancel).length;return!(btnIsLeft&&!elIsCancel&&this._mouseCapture(event))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){that.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(event)&&this._mouseDelayMet(event)&&(this._mouseStarted=this._mouseStart(event)!==!1,!this._mouseStarted)?(event.preventDefault(),!0):(!0===$.data(event.target,this.widgetName+".preventClickEvent")&&$.removeData(event.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(event){return that._mouseMove(event)},this._mouseUpDelegate=function(event){return that._mouseUp(event)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),event.preventDefault(),mouseHandled=!0,!0))}},_mouseMove:function(event){if(this._mouseMoved){if($.ui.ie&&(!document.documentMode||document.documentMode<9)&&!event.button)return this._mouseUp(event);if(!event.which)if(event.originalEvent.altKey||event.originalEvent.ctrlKey||event.originalEvent.metaKey||event.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(event)}return(event.which||event.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(event),event.preventDefault()):(this._mouseDistanceMet(event)&&this._mouseDelayMet(event)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,event)!==!1,this._mouseStarted?this._mouseDrag(event):this._mouseUp(event)),!this._mouseStarted)},_mouseUp:function(event){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,event.target===this._mouseDownEvent.target&&$.data(event.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(event)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,mouseHandled=!1,event.preventDefault()},_mouseDistanceMet:function(event){return Math.max(Math.abs(this._mouseDownEvent.pageX-event.pageX),Math.abs(this._mouseDownEvent.pageY-event.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),$.ui.plugin={add:function(module,option,set){var i,proto=$.ui[module].prototype;for(i in set)proto.plugins[i]=proto.plugins[i]||[],proto.plugins[i].push([option,set[i]])},call:function(instance,name,args,allowDisconnected){var i,set=instance.plugins[name];if(set&&(allowDisconnected||instance.element[0].parentNode&&11!==instance.element[0].parentNode.nodeType))for(i=0;i<set.length;i++)instance.options[set[i][0]]&&set[i][1].apply(instance.element,args)}},$.ui.safeActiveElement=function(document){var activeElement;try{activeElement=document.activeElement}catch(error){activeElement=document.body}return activeElement||(activeElement=document.body),activeElement.nodeName||(activeElement=document.body),activeElement},$.ui.safeBlur=function(element){element&&"body"!==element.nodeName.toLowerCase()&&$(element).trigger("blur")};$.widget("ui.draggable",$.ui.mouse,{version:"1.12.0",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(key,value){this._super(key,value),"handle"===key&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?void(this.destroyOnClear=!0):(this._removeHandleClassName(),void this._mouseDestroy())},_mouseCapture:function(event){var o=this.options;return this._blurActiveElement(event),!(this.helper||o.disabled||$(event.target).closest(".ui-resizable-handle").length>0)&&(this.handle=this._getHandle(event),!!this.handle&&(this._blockFrames(o.iframeFix===!0?"iframe":o.iframeFix),!0))},_blockFrames:function(selector){this.iframeBlocks=this.document.find(selector).map(function(){var iframe=$(this);return $("<div>").css("position","absolute").appendTo(iframe.parent()).outerWidth(iframe.outerWidth()).outerHeight(iframe.outerHeight()).offset(iframe.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(event){var activeElement=$.ui.safeActiveElement(this.document[0]),target=$(event.target);this._getHandle(event)&&target.closest(activeElement).length||$.ui.safeBlur(activeElement)},_mouseStart:function(event){var o=this.options;return this.helper=this._createHelper(event),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),$.ui.ddmanager&&($.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===$(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(event),this.originalPosition=this.position=this._generatePosition(event,!1),this.originalPageX=event.pageX,this.originalPageY=event.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this._setContainment(),this._trigger("start",event)===!1?(this._clear(),!1):(this._cacheHelperProportions(),
$.ui.ddmanager&&!o.dropBehaviour&&$.ui.ddmanager.prepareOffsets(this,event),this._mouseDrag(event,!0),$.ui.ddmanager&&$.ui.ddmanager.dragStart(this,event),!0)},_refreshOffsets:function(event){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:event.pageX-this.offset.left,top:event.pageY-this.offset.top}},_mouseDrag:function(event,noPropagation){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(event,!0),this.positionAbs=this._convertPositionTo("absolute"),!noPropagation){var ui=this._uiHash();if(this._trigger("drag",event,ui)===!1)return this._mouseUp(new $.Event("mouseup",event)),!1;this.position=ui.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",$.ui.ddmanager&&$.ui.ddmanager.drag(this,event),!1},_mouseStop:function(event){var that=this,dropped=!1;return $.ui.ddmanager&&!this.options.dropBehaviour&&(dropped=$.ui.ddmanager.drop(this,event)),this.dropped&&(dropped=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!dropped||"valid"===this.options.revert&&dropped||this.options.revert===!0||$.isFunction(this.options.revert)&&this.options.revert.call(this.element,dropped)?$(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){that._trigger("stop",event)!==!1&&that._clear()}):this._trigger("stop",event)!==!1&&this._clear(),!1},_mouseUp:function(event){return this._unblockFrames(),$.ui.ddmanager&&$.ui.ddmanager.dragStop(this,event),this.handleElement.is(event.target)&&this.element.trigger("focus"),$.ui.mouse.prototype._mouseUp.call(this,event)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new $.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(event){return!this.options.handle||!!$(event.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(event){var o=this.options,helperIsFunction=$.isFunction(o.helper),helper=helperIsFunction?$(o.helper.apply(this.element[0],[event])):"clone"===o.helper?this.element.clone().removeAttr("id"):this.element;return helper.parents("body").length||helper.appendTo("parent"===o.appendTo?this.element[0].parentNode:o.appendTo),helperIsFunction&&helper[0]===this.element[0]&&this._setPositionRelative(),helper[0]===this.element[0]||/(fixed|absolute)/.test(helper.css("position"))||helper.css("position","absolute"),helper},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(obj){"string"==typeof obj&&(obj=obj.split(" ")),$.isArray(obj)&&(obj={left:+obj[0],top:+obj[1]||0}),"left"in obj&&(this.offset.click.left=obj.left+this.margins.left),"right"in obj&&(this.offset.click.left=this.helperProportions.width-obj.right+this.margins.left),"top"in obj&&(this.offset.click.top=obj.top+this.margins.top),"bottom"in obj&&(this.offset.click.top=this.helperProportions.height-obj.bottom+this.margins.top)},_isRootNode:function(element){return/(html|body)/i.test(element.tagName)||element===this.document[0]},_getParentOffset:function(){var po=this.offsetParent.offset(),document=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&$.contains(this.scrollParent[0],this.offsetParent[0])&&(po.left+=this.scrollParent.scrollLeft(),po.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(po={top:0,left:0}),{top:po.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:po.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var p=this.element.position(),scrollIsRootNode=this._isRootNode(this.scrollParent[0]);return{top:p.top-(parseInt(this.helper.css("top"),10)||0)+(scrollIsRootNode?0:this.scrollParent.scrollTop()),left:p.left-(parseInt(this.helper.css("left"),10)||0)+(scrollIsRootNode?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var isUserScrollable,c,ce,o=this.options,document=this.document[0];return this.relativeContainer=null,o.containment?"window"===o.containment?void(this.containment=[$(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,$(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,$(window).scrollLeft()+$(window).width()-this.helperProportions.width-this.margins.left,$(window).scrollTop()+($(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===o.containment?void(this.containment=[0,0,$(document).width()-this.helperProportions.width-this.margins.left,($(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):o.containment.constructor===Array?void(this.containment=o.containment):("parent"===o.containment&&(o.containment=this.helper[0].parentNode),c=$(o.containment),ce=c[0],void(ce&&(isUserScrollable=/(scroll|auto)/.test(c.css("overflow")),this.containment=[(parseInt(c.css("borderLeftWidth"),10)||0)+(parseInt(c.css("paddingLeft"),10)||0),(parseInt(c.css("borderTopWidth"),10)||0)+(parseInt(c.css("paddingTop"),10)||0),(isUserScrollable?Math.max(ce.scrollWidth,ce.offsetWidth):ce.offsetWidth)-(parseInt(c.css("borderRightWidth"),10)||0)-(parseInt(c.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(isUserScrollable?Math.max(ce.scrollHeight,ce.offsetHeight):ce.offsetHeight)-(parseInt(c.css("borderBottomWidth"),10)||0)-(parseInt(c.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=c))):void(this.containment=null)},_convertPositionTo:function(d,pos){pos||(pos=this.position);var mod="absolute"===d?1:-1,scrollIsRootNode=this._isRootNode(this.scrollParent[0]);return{top:pos.top+this.offset.relative.top*mod+this.offset.parent.top*mod-("fixed"===this.cssPosition?-this.offset.scroll.top:scrollIsRootNode?0:this.offset.scroll.top)*mod,left:pos.left+this.offset.relative.left*mod+this.offset.parent.left*mod-("fixed"===this.cssPosition?-this.offset.scroll.left:scrollIsRootNode?0:this.offset.scroll.left)*mod}},_generatePosition:function(event,constrainPosition){var containment,co,top,left,o=this.options,scrollIsRootNode=this._isRootNode(this.scrollParent[0]),pageX=event.pageX,pageY=event.pageY;return scrollIsRootNode&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),constrainPosition&&(this.containment&&(this.relativeContainer?(co=this.relativeContainer.offset(),containment=[this.containment[0]+co.left,this.containment[1]+co.top,this.containment[2]+co.left,this.containment[3]+co.top]):containment=this.containment,event.pageX-this.offset.click.left<containment[0]&&(pageX=containment[0]+this.offset.click.left),event.pageY-this.offset.click.top<containment[1]&&(pageY=containment[1]+this.offset.click.top),event.pageX-this.offset.click.left>containment[2]&&(pageX=containment[2]+this.offset.click.left),event.pageY-this.offset.click.top>containment[3]&&(pageY=containment[3]+this.offset.click.top)),o.grid&&(top=o.grid[1]?this.originalPageY+Math.round((pageY-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,pageY=containment?top-this.offset.click.top>=containment[1]||top-this.offset.click.top>containment[3]?top:top-this.offset.click.top>=containment[1]?top-o.grid[1]:top+o.grid[1]:top,left=o.grid[0]?this.originalPageX+Math.round((pageX-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,pageX=containment?left-this.offset.click.left>=containment[0]||left-this.offset.click.left>containment[2]?left:left-this.offset.click.left>=containment[0]?left-o.grid[0]:left+o.grid[0]:left),"y"===o.axis&&(pageX=this.originalPageX),"x"===o.axis&&(pageY=this.originalPageY)),{top:pageY-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:scrollIsRootNode?0:this.offset.scroll.top),left:pageX-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:scrollIsRootNode?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(type,event,ui){return ui=ui||this._uiHash(),$.ui.plugin.call(this,type,[event,ui,this],!0),/^(drag|start|stop)/.test(type)&&(this.positionAbs=this._convertPositionTo("absolute"),ui.offset=this.positionAbs),$.Widget.prototype._trigger.call(this,type,event,ui)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),$.ui.plugin.add("draggable","connectToSortable",{start:function(event,ui,draggable){var uiSortable=$.extend({},ui,{item:draggable.element});draggable.sortables=[],$(draggable.options.connectToSortable).each(function(){var sortable=$(this).sortable("instance");sortable&&!sortable.options.disabled&&(draggable.sortables.push(sortable),sortable.refreshPositions(),sortable._trigger("activate",event,uiSortable))})},stop:function(event,ui,draggable){var uiSortable=$.extend({},ui,{item:draggable.element});draggable.cancelHelperRemoval=!1,$.each(draggable.sortables,function(){var sortable=this;sortable.isOver?(sortable.isOver=0,draggable.cancelHelperRemoval=!0,sortable.cancelHelperRemoval=!1,sortable._storedCSS={position:sortable.placeholder.css("position"),top:sortable.placeholder.css("top"),left:sortable.placeholder.css("left")},sortable._mouseStop(event),sortable.options.helper=sortable.options._helper):(sortable.cancelHelperRemoval=!0,sortable._trigger("deactivate",event,uiSortable))})},drag:function(event,ui,draggable){$.each(draggable.sortables,function(){var innermostIntersecting=!1,sortable=this;sortable.positionAbs=draggable.positionAbs,sortable.helperProportions=draggable.helperProportions,sortable.offset.click=draggable.offset.click,sortable._intersectsWith(sortable.containerCache)&&(innermostIntersecting=!0,$.each(draggable.sortables,function(){return this.positionAbs=draggable.positionAbs,this.helperProportions=draggable.helperProportions,this.offset.click=draggable.offset.click,this!==sortable&&this._intersectsWith(this.containerCache)&&$.contains(sortable.element[0],this.element[0])&&(innermostIntersecting=!1),innermostIntersecting})),innermostIntersecting?(sortable.isOver||(sortable.isOver=1,draggable._parent=ui.helper.parent(),sortable.currentItem=ui.helper.appendTo(sortable.element).data("ui-sortable-item",!0),sortable.options._helper=sortable.options.helper,sortable.options.helper=function(){return ui.helper[0]},event.target=sortable.currentItem[0],sortable._mouseCapture(event,!0),sortable._mouseStart(event,!0,!0),sortable.offset.click.top=draggable.offset.click.top,sortable.offset.click.left=draggable.offset.click.left,sortable.offset.parent.left-=draggable.offset.parent.left-sortable.offset.parent.left,sortable.offset.parent.top-=draggable.offset.parent.top-sortable.offset.parent.top,draggable._trigger("toSortable",event),draggable.dropped=sortable.element,$.each(draggable.sortables,function(){this.refreshPositions()}),draggable.currentItem=draggable.element,sortable.fromOutside=draggable),sortable.currentItem&&(sortable._mouseDrag(event),ui.position=sortable.position)):sortable.isOver&&(sortable.isOver=0,sortable.cancelHelperRemoval=!0,sortable.options._revert=sortable.options.revert,sortable.options.revert=!1,sortable._trigger("out",event,sortable._uiHash(sortable)),sortable._mouseStop(event,!0),sortable.options.revert=sortable.options._revert,sortable.options.helper=sortable.options._helper,sortable.placeholder&&sortable.placeholder.remove(),ui.helper.appendTo(draggable._parent),draggable._refreshOffsets(event),ui.position=draggable._generatePosition(event,!0),draggable._trigger("fromSortable",event),draggable.dropped=!1,$.each(draggable.sortables,function(){this.refreshPositions()}))})}}),$.ui.plugin.add("draggable","cursor",{start:function(event,ui,instance){var t=$("body"),o=instance.options;t.css("cursor")&&(o._cursor=t.css("cursor")),t.css("cursor",o.cursor)},stop:function(event,ui,instance){var o=instance.options;o._cursor&&$("body").css("cursor",o._cursor)}}),$.ui.plugin.add("draggable","opacity",{start:function(event,ui,instance){var t=$(ui.helper),o=instance.options;t.css("opacity")&&(o._opacity=t.css("opacity")),t.css("opacity",o.opacity)},stop:function(event,ui,instance){var o=instance.options;o._opacity&&$(ui.helper).css("opacity",o._opacity)}}),$.ui.plugin.add("draggable","scroll",{start:function(event,ui,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(event,ui,i){var o=i.options,scrolled=!1,scrollParent=i.scrollParentNotHidden[0],document=i.document[0];scrollParent!==document&&"HTML"!==scrollParent.tagName?(o.axis&&"x"===o.axis||(i.overflowOffset.top+scrollParent.offsetHeight-event.pageY<o.scrollSensitivity?scrollParent.scrollTop=scrolled=scrollParent.scrollTop+o.scrollSpeed:event.pageY-i.overflowOffset.top<o.scrollSensitivity&&(scrollParent.scrollTop=scrolled=scrollParent.scrollTop-o.scrollSpeed)),o.axis&&"y"===o.axis||(i.overflowOffset.left+scrollParent.offsetWidth-event.pageX<o.scrollSensitivity?scrollParent.scrollLeft=scrolled=scrollParent.scrollLeft+o.scrollSpeed:event.pageX-i.overflowOffset.left<o.scrollSensitivity&&(scrollParent.scrollLeft=scrolled=scrollParent.scrollLeft-o.scrollSpeed))):(o.axis&&"x"===o.axis||(event.pageY-$(document).scrollTop()<o.scrollSensitivity?scrolled=$(document).scrollTop($(document).scrollTop()-o.scrollSpeed):$(window).height()-(event.pageY-$(document).scrollTop())<o.scrollSensitivity&&(scrolled=$(document).scrollTop($(document).scrollTop()+o.scrollSpeed))),o.axis&&"y"===o.axis||(event.pageX-$(document).scrollLeft()<o.scrollSensitivity?scrolled=$(document).scrollLeft($(document).scrollLeft()-o.scrollSpeed):$(window).width()-(event.pageX-$(document).scrollLeft())<o.scrollSensitivity&&(scrolled=$(document).scrollLeft($(document).scrollLeft()+o.scrollSpeed)))),scrolled!==!1&&$.ui.ddmanager&&!o.dropBehaviour&&$.ui.ddmanager.prepareOffsets(i,event)}}),$.ui.plugin.add("draggable","snap",{start:function(event,ui,i){var o=i.options;i.snapElements=[],$(o.snap.constructor!==String?o.snap.items||":data(ui-draggable)":o.snap).each(function(){var $t=$(this),$o=$t.offset();this!==i.element[0]&&i.snapElements.push({item:this,width:$t.outerWidth(),height:$t.outerHeight(),top:$o.top,left:$o.left})})},drag:function(event,ui,inst){var ts,bs,ls,rs,l,r,t,b,i,first,o=inst.options,d=o.snapTolerance,x1=ui.offset.left,x2=x1+inst.helperProportions.width,y1=ui.offset.top,y2=y1+inst.helperProportions.height;for(i=inst.snapElements.length-1;i>=0;i--)l=inst.snapElements[i].left-inst.margins.left,r=l+inst.snapElements[i].width,t=inst.snapElements[i].top-inst.margins.top,b=t+inst.snapElements[i].height,x2<l-d||x1>r+d||y2<t-d||y1>b+d||!$.contains(inst.snapElements[i].item.ownerDocument,inst.snapElements[i].item)?(inst.snapElements[i].snapping&&inst.options.snap.release&&inst.options.snap.release.call(inst.element,event,$.extend(inst._uiHash(),{snapItem:inst.snapElements[i].item})),inst.snapElements[i].snapping=!1):("inner"!==o.snapMode&&(ts=Math.abs(t-y2)<=d,bs=Math.abs(b-y1)<=d,ls=Math.abs(l-x2)<=d,rs=Math.abs(r-x1)<=d,ts&&(ui.position.top=inst._convertPositionTo("relative",{top:t-inst.helperProportions.height,left:0}).top),bs&&(ui.position.top=inst._convertPositionTo("relative",{top:b,left:0}).top),ls&&(ui.position.left=inst._convertPositionTo("relative",{top:0,left:l-inst.helperProportions.width}).left),rs&&(ui.position.left=inst._convertPositionTo("relative",{top:0,left:r}).left)),first=ts||bs||ls||rs,"outer"!==o.snapMode&&(ts=Math.abs(t-y1)<=d,bs=Math.abs(b-y2)<=d,ls=Math.abs(l-x1)<=d,rs=Math.abs(r-x2)<=d,ts&&(ui.position.top=inst._convertPositionTo("relative",{top:t,left:0}).top),bs&&(ui.position.top=inst._convertPositionTo("relative",{top:b-inst.helperProportions.height,left:0}).top),ls&&(ui.position.left=inst._convertPositionTo("relative",{top:0,left:l}).left),rs&&(ui.position.left=inst._convertPositionTo("relative",{top:0,left:r-inst.helperProportions.width}).left)),!inst.snapElements[i].snapping&&(ts||bs||ls||rs||first)&&inst.options.snap.snap&&inst.options.snap.snap.call(inst.element,event,$.extend(inst._uiHash(),{snapItem:inst.snapElements[i].item})),inst.snapElements[i].snapping=ts||bs||ls||rs||first)}}),$.ui.plugin.add("draggable","stack",{start:function(event,ui,instance){var min,o=instance.options,group=$.makeArray($(o.stack)).sort(function(a,b){return(parseInt($(a).css("zIndex"),10)||0)-(parseInt($(b).css("zIndex"),10)||0)});group.length&&(min=parseInt($(group[0]).css("zIndex"),10)||0,$(group).each(function(i){$(this).css("zIndex",min+i)}),this.css("zIndex",min+group.length))}}),$.ui.plugin.add("draggable","zIndex",{start:function(event,ui,instance){var t=$(ui.helper),o=instance.options;t.css("zIndex")&&(o._zIndex=t.css("zIndex")),t.css("zIndex",o.zIndex)},stop:function(event,ui,instance){var o=instance.options;o._zIndex&&$(ui.helper).css("zIndex",o._zIndex)}});$.ui.draggable;$.widget("ui.droppable",{version:"1.12.0",widgetEventPrefix:"drop",options:{accept:"*",addClasses:!0,greedy:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var proportions,o=this.options,accept=o.accept;this.isover=!1,this.isout=!0,this.accept=$.isFunction(accept)?accept:function(d){return d.is(accept)},this.proportions=function(){return arguments.length?void(proportions=arguments[0]):proportions?proportions:proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}},this._addToManager(o.scope),o.addClasses&&this._addClass("ui-droppable")},_addToManager:function(scope){$.ui.ddmanager.droppables[scope]=$.ui.ddmanager.droppables[scope]||[],$.ui.ddmanager.droppables[scope].push(this)},_splice:function(drop){for(var i=0;i<drop.length;i++)drop[i]===this&&drop.splice(i,1)},_destroy:function(){var drop=$.ui.ddmanager.droppables[this.options.scope];this._splice(drop)},_setOption:function(key,value){if("accept"===key)this.accept=$.isFunction(value)?value:function(d){return d.is(value)};else if("scope"===key){var drop=$.ui.ddmanager.droppables[this.options.scope];this._splice(drop),this._addToManager(value)}this._super(key,value)},_activate:function(event){var draggable=$.ui.ddmanager.current;this._addActiveClass(),draggable&&this._trigger("activate",event,this.ui(draggable))},_deactivate:function(event){var draggable=$.ui.ddmanager.current;this._removeActiveClass(),draggable&&this._trigger("deactivate",event,this.ui(draggable))},_over:function(event){var draggable=$.ui.ddmanager.current;draggable&&(draggable.currentItem||draggable.element)[0]!==this.element[0]&&this.accept.call(this.element[0],draggable.currentItem||draggable.element)&&(this._addHoverClass(),this._trigger("over",event,this.ui(draggable)))},_out:function(event){var draggable=$.ui.ddmanager.current;draggable&&(draggable.currentItem||draggable.element)[0]!==this.element[0]&&this.accept.call(this.element[0],draggable.currentItem||draggable.element)&&(this._removeHoverClass(),this._trigger("out",event,this.ui(draggable)))},_drop:function(event,custom){var draggable=custom||$.ui.ddmanager.current,childrenIntersection=!1;return!(!draggable||(draggable.currentItem||draggable.element)[0]===this.element[0])&&(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var inst=$(this).droppable("instance");if(inst.options.greedy&&!inst.options.disabled&&inst.options.scope===draggable.options.scope&&inst.accept.call(inst.element[0],draggable.currentItem||draggable.element)&&intersect(draggable,$.extend(inst,{offset:inst.element.offset()}),inst.options.tolerance,event))return childrenIntersection=!0,!1}),!childrenIntersection&&(!!this.accept.call(this.element[0],draggable.currentItem||draggable.element)&&(this._removeActiveClass(),this._removeHoverClass(),this._trigger("drop",event,this.ui(draggable)),this.element)))},ui:function(c){return{draggable:c.currentItem||c.element,helper:c.helper,position:c.position,offset:c.positionAbs}},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}});var intersect=$.ui.intersect=function(){function isOverAxis(x,reference,size){return x>=reference&&x<reference+size}return function(draggable,droppable,toleranceMode,event){if(!droppable.offset)return!1;var x1=(draggable.positionAbs||draggable.position.absolute).left+draggable.margins.left,y1=(draggable.positionAbs||draggable.position.absolute).top+draggable.margins.top,x2=x1+draggable.helperProportions.width,y2=y1+draggable.helperProportions.height,l=droppable.offset.left,t=droppable.offset.top,r=l+droppable.proportions().width,b=t+droppable.proportions().height;switch(toleranceMode){case"fit":return l<=x1&&x2<=r&&t<=y1&&y2<=b;case"intersect":return l<x1+draggable.helperProportions.width/2&&x2-draggable.helperProportions.width/2<r&&t<y1+draggable.helperProportions.height/2&&y2-draggable.helperProportions.height/2<b;case"pointer":return isOverAxis(event.pageY,t,droppable.proportions().height)&&isOverAxis(event.pageX,l,droppable.proportions().width);case"touch":return(y1>=t&&y1<=b||y2>=t&&y2<=b||y1<t&&y2>b)&&(x1>=l&&x1<=r||x2>=l&&x2<=r||x1<l&&x2>r);default:return!1}}}();$.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(t,event){var i,j,m=$.ui.ddmanager.droppables[t.options.scope]||[],type=event?event.type:null,list=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();droppablesLoop:for(i=0;i<m.length;i++)if(!(m[i].options.disabled||t&&!m[i].accept.call(m[i].element[0],t.currentItem||t.element))){for(j=0;j<list.length;j++)if(list[j]===m[i].element[0]){m[i].proportions().height=0;continue droppablesLoop}m[i].visible="none"!==m[i].element.css("display"),m[i].visible&&("mousedown"===type&&m[i]._activate.call(m[i],event),m[i].offset=m[i].element.offset(),m[i].proportions({width:m[i].element[0].offsetWidth,height:m[i].element[0].offsetHeight}))}},drop:function(draggable,event){var dropped=!1;return $.each(($.ui.ddmanager.droppables[draggable.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&intersect(draggable,this,this.options.tolerance,event)&&(dropped=this._drop.call(this,event)||dropped),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],draggable.currentItem||draggable.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,event)))}),dropped},dragStart:function(draggable,event){draggable.element.parentsUntil("body").on("scroll.droppable",function(){draggable.options.refreshPositions||$.ui.ddmanager.prepareOffsets(draggable,event)})},drag:function(draggable,event){draggable.options.refreshPositions&&$.ui.ddmanager.prepareOffsets(draggable,event),$.each($.ui.ddmanager.droppables[draggable.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var parentInstance,scope,parent,intersects=intersect(draggable,this,this.options.tolerance,event),c=!intersects&&this.isover?"isout":intersects&&!this.isover?"isover":null;c&&(this.options.greedy&&(scope=this.options.scope,parent=this.element.parents(":data(ui-droppable)").filter(function(){return $(this).droppable("instance").options.scope===scope}),parent.length&&(parentInstance=$(parent[0]).droppable("instance"),parentInstance.greedyChild="isover"===c)),parentInstance&&"isover"===c&&(parentInstance.isover=!1,parentInstance.isout=!0,parentInstance._out.call(parentInstance,event)),this[c]=!0,this["isout"===c?"isover":"isout"]=!1,this["isover"===c?"_over":"_out"].call(this,event),parentInstance&&"isout"===c&&(parentInstance.isout=!1,parentInstance.isover=!0,parentInstance._over.call(parentInstance,event)))}})},dragStop:function(draggable,event){draggable.element.parentsUntil("body").off("scroll.droppable"),draggable.options.refreshPositions||$.ui.ddmanager.prepareOffsets(draggable,event)}},$.uiBackCompat!==!1&&$.widget("ui.droppable",$.ui.droppable,{options:{hoverClass:!1,activeClass:!1},_addActiveClass:function(){this._super(),this.options.activeClass&&this.element.addClass(this.options.activeClass)},_removeActiveClass:function(){this._super(),this.options.activeClass&&this.element.removeClass(this.options.activeClass)},_addHoverClass:function(){this._super(),this.options.hoverClass&&this.element.addClass(this.options.hoverClass)},_removeHoverClass:function(){this._super(),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass)}});$.ui.droppable;$.widget("ui.resizable",$.ui.mouse,{version:"1.12.0",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(value){return parseFloat(value)||0},_isNumber:function(value){return!isNaN(parseFloat(value))},_hasScroll:function(el,a){if("hidden"===$(el).css("overflow"))return!1;var scroll=a&&"left"===a?"scrollLeft":"scrollTop",has=!1;return el[scroll]>0||(el[scroll]=1,has=el[scroll]>0,el[scroll]=0,has)},_create:function(){var margins,o=this.options,that=this;this._addClass("ui-resizable"),$.extend(this,{_aspectRatio:!!o.aspectRatio,aspectRatio:o.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:o.helper||o.ghost||o.animate?o.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap($("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,margins={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(margins),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(margins),this._proportionallyResize()),this._setupHandles(),o.autoHide&&$(this.element).on("mouseenter",function(){o.disabled||(that._removeClass("ui-resizable-autohide"),that._handles.show())}).on("mouseleave",function(){o.disabled||that.resizing||(that._addClass("ui-resizable-autohide"),that._handles.hide())}),this._mouseInit()},_destroy:function(){this._mouseDestroy();var wrapper,_destroy=function(exp){$(exp).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(_destroy(this.element),wrapper=this.element,this.originalElement.css({position:wrapper.css("position"),width:wrapper.outerWidth(),height:wrapper.outerHeight(),top:wrapper.css("top"),left:wrapper.css("left")}).insertAfter(wrapper),wrapper.remove()),this.originalElement.css("resize",this.originalResizeStyle),_destroy(this.originalElement),this},_setOption:function(key,value){switch(this._super(key,value),key){case"handles":this._removeHandles(),this._setupHandles()}},_setupHandles:function(){var handle,i,n,hname,axis,o=this.options,that=this;if(this.handles=o.handles||($(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=$(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),n=this.handles.split(","),this.handles={},i=0;i<n.length;i++)handle=$.trim(n[i]),hname="ui-resizable-"+handle,axis=$("<div>"),this._addClass(axis,"ui-resizable-handle "+hname),axis.css({zIndex:o.zIndex}),this.handles[handle]=".ui-resizable-"+handle,this.element.append(axis);this._renderAxis=function(target){var i,axis,padPos,padWrapper;target=target||this.element;for(i in this.handles)this.handles[i].constructor===String?this.handles[i]=this.element.children(this.handles[i]).first().show():(this.handles[i].jquery||this.handles[i].nodeType)&&(this.handles[i]=$(this.handles[i]),this._on(this.handles[i],{mousedown:that._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(axis=$(this.handles[i],this.element),padWrapper=/sw|ne|nw|se|n|s/.test(i)?axis.outerHeight():axis.outerWidth(),padPos=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),target.css(padPos,padWrapper),this._proportionallyResize()),this._handles=this._handles.add(this.handles[i])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",function(){that.resizing||(this.className&&(axis=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),that.axis=axis&&axis[1]?axis[1]:"se")}),o.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(event){var i,handle,capture=!1;for(i in this.handles)handle=$(this.handles[i])[0],(handle===event.target||$.contains(handle,event.target))&&(capture=!0);return!this.options.disabled&&capture},_mouseStart:function(event){var curleft,curtop,cursor,o=this.options,el=this.element;return this.resizing=!0,this._renderProxy(),curleft=this._num(this.helper.css("left")),curtop=this._num(this.helper.css("top")),o.containment&&(curleft+=$(o.containment).scrollLeft()||0,curtop+=$(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:curleft,top:curtop},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:el.width(),height:el.height()},this.originalSize=this._helper?{width:el.outerWidth(),height:el.outerHeight()}:{width:el.width(),height:el.height()},this.sizeDiff={width:el.outerWidth()-el.width(),height:el.outerHeight()-el.height()},this.originalPosition={left:curleft,top:curtop},this.originalMousePosition={left:event.pageX,top:event.pageY},this.aspectRatio="number"==typeof o.aspectRatio?o.aspectRatio:this.originalSize.width/this.originalSize.height||1,
cursor=$(".ui-resizable-"+this.axis).css("cursor"),$("body").css("cursor","auto"===cursor?this.axis+"-resize":cursor),this._addClass("ui-resizable-resizing"),this._propagate("start",event),!0},_mouseDrag:function(event){var data,props,smp=this.originalMousePosition,a=this.axis,dx=event.pageX-smp.left||0,dy=event.pageY-smp.top||0,trigger=this._change[a];return this._updatePrevProperties(),!!trigger&&(data=trigger.apply(this,[event,dx,dy]),this._updateVirtualBoundaries(event.shiftKey),(this._aspectRatio||event.shiftKey)&&(data=this._updateRatio(data,event)),data=this._respectSize(data,event),this._updateCache(data),this._propagate("resize",event),props=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),$.isEmptyObject(props)||(this._updatePrevProperties(),this._trigger("resize",event,this.ui()),this._applyChanges()),!1)},_mouseStop:function(event){this.resizing=!1;var pr,ista,soffseth,soffsetw,s,left,top,o=this.options,that=this;return this._helper&&(pr=this._proportionallyResizeElements,ista=pr.length&&/textarea/i.test(pr[0].nodeName),soffseth=ista&&this._hasScroll(pr[0],"left")?0:that.sizeDiff.height,soffsetw=ista?0:that.sizeDiff.width,s={width:that.helper.width()-soffsetw,height:that.helper.height()-soffseth},left=parseFloat(that.element.css("left"))+(that.position.left-that.originalPosition.left)||null,top=parseFloat(that.element.css("top"))+(that.position.top-that.originalPosition.top)||null,o.animate||this.element.css($.extend(s,{top:top,left:left})),that.helper.height(that.size.height),that.helper.width(that.size.width),this._helper&&!o.animate&&this._proportionallyResize()),$("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",event),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var props={};return this.position.top!==this.prevPosition.top&&(props.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(props.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(props.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(props.height=this.size.height+"px"),this.helper.css(props),props},_updateVirtualBoundaries:function(forceAspectRatio){var pMinWidth,pMaxWidth,pMinHeight,pMaxHeight,b,o=this.options;b={minWidth:this._isNumber(o.minWidth)?o.minWidth:0,maxWidth:this._isNumber(o.maxWidth)?o.maxWidth:1/0,minHeight:this._isNumber(o.minHeight)?o.minHeight:0,maxHeight:this._isNumber(o.maxHeight)?o.maxHeight:1/0},(this._aspectRatio||forceAspectRatio)&&(pMinWidth=b.minHeight*this.aspectRatio,pMinHeight=b.minWidth/this.aspectRatio,pMaxWidth=b.maxHeight*this.aspectRatio,pMaxHeight=b.maxWidth/this.aspectRatio,pMinWidth>b.minWidth&&(b.minWidth=pMinWidth),pMinHeight>b.minHeight&&(b.minHeight=pMinHeight),pMaxWidth<b.maxWidth&&(b.maxWidth=pMaxWidth),pMaxHeight<b.maxHeight&&(b.maxHeight=pMaxHeight)),this._vBoundaries=b},_updateCache:function(data){this.offset=this.helper.offset(),this._isNumber(data.left)&&(this.position.left=data.left),this._isNumber(data.top)&&(this.position.top=data.top),this._isNumber(data.height)&&(this.size.height=data.height),this._isNumber(data.width)&&(this.size.width=data.width)},_updateRatio:function(data){var cpos=this.position,csize=this.size,a=this.axis;return this._isNumber(data.height)?data.width=data.height*this.aspectRatio:this._isNumber(data.width)&&(data.height=data.width/this.aspectRatio),"sw"===a&&(data.left=cpos.left+(csize.width-data.width),data.top=null),"nw"===a&&(data.top=cpos.top+(csize.height-data.height),data.left=cpos.left+(csize.width-data.width)),data},_respectSize:function(data){var o=this._vBoundaries,a=this.axis,ismaxw=this._isNumber(data.width)&&o.maxWidth&&o.maxWidth<data.width,ismaxh=this._isNumber(data.height)&&o.maxHeight&&o.maxHeight<data.height,isminw=this._isNumber(data.width)&&o.minWidth&&o.minWidth>data.width,isminh=this._isNumber(data.height)&&o.minHeight&&o.minHeight>data.height,dw=this.originalPosition.left+this.originalSize.width,dh=this.originalPosition.top+this.originalSize.height,cw=/sw|nw|w/.test(a),ch=/nw|ne|n/.test(a);return isminw&&(data.width=o.minWidth),isminh&&(data.height=o.minHeight),ismaxw&&(data.width=o.maxWidth),ismaxh&&(data.height=o.maxHeight),isminw&&cw&&(data.left=dw-o.minWidth),ismaxw&&cw&&(data.left=dw-o.maxWidth),isminh&&ch&&(data.top=dh-o.minHeight),ismaxh&&ch&&(data.top=dh-o.maxHeight),data.width||data.height||data.left||!data.top?data.width||data.height||data.top||!data.left||(data.left=null):data.top=null,data},_getPaddingPlusBorderDimensions:function(element){for(var i=0,widths=[],borders=[element.css("borderTopWidth"),element.css("borderRightWidth"),element.css("borderBottomWidth"),element.css("borderLeftWidth")],paddings=[element.css("paddingTop"),element.css("paddingRight"),element.css("paddingBottom"),element.css("paddingLeft")];i<4;i++)widths[i]=parseFloat(borders[i])||0,widths[i]+=parseFloat(paddings[i])||0;return{height:widths[0]+widths[2],width:widths[1]+widths[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var prel,i=0,element=this.helper||this.element;i<this._proportionallyResizeElements.length;i++)prel=this._proportionallyResizeElements[i],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(prel)),prel.css({height:element.height()-this.outerDimensions.height||0,width:element.width()-this.outerDimensions.width||0})},_renderProxy:function(){var el=this.element,o=this.options;this.elementOffset=el.offset(),this._helper?(this.helper=this.helper||$("<div style='overflow:hidden;'></div>"),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++o.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(event,dx){return{width:this.originalSize.width+dx}},w:function(event,dx){var cs=this.originalSize,sp=this.originalPosition;return{left:sp.left+dx,width:cs.width-dx}},n:function(event,dx,dy){var cs=this.originalSize,sp=this.originalPosition;return{top:sp.top+dy,height:cs.height-dy}},s:function(event,dx,dy){return{height:this.originalSize.height+dy}},se:function(event,dx,dy){return $.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[event,dx,dy]))},sw:function(event,dx,dy){return $.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[event,dx,dy]))},ne:function(event,dx,dy){return $.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[event,dx,dy]))},nw:function(event,dx,dy){return $.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[event,dx,dy]))}},_propagate:function(n,event){$.ui.plugin.call(this,n,[event,this.ui()]),"resize"!==n&&this._trigger(n,event,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),$.ui.plugin.add("resizable","animate",{stop:function(event){var that=$(this).resizable("instance"),o=that.options,pr=that._proportionallyResizeElements,ista=pr.length&&/textarea/i.test(pr[0].nodeName),soffseth=ista&&that._hasScroll(pr[0],"left")?0:that.sizeDiff.height,soffsetw=ista?0:that.sizeDiff.width,style={width:that.size.width-soffsetw,height:that.size.height-soffseth},left=parseFloat(that.element.css("left"))+(that.position.left-that.originalPosition.left)||null,top=parseFloat(that.element.css("top"))+(that.position.top-that.originalPosition.top)||null;that.element.animate($.extend(style,top&&left?{top:top,left:left}:{}),{duration:o.animateDuration,easing:o.animateEasing,step:function(){var data={width:parseFloat(that.element.css("width")),height:parseFloat(that.element.css("height")),top:parseFloat(that.element.css("top")),left:parseFloat(that.element.css("left"))};pr&&pr.length&&$(pr[0]).css({width:data.width,height:data.height}),that._updateCache(data),that._propagate("resize",event)}})}}),$.ui.plugin.add("resizable","containment",{start:function(){var element,p,co,ch,cw,width,height,that=$(this).resizable("instance"),o=that.options,el=that.element,oc=o.containment,ce=oc instanceof $?oc.get(0):/parent/.test(oc)?el.parent().get(0):oc;ce&&(that.containerElement=$(ce),/document/.test(oc)||oc===document?(that.containerOffset={left:0,top:0},that.containerPosition={left:0,top:0},that.parentData={element:$(document),left:0,top:0,width:$(document).width(),height:$(document).height()||document.body.parentNode.scrollHeight}):(element=$(ce),p=[],$(["Top","Right","Left","Bottom"]).each(function(i,name){p[i]=that._num(element.css("padding"+name))}),that.containerOffset=element.offset(),that.containerPosition=element.position(),that.containerSize={height:element.innerHeight()-p[3],width:element.innerWidth()-p[1]},co=that.containerOffset,ch=that.containerSize.height,cw=that.containerSize.width,width=that._hasScroll(ce,"left")?ce.scrollWidth:cw,height=that._hasScroll(ce)?ce.scrollHeight:ch,that.parentData={element:ce,left:co.left,top:co.top,width:width,height:height}))},resize:function(event){var woset,hoset,isParent,isOffsetRelative,that=$(this).resizable("instance"),o=that.options,co=that.containerOffset,cp=that.position,pRatio=that._aspectRatio||event.shiftKey,cop={top:0,left:0},ce=that.containerElement,continueResize=!0;ce[0]!==document&&/static/.test(ce.css("position"))&&(cop=co),cp.left<(that._helper?co.left:0)&&(that.size.width=that.size.width+(that._helper?that.position.left-co.left:that.position.left-cop.left),pRatio&&(that.size.height=that.size.width/that.aspectRatio,continueResize=!1),that.position.left=o.helper?co.left:0),cp.top<(that._helper?co.top:0)&&(that.size.height=that.size.height+(that._helper?that.position.top-co.top:that.position.top),pRatio&&(that.size.width=that.size.height*that.aspectRatio,continueResize=!1),that.position.top=that._helper?co.top:0),isParent=that.containerElement.get(0)===that.element.parent().get(0),isOffsetRelative=/relative|absolute/.test(that.containerElement.css("position")),isParent&&isOffsetRelative?(that.offset.left=that.parentData.left+that.position.left,that.offset.top=that.parentData.top+that.position.top):(that.offset.left=that.element.offset().left,that.offset.top=that.element.offset().top),woset=Math.abs(that.sizeDiff.width+(that._helper?that.offset.left-cop.left:that.offset.left-co.left)),hoset=Math.abs(that.sizeDiff.height+(that._helper?that.offset.top-cop.top:that.offset.top-co.top)),woset+that.size.width>=that.parentData.width&&(that.size.width=that.parentData.width-woset,pRatio&&(that.size.height=that.size.width/that.aspectRatio,continueResize=!1)),hoset+that.size.height>=that.parentData.height&&(that.size.height=that.parentData.height-hoset,pRatio&&(that.size.width=that.size.height*that.aspectRatio,continueResize=!1)),continueResize||(that.position.left=that.prevPosition.left,that.position.top=that.prevPosition.top,that.size.width=that.prevSize.width,that.size.height=that.prevSize.height)},stop:function(){var that=$(this).resizable("instance"),o=that.options,co=that.containerOffset,cop=that.containerPosition,ce=that.containerElement,helper=$(that.helper),ho=helper.offset(),w=helper.outerWidth()-that.sizeDiff.width,h=helper.outerHeight()-that.sizeDiff.height;that._helper&&!o.animate&&/relative/.test(ce.css("position"))&&$(this).css({left:ho.left-cop.left-co.left,width:w,height:h}),that._helper&&!o.animate&&/static/.test(ce.css("position"))&&$(this).css({left:ho.left-cop.left-co.left,width:w,height:h})}}),$.ui.plugin.add("resizable","alsoResize",{start:function(){var that=$(this).resizable("instance"),o=that.options;$(o.alsoResize).each(function(){var el=$(this);el.data("ui-resizable-alsoresize",{width:parseFloat(el.width()),height:parseFloat(el.height()),left:parseFloat(el.css("left")),top:parseFloat(el.css("top"))})})},resize:function(event,ui){var that=$(this).resizable("instance"),o=that.options,os=that.originalSize,op=that.originalPosition,delta={height:that.size.height-os.height||0,width:that.size.width-os.width||0,top:that.position.top-op.top||0,left:that.position.left-op.left||0};$(o.alsoResize).each(function(){var el=$(this),start=$(this).data("ui-resizable-alsoresize"),style={},css=el.parents(ui.originalElement[0]).length?["width","height"]:["width","height","top","left"];$.each(css,function(i,prop){var sum=(start[prop]||0)+(delta[prop]||0);sum&&sum>=0&&(style[prop]=sum||null)}),el.css(style)})},stop:function(){$(this).removeData("ui-resizable-alsoresize")}}),$.ui.plugin.add("resizable","ghost",{start:function(){var that=$(this).resizable("instance"),cs=that.size;that.ghost=that.originalElement.clone(),that.ghost.css({opacity:.25,display:"block",position:"relative",height:cs.height,width:cs.width,margin:0,left:0,top:0}),that._addClass(that.ghost,"ui-resizable-ghost"),$.uiBackCompat!==!1&&"string"==typeof that.options.ghost&&that.ghost.addClass(this.options.ghost),that.ghost.appendTo(that.helper)},resize:function(){var that=$(this).resizable("instance");that.ghost&&that.ghost.css({position:"relative",height:that.size.height,width:that.size.width})},stop:function(){var that=$(this).resizable("instance");that.ghost&&that.helper&&that.helper.get(0).removeChild(that.ghost.get(0))}}),$.ui.plugin.add("resizable","grid",{resize:function(){var outerDimensions,that=$(this).resizable("instance"),o=that.options,cs=that.size,os=that.originalSize,op=that.originalPosition,a=that.axis,grid="number"==typeof o.grid?[o.grid,o.grid]:o.grid,gridX=grid[0]||1,gridY=grid[1]||1,ox=Math.round((cs.width-os.width)/gridX)*gridX,oy=Math.round((cs.height-os.height)/gridY)*gridY,newWidth=os.width+ox,newHeight=os.height+oy,isMaxWidth=o.maxWidth&&o.maxWidth<newWidth,isMaxHeight=o.maxHeight&&o.maxHeight<newHeight,isMinWidth=o.minWidth&&o.minWidth>newWidth,isMinHeight=o.minHeight&&o.minHeight>newHeight;o.grid=grid,isMinWidth&&(newWidth+=gridX),isMinHeight&&(newHeight+=gridY),isMaxWidth&&(newWidth-=gridX),isMaxHeight&&(newHeight-=gridY),/^(se|s|e)$/.test(a)?(that.size.width=newWidth,that.size.height=newHeight):/^(ne)$/.test(a)?(that.size.width=newWidth,that.size.height=newHeight,that.position.top=op.top-oy):/^(sw)$/.test(a)?(that.size.width=newWidth,that.size.height=newHeight,that.position.left=op.left-ox):((newHeight-gridY<=0||newWidth-gridX<=0)&&(outerDimensions=that._getPaddingPlusBorderDimensions(this)),newHeight-gridY>0?(that.size.height=newHeight,that.position.top=op.top-oy):(newHeight=gridY-outerDimensions.height,that.size.height=newHeight,that.position.top=op.top+os.height-newHeight),newWidth-gridX>0?(that.size.width=newWidth,that.position.left=op.left-ox):(newWidth=gridX-outerDimensions.width,that.size.width=newWidth,that.position.left=op.left+os.width-newWidth))}});$.ui.resizable,$.widget("ui.selectable",$.ui.mouse,{version:"1.12.0",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var that=this;this._addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){that.elementPos=$(that.element[0]).offset(),that.selectees=$(that.options.filter,that.element[0]),that._addClass(that.selectees,"ui-selectee"),that.selectees.each(function(){var $this=$(this),selecteeOffset=$this.offset(),pos={left:selecteeOffset.left-that.elementPos.left,top:selecteeOffset.top-that.elementPos.top};$.data(this,"selectable-item",{element:this,$element:$this,left:pos.left,top:pos.top,right:pos.left+$this.outerWidth(),bottom:pos.top+$this.outerHeight(),startselected:!1,selected:$this.hasClass("ui-selected"),selecting:$this.hasClass("ui-selecting"),unselecting:$this.hasClass("ui-unselecting")})})},this.refresh(),this._mouseInit(),this.helper=$("<div>"),this._addClass(this.helper,"ui-selectable-helper")},_destroy:function(){this.selectees.removeData("selectable-item"),this._mouseDestroy()},_mouseStart:function(event){var that=this,options=this.options;this.opos=[event.pageX,event.pageY],this.elementPos=$(this.element[0]).offset(),this.options.disabled||(this.selectees=$(options.filter,this.element[0]),this._trigger("start",event),$(options.appendTo).append(this.helper),this.helper.css({left:event.pageX,top:event.pageY,width:0,height:0}),options.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var selectee=$.data(this,"selectable-item");selectee.startselected=!0,event.metaKey||event.ctrlKey||(that._removeClass(selectee.$element,"ui-selected"),selectee.selected=!1,that._addClass(selectee.$element,"ui-unselecting"),selectee.unselecting=!0,that._trigger("unselecting",event,{unselecting:selectee.element}))}),$(event.target).parents().addBack().each(function(){var doSelect,selectee=$.data(this,"selectable-item");if(selectee)return doSelect=!event.metaKey&&!event.ctrlKey||!selectee.$element.hasClass("ui-selected"),that._removeClass(selectee.$element,doSelect?"ui-unselecting":"ui-selected")._addClass(selectee.$element,doSelect?"ui-selecting":"ui-unselecting"),selectee.unselecting=!doSelect,selectee.selecting=doSelect,selectee.selected=doSelect,doSelect?that._trigger("selecting",event,{selecting:selectee.element}):that._trigger("unselecting",event,{unselecting:selectee.element}),!1}))},_mouseDrag:function(event){if(this.dragged=!0,!this.options.disabled){var tmp,that=this,options=this.options,x1=this.opos[0],y1=this.opos[1],x2=event.pageX,y2=event.pageY;return x1>x2&&(tmp=x2,x2=x1,x1=tmp),y1>y2&&(tmp=y2,y2=y1,y1=tmp),this.helper.css({left:x1,top:y1,width:x2-x1,height:y2-y1}),this.selectees.each(function(){var selectee=$.data(this,"selectable-item"),hit=!1,offset={};selectee&&selectee.element!==that.element[0]&&(offset.left=selectee.left+that.elementPos.left,offset.right=selectee.right+that.elementPos.left,offset.top=selectee.top+that.elementPos.top,offset.bottom=selectee.bottom+that.elementPos.top,"touch"===options.tolerance?hit=!(offset.left>x2||offset.right<x1||offset.top>y2||offset.bottom<y1):"fit"===options.tolerance&&(hit=offset.left>x1&&offset.right<x2&&offset.top>y1&&offset.bottom<y2),hit?(selectee.selected&&(that._removeClass(selectee.$element,"ui-selected"),selectee.selected=!1),selectee.unselecting&&(that._removeClass(selectee.$element,"ui-unselecting"),selectee.unselecting=!1),selectee.selecting||(that._addClass(selectee.$element,"ui-selecting"),selectee.selecting=!0,that._trigger("selecting",event,{selecting:selectee.element}))):(selectee.selecting&&((event.metaKey||event.ctrlKey)&&selectee.startselected?(that._removeClass(selectee.$element,"ui-selecting"),selectee.selecting=!1,that._addClass(selectee.$element,"ui-selected"),selectee.selected=!0):(that._removeClass(selectee.$element,"ui-selecting"),selectee.selecting=!1,selectee.startselected&&(that._addClass(selectee.$element,"ui-unselecting"),selectee.unselecting=!0),that._trigger("unselecting",event,{unselecting:selectee.element}))),selectee.selected&&(event.metaKey||event.ctrlKey||selectee.startselected||(that._removeClass(selectee.$element,"ui-selected"),selectee.selected=!1,that._addClass(selectee.$element,"ui-unselecting"),selectee.unselecting=!0,that._trigger("unselecting",event,{unselecting:selectee.element})))))}),!1}},_mouseStop:function(event){var that=this;return this.dragged=!1,$(".ui-unselecting",this.element[0]).each(function(){var selectee=$.data(this,"selectable-item");that._removeClass(selectee.$element,"ui-unselecting"),selectee.unselecting=!1,selectee.startselected=!1,that._trigger("unselected",event,{unselected:selectee.element})}),$(".ui-selecting",this.element[0]).each(function(){var selectee=$.data(this,"selectable-item");that._removeClass(selectee.$element,"ui-selecting")._addClass(selectee.$element,"ui-selected"),selectee.selecting=!1,selectee.selected=!0,selectee.startselected=!0,that._trigger("selected",event,{selected:selectee.element})}),this._trigger("stop",event),this.helper.remove(),!1}}),$.widget("ui.sortable",$.ui.mouse,{version:"1.12.0",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(x,reference,size){return x>=reference&&x<reference+size},_isFloating:function(item){return/left|right/.test(item.css("float"))||/inline|table-cell/.test(item.css("display"))},_create:function(){this.containerCache={},this._addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(key,value){this._super(key,value),"handle"===key&&this._setHandleClassName()},_setHandleClassName:function(){var that=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle"),$.each(this.items,function(){that._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")})},_destroy:function(){this._mouseDestroy();for(var i=this.items.length-1;i>=0;i--)this.items[i].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(event,overrideHandle){var currentItem=null,validHandle=!1,that=this;return!this.reverting&&(!this.options.disabled&&"static"!==this.options.type&&(this._refreshItems(event),$(event.target).parents().each(function(){if($.data(this,that.widgetName+"-item")===that)return currentItem=$(this),!1}),$.data(event.target,that.widgetName+"-item")===that&&(currentItem=$(event.target)),!!currentItem&&(!(this.options.handle&&!overrideHandle&&($(this.options.handle,currentItem).find("*").addBack().each(function(){this===event.target&&(validHandle=!0)}),!validHandle))&&(this.currentItem=currentItem,this._removeCurrentsFromItems(),!0))))},_mouseStart:function(event,overrideHandle,noActivation){var i,body,o=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(event),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},$.extend(this.offset,{click:{left:event.pageX-this.offset.left,top:event.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(event),this.originalPageX=event.pageX,this.originalPageY=event.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&"auto"!==o.cursor&&(body=this.document.find("body"),this.storedCursor=body.css("cursor"),body.css("cursor",o.cursor),this.storedStylesheet=$("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(body)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",event,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!noActivation)for(i=this.containers.length-1;i>=0;i--)this.containers[i]._trigger("activate",event,this._uiHash(this));return $.ui.ddmanager&&($.ui.ddmanager.current=this),$.ui.ddmanager&&!o.dropBehaviour&&$.ui.ddmanager.prepareOffsets(this,event),this.dragging=!0,this._addClass(this.helper,"ui-sortable-helper"),this._mouseDrag(event),!0},_mouseDrag:function(event){var i,item,itemElement,intersection,o=this.options,scrolled=!1;for(this.position=this._generatePosition(event),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-event.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=scrolled=this.scrollParent[0].scrollTop+o.scrollSpeed:event.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=scrolled=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-event.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=scrolled=this.scrollParent[0].scrollLeft+o.scrollSpeed:event.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=scrolled=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(event.pageY-this.document.scrollTop()<o.scrollSensitivity?scrolled=this.document.scrollTop(this.document.scrollTop()-o.scrollSpeed):this.window.height()-(event.pageY-this.document.scrollTop())<o.scrollSensitivity&&(scrolled=this.document.scrollTop(this.document.scrollTop()+o.scrollSpeed)),event.pageX-this.document.scrollLeft()<o.scrollSensitivity?scrolled=this.document.scrollLeft(this.document.scrollLeft()-o.scrollSpeed):this.window.width()-(event.pageX-this.document.scrollLeft())<o.scrollSensitivity&&(scrolled=this.document.scrollLeft(this.document.scrollLeft()+o.scrollSpeed))),scrolled!==!1&&$.ui.ddmanager&&!o.dropBehaviour&&$.ui.ddmanager.prepareOffsets(this,event)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(item=this.items[i],itemElement=item.item[0],intersection=this._intersectsWithPointer(item),intersection&&item.instance===this.currentContainer&&!(itemElement===this.currentItem[0]||this.placeholder[1===intersection?"next":"prev"]()[0]===itemElement||$.contains(this.placeholder[0],itemElement)||"semi-dynamic"===this.options.type&&$.contains(this.element[0],itemElement))){if(this.direction=1===intersection?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(item))break;this._rearrange(event,item),this._trigger("change",event,this._uiHash());break}return this._contactContainers(event),$.ui.ddmanager&&$.ui.ddmanager.drag(this,event),this._trigger("sort",event,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(event,noPropagation){if(event){if($.ui.ddmanager&&!this.options.dropBehaviour&&$.ui.ddmanager.drop(this,event),this.options.revert){var that=this,cur=this.placeholder.offset(),axis=this.options.axis,animation={};axis&&"x"!==axis||(animation.left=cur.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),axis&&"y"!==axis||(animation.top=cur.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,$(this.helper).animate(animation,parseInt(this.options.revert,10)||500,function(){that._clear(event)})}else this._clear(event,noPropagation);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?(this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")):this.currentItem.show();for(var i=this.containers.length-1;i>=0;i--)this.containers[i]._trigger("deactivate",null,this._uiHash(this)),this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",null,this._uiHash(this)),this.containers[i].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),$.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?$(this.domPosition.prev).after(this.currentItem):$(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(o){var items=this._getItemsAsjQuery(o&&o.connected),str=[];return o=o||{},$(items).each(function(){var res=($(o.item||this).attr(o.attribute||"id")||"").match(o.expression||/(.+)[\-=_](.+)/);res&&str.push((o.key||res[1]+"[]")+"="+(o.key&&o.expression?res[1]:res[2]))}),!str.length&&o.key&&str.push(o.key+"="),str.join("&")},toArray:function(o){var items=this._getItemsAsjQuery(o&&o.connected),ret=[];return o=o||{},items.each(function(){ret.push($(o.item||this).attr(o.attribute||"id")||"")}),ret},_intersectsWith:function(item){var x1=this.positionAbs.left,x2=x1+this.helperProportions.width,y1=this.positionAbs.top,y2=y1+this.helperProportions.height,l=item.left,r=l+item.width,t=item.top,b=t+item.height,dyClick=this.offset.click.top,dxClick=this.offset.click.left,isOverElementHeight="x"===this.options.axis||y1+dyClick>t&&y1+dyClick<b,isOverElementWidth="y"===this.options.axis||x1+dxClick>l&&x1+dxClick<r,isOverElement=isOverElementHeight&&isOverElementWidth;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>item[this.floating?"width":"height"]?isOverElement:l<x1+this.helperProportions.width/2&&x2-this.helperProportions.width/2<r&&t<y1+this.helperProportions.height/2&&y2-this.helperProportions.height/2<b},_intersectsWithPointer:function(item){var verticalDirection,horizontalDirection,isOverElementHeight="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,item.top,item.height),isOverElementWidth="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,item.left,item.width),isOverElement=isOverElementHeight&&isOverElementWidth;return!!isOverElement&&(verticalDirection=this._getDragVerticalDirection(),horizontalDirection=this._getDragHorizontalDirection(),this.floating?"right"===horizontalDirection||"down"===verticalDirection?2:1:verticalDirection&&("down"===verticalDirection?2:1))},_intersectsWithSides:function(item){var isOverBottomHalf=this._isOverAxis(this.positionAbs.top+this.offset.click.top,item.top+item.height/2,item.height),isOverRightHalf=this._isOverAxis(this.positionAbs.left+this.offset.click.left,item.left+item.width/2,item.width),verticalDirection=this._getDragVerticalDirection(),horizontalDirection=this._getDragHorizontalDirection();return this.floating&&horizontalDirection?"right"===horizontalDirection&&isOverRightHalf||"left"===horizontalDirection&&!isOverRightHalf:verticalDirection&&("down"===verticalDirection&&isOverBottomHalf||"up"===verticalDirection&&!isOverBottomHalf)},_getDragVerticalDirection:function(){var delta=this.positionAbs.top-this.lastPositionAbs.top;return 0!==delta&&(delta>0?"down":"up")},_getDragHorizontalDirection:function(){var delta=this.positionAbs.left-this.lastPositionAbs.left;return 0!==delta&&(delta>0?"right":"left")},refresh:function(event){return this._refreshItems(event),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var options=this.options;return options.connectWith.constructor===String?[options.connectWith]:options.connectWith},_getItemsAsjQuery:function(connected){function addItems(){items.push(this)}var i,j,cur,inst,items=[],queries=[],connectWith=this._connectWith();if(connectWith&&connected)for(i=connectWith.length-1;i>=0;i--)for(cur=$(connectWith[i],this.document[0]),
j=cur.length-1;j>=0;j--)inst=$.data(cur[j],this.widgetFullName),inst&&inst!==this&&!inst.options.disabled&&queries.push([$.isFunction(inst.options.items)?inst.options.items.call(inst.element):$(inst.options.items,inst.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),inst]);for(queries.push([$.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):$(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),i=queries.length-1;i>=0;i--)queries[i][0].each(addItems);return $(items)},_removeCurrentsFromItems:function(){var list=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=$.grep(this.items,function(item){for(var j=0;j<list.length;j++)if(list[j]===item.item[0])return!1;return!0})},_refreshItems:function(event){this.items=[],this.containers=[this];var i,j,cur,inst,targetData,_queries,item,queriesLength,items=this.items,queries=[[$.isFunction(this.options.items)?this.options.items.call(this.element[0],event,{item:this.currentItem}):$(this.options.items,this.element),this]],connectWith=this._connectWith();if(connectWith&&this.ready)for(i=connectWith.length-1;i>=0;i--)for(cur=$(connectWith[i],this.document[0]),j=cur.length-1;j>=0;j--)inst=$.data(cur[j],this.widgetFullName),inst&&inst!==this&&!inst.options.disabled&&(queries.push([$.isFunction(inst.options.items)?inst.options.items.call(inst.element[0],event,{item:this.currentItem}):$(inst.options.items,inst.element),inst]),this.containers.push(inst));for(i=queries.length-1;i>=0;i--)for(targetData=queries[i][1],_queries=queries[i][0],j=0,queriesLength=_queries.length;j<queriesLength;j++)item=$(_queries[j]),item.data(this.widgetName+"-item",targetData),items.push({item:item,instance:targetData,width:0,height:0,left:0,top:0})},refreshPositions:function(fast){this.floating=!!this.items.length&&("x"===this.options.axis||this._isFloating(this.items[0].item)),this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,item,t,p;for(i=this.items.length-1;i>=0;i--)item=this.items[i],item.instance!==this.currentContainer&&this.currentContainer&&item.item[0]!==this.currentItem[0]||(t=this.options.toleranceElement?$(this.options.toleranceElement,item.item):item.item,fast||(item.width=t.outerWidth(),item.height=t.outerHeight()),p=t.offset(),item.left=p.left,item.top=p.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)p=this.containers[i].element.offset(),this.containers[i].containerCache.left=p.left,this.containers[i].containerCache.top=p.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(that){that=that||this;var className,o=that.options;o.placeholder&&o.placeholder.constructor!==String||(className=o.placeholder,o.placeholder={element:function(){var nodeName=that.currentItem[0].nodeName.toLowerCase(),element=$("<"+nodeName+">",that.document[0]);return that._addClass(element,"ui-sortable-placeholder",className||that.currentItem[0].className)._removeClass(element,"ui-sortable-helper"),"tbody"===nodeName?that._createTrPlaceholder(that.currentItem.find("tr").eq(0),$("<tr>",that.document[0]).appendTo(element)):"tr"===nodeName?that._createTrPlaceholder(that.currentItem,element):"img"===nodeName&&element.attr("src",that.currentItem.attr("src")),className||element.css("visibility","hidden"),element},update:function(container,p){className&&!o.forcePlaceholderSize||(p.height()||p.height(that.currentItem.innerHeight()-parseInt(that.currentItem.css("paddingTop")||0,10)-parseInt(that.currentItem.css("paddingBottom")||0,10)),p.width()||p.width(that.currentItem.innerWidth()-parseInt(that.currentItem.css("paddingLeft")||0,10)-parseInt(that.currentItem.css("paddingRight")||0,10)))}}),that.placeholder=$(o.placeholder.element.call(that.element,that.currentItem)),that.currentItem.after(that.placeholder),o.placeholder.update(that,that.placeholder)},_createTrPlaceholder:function(sourceTr,targetTr){var that=this;sourceTr.children().each(function(){$("<td>&#160;</td>",that.document[0]).attr("colspan",$(this).attr("colspan")||1).appendTo(targetTr)})},_contactContainers:function(event){var i,j,dist,itemWithLeastDistance,posProperty,sizeProperty,cur,nearBottom,floating,axis,innermostContainer=null,innermostIndex=null;for(i=this.containers.length-1;i>=0;i--)if(!$.contains(this.currentItem[0],this.containers[i].element[0]))if(this._intersectsWith(this.containers[i].containerCache)){if(innermostContainer&&$.contains(this.containers[i].element[0],innermostContainer.element[0]))continue;innermostContainer=this.containers[i],innermostIndex=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",event,this._uiHash(this)),this.containers[i].containerCache.over=0);if(innermostContainer)if(1===this.containers.length)this.containers[innermostIndex].containerCache.over||(this.containers[innermostIndex]._trigger("over",event,this._uiHash(this)),this.containers[innermostIndex].containerCache.over=1);else{for(dist=1e4,itemWithLeastDistance=null,floating=innermostContainer.floating||this._isFloating(this.currentItem),posProperty=floating?"left":"top",sizeProperty=floating?"width":"height",axis=floating?"pageX":"pageY",j=this.items.length-1;j>=0;j--)$.contains(this.containers[innermostIndex].element[0],this.items[j].item[0])&&this.items[j].item[0]!==this.currentItem[0]&&(cur=this.items[j].item.offset()[posProperty],nearBottom=!1,event[axis]-cur>this.items[j][sizeProperty]/2&&(nearBottom=!0),Math.abs(event[axis]-cur)<dist&&(dist=Math.abs(event[axis]-cur),itemWithLeastDistance=this.items[j],this.direction=nearBottom?"up":"down"));if(!itemWithLeastDistance&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[innermostIndex])return void(this.currentContainer.containerCache.over||(this.containers[innermostIndex]._trigger("over",event,this._uiHash()),this.currentContainer.containerCache.over=1));itemWithLeastDistance?this._rearrange(event,itemWithLeastDistance,null,!0):this._rearrange(event,null,this.containers[innermostIndex].element,!0),this._trigger("change",event,this._uiHash()),this.containers[innermostIndex]._trigger("change",event,this._uiHash(this)),this.currentContainer=this.containers[innermostIndex],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[innermostIndex]._trigger("over",event,this._uiHash(this)),this.containers[innermostIndex].containerCache.over=1}},_createHelper:function(event){var o=this.options,helper=$.isFunction(o.helper)?$(o.helper.apply(this.element[0],[event,this.currentItem])):"clone"===o.helper?this.currentItem.clone():this.currentItem;return helper.parents("body").length||$("parent"!==o.appendTo?o.appendTo:this.currentItem[0].parentNode)[0].appendChild(helper[0]),helper[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),helper[0].style.width&&!o.forceHelperSize||helper.width(this.currentItem.width()),helper[0].style.height&&!o.forceHelperSize||helper.height(this.currentItem.height()),helper},_adjustOffsetFromHelper:function(obj){"string"==typeof obj&&(obj=obj.split(" ")),$.isArray(obj)&&(obj={left:+obj[0],top:+obj[1]||0}),"left"in obj&&(this.offset.click.left=obj.left+this.margins.left),"right"in obj&&(this.offset.click.left=this.helperProportions.width-obj.right+this.margins.left),"top"in obj&&(this.offset.click.top=obj.top+this.margins.top),"bottom"in obj&&(this.offset.click.top=this.helperProportions.height-obj.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var po=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&$.contains(this.scrollParent[0],this.offsetParent[0])&&(po.left+=this.scrollParent.scrollLeft(),po.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&$.ui.ie)&&(po={top:0,left:0}),{top:po.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:po.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var p=this.currentItem.position();return{top:p.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:p.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var ce,co,over,o=this.options;"parent"===o.containment&&(o.containment=this.helper[0].parentNode),"document"!==o.containment&&"window"!==o.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===o.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===o.containment?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(o.containment)||(ce=$(o.containment)[0],co=$(o.containment).offset(),over="hidden"!==$(ce).css("overflow"),this.containment=[co.left+(parseInt($(ce).css("borderLeftWidth"),10)||0)+(parseInt($(ce).css("paddingLeft"),10)||0)-this.margins.left,co.top+(parseInt($(ce).css("borderTopWidth"),10)||0)+(parseInt($(ce).css("paddingTop"),10)||0)-this.margins.top,co.left+(over?Math.max(ce.scrollWidth,ce.offsetWidth):ce.offsetWidth)-(parseInt($(ce).css("borderLeftWidth"),10)||0)-(parseInt($(ce).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,co.top+(over?Math.max(ce.scrollHeight,ce.offsetHeight):ce.offsetHeight)-(parseInt($(ce).css("borderTopWidth"),10)||0)-(parseInt($(ce).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(d,pos){pos||(pos=this.position);var mod="absolute"===d?1:-1,scroll="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&$.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,scrollIsRootNode=/(html|body)/i.test(scroll[0].tagName);return{top:pos.top+this.offset.relative.top*mod+this.offset.parent.top*mod-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():scrollIsRootNode?0:scroll.scrollTop())*mod,left:pos.left+this.offset.relative.left*mod+this.offset.parent.left*mod-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())*mod}},_generatePosition:function(event){var top,left,o=this.options,pageX=event.pageX,pageY=event.pageY,scroll="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&$.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,scrollIsRootNode=/(html|body)/i.test(scroll[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(event.pageX-this.offset.click.left<this.containment[0]&&(pageX=this.containment[0]+this.offset.click.left),event.pageY-this.offset.click.top<this.containment[1]&&(pageY=this.containment[1]+this.offset.click.top),event.pageX-this.offset.click.left>this.containment[2]&&(pageX=this.containment[2]+this.offset.click.left),event.pageY-this.offset.click.top>this.containment[3]&&(pageY=this.containment[3]+this.offset.click.top)),o.grid&&(top=this.originalPageY+Math.round((pageY-this.originalPageY)/o.grid[1])*o.grid[1],pageY=this.containment?top-this.offset.click.top>=this.containment[1]&&top-this.offset.click.top<=this.containment[3]?top:top-this.offset.click.top>=this.containment[1]?top-o.grid[1]:top+o.grid[1]:top,left=this.originalPageX+Math.round((pageX-this.originalPageX)/o.grid[0])*o.grid[0],pageX=this.containment?left-this.offset.click.left>=this.containment[0]&&left-this.offset.click.left<=this.containment[2]?left:left-this.offset.click.left>=this.containment[0]?left-o.grid[0]:left+o.grid[0]:left)),{top:pageY-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():scrollIsRootNode?0:scroll.scrollTop()),left:pageX-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())}},_rearrange:function(event,i,a,hardRefresh){a?a[0].appendChild(this.placeholder[0]):i.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?i.item[0]:i.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var counter=this.counter;this._delay(function(){counter===this.counter&&this.refreshPositions(!hardRefresh)})},_clear:function(event,noPropagation){function delayEvent(type,instance,container){return function(event){container._trigger(type,event,instance._uiHash(instance))}}this.reverting=!1;var i,delayedTriggers=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)"auto"!==this._storedCSS[i]&&"static"!==this._storedCSS[i]||(this._storedCSS[i]="");this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!noPropagation&&delayedTriggers.push(function(event){this._trigger("receive",event,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||noPropagation||delayedTriggers.push(function(event){this._trigger("update",event,this._uiHash())}),this!==this.currentContainer&&(noPropagation||(delayedTriggers.push(function(event){this._trigger("remove",event,this._uiHash())}),delayedTriggers.push(function(c){return function(event){c._trigger("receive",event,this._uiHash(this))}}.call(this,this.currentContainer)),delayedTriggers.push(function(c){return function(event){c._trigger("update",event,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;i>=0;i--)noPropagation||delayedTriggers.push(delayEvent("deactivate",this,this.containers[i])),this.containers[i].containerCache.over&&(delayedTriggers.push(delayEvent("out",this,this.containers[i])),this.containers[i].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,noPropagation||this._trigger("beforeStop",event,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!noPropagation){for(i=0;i<delayedTriggers.length;i++)delayedTriggers[i].call(this,event);this._trigger("stop",event,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){$.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(_inst){var inst=_inst||this;return{helper:inst.helper,placeholder:inst.placeholder||$([]),position:inst.position,originalPosition:inst.originalPosition,offset:inst.positionAbs,item:inst.currentItem,sender:_inst?_inst.element:null}}})}),function(){"undefined"==typeof Math.sgn&&(Math.sgn=function(x){return 0==x?0:x>0?1:-1});var Vectors={subtract:function(v1,v2){return{x:v1.x-v2.x,y:v1.y-v2.y}},dotProduct:function(v1,v2){return v1.x*v2.x+v1.y*v2.y},square:function(v){return Math.sqrt(v.x*v.x+v.y*v.y)},scale:function(v,s){return{x:v.x*s,y:v.y*s}}},maxRecursion=64,flatnessTolerance=Math.pow(2,-maxRecursion-1),_distanceFromCurve=function(point,curve){for(var candidates=[],w=_convertToBezier(point,curve),degree=curve.length-1,higherDegree=2*degree-1,numSolutions=_findRoots(w,higherDegree,candidates,0),v=Vectors.subtract(point,curve[0]),dist=Vectors.square(v),t=0,i=0;i<numSolutions;i++){v=Vectors.subtract(point,_bezier(curve,degree,candidates[i],null,null));var newDist=Vectors.square(v);newDist<dist&&(dist=newDist,t=candidates[i])}return v=Vectors.subtract(point,curve[degree]),newDist=Vectors.square(v),newDist<dist&&(dist=newDist,t=1),{location:t,distance:dist}},_nearestPointOnCurve=function(point,curve){var td=_distanceFromCurve(point,curve);return{point:_bezier(curve,curve.length-1,td.location,null,null),location:td.location}},_convertToBezier=function(point,curve){for(var degree=curve.length-1,higherDegree=2*degree-1,c=[],d=[],cdTable=[],w=[],z=[[1,.6,.3,.1],[.4,.6,.6,.4],[.1,.3,.6,1]],i=0;i<=degree;i++)c[i]=Vectors.subtract(curve[i],point);for(var i=0;i<=degree-1;i++)d[i]=Vectors.subtract(curve[i+1],curve[i]),d[i]=Vectors.scale(d[i],3);for(var row=0;row<=degree-1;row++)for(var column=0;column<=degree;column++)cdTable[row]||(cdTable[row]=[]),cdTable[row][column]=Vectors.dotProduct(d[row],c[column]);for(i=0;i<=higherDegree;i++)w[i]||(w[i]=[]),w[i].y=0,w[i].x=parseFloat(i)/higherDegree;for(var n=degree,m=degree-1,k=0;k<=n+m;k++){var lb=Math.max(0,k-m),ub=Math.min(k,n);for(i=lb;i<=ub;i++)j=k-i,w[i+j].y+=cdTable[j][i]*z[j][i]}return w},_findRoots=function(w,degree,t,depth){var left_count,right_count,left=[],right=[],left_t=[],right_t=[];switch(_getCrossingCount(w,degree)){case 0:return 0;case 1:if(depth>=maxRecursion)return t[0]=(w[0].x+w[degree].x)/2,1;if(_isFlatEnough(w,degree))return t[0]=_computeXIntercept(w,degree),1}_bezier(w,degree,.5,left,right),left_count=_findRoots(left,degree,left_t,depth+1),right_count=_findRoots(right,degree,right_t,depth+1);for(var i=0;i<left_count;i++)t[i]=left_t[i];for(var i=0;i<right_count;i++)t[i+left_count]=right_t[i];return left_count+right_count},_getCrossingCount=function(curve,degree){var sign,old_sign,n_crossings=0;sign=old_sign=Math.sgn(curve[0].y);for(var i=1;i<=degree;i++)sign=Math.sgn(curve[i].y),sign!=old_sign&&n_crossings++,old_sign=sign;return n_crossings},_isFlatEnough=function(curve,degree){var error,intercept_1,intercept_2,left_intercept,right_intercept,a,b,c,det,dInv,a1,b1,c1,a2,b2,c2;a=curve[0].y-curve[degree].y,b=curve[degree].x-curve[0].x,c=curve[0].x*curve[degree].y-curve[degree].x*curve[0].y;for(var max_distance_above=max_distance_below=0,i=1;i<degree;i++){var value=a*curve[i].x+b*curve[i].y+c;value>max_distance_above?max_distance_above=value:value<max_distance_below&&(max_distance_below=value)}return a1=0,b1=1,c1=0,a2=a,b2=b,c2=c-max_distance_above,det=a1*b2-a2*b1,dInv=1/det,intercept_1=(b1*c2-b2*c1)*dInv,a2=a,b2=b,c2=c-max_distance_below,det=a1*b2-a2*b1,dInv=1/det,intercept_2=(b1*c2-b2*c1)*dInv,left_intercept=Math.min(intercept_1,intercept_2),right_intercept=Math.max(intercept_1,intercept_2),error=right_intercept-left_intercept,error<flatnessTolerance?1:0},_computeXIntercept=function(curve,degree){var XLK=1,YLK=0,XNM=curve[degree].x-curve[0].x,YNM=curve[degree].y-curve[0].y,XMK=curve[0].x-0,YMK=curve[0].y-0,det=XNM*YLK-YNM*XLK,detInv=1/det,S=(XNM*YMK-YNM*XMK)*detInv;return 0+XLK*S},_bezier=function(curve,degree,t,left,right){for(var temp=[[]],j=0;j<=degree;j++)temp[0][j]=curve[j];for(var i=1;i<=degree;i++)for(var j=0;j<=degree-i;j++)temp[i]||(temp[i]=[]),temp[i][j]||(temp[i][j]={}),temp[i][j].x=(1-t)*temp[i-1][j].x+t*temp[i-1][j+1].x,temp[i][j].y=(1-t)*temp[i-1][j].y+t*temp[i-1][j+1].y;if(null!=left)for(j=0;j<=degree;j++)left[j]=temp[j][0];if(null!=right)for(j=0;j<=degree;j++)right[j]=temp[degree-j][j];return temp[degree][0]},_curveFunctionCache={},_getCurveFunctions=function(order){var fns=_curveFunctionCache[order];if(!fns){fns=[];var f_term=function(){return function(t){return Math.pow(t,order)}},l_term=function(){return function(t){return Math.pow(1-t,order)}},c_term=function(c){return function(t){return c}},t_term=function(){return function(t){return t}},one_minus_t_term=function(){return function(t){return 1-t}},_termFunc=function(terms){return function(t){for(var p=1,i=0;i<terms.length;i++)p*=terms[i](t);return p}};fns.push(new f_term);for(var i=1;i<order;i++){for(var terms=[new c_term(order)],j=0;j<order-i;j++)terms.push(new t_term);for(var j=0;j<i;j++)terms.push(new one_minus_t_term);fns.push(new _termFunc(terms))}fns.push(new l_term),_curveFunctionCache[order]=fns}return fns},_pointOnPath=function(curve,location){for(var cc=_getCurveFunctions(curve.length-1),_x=0,_y=0,i=0;i<curve.length;i++)_x+=curve[i].x*cc[i](location),_y+=curve[i].y*cc[i](location);return{x:_x,y:_y}},_dist=function(p1,p2){return Math.sqrt(Math.pow(p1.x-p2.x,2)+Math.pow(p1.y-p2.y,2))},_isPoint=function(curve){return curve[0].x==curve[1].x&&curve[0].y==curve[1].y},_pointAlongPath=function(curve,location,distance){if(_isPoint(curve))return{point:curve[0],location:location};for(var prev=_pointOnPath(curve,location),tally=0,curLoc=location,direction=distance>0?1:-1,cur=null;tally<Math.abs(distance);)curLoc+=.005*direction,cur=_pointOnPath(curve,curLoc),tally+=_dist(cur,prev),prev=cur;return{point:cur,location:curLoc}},_length=function(curve){if(_isPoint(curve))return 0;for(var prev=_pointOnPath(curve,0),tally=0,curLoc=0,direction=1,cur=null;curLoc<1;)curLoc+=.005*direction,cur=_pointOnPath(curve,curLoc),tally+=_dist(cur,prev),prev=cur;return tally},_pointAlongPathFrom=function(curve,location,distance){return _pointAlongPath(curve,location,distance).point},_locationAlongPathFrom=function(curve,location,distance){return _pointAlongPath(curve,location,distance).location},_gradientAtPoint=function(curve,location){var p1=_pointOnPath(curve,location),p2=_pointOnPath(curve.slice(0,curve.length-1),location),dy=p2.y-p1.y,dx=p2.x-p1.x;return 0==dy?1/0:Math.atan(dy/dx)},_gradientAtPointAlongPathFrom=function(curve,location,distance){var p=_pointAlongPath(curve,location,distance);return p.location>1&&(p.location=1),p.location<0&&(p.location=0),_gradientAtPoint(curve,p.location)},_perpendicularToPathAt=function(curve,location,length,distance){distance=null==distance?0:distance;var p=_pointAlongPath(curve,location,distance),m=_gradientAtPoint(curve,p.location),_theta2=Math.atan(-1/m),y=length/2*Math.sin(_theta2),x=length/2*Math.cos(_theta2);return[{x:p.point.x+x,y:p.point.y+y},{x:p.point.x-x,y:p.point.y-y}]};this.jsBezier={distanceFromCurve:_distanceFromCurve,gradientAtPoint:_gradientAtPoint,gradientAtPointAlongCurveFrom:_gradientAtPointAlongPathFrom,nearestPointOnCurve:_nearestPointOnCurve,pointOnCurve:_pointOnPath,pointAlongCurveFrom:_pointAlongPathFrom,perpendicularToCurveAt:_perpendicularToPathAt,locationAlongCurveFrom:_locationAlongPathFrom,getLength:_length}}.call("undefined"!=typeof window?window:this),function(){"use strict";var root=this,Biltong=root.Biltong={},_isa=function(a){return"[object Array]"===Object.prototype.toString.call(a)},_pointHelper=function(p1,p2,fn){return p1=_isa(p1)?p1:[p1.x,p1.y],p2=_isa(p2)?p2:[p2.x,p2.y],fn(p1,p2)},_gradient=Biltong.gradient=function(p1,p2){return _pointHelper(p1,p2,function(_p1,_p2){return _p2[0]==_p1[0]?_p2[1]>_p1[1]?1/0:-(1/0):_p2[1]==_p1[1]?_p2[0]>_p1[0]?0:-0:(_p2[1]-_p1[1])/(_p2[0]-_p1[0])})},_quadrant=(Biltong.normal=function(p1,p2){return-1/_gradient(p1,p2)},Biltong.lineLength=function(p1,p2){return _pointHelper(p1,p2,function(_p1,_p2){return Math.sqrt(Math.pow(_p2[1]-_p1[1],2)+Math.pow(_p2[0]-_p1[0],2))})},Biltong.quadrant=function(p1,p2){return _pointHelper(p1,p2,function(_p1,_p2){return _p2[0]>_p1[0]?_p2[1]>_p1[1]?2:1:_p2[0]==_p1[0]?_p2[1]>_p1[1]?2:1:_p2[1]>_p1[1]?3:4})}),_segmentMultipliers=(Biltong.theta=function(p1,p2){return _pointHelper(p1,p2,function(_p1,_p2){var m=_gradient(_p1,_p2),t=Math.atan(m),s=_quadrant(_p1,_p2);return 4!=s&&3!=s||(t+=Math.PI),t<0&&(t+=2*Math.PI),t})},Biltong.intersects=function(r1,r2){var x1=r1.x,x2=r1.x+r1.w,y1=r1.y,y2=r1.y+r1.h,a1=r2.x,a2=r2.x+r2.w,b1=r2.y,b2=r2.y+r2.h;return x1<=a1&&a1<=x2&&y1<=b1&&b1<=y2||x1<=a2&&a2<=x2&&y1<=b1&&b1<=y2||x1<=a1&&a1<=x2&&y1<=b2&&b2<=y2||x1<=a2&&a1<=x2&&y1<=b2&&b2<=y2||a1<=x1&&x1<=a2&&b1<=y1&&y1<=b2||a1<=x2&&x2<=a2&&b1<=y1&&y1<=b2||a1<=x1&&x1<=a2&&b1<=y2&&y2<=b2||a1<=x2&&x1<=a2&&b1<=y2&&y2<=b2},Biltong.encloses=function(r1,r2,allowSharedEdges){var x1=r1.x,x2=r1.x+r1.w,y1=r1.y,y2=r1.y+r1.h,a1=r2.x,a2=r2.x+r2.w,b1=r2.y,b2=r2.y+r2.h,c=function(v1,v2,v3,v4){return allowSharedEdges?v1<=v2&&v3>=v4:v1<v2&&v3>v4};return c(x1,a1,x2,a2)&&c(y1,b1,y2,b2)},[null,[1,-1],[1,1],[-1,1],[-1,-1]]),_inverseSegmentMultipliers=[null,[-1,-1],[-1,1],[1,1],[1,-1]];Biltong.pointOnLine=function(fromPoint,toPoint,distance){var m=_gradient(fromPoint,toPoint),s=_quadrant(fromPoint,toPoint),segmentMultiplier=distance>0?_segmentMultipliers[s]:_inverseSegmentMultipliers[s],theta=Math.atan(m),y=Math.abs(distance*Math.sin(theta))*segmentMultiplier[1],x=Math.abs(distance*Math.cos(theta))*segmentMultiplier[0];return{x:fromPoint.x+x,y:fromPoint.y+y}},Biltong.perpendicularLineTo=function(fromPoint,toPoint,length){var m=_gradient(fromPoint,toPoint),theta2=Math.atan(-1/m),y=length/2*Math.sin(theta2),x=length/2*Math.cos(theta2);return[{x:toPoint.x+x,y:toPoint.y+y},{x:toPoint.x-x,y:toPoint.y-y}]}}.call("undefined"!=typeof window?window:this),function(){"use strict";var root=this,Sniff={android:navigator.userAgent.toLowerCase().indexOf("android")>-1},matchesSelector=function(el,selector,ctx){ctx=ctx||el.parentNode;for(var possibles=ctx.querySelectorAll(selector),i=0;i<possibles.length;i++)if(possibles[i]===el)return!0;return!1},_gel=function(el){return"string"==typeof el||el.constructor===String?document.getElementById(el):el},_t=function(e){return e.srcElement||e.target},_pi=function(e,target,obj,doCompute){if(doCompute){if("undefined"!=typeof e.path)return{path:e.path,end:e.path.indexOf(obj)};var out={path:[],end:-1},_one=function(el){out.path.push(el),el===obj?out.end=out.path.length-1:null!=el.parentNode&&_one(el.parentNode)};return _one(target),out}return{path:[target],end:1}},_d=function(l,fn){for(var i=0,j=l.length;i<j&&l[i]!=fn;i++);i<l.length&&l.splice(i,1)},guid=1,_store=function(obj,event,fn){var g=guid++;return obj.__ta=obj.__ta||{},obj.__ta[event]=obj.__ta[event]||{},obj.__ta[event][g]=fn,fn.__tauid=g,g},_unstore=function(obj,event,fn){if(obj.__ta&&obj.__ta[event]&&delete obj.__ta[event][fn.__tauid],fn.__taExtra){for(var i=0;i<fn.__taExtra.length;i++)_unbind(obj,fn.__taExtra[i][0],fn.__taExtra[i][1]);fn.__taExtra.length=0}fn.__taUnstore&&fn.__taUnstore()},_curryChildFilter=function(children,obj,fn,evt){if(null==children)return fn;var c=children.split(","),_fn=function(e){_fn.__tauid=fn.__tauid;var t=_t(e),target=t,pathInfo=_pi(e,t,obj,null!=children);if(pathInfo.end!=-1)for(var p=0;p<pathInfo.end;p++){target=pathInfo.path[p];for(var i=0;i<c.length;i++)matchesSelector(target,c[i],obj)&&fn.apply(target,arguments)}};return registerExtraFunction(fn,evt,_fn),_fn},registerExtraFunction=function(fn,evt,newFn){fn.__taExtra=fn.__taExtra||[],fn.__taExtra.push([evt,newFn])},DefaultHandler=function(obj,evt,fn,children){if(isTouchDevice&&touchMap[evt]){var tfn=_curryChildFilter(children,obj,fn,touchMap[evt]);_bind(obj,touchMap[evt],tfn,fn)}"focus"===evt&&null==obj.getAttribute("tabindex")&&obj.setAttribute("tabindex","1"),_bind(obj,evt,_curryChildFilter(children,obj,fn,evt),fn)},SmartClickHandler=function(obj,evt,fn,children){if(null==obj.__taSmartClicks){var down=function(e){obj.__tad=_pageLocation(e)},up=function(e){obj.__tau=_pageLocation(e)},click=function(e){if(obj.__tad&&obj.__tau&&obj.__tad[0]===obj.__tau[0]&&obj.__tad[1]===obj.__tau[1])for(var i=0;i<obj.__taSmartClicks.length;i++)obj.__taSmartClicks[i].apply(_t(e),[e])};DefaultHandler(obj,"mousedown",down,children),DefaultHandler(obj,"mouseup",up,children),DefaultHandler(obj,"click",click,children),obj.__taSmartClicks=[]}obj.__taSmartClicks.push(fn),fn.__taUnstore=function(){_d(obj.__taSmartClicks,fn)}},_tapProfiles={tap:{touches:1,taps:1},dbltap:{touches:1,taps:2},contextmenu:{touches:2,taps:1}},TapHandler=function(clickThreshold,dblClickThreshold){return function(obj,evt,fn,children){if("contextmenu"==evt&&isMouseDevice)DefaultHandler(obj,evt,fn,children);else{if(null==obj.__taTapHandler){var tt=obj.__taTapHandler={tap:[],dbltap:[],contextmenu:[],down:!1,taps:0,downSelectors:[]},down=function(e){for(var target=_t(e),pathInfo=_pi(e,target,obj,null!=children),finished=!1,p=0;p<pathInfo.end;p++){if(finished)return;target=pathInfo.path[p];for(var i=0;i<tt.downSelectors.length;i++)if(null==tt.downSelectors[i]||matchesSelector(target,tt.downSelectors[i],obj)){tt.down=!0,setTimeout(clearSingle,clickThreshold),setTimeout(clearDouble,dblClickThreshold),finished=!0;break}}},up=function(e){if(tt.down){var currentTarget,pathInfo,target=_t(e);tt.taps++;var tc=_touchCount(e);for(var eventId in _tapProfiles)if(_tapProfiles.hasOwnProperty(eventId)){var p=_tapProfiles[eventId];if(p.touches===tc&&(1===p.taps||p.taps===tt.taps))for(var i=0;i<tt[eventId].length;i++){pathInfo=_pi(e,target,obj,null!=tt[eventId][i][1]);for(var pLoop=0;pLoop<pathInfo.end;pLoop++)if(currentTarget=pathInfo.path[pLoop],null==tt[eventId][i][1]||matchesSelector(currentTarget,tt[eventId][i][1],obj)){tt[eventId][i][0].apply(currentTarget,[e]);break}}}}},clearSingle=function(){tt.down=!1},clearDouble=function(){tt.taps=0};DefaultHandler(obj,"mousedown",down),DefaultHandler(obj,"mouseup",up)}obj.__taTapHandler.downSelectors.push(children),obj.__taTapHandler[evt].push([fn,children]),fn.__taUnstore=function(){_d(obj.__taTapHandler[evt],fn)}}}},meeHelper=function(type,evt,obj,target){for(var i in obj.__tamee[type])obj.__tamee[type].hasOwnProperty(i)&&obj.__tamee[type][i].apply(target,[evt])},MouseEnterExitHandler=function(){var activeElements=[];return function(obj,evt,fn,children){if(!obj.__tamee){obj.__tamee={over:!1,mouseenter:[],mouseexit:[]};var over=function(e){var t=_t(e);(null==children&&t==obj&&!obj.__tamee.over||matchesSelector(t,children,obj)&&(null==t.__tamee||!t.__tamee.over))&&(meeHelper("mouseenter",e,obj,t),t.__tamee=t.__tamee||{},t.__tamee.over=!0,activeElements.push(t))},out=function(e){for(var t=_t(e),i=0;i<activeElements.length;i++)t!=activeElements[i]||matchesSelector(e.relatedTarget||e.toElement,"*",t)||(t.__tamee.over=!1,activeElements.splice(i,1),meeHelper("mouseexit",e,obj,t))};_bind(obj,"mouseover",_curryChildFilter(children,obj,over,"mouseover"),over),_bind(obj,"mouseout",_curryChildFilter(children,obj,out,"mouseout"),out)}fn.__taUnstore=function(){delete obj.__tamee[evt][fn.__tauid]},_store(obj,evt,fn),obj.__tamee[evt][fn.__tauid]=fn}},isTouchDevice="ontouchstart"in document.documentElement,isMouseDevice="onmousedown"in document.documentElement,touchMap={mousedown:"touchstart",mouseup:"touchend",mousemove:"touchmove"},iev=function(){var rv=-1;if("Microsoft Internet Explorer"==navigator.appName){var ua=navigator.userAgent,re=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=re.exec(ua)&&(rv=parseFloat(RegExp.$1))}return rv}(),isIELT9=iev>-1&&iev<9,_genLoc=function(e,prefix){if(null==e)return[0,0];var ts=_touches(e),t=_getTouch(ts,0);return[t[prefix+"X"],t[prefix+"Y"]]},_pageLocation=function(e){return null==e?[0,0]:isIELT9?[e.clientX+document.documentElement.scrollLeft,e.clientY+document.documentElement.scrollTop]:_genLoc(e,"page")},_screenLocation=function(e){return _genLoc(e,"screen")},_clientLocation=function(e){return _genLoc(e,"client");
},_getTouch=function(touches,idx){return touches.item?touches.item(idx):touches[idx]},_touches=function(e){return e.touches&&e.touches.length>0?e.touches:e.changedTouches&&e.changedTouches.length>0?e.changedTouches:e.targetTouches&&e.targetTouches.length>0?e.targetTouches:[e]},_touchCount=function(e){return _touches(e).length},_bind=function(obj,type,fn,originalFn){if(_store(obj,type,fn),originalFn.__tauid=fn.__tauid,obj.addEventListener)obj.addEventListener(type,fn,!1);else if(obj.attachEvent){var key=type+fn.__tauid;obj["e"+key]=fn,obj[key]=function(){obj["e"+key]&&obj["e"+key](window.event)},obj.attachEvent("on"+type,obj[key])}},_unbind=function(obj,type,fn){null!=fn&&_each(obj,function(){var _el=_gel(this);if(_unstore(_el,type,fn),null!=fn.__tauid)if(_el.removeEventListener)_el.removeEventListener(type,fn,!1),isTouchDevice&&touchMap[type]&&_el.removeEventListener(touchMap[type],fn,!1);else if(this.detachEvent){var key=type+fn.__tauid;_el[key]&&_el.detachEvent("on"+type,_el[key]),_el[key]=null,_el["e"+key]=null}fn.__taTouchProxy&&_unbind(obj,fn.__taTouchProxy[1],fn.__taTouchProxy[0])})},_each=function(obj,fn){if(null!=obj){obj="undefined"!=typeof Window&&"unknown"!=typeof obj.top&&obj==obj.top?[obj]:"string"!=typeof obj&&null==obj.tagName&&null!=obj.length?obj:"string"==typeof obj?document.querySelectorAll(obj):[obj];for(var i=0;i<obj.length;i++)fn.apply(obj[i])}};root.Mottle=function(params){params=params||{};var clickThreshold=params.clickThreshold||250,dblClickThreshold=params.dblClickThreshold||450,mouseEnterExitHandler=new MouseEnterExitHandler,tapHandler=new TapHandler(clickThreshold,dblClickThreshold),_smartClicks=params.smartClicks,_doBind=function(obj,evt,fn,children){null!=fn&&_each(obj,function(){var _el=_gel(this);_smartClicks&&"click"===evt?SmartClickHandler(_el,evt,fn,children):"tap"===evt||"dbltap"===evt||"contextmenu"===evt?tapHandler(_el,evt,fn,children):"mouseenter"===evt||"mouseexit"==evt?mouseEnterExitHandler(_el,evt,fn,children):DefaultHandler(_el,evt,fn,children)})};this.remove=function(el){return _each(el,function(){var _el=_gel(this);if(_el.__ta)for(var evt in _el.__ta)if(_el.__ta.hasOwnProperty(evt))for(var h in _el.__ta[evt])_el.__ta[evt].hasOwnProperty(h)&&_unbind(_el,evt,_el.__ta[evt][h]);_el.parentNode&&_el.parentNode.removeChild(_el)}),this},this.on=function(el,event,children,fn){var _el=arguments[0],_c=4==arguments.length?arguments[2]:null,_e=arguments[1],_f=arguments[arguments.length-1];return _doBind(_el,_e,_f,_c),this},this.off=function(el,event,fn){return _unbind(el,event,fn),this},this.trigger=function(el,event,originalEvent,payload){var originalIsMouse=isMouseDevice&&("undefined"==typeof MouseEvent||null==originalEvent||originalEvent.constructor===MouseEvent),eventToBind=isTouchDevice&&!isMouseDevice&&touchMap[event]?touchMap[event]:event,bindingAMouseEvent=!(isTouchDevice&&!isMouseDevice&&touchMap[event]),pl=_pageLocation(originalEvent),sl=_screenLocation(originalEvent),cl=_clientLocation(originalEvent);return _each(el,function(){var evt,_el=_gel(this);originalEvent=originalEvent||{screenX:sl[0],screenY:sl[1],clientX:cl[0],clientY:cl[1]};var _decorate=function(_evt){payload&&(_evt.payload=payload)},eventGenerators={TouchEvent:function(evt){var touch=document.createTouch(window,_el,0,pl[0],pl[1],sl[0],sl[1],cl[0],cl[1],0,0,0,0),touches=document.createTouchList(touch),targetTouches=document.createTouchList(touch),changedTouches=document.createTouchList(touch);evt.initTouchEvent(eventToBind,!0,!0,window,null,sl[0],sl[1],cl[0],cl[1],!1,!1,!1,!1,touches,targetTouches,changedTouches,1,0)},MouseEvents:function(evt){if(evt.initMouseEvent(eventToBind,!0,!0,window,0,sl[0],sl[1],cl[0],cl[1],!1,!1,!1,!1,1,_el),Sniff.android){var t=document.createTouch(window,_el,0,pl[0],pl[1],sl[0],sl[1],cl[0],cl[1],0,0,0,0);evt.touches=evt.targetTouches=evt.changedTouches=document.createTouchList(t)}}};if(document.createEvent){var ite=!bindingAMouseEvent&&!originalIsMouse&&isTouchDevice&&touchMap[event]&&!Sniff.android,evtName=ite?"TouchEvent":"MouseEvents";evt=document.createEvent(evtName),eventGenerators[evtName](evt),_decorate(evt),_el.dispatchEvent(evt)}else document.createEventObject&&(evt=document.createEventObject(),evt.eventType=evt.eventName=eventToBind,evt.screenX=sl[0],evt.screenY=sl[1],evt.clientX=cl[0],evt.clientY=cl[1],_decorate(evt),_el.fireEvent("on"+eventToBind,evt))}),this}},root.Mottle.consume=function(e,doNotPreventDefault){e.stopPropagation?e.stopPropagation():e.returnValue=!1,!doNotPreventDefault&&e.preventDefault&&e.preventDefault()},root.Mottle.pageLocation=_pageLocation,root.Mottle.setForceTouchEvents=function(value){isTouchDevice=value},root.Mottle.setForceMouseEvents=function(value){isMouseDevice=value}}.call("undefined"==typeof window?this:window),function(){"use strict";var root=this,_suggest=function(list,item,head){return list.indexOf(item)===-1&&(head?list.unshift(item):list.push(item),!0)},_vanquish=function(list,item){var idx=list.indexOf(item);idx!=-1&&list.splice(idx,1)},_difference=function(l1,l2){for(var d=[],i=0;i<l1.length;i++)l2.indexOf(l1[i])==-1&&d.push(l1[i]);return d},_isString=function(f){return null!=f&&("string"==typeof f||f.constructor==String)},getOffsetRect=function(elem){var box=elem.getBoundingClientRect(),body=document.body,docElem=document.documentElement,scrollTop=window.pageYOffset||docElem.scrollTop||body.scrollTop,scrollLeft=window.pageXOffset||docElem.scrollLeft||body.scrollLeft,clientTop=docElem.clientTop||body.clientTop||0,clientLeft=docElem.clientLeft||body.clientLeft||0,top=box.top+scrollTop-clientTop,left=box.left+scrollLeft-clientLeft;return{top:Math.round(top),left:Math.round(left)}},matchesSelector=function(el,selector,ctx){ctx=ctx||el.parentNode;for(var possibles=ctx.querySelectorAll(selector),i=0;i<possibles.length;i++)if(possibles[i]===el)return!0;return!1},iev=function(){var rv=-1;if("Microsoft Internet Explorer"==navigator.appName){var ua=navigator.userAgent,re=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=re.exec(ua)&&(rv=parseFloat(RegExp.$1))}return rv}(),DEFAULT_GRID_X=50,DEFAULT_GRID_Y=50,isIELT9=iev>-1&&iev<9,isIE9=9==iev,_pl=function(e){if(isIELT9)return[e.clientX+document.documentElement.scrollLeft,e.clientY+document.documentElement.scrollTop];var ts=_touches(e),t=_getTouch(ts,0);return isIE9?[t.pageX||t.clientX,t.pageY||t.clientY]:[t.pageX,t.pageY]},_getTouch=function(touches,idx){return touches.item?touches.item(idx):touches[idx]},_touches=function(e){return e.touches&&e.touches.length>0?e.touches:e.changedTouches&&e.changedTouches.length>0?e.changedTouches:e.targetTouches&&e.targetTouches.length>0?e.targetTouches:[e]},_classes={draggable:"katavorio-draggable",droppable:"katavorio-droppable",drag:"katavorio-drag",selected:"katavorio-drag-selected",active:"katavorio-drag-active",hover:"katavorio-drag-hover",noSelect:"katavorio-drag-no-select",ghostProxy:"katavorio-ghost-proxy"},_defaultScope="katavorio-drag-scope",_events=["stop","start","drag","drop","over","out","beforeStart"],_devNull=function(){},_true=function(){return!0},_foreach=function(l,fn,from){for(var i=0;i<l.length;i++)l[i]!=from&&fn(l[i])},_setDroppablesActive=function(dd,val,andHover,drag){_foreach(dd,function(e){e.setActive(val),val&&e.updatePosition(),andHover&&e.setHover(drag,val)})},_each=function(obj,fn){if(null!=obj){obj=_isString(obj)||null!=obj.tagName||null==obj.length?[obj]:obj;for(var i=0;i<obj.length;i++)fn.apply(obj[i],[obj[i]])}},_consume=function(e){e.stopPropagation?(e.stopPropagation(),e.preventDefault()):e.returnValue=!1},_defaultInputFilterSelector="input,textarea,select,button,option",_inputFilter=function(e,el,_katavorio){var t=e.srcElement||e.target;return!matchesSelector(t,_katavorio.getInputFilterSelector(),el)},Super=function(el,params,css,scope){this.params=params||{},this.el=el,this.params.addClass(this.el,this._class),this.uuid=_uuid();var enabled=!0;return this.setEnabled=function(e){enabled=e},this.isEnabled=function(){return enabled},this.toggleEnabled=function(){enabled=!enabled},this.setScope=function(scopes){this.scopes=scopes?scopes.split(/\s+/):[scope]},this.addScope=function(scopes){var m={};_each(this.scopes,function(s){m[s]=!0}),_each(scopes?scopes.split(/\s+/):[],function(s){m[s]=!0}),this.scopes=[];for(var i in m)this.scopes.push(i)},this.removeScope=function(scopes){var m={};_each(this.scopes,function(s){m[s]=!0}),_each(scopes?scopes.split(/\s+/):[],function(s){delete m[s]}),this.scopes=[];for(var i in m)this.scopes.push(i)},this.toggleScope=function(scopes){var m={};_each(this.scopes,function(s){m[s]=!0}),_each(scopes?scopes.split(/\s+/):[],function(s){m[s]?delete m[s]:m[s]=!0}),this.scopes=[];for(var i in m)this.scopes.push(i)},this.setScope(params.scope),this.k=params.katavorio,params.katavorio},TRUE=function(){return!0},FALSE=function(){return!1},Drag=function(el,params,css,scope){this._class=css.draggable;var k=Super.apply(this,arguments);this.rightButtonCanDrag=this.params.rightButtonCanDrag;var downAt=[0,0],posAtDown=null,pagePosAtDown=null,pageDelta=[0,0],moving=!1,consumeStartEvent=this.params.consumeStartEvent!==!1,dragEl=this.el,clone=this.params.clone,_multipleDrop=(this.params.scroll,params.multipleDrop!==!1),isConstrained=!1,useGhostProxy=params.ghostProxy===!0?TRUE:params.ghostProxy&&"function"==typeof params.ghostProxy?params.ghostProxy:FALSE,ghostProxy=function(el){return el.cloneNode(!0)},snapThreshold=params.snapThreshold||5,_snap=function(pos,x,y,thresholdX,thresholdY){thresholdX=thresholdX||snapThreshold,thresholdY=thresholdY||snapThreshold;var _dx=Math.floor(pos[0]/x),_dxl=x*_dx,_dxt=_dxl+x,_x=Math.abs(pos[0]-_dxl)<=thresholdX?_dxl:Math.abs(_dxt-pos[0])<=thresholdX?_dxt:pos[0],_dy=Math.floor(pos[1]/y),_dyl=y*_dy,_dyt=_dyl+y,_y=Math.abs(pos[1]-_dyl)<=thresholdY?_dyl:Math.abs(_dyt-pos[1])<=thresholdY?_dyt:pos[1];return[_x,_y]};this.posses=[],this.posseRoles={},this.toGrid=function(pos){return null==this.params.grid?pos:_snap(pos,this.params.grid[0],this.params.grid[1])},this.snap=function(x,y){if(null!=dragEl){x=x||(this.params.grid?this.params.grid[0]:DEFAULT_GRID_X),y=y||(this.params.grid?this.params.grid[1]:DEFAULT_GRID_Y);var p=this.params.getPosition(dragEl);this.params.setPosition(dragEl,_snap(p,x,y,x,y))}},this.setUseGhostProxy=function(val){useGhostProxy=val?TRUE:FALSE};var constrain,negativeFilter=function(pos){return params.allowNegative===!1?[Math.max(0,pos[0]),Math.max(0,pos[1])]:pos},_setConstrain=function(value){constrain="function"==typeof value?value:value?function(pos){return negativeFilter([Math.max(0,Math.min(constrainRect.w-this.size[0],pos[0])),Math.max(0,Math.min(constrainRect.h-this.size[1],pos[1]))])}.bind(this):function(pos){return negativeFilter(pos)}}.bind(this);_setConstrain("function"==typeof this.params.constrain?this.params.constrain:this.params.constrain||this.params.containment),this.setConstrain=function(value){_setConstrain(value)};var revertFunction;this.setRevert=function(fn){revertFunction=fn};var _assignId=function(obj){return"function"==typeof obj?(obj._katavorioId=_uuid(),obj._katavorioId):obj},_filters={},_testFilter=function(e){for(var key in _filters){var f=_filters[key],rv=f[0](e);if(f[1]&&(rv=!rv),!rv)return!1}return!0},_setFilter=this.setFilter=function(f,_exclude){if(f){var key=_assignId(f);_filters[key]=[function(e){var m,t=e.srcElement||e.target;return _isString(f)?m=matchesSelector(t,f,el):"function"==typeof f&&(m=f(e,el)),m},_exclude!==!1]}};this.addFilter=_setFilter,this.removeFilter=function(f){var key="function"==typeof f?f._katavorioId:f;delete _filters[key]};this.clearAllFilters=function(){_filters={}},this.canDrag=this.params.canDrag||_true;var constrainRect,matchingDroppables=[],intersectingDroppables=[];this.downListener=function(e){var isNotRightClick=this.rightButtonCanDrag||3!==e.which&&2!==e.button;if(isNotRightClick&&this.isEnabled()&&this.canDrag()){var _f=_testFilter(e)&&_inputFilter(e,this.el,this.k);if(_f){if(clone){dragEl=this.el.cloneNode(!0),dragEl.setAttribute("id",null),dragEl.style.position="absolute";var b=getOffsetRect(this.el);dragEl.style.left=b.left+"px",dragEl.style.top=b.top+"px",document.body.appendChild(dragEl)}else dragEl=this.el;consumeStartEvent&&_consume(e),downAt=_pl(e),this.params.bind(document,"mousemove",this.moveListener),this.params.bind(document,"mouseup",this.upListener),k.markSelection(this),k.markPosses(this),this.params.addClass(document.body,css.noSelect),_dispatch("beforeStart",{el:this.el,pos:posAtDown,e:e,drag:this})}else this.params.consumeFilteredEvents&&_consume(e)}}.bind(this),this.moveListener=function(e){if(downAt){if(!moving){var _continue=_dispatch("start",{el:this.el,pos:posAtDown,e:e,drag:this});if(_continue!==!1){if(!downAt)return;this.mark(!0),moving=!0}}if(downAt){intersectingDroppables.length=0;var pos=_pl(e),dx=pos[0]-downAt[0],dy=pos[1]-downAt[1],z=this.params.ignoreZoom?1:k.getZoom();dx/=z,dy/=z,this.moveBy(dx,dy,e),k.updateSelection(dx,dy,this),k.updatePosses(dx,dy,this)}}}.bind(this),this.upListener=function(e){downAt&&(downAt=null,this.params.unbind(document,"mousemove",this.moveListener),this.params.unbind(document,"mouseup",this.upListener),this.params.removeClass(document.body,css.noSelect),this.unmark(e),k.unmarkSelection(this,e),k.unmarkPosses(this,e),this.stop(e),k.notifySelectionDragStop(this,e),k.notifyPosseDragStop(this,e),moving=!1,clone&&(dragEl&&dragEl.parentNode&&dragEl.parentNode.removeChild(dragEl),dragEl=null),revertFunction&&revertFunction(this.el,this.params.getPosition(this.el))===!0&&(this.params.setPosition(this.el,posAtDown),_dispatch("revert",this.el)))}.bind(this),this.getFilters=function(){return _filters},this.abort=function(){null!=downAt&&this.upListener()},this.getDragElement=function(){return dragEl||this.el};var listeners={start:[],drag:[],stop:[],over:[],out:[],beforeStart:[],revert:[]};params.events.start&&listeners.start.push(params.events.start),params.events.beforeStart&&listeners.beforeStart.push(params.events.beforeStart),params.events.stop&&listeners.stop.push(params.events.stop),params.events.drag&&listeners.drag.push(params.events.drag),params.events.revert&&listeners.revert.push(params.events.revert),this.on=function(evt,fn){listeners[evt]&&listeners[evt].push(fn)},this.off=function(evt,fn){if(listeners[evt]){for(var l=[],i=0;i<listeners[evt].length;i++)listeners[evt][i]!==fn&&l.push(listeners[evt][i]);listeners[evt]=l}};var _dispatch=function(evt,value){if(listeners[evt])for(var i=0;i<listeners[evt].length;i++)try{listeners[evt][i](value)}catch(e){}};this.notifyStart=function(e){_dispatch("start",{el:this.el,pos:this.params.getPosition(dragEl),e:e,drag:this})},this.stop=function(e,force){if(force||moving){var positions=[],sel=k.getSelection(),dPos=this.params.getPosition(dragEl);if(sel.length>1)for(var i=0;i<sel.length;i++){var p=this.params.getPosition(sel[i].el);positions.push([sel[i].el,{left:p[0],top:p[1]},sel[i]])}else positions.push([dragEl,{left:dPos[0],top:dPos[1]},this]);_dispatch("stop",{el:dragEl,pos:ghostProxyOffsets||dPos,finalPos:dPos,e:e,drag:this,selection:positions})}},this.mark=function(andNotify){posAtDown=this.params.getPosition(dragEl),pagePosAtDown=this.params.getPosition(dragEl,!0),pageDelta=[pagePosAtDown[0]-posAtDown[0],pagePosAtDown[1]-posAtDown[1]],this.size=this.params.getSize(dragEl),matchingDroppables=k.getMatchingDroppables(this),_setDroppablesActive(matchingDroppables,!0,!1,this),this.params.addClass(dragEl,this.params.dragClass||css.drag);var cs=this.params.getSize(dragEl.parentNode);constrainRect={w:cs[0],h:cs[1]},andNotify&&k.notifySelectionDragStart(this)};var ghostProxyOffsets;this.unmark=function(e,doNotCheckDroppables){if(_setDroppablesActive(matchingDroppables,!1,!0,this),isConstrained&&useGhostProxy(this.el)?(ghostProxyOffsets=[dragEl.offsetLeft,dragEl.offsetTop],this.el.parentNode.removeChild(dragEl),dragEl=this.el):ghostProxyOffsets=null,this.params.removeClass(dragEl,this.params.dragClass||css.drag),matchingDroppables.length=0,isConstrained=!1,!doNotCheckDroppables){intersectingDroppables.length>0&&ghostProxyOffsets&&params.setPosition(this.el,ghostProxyOffsets);for(var i=0;i<intersectingDroppables.length;i++){var retVal=intersectingDroppables[i].drop(this,e);if(retVal===!0)break}}},this.moveBy=function(dx,dy,e){intersectingDroppables.length=0;var desiredLoc=this.toGrid([posAtDown[0]+dx,posAtDown[1]+dy]),cPos=constrain(desiredLoc,dragEl);if(useGhostProxy(this.el))if(desiredLoc[0]!=cPos[0]||desiredLoc[1]!=cPos[1]){if(!isConstrained){var gp=ghostProxy(this.el);params.addClass(gp,_classes.ghostProxy),this.el.parentNode.appendChild(gp),dragEl=gp,isConstrained=!0}cPos=desiredLoc}else isConstrained&&(this.el.parentNode.removeChild(dragEl),dragEl=this.el,isConstrained=!1);var rect={x:cPos[0],y:cPos[1],w:this.size[0],h:this.size[1]},pageRect={x:rect.x+pageDelta[0],y:rect.y+pageDelta[1],w:rect.w,h:rect.h},focusDropElement=null;this.params.setPosition(dragEl,cPos);for(var i=0;i<matchingDroppables.length;i++){var r2={x:matchingDroppables[i].pagePosition[0],y:matchingDroppables[i].pagePosition[1],w:matchingDroppables[i].size[0],h:matchingDroppables[i].size[1]};this.params.intersects(pageRect,r2)&&(_multipleDrop||null==focusDropElement||focusDropElement==matchingDroppables[i].el)&&matchingDroppables[i].canDrop(this)?(focusDropElement||(focusDropElement=matchingDroppables[i].el),intersectingDroppables.push(matchingDroppables[i]),matchingDroppables[i].setHover(this,!0,e)):matchingDroppables[i].isHover()&&matchingDroppables[i].setHover(this,!1,e)}_dispatch("drag",{el:this.el,pos:cPos,e:e,drag:this})},this.destroy=function(){this.params.unbind(this.el,"mousedown",this.downListener),this.params.unbind(document,"mousemove",this.moveListener),this.params.unbind(document,"mouseup",this.upListener),this.downListener=null,this.upListener=null,this.moveListener=null},this.params.bind(this.el,"mousedown",this.downListener),this.params.handle?_setFilter(this.params.handle,!1):_setFilter(this.params.filter,this.params.filterExclude)},Drop=function(el,params,css,scope){this._class=css.droppable,this.params=params||{},this._activeClass=this.params.activeClass||css.active,this._hoverClass=this.params.hoverClass||css.hover,Super.apply(this,arguments);var hover=!1;this.allowLoopback=this.params.allowLoopback!==!1,this.setActive=function(val){this.params[val?"addClass":"removeClass"](this.el,this._activeClass)},this.updatePosition=function(){this.position=this.params.getPosition(this.el),this.pagePosition=this.params.getPosition(this.el,!0),this.size=this.params.getSize(this.el)},this.canDrop=this.params.canDrop||function(drag){return!0},this.isHover=function(){return hover},this.setHover=function(drag,val,e){(val||null==this.el._katavorioDragHover||this.el._katavorioDragHover==drag.el._katavorio)&&(this.params[val?"addClass":"removeClass"](this.el,this._hoverClass),this.el._katavorioDragHover=val?drag.el._katavorio:null,hover!==val&&this.params.events[val?"over":"out"]({el:this.el,e:e,drag:drag,drop:this}),hover=val)},this.drop=function(drag,event){return this.params.events.drop({drag:drag,e:event,drop:this})},this.destroy=function(){this._class=null,this._activeClass=null,this._hoverClass=null,hover=null}},_uuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=16*Math.random()|0,v="x"==c?r:3&r|8;return v.toString(16)})},_gel=function(el){return null==el?null:(el="string"==typeof el||el.constructor==String?document.getElementById(el):el,null==el?null:(el._katavorio=el._katavorio||_uuid(),el))};root.Katavorio=function(katavorioParams){var _selection=[],_selectionMap={};this._dragsByScope={},this._dropsByScope={};var _zoom=1,_reg=function(obj,map){_each(obj,function(_obj){for(var i=0;i<_obj.scopes.length;i++)map[_obj.scopes[i]]=map[_obj.scopes[i]]||[],map[_obj.scopes[i]].push(_obj)})},_unreg=function(obj,map){var c=0;return _each(obj,function(_obj){for(var i=0;i<_obj.scopes.length;i++)if(map[_obj.scopes[i]]){var idx=katavorioParams.indexOf(map[_obj.scopes[i]],_obj);idx!=-1&&(map[_obj.scopes[i]].splice(idx,1),c++)}}),c>0},_prepareParams=(this.getMatchingDroppables=function(drag){for(var dd=[],_m={},i=0;i<drag.scopes.length;i++){var _dd=this._dropsByScope[drag.scopes[i]];if(_dd)for(var j=0;j<_dd.length;j++)!_dd[j].canDrop(drag)||_m[_dd[j].uuid]||!_dd[j].allowLoopback&&_dd[j].el===drag.el||(_m[_dd[j].uuid]=!0,dd.push(_dd[j]))}return dd},function(p){p=p||{};var i,_p={events:{}};for(i in katavorioParams)_p[i]=katavorioParams[i];for(i in p)_p[i]=p[i];for(i=0;i<_events.length;i++)_p.events[_events[i]]=p[_events[i]]||_devNull;return _p.katavorio=this,_p}.bind(this)),_mistletoe=function(existingDrag,params){for(var i=0;i<_events.length;i++)params[_events[i]]&&existingDrag.on(_events[i],params[_events[i]])}.bind(this),_css={},overrideCss=katavorioParams.css||{},_scope=katavorioParams.scope||_defaultScope;for(var i in _classes)_css[i]=_classes[i];for(var i in overrideCss)_css[i]=overrideCss[i];var inputFilterSelector=katavorioParams.inputFilterSelector||_defaultInputFilterSelector;this.getInputFilterSelector=function(){return inputFilterSelector},this.setInputFilterSelector=function(selector){return inputFilterSelector=selector,this},this.draggable=function(el,params){var o=[];return _each(el,function(_el){if(_el=_gel(_el),null!=_el)if(null==_el._katavorioDrag){var p=_prepareParams(params);_el._katavorioDrag=new Drag(_el,p,_css,_scope),_reg(_el._katavorioDrag,this._dragsByScope),o.push(_el._katavorioDrag),katavorioParams.addClass(_el,_css.draggable)}else _mistletoe(_el._katavorioDrag,params)}.bind(this)),o},this.droppable=function(el,params){var o=[];return _each(el,function(_el){if(_el=_gel(_el),null!=_el){var drop=new Drop(_el,_prepareParams(params),_css,_scope);_el._katavorioDrop=_el._katavorioDrop||[],_el._katavorioDrop.push(drop),_reg(drop,this._dropsByScope),o.push(drop),katavorioParams.addClass(_el,_css.droppable)}}.bind(this)),o},this.select=function(el){return _each(el,function(){var _el=_gel(this);_el&&_el._katavorioDrag&&(_selectionMap[_el._katavorio]||(_selection.push(_el._katavorioDrag),_selectionMap[_el._katavorio]=[_el,_selection.length-1],katavorioParams.addClass(_el,_css.selected)))}),this},this.deselect=function(el){return _each(el,function(){var _el=_gel(this);if(_el&&_el._katavorio){var e=_selectionMap[_el._katavorio];if(e){for(var _s=[],i=0;i<_selection.length;i++)_selection[i].el!==_el&&_s.push(_selection[i]);_selection=_s,delete _selectionMap[_el._katavorio],katavorioParams.removeClass(_el,_css.selected)}}}),this},this.deselectAll=function(){for(var i in _selectionMap){var d=_selectionMap[i];katavorioParams.removeClass(d[0],_css.selected)}_selection.length=0,_selectionMap={}},this.markSelection=function(drag){_foreach(_selection,function(e){e.mark()},drag)},this.markPosses=function(drag){drag.posses&&_each(drag.posses,function(p){drag.posseRoles[p]&&_posses[p]&&_foreach(_posses[p].members,function(d){d.mark()},drag)})},this.unmarkSelection=function(drag,event){_foreach(_selection,function(e){e.unmark(event)},drag)},this.unmarkPosses=function(drag,event){drag.posses&&_each(drag.posses,function(p){drag.posseRoles[p]&&_posses[p]&&_foreach(_posses[p].members,function(d){d.unmark(event,!0)},drag)})},this.getSelection=function(){return _selection.slice(0)},this.updateSelection=function(dx,dy,drag){_foreach(_selection,function(e){e.moveBy(dx,dy)},drag)};var _posseAction=function(fn,drag){drag.posses&&_each(drag.posses,function(p){drag.posseRoles[p]&&_posses[p]&&_foreach(_posses[p].members,function(e){fn(e)},drag)})};this.updatePosses=function(dx,dy,drag){_posseAction(function(e){e.moveBy(dx,dy)},drag)},this.notifyPosseDragStop=function(drag,evt){_posseAction(function(e){e.stop(evt,!0)},drag)},this.notifySelectionDragStop=function(drag,evt){_foreach(_selection,function(e){e.stop(evt,!0)},drag)},this.notifySelectionDragStart=function(drag,evt){_foreach(_selection,function(e){e.notifyStart(evt)},drag)},this.setZoom=function(z){_zoom=z},this.getZoom=function(){return _zoom};var _scopeManip=function(kObj,scopes,map,fn){_each(kObj,function(_kObj){_unreg(_kObj,map),_kObj[fn](scopes),_reg(_kObj,map)})};_each(["set","add","remove","toggle"],function(v){this[v+"Scope"]=function(el,scopes){_scopeManip(el._katavorioDrag,scopes,this._dragsByScope,v+"Scope"),_scopeManip(el._katavorioDrop,scopes,this._dropsByScope,v+"Scope")}.bind(this),this[v+"DragScope"]=function(el,scopes){_scopeManip(el.constructor===Drag?el:el._katavorioDrag,scopes,this._dragsByScope,v+"Scope")}.bind(this),this[v+"DropScope"]=function(el,scopes){_scopeManip(el.constructor===Drop?el:el._katavorioDrop,scopes,this._dropsByScope,v+"Scope")}.bind(this)}.bind(this)),this.snapToGrid=function(x,y){for(var s in this._dragsByScope)_foreach(this._dragsByScope[s],function(d){d.snap(x,y)})},this.getDragsForScope=function(s){return this._dragsByScope[s]},this.getDropsForScope=function(s){return this._dropsByScope[s]};var _destroy=function(el,type,map){el=_gel(el),el[type]&&(_unreg(el[type],map)&&_each(el[type],function(kObj){kObj.destroy()}),delete el[type])};this.elementRemoved=function(el){this.destroyDraggable(el),this.destroyDroppable(el)},this.destroyDraggable=function(el){_destroy(el,"_katavorioDrag",this._dragsByScope)},this.destroyDroppable=function(el){_destroy(el,"_katavorioDrop",this._dropsByScope)},this.reset=function(){this._dragsByScope={},this._dropsByScope={},_selection=[],_selectionMap={},_posses={}};var _posses={},_processOneSpec=function(el,_spec,dontAddExisting){var posseId=_isString(_spec)?_spec:_spec.id,active=!!_isString(_spec)||_spec.active!==!1,posse=_posses[posseId]||function(){var g={name:posseId,members:[]};return _posses[posseId]=g,g}();return _each(el,function(_el){if(_el._katavorioDrag){if(dontAddExisting&&null!=_el._katavorioDrag.posseRoles[posse.name])return;_suggest(posse.members,_el._katavorioDrag),_suggest(_el._katavorioDrag.posses,posse.name),_el._katavorioDrag.posseRoles[posse.name]=active}}),posse};this.addToPosse=function(el,spec){for(var posses=[],i=1;i<arguments.length;i++)posses.push(_processOneSpec(el,arguments[i]));return 1==posses.length?posses[0]:posses},this.setPosse=function(el,spec){for(var posses=[],i=1;i<arguments.length;i++)posses.push(_processOneSpec(el,arguments[i],!0).name);return _each(el,function(_el){if(_el._katavorioDrag){var diff=_difference(_el._katavorioDrag.posses,posses),p=[];Array.prototype.push.apply(p,_el._katavorioDrag.posses);for(var i=0;i<diff.length;i++)this.removeFromPosse(_el,diff[i])}}.bind(this)),1==posses.length?posses[0]:posses},this.removeFromPosse=function(el,posseId){if(arguments.length<2)throw new TypeError("No posse id provided for remove operation");for(var i=1;i<arguments.length;i++)posseId=arguments[i],_each(el,function(_el){if(_el._katavorioDrag&&_el._katavorioDrag.posses){var d=_el._katavorioDrag;_each(posseId,function(p){_vanquish(_posses[p].members,d),_vanquish(d.posses,p),delete d.posseRoles[p]})}})},this.removeFromAllPosses=function(el){_each(el,function(_el){if(_el._katavorioDrag&&_el._katavorioDrag.posses){var d=_el._katavorioDrag;_each(d.posses,function(p){_vanquish(_posses[p].members,d)}),d.posses.length=0,d.posseRoles={}}})},this.setPosseState=function(el,posseId,state){var posse=_posses[posseId];posse&&_each(el,function(_el){_el._katavorioDrag&&_el._katavorioDrag.posses&&(_el._katavorioDrag.posseRoles[posse.name]=state)})}}}.call("undefined"!=typeof window?window:this),function(){var _isa=function(a){return"[object Array]"===Object.prototype.toString.call(a)},_isnum=function(n){return"[object Number]"===Object.prototype.toString.call(n)},_iss=function(s){return"string"==typeof s},_isb=function(s){return"boolean"==typeof s},_isnull=function(s){return null==s},_iso=function(o){return null!=o&&"[object Object]"===Object.prototype.toString.call(o)},_isd=function(o){return"[object Date]"===Object.prototype.toString.call(o)},_isf=function(o){return"[object Function]"===Object.prototype.toString.call(o)},_ise=function(o){for(var i in o)if(o.hasOwnProperty(i))return!1;return!0},root=this,exports=root.jsPlumbUtil={isArray:_isa,isString:_iss,isBoolean:_isb,isNull:_isnull,isObject:_iso,isDate:_isd,isFunction:_isf,isEmpty:_ise,isNumber:_isnum,clone:function(a){if(_iss(a))return""+a;if(_isb(a))return!!a;if(_isd(a))return new Date(a.getTime());if(_isf(a))return a;if(_isa(a)){for(var b=[],i=0;i<a.length;i++)b.push(this.clone(a[i]));return b}if(_iso(a)){var c={};for(var j in a)c[j]=this.clone(a[j]);return c}return a},merge:function(a,b,collations){var ar,i,cMap={};for(collations=collations||[],i=0;i<collations.length;i++)cMap[collations[i]]=!0;var c=this.clone(a);for(i in b)if(null==c[i])c[i]=b[i];else if(_iss(b[i])||_isb(b[i]))cMap[i]?(ar=[],ar.push.apply(ar,_isa(c[i])?c[i]:[c[i]]),ar.push.apply(ar,_isa(b[i])?b[i]:[b[i]]),c[i]=ar):c[i]=b[i];else if(_isa(b[i]))ar=[],_isa(c[i])&&ar.push.apply(ar,c[i]),ar.push.apply(ar,b[i]),c[i]=ar;else if(_iso(b[i])){_iso(c[i])||(c[i]={});for(var j in b[i])c[i][j]=b[i][j]}return c},replace:function(inObj,path,value){if(null!=inObj){var q=inObj,t=q;return path.replace(/([^\.])+/g,function(term,lc,pos,str){var array=term.match(/([^\[0-9]+){1}(\[)([0-9+])/),last=pos+term.length>=str.length,_getArray=function(){return t[array[1]]||function(){return t[array[1]]=[],t[array[1]]}()};if(last)array?_getArray()[array[3]]=value:t[term]=value;else if(array){var a=_getArray();t=a[array[3]]||function(){return a[array[3]]={},a[array[3]]}()}else t=t[term]||function(){return t[term]={},t[term]}()}),inObj}},functionChain:function(successValue,failValue,fns){for(var i=0;i<fns.length;i++){var o=fns[i][0][fns[i][1]].apply(fns[i][0],fns[i][2]);if(o===failValue)return o}return successValue},populate:function(model,values,functionPrefix){var getValue=function(fromString){var matches=fromString.match(/(\${.*?})/g);if(null!=matches)for(var i=0;i<matches.length;i++){var val=values[matches[i].substring(2,matches[i].length-1)]||"";null!=val&&(fromString=fromString.replace(matches[i],val))}return fromString},_one=function(d){if(null!=d){if(_iss(d))return getValue(d);if(!_isf(d)||null!=functionPrefix&&0!==(d.name||"").indexOf(functionPrefix)){if(_isa(d)){for(var r=[],i=0;i<d.length;i++)r.push(_one(d[i]));return r}if(_iso(d)){var s={};for(var j in d)s[j]=_one(d[j]);return s}return d}return d(values)}};return _one(model)},findWithFunction:function(a,f){if(a)for(var i=0;i<a.length;i++)if(f(a[i]))return i;return-1},removeWithFunction:function(a,f){var idx=exports.findWithFunction(a,f);return idx>-1&&a.splice(idx,1),idx!=-1},remove:function(l,v){var idx=l.indexOf(v);return idx>-1&&l.splice(idx,1),idx!=-1},addWithFunction:function(list,item,hashFunction){exports.findWithFunction(list,hashFunction)==-1&&list.push(item)},addToList:function(map,key,value,insertAtStart){var l=map[key];return null==l&&(l=[],map[key]=l),l[insertAtStart?"unshift":"push"](value),l},suggest:function(list,item,insertAtHead){return list.indexOf(item)===-1&&(insertAtHead?list.unshift(item):list.push(item),!0)},extend:function(child,parent,_protoFn){var i;for(parent=_isa(parent)?parent:[parent],i=0;i<parent.length;i++)for(var j in parent[i].prototype)parent[i].prototype.hasOwnProperty(j)&&(child.prototype[j]=parent[i].prototype[j]);var _makeFn=function(name,protoFn){return function(){for(i=0;i<parent.length;i++)parent[i].prototype[name]&&parent[i].prototype[name].apply(this,arguments);return protoFn.apply(this,arguments)}},_oneSet=function(fns){for(var k in fns)child.prototype[k]=_makeFn(k,fns[k])};if(arguments.length>2)for(i=2;i<arguments.length;i++)_oneSet(arguments[i]);return child},uuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=16*Math.random()|0,v="x"==c?r:3&r|8;return v.toString(16)})},logEnabled:!0,log:function(){if(exports.logEnabled&&"undefined"!=typeof console)try{var msg=arguments[arguments.length-1];console.log(msg)}catch(e){}},wrap:function(wrappedFunction,newFunction,returnOnThisValue){return wrappedFunction=wrappedFunction||function(){},newFunction=newFunction||function(){},function(){var r=null;
try{r=newFunction.apply(this,arguments)}catch(e){exports.log("jsPlumb function failed : "+e)}if(null==returnOnThisValue||r!==returnOnThisValue)try{r=wrappedFunction.apply(this,arguments)}catch(e){exports.log("wrapped function failed : "+e)}return r}}};exports.EventGenerator=function(){var _listeners={},eventsSuspended=!1,eventsToDieOn={ready:!0};this.bind=function(event,listener,insertAtStart){var _one=function(evt){exports.addToList(_listeners,evt,listener,insertAtStart),listener.__jsPlumb=listener.__jsPlumb||{},listener.__jsPlumb[root.jsPlumbUtil.uuid()]=evt};if("string"==typeof event)_one(event);else if(null!=event.length)for(var i=0;i<event.length;i++)_one(event[i]);return this},this.fire=function(event,value,originalEvent){if(!eventsSuspended&&_listeners[event]){var l=_listeners[event].length,i=0,_gone=!1,ret=null;if(!this.shouldFireEvent||this.shouldFireEvent(event,value,originalEvent))for(;!_gone&&i<l&&ret!==!1;){if(eventsToDieOn[event])_listeners[event][i].apply(this,[value,originalEvent]);else try{ret=_listeners[event][i].apply(this,[value,originalEvent])}catch(e){exports.log("jsPlumb: fire failed for event "+event+" : "+e)}i++,null!=_listeners&&null!=_listeners[event]||(_gone=!0)}}return this},this.unbind=function(eventOrListener,listener){if(0===arguments.length)_listeners={};else if(1===arguments.length){if("string"==typeof eventOrListener)delete _listeners[eventOrListener];else if(eventOrListener.__jsPlumb){var evt;for(var i in eventOrListener.__jsPlumb)evt=eventOrListener.__jsPlumb[i],exports.remove(_listeners[evt]||[],eventOrListener)}}else 2===arguments.length&&exports.remove(_listeners[eventOrListener]||[],listener);return this},this.getListener=function(forEvent){return _listeners[forEvent]},this.setSuspendEvents=function(val){eventsSuspended=val},this.isSuspendEvents=function(){return eventsSuspended},this.silently=function(fn){this.setSuspendEvents(!0);try{fn()}catch(e){root.jsPlumbUtil.log("Cannot execute silent function "+e)}this.setSuspendEvents(!1)},this.cleanupListeners=function(){for(var i in _listeners)_listeners[i]=null}},exports.EventGenerator.prototype={cleanup:function(){this.cleanupListeners()}}}.call("undefined"!=typeof window?window:this),function(){"use strict";var root=this,exports=root.jsPlumbUtil;exports.matchesSelector=function(el,selector,ctx){ctx=ctx||el.parentNode;for(var possibles=ctx.querySelectorAll(selector),i=0;i<possibles.length;i++)if(possibles[i]===el)return!0;return!1},exports.consume=function(e,doNotPreventDefault){e.stopPropagation?e.stopPropagation():e.returnValue=!1,!doNotPreventDefault&&e.preventDefault&&e.preventDefault()},exports.sizeElement=function(el,x,y,w,h){el&&(el.style.height=h+"px",el.height=h,el.style.width=w+"px",el.width=w,el.style.left=x+"px",el.style.top=y+"px")}}.call("undefined"!=typeof window?window:this),function(){"use strict";var rendererTypes,root=this,connectorTypes=[],_ju=root.jsPlumbUtil,_timestamp=function(){return""+(new Date).getTime()},_updateHoverStyle=function(component){if(component._jsPlumb.paintStyle&&component._jsPlumb.hoverPaintStyle){var mergedHoverStyle={};jsPlumb.extend(mergedHoverStyle,component._jsPlumb.paintStyle),jsPlumb.extend(mergedHoverStyle,component._jsPlumb.hoverPaintStyle),delete component._jsPlumb.hoverPaintStyle,mergedHoverStyle.gradient&&component._jsPlumb.paintStyle.fillStyle&&delete mergedHoverStyle.gradient,component._jsPlumb.hoverPaintStyle=mergedHoverStyle}},events=["tap","dbltap","click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","contextmenu"],_updateAttachedElements=function(component,state,timestamp,sourceElement){var affectedElements=component.getAttachedElements();if(affectedElements)for(var i=0,j=affectedElements.length;i<j;i++)sourceElement&&sourceElement==affectedElements[i]||affectedElements[i].setHover(state,!0,timestamp)},_splitType=function(t){return null==t?null:t.split(" ")},_mapType=function(map,obj,typeId){for(var i in obj)map[i]=typeId},_each=function(fn,obj){obj=_ju.isArray(obj)||null!=obj.length&&!_ju.isString(obj)?obj:[obj];for(var i=0;i<obj.length;i++)try{fn.apply(obj[i],[obj[i]])}catch(e){_ju.log(".each iteration failed : "+e)}},_applyTypes=function(component,params,doNotRepaint){if(component.getDefaultType){var td=component.getTypeDescriptor(),map={},defType=component.getDefaultType(),o=_ju.merge({},defType);_mapType(map,defType,"__default");for(var i=0,j=component._jsPlumb.types.length;i<j;i++){var tid=component._jsPlumb.types[i];if("__default"!==tid){var _t=component._jsPlumb.instance.getType(tid,td);null!=_t&&(o=_ju.merge(o,_t,["cssClass"]),_mapType(map,_t,tid))}}params&&(o=_ju.populate(o,params,"_")),component.applyType(o,doNotRepaint,map),doNotRepaint||component.repaint()}},jsPlumbUIComponent=root.jsPlumbUIComponent=function(params){_ju.EventGenerator.apply(this,arguments);var self=this,a=arguments,idPrefix=self.idPrefix,id=idPrefix+(new Date).getTime();this._jsPlumb={instance:params._jsPlumb,parameters:params.parameters||{},paintStyle:null,hoverPaintStyle:null,paintStyleInUse:null,hover:!1,beforeDetach:params.beforeDetach,beforeDrop:params.beforeDrop,overlayPlacements:[],hoverClass:params.hoverClass||params._jsPlumb.Defaults.HoverClass,types:[],typeCache:{}},this.cacheTypeItem=function(key,item,typeId){this._jsPlumb.typeCache[typeId]=this._jsPlumb.typeCache[typeId]||{},this._jsPlumb.typeCache[typeId][key]=item},this.getCachedTypeItem=function(key,typeId){return this._jsPlumb.typeCache[typeId]?this._jsPlumb.typeCache[typeId][key]:null},this.getId=function(){return id};var o=params.overlays||[],oo={};if(this.defaultOverlayKeys){for(var i=0;i<this.defaultOverlayKeys.length;i++)Array.prototype.push.apply(o,this._jsPlumb.instance.Defaults[this.defaultOverlayKeys[i]]||[]);for(i=0;i<o.length;i++){var fo=jsPlumb.convertToFullOverlaySpec(o[i]);oo[fo[1].id]=fo}}var _defaultType={overlays:oo,parameters:params.parameters||{},scope:params.scope||this._jsPlumb.instance.getDefaultScope()};if(this.getDefaultType=function(){return _defaultType},this.appendToDefaultType=function(obj){for(var i in obj)_defaultType[i]=obj[i]},params.events)for(i in params.events)self.bind(i,params.events[i]);this.clone=function(){var o=Object.create(this.constructor.prototype);return this.constructor.apply(o,a),o}.bind(this),this.isDetachAllowed=function(connection){var r=!0;if(this._jsPlumb.beforeDetach)try{r=this._jsPlumb.beforeDetach(connection)}catch(e){_ju.log("jsPlumb: beforeDetach callback failed",e)}return r},this.isDropAllowed=function(sourceId,targetId,scope,connection,dropEndpoint,source,target){var r=this._jsPlumb.instance.checkCondition("beforeDrop",{sourceId:sourceId,targetId:targetId,scope:scope,connection:connection,dropEndpoint:dropEndpoint,source:source,target:target});if(this._jsPlumb.beforeDrop)try{r=this._jsPlumb.beforeDrop({sourceId:sourceId,targetId:targetId,scope:scope,connection:connection,dropEndpoint:dropEndpoint,source:source,target:target})}catch(e){_ju.log("jsPlumb: beforeDrop callback failed",e)}return r};var domListeners=[];this.setListenerComponent=function(c){for(var i=0;i<domListeners.length;i++)domListeners[i][3]=c}},_removeTypeCssHelper=function(component,typeIndex){var typeId=component._jsPlumb.types[typeIndex],type=component._jsPlumb.instance.getType(typeId,component.getTypeDescriptor());null!=type&&type.cssClass&&component.canvas&&component._jsPlumb.instance.removeClass(component.canvas,type.cssClass)};_ju.extend(root.jsPlumbUIComponent,_ju.EventGenerator,{getParameter:function(name){return this._jsPlumb.parameters[name]},setParameter:function(name,value){this._jsPlumb.parameters[name]=value},getParameters:function(){return this._jsPlumb.parameters},setParameters:function(p){this._jsPlumb.parameters=p},getClass:function(){return jsPlumb.getClass(this.canvas)},hasClass:function(clazz){return jsPlumb.hasClass(this.canvas,clazz)},addClass:function(clazz){jsPlumb.addClass(this.canvas,clazz)},removeClass:function(clazz){jsPlumb.removeClass(this.canvas,clazz)},updateClasses:function(classesToAdd,classesToRemove){jsPlumb.updateClasses(this.canvas,classesToAdd,classesToRemove)},setType:function(typeId,params,doNotRepaint){this.clearTypes(),this._jsPlumb.types=_splitType(typeId)||[],_applyTypes(this,params,doNotRepaint)},getType:function(){return this._jsPlumb.types},reapplyTypes:function(params,doNotRepaint){_applyTypes(this,params,doNotRepaint)},hasType:function(typeId){return this._jsPlumb.types.indexOf(typeId)!=-1},addType:function(typeId,params,doNotRepaint){var t=_splitType(typeId),_cont=!1;if(null!=t){for(var i=0,j=t.length;i<j;i++)this.hasType(t[i])||(this._jsPlumb.types.push(t[i]),_cont=!0);_cont&&_applyTypes(this,params,doNotRepaint)}},removeType:function(typeId,params,doNotRepaint){var t=_splitType(typeId),_cont=!1,_one=function(tt){var idx=this._jsPlumb.types.indexOf(tt);return idx!=-1&&(_removeTypeCssHelper(this,idx),this._jsPlumb.types.splice(idx,1),!0)}.bind(this);if(null!=t){for(var i=0,j=t.length;i<j;i++)_cont=_one(t[i])||_cont;_cont&&_applyTypes(this,params,doNotRepaint)}},clearTypes:function(params,doNotRepaint){for(var i=this._jsPlumb.types.length,j=0;j<i;j++)_removeTypeCssHelper(this,0),this._jsPlumb.types.splice(0,1);_applyTypes(this,params,doNotRepaint)},toggleType:function(typeId,params,doNotRepaint){var t=_splitType(typeId);if(null!=t){for(var i=0,j=t.length;i<j;i++){var idx=this._jsPlumb.types.indexOf(t[i]);idx!=-1?(_removeTypeCssHelper(this,idx),this._jsPlumb.types.splice(idx,1)):this._jsPlumb.types.push(t[i])}_applyTypes(this,params,doNotRepaint)}},applyType:function(t,doNotRepaint){if(this.setPaintStyle(t.paintStyle,doNotRepaint),this.setHoverPaintStyle(t.hoverPaintStyle,doNotRepaint),t.parameters)for(var i in t.parameters)this.setParameter(i,t.parameters[i]);this._jsPlumb.paintStyleInUse=this.getPaintStyle()},setPaintStyle:function(style,doNotRepaint){this._jsPlumb.paintStyle=style,this._jsPlumb.paintStyleInUse=this._jsPlumb.paintStyle,_updateHoverStyle(this),doNotRepaint||this.repaint()},getPaintStyle:function(){return this._jsPlumb.paintStyle},setHoverPaintStyle:function(style,doNotRepaint){this._jsPlumb.hoverPaintStyle=style,_updateHoverStyle(this),doNotRepaint||this.repaint()},getHoverPaintStyle:function(){return this._jsPlumb.hoverPaintStyle},destroy:function(force){(force||null==this.typeId)&&(this.cleanupListeners(),this.clone=null,this._jsPlumb=null)},isHover:function(){return this._jsPlumb.hover},setHover:function(hover,ignoreAttachedElements,timestamp){if(this._jsPlumb&&!this._jsPlumb.instance.currentlyDragging&&!this._jsPlumb.instance.isHoverSuspended()){if(this._jsPlumb.hover=hover,null!=this.canvas){if(null!=this._jsPlumb.instance.hoverClass){var method=hover?"addClass":"removeClass";this._jsPlumb.instance[method](this.canvas,this._jsPlumb.instance.hoverClass)}null!=this._jsPlumb.hoverClass&&this._jsPlumb.instance[method](this.canvas,this._jsPlumb.hoverClass)}null!=this._jsPlumb.hoverPaintStyle&&(this._jsPlumb.paintStyleInUse=hover?this._jsPlumb.hoverPaintStyle:this._jsPlumb.paintStyle,this._jsPlumb.instance.isSuspendDrawing()||(timestamp=timestamp||_timestamp(),this.repaint({timestamp:timestamp,recalc:!1}))),this.getAttachedElements&&!ignoreAttachedElements&&_updateAttachedElements(this,hover,_timestamp(),this)}}});var _jsPlumbInstanceIndex=0,getInstanceIndex=function(){var i=_jsPlumbInstanceIndex+1;return _jsPlumbInstanceIndex++,i},jsPlumbInstance=root.jsPlumbInstance=function(_defaults){this.Defaults={Anchor:"Bottom",Anchors:[null,null],ConnectionsDetachable:!0,ConnectionOverlays:[],Connector:"Bezier",Container:null,DoNotThrowErrors:!1,DragOptions:{},DropOptions:{},Endpoint:"Dot",EndpointOverlays:[],Endpoints:[null,null],EndpointStyle:{fillStyle:"#456"},EndpointStyles:[null,null],EndpointHoverStyle:null,EndpointHoverStyles:[null,null],HoverPaintStyle:null,LabelStyle:{color:"black"},LogEnabled:!1,Overlays:[],MaxConnections:1,PaintStyle:{lineWidth:4,strokeStyle:"#456"},ReattachConnections:!1,RenderMode:"svg",Scope:"jsPlumb_DefaultScope"},_defaults&&jsPlumb.extend(this.Defaults,_defaults),this.logEnabled=this.Defaults.LogEnabled,this._connectionTypes={},this._endpointTypes={},_ju.EventGenerator.apply(this);var _currentInstance=this,_instanceIndex=getInstanceIndex(),_bb=_currentInstance.bind,_initialDefaults={},_zoom=1,_info=function(el){if(null==el)return null;if(3==el.nodeType||8==el.nodeType)return{el:el,text:!0};var _el=_currentInstance.getElement(el);return{el:_el,id:_ju.isString(el)&&null==_el?el:_getId(_el)}};this.getInstanceIndex=function(){return _instanceIndex},this.setZoom=function(z,repaintEverything){return _zoom=z,_currentInstance.fire("zoom",_zoom),repaintEverything&&_currentInstance.repaintEverything(),!0},this.getZoom=function(){return _zoom};for(var i in this.Defaults)_initialDefaults[i]=this.Defaults[i];var _container,_containerDelegations=[];this.unbindContainer=function(){if(null!=_container&&_containerDelegations.length>0)for(var i=0;i<_containerDelegations.length;i++)_currentInstance.off(_container,_containerDelegations[i][0],_containerDelegations[i][1])},this.setContainer=function(c){this.unbindContainer(),c=this.getElement(c),this.select().each(function(conn){conn.moveParent(c)}),this.selectEndpoints().each(function(ep){ep.moveParent(c)});var previousContainer=_container;_container=c,_containerDelegations.length=0;for(var eventAliases={endpointclick:"endpointClick",endpointdblclick:"endpointDblClick"},_oneDelegateHandler=function(id,e,componentType){var t=e.srcElement||e.target,jp=(t&&t.parentNode?t.parentNode._jsPlumb:null)||(t?t._jsPlumb:null)||(t&&t.parentNode&&t.parentNode.parentNode?t.parentNode.parentNode._jsPlumb:null);if(jp){jp.fire(id,jp,e);var alias=componentType?eventAliases[componentType+id]||id:id;_currentInstance.fire(alias,jp.component||jp,e)}},_addOneDelegate=function(eventId,selector,fn){_containerDelegations.push([eventId,fn]),_currentInstance.on(_container,eventId,selector,fn)},_oneDelegate=function(id){_addOneDelegate(id,".jsplumb-connector",function(e){_oneDelegateHandler(id,e)}),_addOneDelegate(id,".jsplumb-endpoint",function(e){_oneDelegateHandler(id,e,"endpoint")}),_addOneDelegate(id,".jsplumb-overlay",function(e){_oneDelegateHandler(id,e)})},i=0;i<events.length;i++)_oneDelegate(events[i]);for(var elId in managedElements){var el=managedElements[elId].el;el.parentNode===previousContainer&&(previousContainer.removeChild(el),_container.appendChild(el))}},this.getContainer=function(){return _container},this.bind=function(event,fn){"ready"===event&&initialized?fn():_bb.apply(_currentInstance,[event,fn])},_currentInstance.importDefaults=function(d){for(var i in d)_currentInstance.Defaults[i]=d[i];return d.Container&&_currentInstance.setContainer(d.Container),_currentInstance},_currentInstance.restoreDefaults=function(){return _currentInstance.Defaults=jsPlumb.extend({},_initialDefaults),_currentInstance};var log=null,initialized=!1,connections=[],endpointsByElement={},endpointsByUUID={},managedElements={},offsets={},offsetTimestamps={},draggableStates={},connectionBeingDragged=!1,sizes=[],_suspendDrawing=!1,_suspendedAt=null,DEFAULT_SCOPE=this.Defaults.Scope,_curIdStamp=1,_idstamp=function(){return""+_curIdStamp++},_appendElement=function(el,parent){_container?_container.appendChild(el):parent?this.getElement(parent).appendChild(el):this.appendToRoot(el)}.bind(this),_draw=function(element,ui,timestamp,clearEdits){if(!jsPlumb.headless&&!_suspendDrawing){var id=_getId(element),repaintEls=_currentInstance.getDragManager().getElementsForDraggable(id);null==timestamp&&(timestamp=_timestamp());var o=_updateOffset({elId:id,offset:ui,recalc:!1,timestamp:timestamp});if(repaintEls)for(var i in repaintEls)_updateOffset({elId:repaintEls[i].id,offset:{left:o.o.left+repaintEls[i].offset.left,top:o.o.top+repaintEls[i].offset.top},recalc:!1,timestamp:timestamp});if(_currentInstance.anchorManager.redraw(id,ui,timestamp,null,clearEdits),repaintEls)for(var j in repaintEls)_currentInstance.anchorManager.redraw(repaintEls[j].id,ui,timestamp,repaintEls[j].offset,clearEdits,!0)}},_getEndpoint=function(uuid){return endpointsByUUID[uuid]},_initDraggableIfNecessary=function(element,isDraggable,dragOptions,id,fireEvent){if(!jsPlumb.headless){var _draggable=null!=isDraggable&&isDraggable;if(_draggable&&jsPlumb.isDragSupported(element,_currentInstance)){var options=dragOptions||_currentInstance.Defaults.DragOptions;if(options=jsPlumb.extend({},options),jsPlumb.isAlreadyDraggable(element,_currentInstance))dragOptions.force&&_currentInstance.initDraggable(element,options);else{var dragEvent=jsPlumb.dragEvents.drag,stopEvent=jsPlumb.dragEvents.stop,startEvent=jsPlumb.dragEvents.start,_started=!1;_manage(id,element),options[startEvent]=_ju.wrap(options[startEvent],function(){if(_currentInstance.setHoverSuspended(!0),_currentInstance.select({source:element}).addClass(_currentInstance.elementDraggingClass+" "+_currentInstance.sourceElementDraggingClass,!0),_currentInstance.select({target:element}).addClass(_currentInstance.elementDraggingClass+" "+_currentInstance.targetElementDraggingClass,!0),_currentInstance.setConnectionBeingDragged(!0),options.canDrag)return dragOptions.canDrag()},!1),options[dragEvent]=_ju.wrap(options[dragEvent],function(){var ui=_currentInstance.getUIPosition(arguments,_currentInstance.getZoom());null!=ui&&(_draw(element,ui,null,!0),_started&&_currentInstance.addClass(element,"jsplumb-dragged"),_started=!0)}),options[stopEvent]=_ju.wrap(options[stopEvent],function(){for(var elements=arguments[0].selection,_one=function(_e){null!=_e[1]&&_draw(_e[2].el,_e[1]),_currentInstance.removeClass(_e[0],"jsplumb-dragged"),_currentInstance.select({source:_e[2].el}).removeClass(_currentInstance.elementDraggingClass+" "+_currentInstance.sourceElementDraggingClass,!0),_currentInstance.select({target:_e[2].el}).removeClass(_currentInstance.elementDraggingClass+" "+_currentInstance.targetElementDraggingClass,!0),_currentInstance.getDragManager().dragEnded(_e[2].el)},i=0;i<elements.length;i++)_one(elements[i]);_started=!1,_currentInstance.setHoverSuspended(!1),_currentInstance.setConnectionBeingDragged(!1)});var elId=_getId(element);draggableStates[elId]=!0;var draggable=draggableStates[elId];options.disabled=null!=draggable&&!draggable,_currentInstance.initDraggable(element,options),_currentInstance.getDragManager().register(element),fireEvent&&_currentInstance.fire("elementDraggable",{el:element,options:options})}}}},_scopeMatch=function(e1,e2){for(var s1=e1.scope.split(/\s/),s2=e2.scope.split(/\s/),i=0;i<s1.length;i++)for(var j=0;j<s2.length;j++)if(s2[j]==s1[i])return!0;return!1},_prepareConnectionParams=function(params,referenceParams){var _p=jsPlumb.extend({},params);if(referenceParams&&jsPlumb.extend(_p,referenceParams),_p.source&&(_p.source.endpoint?_p.sourceEndpoint=_p.source:_p.source=_currentInstance.getElement(_p.source)),_p.target&&(_p.target.endpoint?_p.targetEndpoint=_p.target:_p.target=_currentInstance.getElement(_p.target)),params.uuids&&(_p.sourceEndpoint=_getEndpoint(params.uuids[0]),_p.targetEndpoint=_getEndpoint(params.uuids[1])),_p.sourceEndpoint&&_p.sourceEndpoint.isFull())return void _ju.log(_currentInstance,"could not add connection; source endpoint is full");if(_p.targetEndpoint&&_p.targetEndpoint.isFull())return void _ju.log(_currentInstance,"could not add connection; target endpoint is full");if(!_p.type&&_p.sourceEndpoint&&(_p.type=_p.sourceEndpoint.connectionType),_p.sourceEndpoint&&_p.sourceEndpoint.connectorOverlays){_p.overlays=_p.overlays||[];for(var i=0,j=_p.sourceEndpoint.connectorOverlays.length;i<j;i++)_p.overlays.push(_p.sourceEndpoint.connectorOverlays[i])}_p.sourceEndpoint&&_p.sourceEndpoint.scope&&(_p.scope=_p.sourceEndpoint.scope),!_p["pointer-events"]&&_p.sourceEndpoint&&_p.sourceEndpoint.connectorPointerEvents&&(_p["pointer-events"]=_p.sourceEndpoint.connectorPointerEvents);var _mergeOverrides=function(def,values){var m=jsPlumb.extend({},def);for(var i in values)values[i]&&(m[i]=values[i]);return m},_addEndpoint=function(el,def,idx){return _currentInstance.addEndpoint(el,_mergeOverrides(def,{anchor:_p.anchors?_p.anchors[idx]:_p.anchor,endpoint:_p.endpoints?_p.endpoints[idx]:_p.endpoint,paintStyle:_p.endpointStyles?_p.endpointStyles[idx]:_p.endpointStyle,hoverPaintStyle:_p.endpointHoverStyles?_p.endpointHoverStyles[idx]:_p.endpointHoverStyle}))},_oneElementDef=function(type,idx,defs,matchType){if(_p[type]&&!_p[type].endpoint&&!_p[type+"Endpoint"]&&!_p.newConnection){var tid=_getId(_p[type]),tep=defs[tid];if(tep=tep?tep[matchType]:null){if(!tep.enabled)return!1;var newEndpoint=null!=tep.endpoint&&tep.endpoint._jsPlumb?tep.endpoint:_addEndpoint(_p[type],tep.def,idx);if(newEndpoint.isFull())return!1;_p[type+"Endpoint"]=newEndpoint,newEndpoint._doNotDeleteOnDetach=!1,newEndpoint._deleteOnDetach=!0,tep.uniqueEndpoint&&(tep.endpoint?newEndpoint.finalEndpoint=tep.endpoint:(tep.endpoint=newEndpoint,newEndpoint._deleteOnDetach=!1,newEndpoint._doNotDeleteOnDetach=!0))}}};return _oneElementDef("source",0,this.sourceEndpointDefinitions,_p.type||"default")!==!1&&_oneElementDef("target",1,this.targetEndpointDefinitions,_p.type||"default")!==!1?(_p.sourceEndpoint&&_p.targetEndpoint&&(_scopeMatch(_p.sourceEndpoint,_p.targetEndpoint)||(_p=null)),_p):void 0}.bind(_currentInstance),_newConnection=function(params){var connectionFunc=_currentInstance.Defaults.ConnectionType||_currentInstance.getDefaultConnectionType();params._jsPlumb=_currentInstance,params.newConnection=_newConnection,params.newEndpoint=_newEndpoint,params.endpointsByUUID=endpointsByUUID,params.endpointsByElement=endpointsByElement,params.finaliseConnection=_finaliseConnection,params.id="con_"+_idstamp();var con=new connectionFunc(params);return con.isDetachable()&&(con.endpoints[0].initDraggable("_jsPlumbSource"),con.endpoints[1].initDraggable("_jsPlumbTarget")),con},_finaliseConnection=_currentInstance.finaliseConnection=function(jpc,params,originalEvent,doInformAnchorManager){if(params=params||{},jpc.suspendedEndpoint||connections.push(jpc),jpc.pending=null,jpc.endpoints[0].isTemporarySource=!1,doInformAnchorManager!==!1&&_currentInstance.anchorManager.newConnection(jpc),_draw(jpc.source),!params.doNotFireConnectionEvent&&params.fireEvent!==!1){var eventArgs={connection:jpc,source:jpc.source,target:jpc.target,sourceId:jpc.sourceId,targetId:jpc.targetId,sourceEndpoint:jpc.endpoints[0],targetEndpoint:jpc.endpoints[1]};_currentInstance.fire("connection",eventArgs,originalEvent)}},_newEndpoint=function(params,id){var endpointFunc=_currentInstance.Defaults.EndpointType||jsPlumb.Endpoint,_p=jsPlumb.extend({},params);_p._jsPlumb=_currentInstance,_p.newConnection=_newConnection,_p.newEndpoint=_newEndpoint,_p.endpointsByUUID=endpointsByUUID,_p.endpointsByElement=endpointsByElement,_p.fireDetachEvent=fireDetachEvent,_p.elementId=id||_getId(_p.source);var ep=new endpointFunc(_p);return ep.id="ep_"+_idstamp(),_manage(_p.elementId,_p.source),jsPlumb.headless||_currentInstance.getDragManager().endpointAdded(_p.source,id),ep},_operation=function(elId,func,endpointFunc){var endpoints=endpointsByElement[elId];if(endpoints&&endpoints.length)for(var i=0,ii=endpoints.length;i<ii;i++){for(var j=0,jj=endpoints[i].connections.length;j<jj;j++){var retVal=func(endpoints[i].connections[j]);if(retVal)return}endpointFunc&&endpointFunc(endpoints[i])}},_setDraggable=function(element,draggable){return jsPlumb.each(element,function(el){_currentInstance.isDragSupported(el)&&(draggableStates[_currentInstance.getAttribute(el,"id")]=draggable,_currentInstance.setElementDraggable(el,draggable))})},_setVisible=function(el,state,alsoChangeEndpoints){state="block"===state;var endpointFunc=null;alsoChangeEndpoints&&(endpointFunc=function(ep){ep.setVisible(state,!0,!0)});var info=_info(el);_operation(info.id,function(jpc){if(state&&alsoChangeEndpoints){var oidx=jpc.sourceId===info.id?1:0;jpc.endpoints[oidx].isVisible()&&jpc.setVisible(!0)}else jpc.setVisible(state)},endpointFunc)},_toggleDraggable=function(el){var state;return jsPlumb.each(el,function(el){var elId=_currentInstance.getAttribute(el,"id");return state=null!=draggableStates[elId]&&draggableStates[elId],state=!state,draggableStates[elId]=state,_currentInstance.setDraggable(el,state),state}.bind(this)),state},_toggleVisible=function(elId,changeEndpoints){var endpointFunc=null;changeEndpoints&&(endpointFunc=function(ep){var state=ep.isVisible();ep.setVisible(!state)}),_operation(elId,function(jpc){var state=jpc.isVisible();jpc.setVisible(!state)},endpointFunc)},_getCachedData=function(elId){var o=offsets[elId];return o?{o:o,s:sizes[elId]}:_updateOffset({elId:elId})},_getId=function(element,uuid,doNotCreateIfNotFound){if(_ju.isString(element))return element;if(null==element)return null;var id=_currentInstance.getAttribute(element,"id");return id&&"undefined"!==id||(2==arguments.length&&void 0!==arguments[1]?id=uuid:(1==arguments.length||3==arguments.length&&!arguments[2])&&(id="jsPlumb_"+_instanceIndex+"_"+_idstamp()),doNotCreateIfNotFound||_currentInstance.setAttribute(element,"id",id)),id};this.setConnectionBeingDragged=function(v){connectionBeingDragged=v},this.isConnectionBeingDragged=function(){return connectionBeingDragged},this.getManagedElements=function(){return managedElements},this.getRenderMode=function(){return"svg"},this.connectorClass="jsplumb-connector",this.connectorOutlineClass="jsplumb-connector-outline",this.editableConnectorClass="jsplumb-connector-editable",this.connectedClass="jsplumb-connected",this.hoverClass="jsplumb-hover",this.endpointClass="jsplumb-endpoint",this.endpointConnectedClass="jsplumb-endpoint-connected",this.endpointFullClass="jsplumb-endpoint-full",this.endpointDropAllowedClass="jsplumb-endpoint-drop-allowed",this.endpointDropForbiddenClass="jsplumb-endpoint-drop-forbidden",this.overlayClass="jsplumb-overlay",this.draggingClass="jsplumb-dragging",this.elementDraggingClass="jsplumb-element-dragging",this.sourceElementDraggingClass="jsplumb-source-element-dragging",this.targetElementDraggingClass="jsplumb-target-element-dragging",this.endpointAnchorClassPrefix="jsplumb-endpoint-anchor",this.hoverSourceClass="jsplumb-source-hover",this.hoverTargetClass="jsplumb-target-hover",this.dragSelectClass="jsplumb-drag-select",this.Anchors={},this.Connectors={svg:{}},this.Endpoints={svg:{}},this.Overlays={svg:{}},this.ConnectorRenderers={},this.SVG="svg",this.addEndpoint=function(el,params,referenceParams){referenceParams=referenceParams||{};var p=jsPlumb.extend({},referenceParams);jsPlumb.extend(p,params),p.endpoint=p.endpoint||_currentInstance.Defaults.Endpoint,p.paintStyle=p.paintStyle||_currentInstance.Defaults.EndpointStyle;for(var results=[],inputs=_ju.isArray(el)||null!=el.length&&!_ju.isString(el)?el:[el],i=0,j=inputs.length;i<j;i++){p.source=_currentInstance.getElement(inputs[i]),_ensureContainer(p.source);var id=_getId(p.source),e=_newEndpoint(p,id),myOffset=_manage(id,p.source).info.o;_ju.addToList(endpointsByElement,id,e),_suspendDrawing||e.paint({anchorLoc:e.anchor.compute({xy:[myOffset.left,myOffset.top],wh:sizes[id],element:e,timestamp:_suspendedAt}),timestamp:_suspendedAt}),results.push(e),e._doNotDeleteOnDetach=!0}return 1==results.length?results[0]:results},this.addEndpoints=function(el,endpoints,referenceParams){for(var results=[],i=0,j=endpoints.length;i<j;i++){var e=_currentInstance.addEndpoint(el,endpoints[i],referenceParams);_ju.isArray(e)?Array.prototype.push.apply(results,e):results.push(e)}return results},this.animate=function(el,properties,options){if(!this.animationSupported)return!1;options=options||{};var del=_currentInstance.getElement(el),id=_getId(del),stepFunction=jsPlumb.animEvents.step,completeFunction=jsPlumb.animEvents.complete;options[stepFunction]=_ju.wrap(options[stepFunction],function(){_currentInstance.revalidate(id)}),options[completeFunction]=_ju.wrap(options[completeFunction],function(){_currentInstance.revalidate(id)}),_currentInstance.doAnimate(del,properties,options)},this.checkCondition=function(conditionName,args){var l=_currentInstance.getListener(conditionName),r=!0;if(l&&l.length>0){var values=Array.prototype.slice.call(arguments,1);try{for(var i=0,j=l.length;i<j;i++)r=r&&l[i].apply(l[i],values)}catch(e){_ju.log(_currentInstance,"cannot check condition ["+conditionName+"]"+e)}}return r},this.connect=function(params,referenceParams){var jpc,_p=_prepareConnectionParams(params,referenceParams);if(_p){if(null==_p.source&&null==_p.sourceEndpoint)return void _ju.log("Cannot establish connection - source does not exist");if(null==_p.target&&null==_p.targetEndpoint)return void _ju.log("Cannot establish connection - target does not exist");_ensureContainer(_p.source),jpc=_newConnection(_p),_finaliseConnection(jpc,_p)}return jpc};var stTypes=[{el:"source",elId:"sourceId",epDefs:"sourceEndpointDefinitions"},{el:"target",elId:"targetId",epDefs:"targetEndpointDefinitions"}],_set=function(c,el,idx,doNotRepaint){var ep,sid,sep,_st=stTypes[idx],cId=c[_st.elId],oldEndpoint=(c[_st.el],c.endpoints[idx]),evtParams={index:idx,originalSourceId:0===idx?cId:c.sourceId,newSourceId:c.sourceId,originalTargetId:1==idx?cId:c.targetId,newTargetId:c.targetId,connection:c};if(el.constructor==jsPlumb.Endpoint)ep=el,ep.addConnection(c),el=ep.element;else if(sid=_getId(el),sep=this[_st.epDefs][sid],sid===c[_st.elId])ep=null;else if(sep)for(var t in sep){if(!sep[t].enabled)return;ep=null!=sep[t].endpoint&&sep[t].endpoint._jsPlumb?sep[t].endpoint:this.addEndpoint(el,sep[t].def),sep[t].uniqueEndpoint&&(sep[t].endpoint=ep),ep._doNotDeleteOnDetach=!1,ep._deleteOnDetach=!0,ep.addConnection(c)}else ep=c.makeEndpoint(0===idx,el,sid),ep._doNotDeleteOnDetach=!1,ep._deleteOnDetach=!0;return null!=ep&&(oldEndpoint.detachFromConnection(c),c.endpoints[idx]=ep,c[_st.el]=ep.element,c[_st.elId]=ep.elementId,evtParams[0===idx?"newSourceId":"newTargetId"]=ep.elementId,fireMoveEvent(evtParams),doNotRepaint||c.repaint()),evtParams.element=el,evtParams}.bind(this);this.setSource=function(connection,el,doNotRepaint){var p=_set(connection,el,0,doNotRepaint);this.anchorManager.sourceChanged(p.originalSourceId,p.newSourceId,connection,p.el)},this.setTarget=function(connection,el,doNotRepaint){var p=_set(connection,el,1,doNotRepaint);this.anchorManager.updateOtherEndpoint(p.originalSourceId,p.originalTargetId,p.newTargetId,connection)},this.deleteEndpoint=function(object,dontUpdateHover,deleteAttachedObjects){var endpoint="string"==typeof object?endpointsByUUID[object]:object;return endpoint&&_currentInstance.deleteObject({endpoint:endpoint,dontUpdateHover:dontUpdateHover,deleteAttachedObjects:deleteAttachedObjects}),_currentInstance},this.deleteEveryEndpoint=function(){var _is=_currentInstance.setSuspendDrawing(!0);for(var id in endpointsByElement){var endpoints=endpointsByElement[id];if(endpoints&&endpoints.length)for(var i=0,j=endpoints.length;i<j;i++)_currentInstance.deleteEndpoint(endpoints[i],!0)}return endpointsByElement={},managedElements={},endpointsByUUID={},offsets={},offsetTimestamps={},_currentInstance.anchorManager.reset(),_currentInstance.getDragManager().reset(),_is||_currentInstance.setSuspendDrawing(!1),_currentInstance};var fireDetachEvent=function(jpc,doFireEvent,originalEvent){var connType=_currentInstance.Defaults.ConnectionType||_currentInstance.getDefaultConnectionType(),argIsConnection=jpc.constructor==connType,params=argIsConnection?{connection:jpc,source:jpc.source,target:jpc.target,sourceId:jpc.sourceId,targetId:jpc.targetId,sourceEndpoint:jpc.endpoints[0],targetEndpoint:jpc.endpoints[1]}:jpc;doFireEvent&&_currentInstance.fire("connectionDetached",params,originalEvent),_currentInstance.anchorManager.connectionDetached(params)},fireMoveEvent=_currentInstance.fireMoveEvent=function(params,evt){_currentInstance.fire("connectionMoved",params,evt)};this.unregisterEndpoint=function(endpoint){endpoint._jsPlumb.uuid&&(endpointsByUUID[endpoint._jsPlumb.uuid]=null),_currentInstance.anchorManager.deleteEndpoint(endpoint);for(var e in endpointsByElement){var endpoints=endpointsByElement[e];if(endpoints){for(var newEndpoints=[],i=0,j=endpoints.length;i<j;i++)endpoints[i]!=endpoint&&newEndpoints.push(endpoints[i]);
endpointsByElement[e]=newEndpoints}endpointsByElement[e].length<1&&delete endpointsByElement[e]}},this.detach=function(){if(0!==arguments.length){var connType=_currentInstance.Defaults.ConnectionType||_currentInstance.getDefaultConnectionType(),firstArgIsConnection=arguments[0].constructor==connType,params=2==arguments.length&&firstArgIsConnection?arguments[1]||{}:arguments[0],fireEvent=params.fireEvent!==!1,forceDetach=params.forceDetach,conn=firstArgIsConnection?arguments[0]:params.connection,deleteAttachedObjects=firstArgIsConnection?null:params.deleteAttachedObjects;if(conn)(forceDetach||_ju.functionChain(!0,!1,[[conn.endpoints[0],"isDetachAllowed",[conn]],[conn.endpoints[1],"isDetachAllowed",[conn]],[conn,"isDetachAllowed",[conn]],[_currentInstance,"checkCondition",["beforeDetach",conn]]]))&&conn.endpoints[0].detach({connection:conn,ignoreTarget:!1,forceDetach:!0,fireEvent:fireEvent,deleteAttachedObjects:deleteAttachedObjects});else{var _p=jsPlumb.extend({},params);if(_p.uuids)_getEndpoint(_p.uuids[0]).detachFrom(_getEndpoint(_p.uuids[1]),fireEvent);else if(_p.sourceEndpoint&&_p.targetEndpoint)_p.sourceEndpoint.detachFrom(_p.targetEndpoint);else{var sourceId=_getId(_currentInstance.getElement(_p.source)),targetId=_getId(_currentInstance.getElement(_p.target));_operation(sourceId,function(jpc){(jpc.sourceId==sourceId&&jpc.targetId==targetId||jpc.targetId==sourceId&&jpc.sourceId==targetId)&&_currentInstance.checkCondition("beforeDetach",jpc)&&jpc.endpoints[0].detach({connection:jpc,ignoreTarget:!1,forceDetach:!0,fireEvent:fireEvent})})}}}},this.detachAllConnections=function(el,params){params=params||{},el=_currentInstance.getElement(el);var id=_getId(el),endpoints=endpointsByElement[id];if(endpoints&&endpoints.length)for(var i=0,j=endpoints.length;i<j;i++)endpoints[i].detachAll(params.fireEvent!==!1,params.forceDetach);return _currentInstance},this.detachEveryConnection=function(params){return params=params||{},_currentInstance.batch(function(){for(var id in endpointsByElement){var endpoints=endpointsByElement[id];if(endpoints&&endpoints.length)for(var i=0,j=endpoints.length;i<j;i++)endpoints[i].detachAll(params.fireEvent!==!1,params.forceDetach)}connections.length=0}),_currentInstance},this.deleteObject=function(params){var result={endpoints:{},connections:{},endpointCount:0,connectionCount:0},deleteAttachedObjects=(params.fireEvent!==!1,params.deleteAttachedObjects!==!1),unravelConnection=function(connection){if(null!=connection&&null==result.connections[connection.id]&&(params.dontUpdateHover||null==connection._jsPlumb||connection.setHover(!1),result.connections[connection.id]=connection,result.connectionCount++,deleteAttachedObjects))for(var j=0;j<connection.endpoints.length;j++)connection.endpoints[j]._deleteOnDetach&&unravelEndpoint(connection.endpoints[j])},unravelEndpoint=function(endpoint){if(null!=endpoint&&null==result.endpoints[endpoint.id]&&(params.dontUpdateHover||null==endpoint._jsPlumb||endpoint.setHover(!1),result.endpoints[endpoint.id]=endpoint,result.endpointCount++,deleteAttachedObjects))for(var i=0;i<endpoint.connections.length;i++){var c=endpoint.connections[i];unravelConnection(c)}};params.connection?unravelConnection(params.connection):unravelEndpoint(params.endpoint);for(var i in result.connections){var c=result.connections[i];if(c._jsPlumb){_ju.removeWithFunction(connections,function(_c){return c.id==_c.id}),fireDetachEvent(c,params.fireEvent!==!1&&!c.pending,params.originalEvent);var doNotCleanup=null==params.deleteAttachedObjects?null:!params.deleteAttachedObjects;c.endpoints[0].detachFromConnection(c,null,doNotCleanup),c.endpoints[1].detachFromConnection(c,null,doNotCleanup),c.cleanup(!0),c.destroy(!0)}}for(var j in result.endpoints){var e=result.endpoints[j];e._jsPlumb&&(_currentInstance.unregisterEndpoint(e),e.cleanup(!0),e.destroy(!0))}return result},this.draggable=function(el,options){var info;return _each(function(_el){info=_info(_el),info.el&&_initDraggableIfNecessary(info.el,!0,options,info.id,!0)},el),_currentInstance},this.droppable=function(el,options){var info;return options=options||{},options.allowLoopback=!1,_each(function(_el){info=_info(_el),info.el&&_currentInstance.initDroppable(info.el,options)},el),_currentInstance};var _setOperation=function(list,func,args,selector){for(var i=0,j=list.length;i<j;i++)list[i][func].apply(list[i],args);return selector(list)},_getOperation=function(list,func,args){for(var out=[],i=0,j=list.length;i<j;i++)out.push([list[i][func].apply(list[i],args),list[i]]);return out},setter=function(list,func,selector){return function(){return _setOperation(list,func,arguments,selector)}},getter=function(list,func){return function(){return _getOperation(list,func,arguments)}},prepareList=function(input,doNotGetIds){var r=[];if(input)if("string"==typeof input){if("*"===input)return input;r.push(input)}else if(doNotGetIds)r=input;else if(input.length)for(var i=0,j=input.length;i<j;i++)r.push(_info(input[i]).id);else r.push(_info(input).id);return r},filterList=function(list,value,missingIsFalse){return"*"===list||(list.length>0?list.indexOf(value)!=-1:!missingIsFalse)};this.getConnections=function(options,flat){options?options.constructor==String&&(options={scope:options}):options={};for(var scope=options.scope||_currentInstance.getDefaultScope(),scopes=prepareList(scope,!0),sources=prepareList(options.source),targets=prepareList(options.target),results=!flat&&scopes.length>1?{}:[],_addOne=function(scope,obj){if(!flat&&scopes.length>1){var ss=results[scope];null==ss&&(ss=results[scope]=[]),ss.push(obj)}else results.push(obj)},j=0,jj=connections.length;j<jj;j++){var c=connections[j],sourceId=c.proxies&&c.proxies[0]?c.proxies[0].originalEp.elementId:c.sourceId,targetId=c.proxies&&c.proxies[1]?c.proxies[1].originalEp.elementId:c.targetId;filterList(scopes,c.scope)&&filterList(sources,sourceId)&&filterList(targets,targetId)&&_addOne(c.scope,c)}return results};var _curryEach=function(list,executor){return function(f){for(var i=0,ii=list.length;i<ii;i++)f(list[i]);return executor(list)}},_curryGet=function(list){return function(idx){return list[idx]}},_makeCommonSelectHandler=function(list,executor){var i,ii,out={length:list.length,each:_curryEach(list,executor),get:_curryGet(list)},setters=["setHover","removeAllOverlays","setLabel","addClass","addOverlay","removeOverlay","removeOverlays","showOverlay","hideOverlay","showOverlays","hideOverlays","setPaintStyle","setHoverPaintStyle","setSuspendEvents","setParameter","setParameters","setVisible","repaint","addType","toggleType","removeType","removeClass","setType","bind","unbind"],getters=["getLabel","getOverlay","isHover","getParameter","getParameters","getPaintStyle","getHoverPaintStyle","isVisible","hasType","getType","isSuspendEvents"];for(i=0,ii=setters.length;i<ii;i++)out[setters[i]]=setter(list,setters[i],executor);for(i=0,ii=getters.length;i<ii;i++)out[getters[i]]=getter(list,getters[i]);return out},_makeConnectionSelectHandler=function(list){var common=_makeCommonSelectHandler(list,_makeConnectionSelectHandler);return jsPlumb.extend(common,{setDetachable:setter(list,"setDetachable",_makeConnectionSelectHandler),setReattach:setter(list,"setReattach",_makeConnectionSelectHandler),setConnector:setter(list,"setConnector",_makeConnectionSelectHandler),detach:function(){for(var i=0,ii=list.length;i<ii;i++)_currentInstance.detach(list[i])},isDetachable:getter(list,"isDetachable"),isReattach:getter(list,"isReattach")})},_makeEndpointSelectHandler=function(list){var common=_makeCommonSelectHandler(list,_makeEndpointSelectHandler);return jsPlumb.extend(common,{setEnabled:setter(list,"setEnabled",_makeEndpointSelectHandler),setAnchor:setter(list,"setAnchor",_makeEndpointSelectHandler),isEnabled:getter(list,"isEnabled"),detachAll:function(){for(var i=0,ii=list.length;i<ii;i++)list[i].detachAll()},remove:function(){for(var i=0,ii=list.length;i<ii;i++)_currentInstance.deleteObject({endpoint:list[i]})}})};this.select=function(params){return params=params||{},params.scope=params.scope||"*",_makeConnectionSelectHandler(params.connections||_currentInstance.getConnections(params,!0))},this.selectEndpoints=function(params){params=params||{},params.scope=params.scope||"*";var noElementFilters=!params.element&&!params.source&&!params.target,elements=noElementFilters?"*":prepareList(params.element),sources=noElementFilters?"*":prepareList(params.source),targets=noElementFilters?"*":prepareList(params.target),scopes=prepareList(params.scope,!0),ep=[];for(var el in endpointsByElement){var either=filterList(elements,el,!0),source=filterList(sources,el,!0),sourceMatchExact="*"!=sources,target=filterList(targets,el,!0),targetMatchExact="*"!=targets;if(either||source||target)inner:for(var i=0,ii=endpointsByElement[el].length;i<ii;i++){var _ep=endpointsByElement[el][i];if(filterList(scopes,_ep.scope,!0)){var noMatchSource=sourceMatchExact&&sources.length>0&&!_ep.isSource,noMatchTarget=targetMatchExact&&targets.length>0&&!_ep.isTarget;if(noMatchSource||noMatchTarget)continue inner;ep.push(_ep)}}}return _makeEndpointSelectHandler(ep)},this.getAllConnections=function(){return connections},this.getDefaultScope=function(){return DEFAULT_SCOPE},this.getEndpoint=_getEndpoint,this.getEndpoints=function(el){return endpointsByElement[_info(el).id]},this.getDefaultEndpointType=function(){return jsPlumb.Endpoint},this.getDefaultConnectionType=function(){return jsPlumb.Connection},this.getId=_getId,this.appendElement=_appendElement;var _hoverSuspended=!1;this.isHoverSuspended=function(){return _hoverSuspended},this.setHoverSuspended=function(s){_hoverSuspended=s},this.hide=function(el,changeEndpoints){return _setVisible(el,"none",changeEndpoints),_currentInstance},this.idstamp=_idstamp,this.connectorsInitialized=!1,this.registerConnectorType=function(connector,name){connectorTypes.push([connector,name])};var _ensureContainer=function(candidate){if(!_container&&candidate){var can=_currentInstance.getElement(candidate);can.offsetParent&&_currentInstance.setContainer(can.offsetParent)}},_getContainerFromDefaults=function(){_currentInstance.Defaults.Container&&_currentInstance.setContainer(_currentInstance.Defaults.Container)},_manage=_currentInstance.manage=function(id,element,_transient){return managedElements[id]||(managedElements[id]={el:element,endpoints:[],connections:[]},managedElements[id].info=_updateOffset({elId:id,timestamp:_suspendedAt}),_transient||_currentInstance.fire("manageElement",{id:id,info:managedElements[id].info,el:element})),managedElements[id]},_updateOffset=this.updateOffset=function(params){var s,timestamp=params.timestamp,recalc=params.recalc,offset=params.offset,elId=params.elId;return _suspendDrawing&&!timestamp&&(timestamp=_suspendedAt),!recalc&&timestamp&&timestamp===offsetTimestamps[elId]?{o:params.offset||offsets[elId],s:sizes[elId]}:(recalc||!offset&&null==offsets[elId]?(s=managedElements[elId]?managedElements[elId].el:null,null!=s&&(sizes[elId]=_currentInstance.getSize(s),offsets[elId]=_currentInstance.getOffset(s),offsetTimestamps[elId]=timestamp)):(offsets[elId]=offset||offsets[elId],null==sizes[elId]&&(s=managedElements[elId].el,null!=s&&(sizes[elId]=_currentInstance.getSize(s))),offsetTimestamps[elId]=timestamp),offsets[elId]&&!offsets[elId].right&&(offsets[elId].right=offsets[elId].left+sizes[elId][0],offsets[elId].bottom=offsets[elId].top+sizes[elId][1],offsets[elId].width=sizes[elId][0],offsets[elId].height=sizes[elId][1],offsets[elId].centerx=offsets[elId].left+offsets[elId].width/2,offsets[elId].centery=offsets[elId].top+offsets[elId].height/2),{o:offsets[elId],s:sizes[elId]})};this.init=function(){rendererTypes=root.jsPlumb.getRenderModes();var _oneType=function(renderer,name,fn){root.jsPlumb.Connectors[renderer][name]=function(){fn.apply(this,arguments),root.jsPlumb.ConnectorRenderers[renderer].apply(this,arguments)},_ju.extend(root.jsPlumb.Connectors[renderer][name],[fn,root.jsPlumb.ConnectorRenderers[renderer]])};if(!root.jsPlumb.connectorsInitialized){for(var i=0;i<connectorTypes.length;i++)for(var j=0;j<rendererTypes.length;j++)_oneType(rendererTypes[j],connectorTypes[i][1],connectorTypes[i][0]);root.jsPlumb.connectorsInitialized=!0}initialized||(_getContainerFromDefaults(),_currentInstance.anchorManager=new root.jsPlumb.AnchorManager({jsPlumbInstance:_currentInstance}),initialized=!0,_currentInstance.fire("ready",_currentInstance))}.bind(this),this.log=log,this.jsPlumbUIComponent=jsPlumbUIComponent,this.makeAnchor=function(){var pp,_a=function(t,p){if(root.jsPlumb.Anchors[t])return new root.jsPlumb.Anchors[t](p);if(!_currentInstance.Defaults.DoNotThrowErrors)throw{msg:"jsPlumb: unknown anchor type '"+t+"'"}};if(0===arguments.length)return null;var specimen=arguments[0],elementId=arguments[1],newAnchor=(arguments[2],null);if(specimen.compute&&specimen.getOrientation)return specimen;if("string"==typeof specimen)newAnchor=_a(arguments[0],{elementId:elementId,jsPlumbInstance:_currentInstance});else if(_ju.isArray(specimen))if(_ju.isArray(specimen[0])||_ju.isString(specimen[0]))2==specimen.length&&_ju.isObject(specimen[1])?_ju.isString(specimen[0])?(pp=root.jsPlumb.extend({elementId:elementId,jsPlumbInstance:_currentInstance},specimen[1]),newAnchor=_a(specimen[0],pp)):(pp=root.jsPlumb.extend({elementId:elementId,jsPlumbInstance:_currentInstance,anchors:specimen[0]},specimen[1]),newAnchor=new root.jsPlumb.DynamicAnchor(pp)):newAnchor=new jsPlumb.DynamicAnchor({anchors:specimen,selector:null,elementId:elementId,jsPlumbInstance:_currentInstance});else{var anchorParams={x:specimen[0],y:specimen[1],orientation:specimen.length>=4?[specimen[2],specimen[3]]:[0,0],offsets:specimen.length>=6?[specimen[4],specimen[5]]:[0,0],elementId:elementId,jsPlumbInstance:_currentInstance,cssClass:7==specimen.length?specimen[6]:null};newAnchor=new root.jsPlumb.Anchor(anchorParams),newAnchor.clone=function(){return new root.jsPlumb.Anchor(anchorParams)}}return newAnchor.id||(newAnchor.id="anchor_"+_idstamp()),newAnchor},this.makeAnchors=function(types,elementId,jsPlumbInstance){for(var r=[],i=0,ii=types.length;i<ii;i++)"string"==typeof types[i]?r.push(root.jsPlumb.Anchors[types[i]]({elementId:elementId,jsPlumbInstance:jsPlumbInstance})):_ju.isArray(types[i])&&r.push(_currentInstance.makeAnchor(types[i],elementId,jsPlumbInstance));return r},this.makeDynamicAnchor=function(anchors,anchorSelector){return new root.jsPlumb.DynamicAnchor({anchors:anchors,selector:anchorSelector,elementId:null,jsPlumbInstance:_currentInstance})},this.targetEndpointDefinitions={};var _setEndpointPaintStylesAndAnchor=function(ep,epIndex,_instance){};this.sourceEndpointDefinitions={};var selectorFilter=function(evt,_el,selector,_instance,negate){for(var t=evt.target||evt.srcElement,ok=!1,sel=_instance.getSelector(_el,selector),j=0;j<sel.length;j++)if(sel[j]==t){ok=!0;break}return negate?!ok:ok},_makeElementDropHandler=function(elInfo,p,dropOptions,isSource,isTarget){var proxyComponent=new jsPlumbUIComponent(p),_drop=p._jsPlumb.EndpointDropHandler({jsPlumb:_currentInstance,enabled:function(){return elInfo.def.enabled},isFull:function(){var targetCount=_currentInstance.select({target:elInfo.id}).length;return elInfo.def.maxConnections>0&&targetCount>=elInfo.def.maxConnections},element:elInfo.el,elementId:elInfo.id,isSource:isSource,isTarget:isTarget,addClass:function(clazz){_currentInstance.addClass(elInfo.el,clazz)},removeClass:function(clazz){_currentInstance.removeClass(elInfo.el,clazz)},onDrop:function(jpc){var source=jpc.endpoints[0];source.anchor.locked=!1},isDropAllowed:function(){return proxyComponent.isDropAllowed.apply(proxyComponent,arguments)},isRedrop:function(jpc){return null!=jpc.suspendedElement&&null!=jpc.suspendedEndpoint&&jpc.suspendedEndpoint.element===elInfo.el},getEndpoint:function(jpc){var newEndpoint=elInfo.def.endpoint;if(null==newEndpoint||null==newEndpoint._jsPlumb){var eps=_currentInstance.deriveEndpointAndAnchorSpec(jpc.getType().join(" "),!0),pp=eps.endpoints?root.jsPlumb.extend(p,{endpoint:elInfo.def.def.endpoint||eps.endpoints[1]}):p;eps.anchors&&(pp=root.jsPlumb.extend(pp,{anchor:elInfo.def.def.anchor||eps.anchors[1]})),newEndpoint=_currentInstance.addEndpoint(elInfo.el,pp),newEndpoint._mtNew=!0}if(p.uniqueEndpoint&&(elInfo.def.endpoint=newEndpoint),newEndpoint._doNotDeleteOnDetach=!1,newEndpoint._deleteOnDetach=!0,jpc.isDetachable()&&newEndpoint.initDraggable(),null!=newEndpoint.anchor.positionFinder){var dropPosition=_currentInstance.getUIPosition(arguments,_currentInstance.getZoom()),elPosition=_currentInstance.getOffset(elInfo.el),elSize=_currentInstance.getSize(elInfo.el),ap=null==dropPosition?[0,0]:newEndpoint.anchor.positionFinder(dropPosition,elPosition,elSize,newEndpoint.anchor.constructorParams);newEndpoint.anchor.x=ap[0],newEndpoint.anchor.y=ap[1]}return newEndpoint},maybeCleanup:function(ep){ep._mtNew&&0===ep.connections.length?_currentInstance.deleteObject({endpoint:ep}):delete ep._mtNew}}),dropEvent=root.jsPlumb.dragEvents.drop;return dropOptions.scope=dropOptions.scope||p.scope||_currentInstance.Defaults.Scope,dropOptions[dropEvent]=_ju.wrap(dropOptions[dropEvent],_drop,!0),isTarget&&(dropOptions[root.jsPlumb.dragEvents.over]=function(){return!0}),p.allowLoopback===!1&&(dropOptions.canDrop=function(_drag){var de=_drag.getDragElement()._jsPlumbRelatedElement;return de!=elInfo.el}),_currentInstance.initDroppable(elInfo.el,dropOptions,"internal"),_drop};this.makeTarget=function(el,params,referenceParams){var p=root.jsPlumb.extend({_jsPlumb:this},referenceParams);root.jsPlumb.extend(p,params),_setEndpointPaintStylesAndAnchor(p,1,this);for(var maxConnections=(!(p.deleteEndpointsOnDetach===!1),p.maxConnections||-1),_doOne=function(el){var elInfo=_info(el),elid=elInfo.id,dropOptions=root.jsPlumb.extend({},p.dropOptions||{}),type="default";this.targetEndpointDefinitions[elid]=this.targetEndpointDefinitions[elid]||{},_ensureContainer(elid);var _def={def:root.jsPlumb.extend({},p),uniqueEndpoint:p.uniqueEndpoint,maxConnections:maxConnections,enabled:!0};elInfo.def=_def,this.targetEndpointDefinitions[elid][type]=_def,_makeElementDropHandler(elInfo,p,dropOptions,p.isSource===!0,!0),elInfo.el._katavorioDrop[elInfo.el._katavorioDrop.length-1].targetDef=_def}.bind(this),inputs=el.length&&el.constructor!=String?el:[el],i=0,ii=inputs.length;i<ii;i++)_doOne(inputs[i]);return this},this.unmakeTarget=function(el,doNotClearArrays){var info=_info(el);return _currentInstance.destroyDroppable(info.el,"internal"),doNotClearArrays||delete this.targetEndpointDefinitions[info.id],this},this.makeSource=function(el,params,referenceParams){var p=root.jsPlumb.extend({_jsPlumb:this},referenceParams);root.jsPlumb.extend(p,params);var type=p.connectionType||"default",aae=_currentInstance.deriveEndpointAndAnchorSpec(type);p.endpoint=p.endpoint||aae.endpoints[0],p.anchor=p.anchor||aae.anchors[0],_setEndpointPaintStylesAndAnchor(p,0,this);for(var maxConnections=p.maxConnections||-1,onMaxConnections=p.onMaxConnections,_doOne=function(elInfo){var elid=elInfo.id,_del=this.getElement(elInfo.el);this.sourceEndpointDefinitions[elid]=this.sourceEndpointDefinitions[elid]||{},_ensureContainer(elid);var _def={def:root.jsPlumb.extend({},p),uniqueEndpoint:p.uniqueEndpoint,maxConnections:maxConnections,enabled:!0};this.sourceEndpointDefinitions[elid][type]=_def,elInfo.def=_def;var stopEvent=root.jsPlumb.dragEvents.stop,dragEvent=root.jsPlumb.dragEvents.drag,dragOptions=root.jsPlumb.extend({},p.dragOptions||{}),existingDrag=dragOptions.drag,existingStop=dragOptions.stop,ep=null,endpointAddedButNoDragYet=!1;dragOptions.scope=dragOptions.scope||p.scope,dragOptions[dragEvent]=_ju.wrap(dragOptions[dragEvent],function(){existingDrag&&existingDrag.apply(this,arguments),endpointAddedButNoDragYet=!1}),dragOptions[stopEvent]=_ju.wrap(dragOptions[stopEvent],function(){if(existingStop&&existingStop.apply(this,arguments),this.currentlyDragging=!1,null!=ep._jsPlumb){var anchorDef=p.anchor||this.Defaults.Anchor,oldAnchor=ep.anchor,oldConnection=ep.connections[0],newAnchor=this.makeAnchor(anchorDef,elid,this),_el=ep.element;if(null!=newAnchor.positionFinder){var elPosition=_currentInstance.getOffset(_el),elSize=this.getSize(_el),dropPosition={left:elPosition.left+oldAnchor.x*elSize[0],top:elPosition.top+oldAnchor.y*elSize[1]},ap=newAnchor.positionFinder(dropPosition,elPosition,elSize,newAnchor.constructorParams);newAnchor.x=ap[0],newAnchor.y=ap[1]}ep.setAnchor(newAnchor,!0),ep.repaint(),this.repaint(ep.elementId),null!=oldConnection&&this.repaint(oldConnection.targetId)}}.bind(this));var mouseDownListener=function(e){if(3!==e.which&&2!==e.button){var def=this.sourceEndpointDefinitions[elid][type];if(def.enabled){if(elid=this.getId(this.getElement(elInfo.el)),p.filter){var r=_ju.isString(p.filter)?selectorFilter(e,elInfo.el,p.filter,this,p.filterExclude):p.filter(e,elInfo.el);if(r===!1)return}var sourceCount=this.select({source:elid}).length;if(def.maxConnections>=0&&sourceCount>=def.maxConnections)return onMaxConnections&&onMaxConnections({element:elInfo.el,maxConnections:maxConnections},e),!1;var elxy=root.jsPlumb.getPositionOnElement(e,_del,_zoom),tempEndpointParams={};root.jsPlumb.extend(tempEndpointParams,p),tempEndpointParams.isTemporarySource=!0,tempEndpointParams.anchor=[elxy[0],elxy[1],0,0],tempEndpointParams.dragOptions=dragOptions,def.def.scope&&(tempEndpointParams.scope=def.def.scope),ep=this.addEndpoint(elid,tempEndpointParams),endpointAddedButNoDragYet=!0,ep._doNotDeleteOnDetach=!1,ep._deleteOnDetach=!0,def.uniqueEndpoint&&(def.endpoint?ep.finalEndpoint=def.endpoint:(def.endpoint=ep,ep._deleteOnDetach=!1,ep._doNotDeleteOnDetach=!0));var _delTempEndpoint=function(){_currentInstance.off(ep.canvas,"mouseup",_delTempEndpoint),_currentInstance.off(elInfo.el,"mouseup",_delTempEndpoint),endpointAddedButNoDragYet&&(endpointAddedButNoDragYet=!1,_currentInstance.deleteEndpoint(ep))};_currentInstance.on(ep.canvas,"mouseup",_delTempEndpoint),_currentInstance.on(elInfo.el,"mouseup",_delTempEndpoint);var payload={};if(def.def.extract)for(var att in def.def.extract){var v=(e.srcElement||e.target).getAttribute(att);v&&(payload[def.def.extract[att]]=v)}_currentInstance.trigger(ep.canvas,"mousedown",e,payload),_ju.consume(e)}}}.bind(this);this.on(elInfo.el,"mousedown",mouseDownListener),_def.trigger=mouseDownListener,p.filter&&(_ju.isString(p.filter)||_ju.isFunction(p.filter))&&_currentInstance.setDragFilter(elInfo.el,p.filter);var dropOptions=root.jsPlumb.extend({},p.dropOptions||{});_makeElementDropHandler(elInfo,p,dropOptions,!0,p.isTarget===!0)}.bind(this),inputs=el.length&&el.constructor!=String?el:[el],i=0,ii=inputs.length;i<ii;i++)_doOne(_info(inputs[i]));return this},this.unmakeSource=function(el,connectionType,doNotClearArrays){var info=_info(el);_currentInstance.destroyDroppable(info.el,"internal");var eldefs=this.sourceEndpointDefinitions[info.id];if(eldefs)for(var def in eldefs)if(null==connectionType||connectionType===def){var mouseDownListener=eldefs[def].trigger;mouseDownListener&&_currentInstance.off(info.el,"mousedown",mouseDownListener),doNotClearArrays||delete this.sourceEndpointDefinitions[info.id][def]}return this},this.unmakeEverySource=function(){for(var i in this.sourceEndpointDefinitions)_currentInstance.unmakeSource(i,null,!0);return this.sourceEndpointDefinitions={},this};var _getScope=function(el,types,connectionType){types=_ju.isArray(types)?types:[types];var id=_getId(el);connectionType=connectionType||"default";for(var i=0;i<types.length;i++){var eldefs=this[types[i]][id];if(eldefs&&eldefs[connectionType])return eldefs[connectionType].def.scope||this.Defaults.Scope}}.bind(this),_setScope=function(el,scope,types,connectionType){types=_ju.isArray(types)?types:[types];var id=_getId(el);connectionType=connectionType||"default";for(var i=0;i<types.length;i++){var eldefs=this[types[i]][id];eldefs&&eldefs[connectionType]&&(eldefs[connectionType].def.scope=scope)}}.bind(this);this.getScope=function(el,scope){return _getScope(el,["sourceEndpointDefinitions","targetEndpointDefinitions"])},this.getSourceScope=function(el){return _getScope(el,"sourceEndpointDefinitions")},this.getTargetScope=function(el){return _getScope(el,"targetEndpointDefinitions")},this.setScope=function(el,scope,connectionType){this.setSourceScope(el,scope,connectionType),this.setTargetScope(el,scope,connectionType)},this.setSourceScope=function(el,scope,connectionType){_setScope(el,scope,"sourceEndpointDefinitions",connectionType),this.setDragScope(el,scope)},this.setTargetScope=function(el,scope,connectionType){_setScope(el,scope,"targetEndpointDefinitions",connectionType),this.setDropScope(el,scope)},this.unmakeEveryTarget=function(){for(var i in this.targetEndpointDefinitions)_currentInstance.unmakeTarget(i,!0);return this.targetEndpointDefinitions={},this};var _setEnabled=function(type,el,state,toggle,connectionType){var a="source"==type?this.sourceEndpointDefinitions:this.targetEndpointDefinitions;if(connectionType=connectionType||"default",_ju.isString(el)&&a[el]&&a[el][connectionType])a[el][connectionType].enabled=toggle?!a[el][connectionType].enabled:state;else if(el.length)for(var i=0,ii=el.length;i<ii;i++){var info=_info(el[i]);a[info.id]&&a[info.id][connectionType]&&(a[info.id][connectionType].enabled=toggle?!a[info.id][connectionType].enabled:state)}else{var id=_info(el).id;a[id]&&a[id][connectionType]&&(a[id][connectionType].enabled=toggle?!a[id][connectionType].enabled:state)}return this}.bind(this),_first=function(el,fn){return _ju.isString(el)||!el.length?fn.apply(this,[el]):el.length?fn.apply(this,[el[0]]):void 0}.bind(this);this.toggleSourceEnabled=function(el,connectionType){return _setEnabled("source",el,null,!0,connectionType),this.isSourceEnabled(el,connectionType)},this.setSourceEnabled=function(el,state,connectionType){return _setEnabled("source",el,state,null,connectionType)},this.isSource=function(el,connectionType){return connectionType=connectionType||"default",_first(el,function(_el){var eldefs=this.sourceEndpointDefinitions[_info(_el).id];return null!=eldefs&&null!=eldefs[connectionType]}.bind(this))},this.isSourceEnabled=function(el,connectionType){return connectionType=connectionType||"default",_first(el,function(_el){var sep=this.sourceEndpointDefinitions[_info(_el).id];return sep&&sep[connectionType]&&sep[connectionType].enabled===!0}.bind(this))},this.toggleTargetEnabled=function(el,connectionType){return _setEnabled("target",el,null,!0,connectionType),this.isTargetEnabled(el,connectionType)},this.isTarget=function(el,connectionType){return connectionType=connectionType||"default",_first(el,function(_el){var eldefs=this.targetEndpointDefinitions[_info(_el).id];return null!=eldefs&&null!=eldefs[connectionType]}.bind(this))},this.isTargetEnabled=function(el,connectionType){return connectionType=connectionType||"default",_first(el,function(_el){var tep=this.targetEndpointDefinitions[_info(_el).id];return tep&&tep[connectionType]&&tep[connectionType].enabled===!0}.bind(this))},this.setTargetEnabled=function(el,state,connectionType){return _setEnabled("target",el,state,null,connectionType)},this.ready=function(fn){_currentInstance.bind("ready",fn)};var _elEach=function(el,fn){if("object"==typeof el&&el.length)for(var i=0,ii=el.length;i<ii;i++)fn(el[i]);else fn(el);return _currentInstance};this.repaint=function(el,ui,timestamp){return _elEach(el,function(_el){_draw(_el,ui,timestamp)})},this.revalidate=function(el,timestamp,isIdAlready){return _elEach(el,function(_el){var elId=isIdAlready?_el:_currentInstance.getId(_el);_currentInstance.updateOffset({elId:elId,recalc:!0,timestamp:timestamp}),_currentInstance.repaint(_el)})},this.repaintEverything=function(){var elId,timestamp=_timestamp();for(elId in endpointsByElement)_currentInstance.updateOffset({elId:elId,recalc:!0,timestamp:timestamp});for(elId in endpointsByElement)_draw(elId,null,timestamp);return this},this.removeAllEndpoints=function(el,recurse,affectedElements){affectedElements=affectedElements||[];var _one=function(_el){var i,ii,info=_info(_el),ebe=endpointsByElement[info.id];if(ebe)for(affectedElements.push(info),i=0,ii=ebe.length;i<ii;i++)_currentInstance.deleteEndpoint(ebe[i],!1);if(delete endpointsByElement[info.id],recurse&&info.el&&3!=info.el.nodeType&&8!=info.el.nodeType)for(i=0,ii=info.el.childNodes.length;i<ii;i++)_one(info.el.childNodes[i])};return _one(el),this};var _doRemove=function(info,affectedElements){_currentInstance.removeAllEndpoints(info.id,!0,affectedElements);for(var _one=function(_info){_currentInstance.getDragManager().elementRemoved(_info.id),_currentInstance.anchorManager.clearFor(_info.id),_currentInstance.anchorManager.removeFloatingConnection(_info.id),_currentInstance.isSource(_info.el)&&_currentInstance.unmakeSource(_info.el),_currentInstance.isTarget(_info.el)&&_currentInstance.unmakeTarget(_info.el),_currentInstance.destroyDraggable(_info.el),_currentInstance.destroyDroppable(_info.el),delete _currentInstance.floatingConnections[_info.id],delete managedElements[_info.id],delete offsets[_info.id],_info.el&&(_currentInstance.removeElement(_info.el),_info.el._jsPlumb=null)},ae=1;ae<affectedElements.length;ae++)_one(affectedElements[ae]);_one(info)};this.remove=function(el,doNotRepaint){var info=_info(el),affectedElements=[];return info.text?info.el.parentNode.removeChild(info.el):info.id&&_currentInstance.batch(function(){_doRemove(info,affectedElements)},doNotRepaint===!1),_currentInstance},this.empty=function(el,doNotRepaint){var affectedElements=[],_one=function(el,dontRemoveFocus){var info=_info(el);if(info.text)info.el.parentNode.removeChild(info.el);else if(info.el){for(;info.el.childNodes.length>0;)_one(info.el.childNodes[0]);dontRemoveFocus||_doRemove(info,affectedElements)}};return _currentInstance.batch(function(){_one(el,!0)},doNotRepaint===!1),_currentInstance},this.reset=function(){_currentInstance.silently(function(){_hoverSuspended=!1,_currentInstance.removeAllGroups(),_currentInstance.removeGroupManager(),_currentInstance.deleteEveryEndpoint(),_currentInstance.unbind(),this.targetEndpointDefinitions={},this.sourceEndpointDefinitions={},connections.length=0,this.doReset&&this.doReset()}.bind(this))};var _clearObject=function(obj){obj.canvas&&obj.canvas.parentNode&&obj.canvas.parentNode.removeChild(obj.canvas),obj.cleanup(),obj.destroy()};this.clear=function(){_currentInstance.select().each(_clearObject),_currentInstance.selectEndpoints().each(_clearObject),endpointsByElement={},endpointsByUUID={}},this.setDefaultScope=function(scope){return DEFAULT_SCOPE=scope,_currentInstance},this.setDraggable=_setDraggable,this.deriveEndpointAndAnchorSpec=function(type,dontPrependDefault){for(var bits=((dontPrependDefault?"":"default ")+type).split(/[\s]/),eps=null,ep=null,a=null,as=null,i=0;i<bits.length;i++){var _t=_currentInstance.getType(bits[i],"connection");_t&&(_t.endpoints&&(eps=_t.endpoints),_t.endpoint&&(ep=_t.endpoint),_t.anchors&&(as=_t.anchors),_t.anchor&&(a=_t.anchor))}return{endpoints:eps?eps:[ep,ep],anchors:as?as:[a,a]}},this.setId=function(el,newId,doNotSetAttribute){var id;_ju.isString(el)?id=el:(el=this.getElement(el),id=this.getId(el));var sConns=this.getConnections({source:id,scope:"*"},!0),tConns=this.getConnections({target:id,scope:"*"},!0);newId=""+newId,doNotSetAttribute?el=this.getElement(newId):(el=this.getElement(id),this.setAttribute(el,"id",newId)),endpointsByElement[newId]=endpointsByElement[id]||[];for(var i=0,ii=endpointsByElement[newId].length;i<ii;i++)endpointsByElement[newId][i].setElementId(newId),endpointsByElement[newId][i].setReferenceElement(el);delete endpointsByElement[id],this.sourceEndpointDefinitions[newId]=this.sourceEndpointDefinitions[id],delete this.sourceEndpointDefinitions[id],this.targetEndpointDefinitions[newId]=this.targetEndpointDefinitions[id],delete this.targetEndpointDefinitions[id],this.anchorManager.changeId(id,newId),this.getDragManager().changeId(id,newId),managedElements[newId]=managedElements[id],delete managedElements[id];var _conns=function(list,epIdx,type){for(var i=0,ii=list.length;i<ii;i++)list[i].endpoints[epIdx].setElementId(newId),
list[i].endpoints[epIdx].setReferenceElement(el),list[i][type+"Id"]=newId,list[i][type]=el};_conns(sConns,0,"source"),_conns(tConns,1,"target"),this.repaint(newId)},this.setDebugLog=function(debugLog){log=debugLog},this.setSuspendDrawing=function(val,repaintAfterwards){var curVal=_suspendDrawing;return _suspendDrawing=val,_suspendedAt=val?(new Date).getTime():null,repaintAfterwards&&this.repaintEverything(),curVal},this.isSuspendDrawing=function(){return _suspendDrawing},this.getSuspendedAt=function(){return _suspendedAt},this.batch=function(fn,doNotRepaintAfterwards){var _wasSuspended=this.isSuspendDrawing();_wasSuspended||this.setSuspendDrawing(!0);try{fn()}catch(e){_ju.log("Function run while suspended failed",e)}_wasSuspended||this.setSuspendDrawing(!1,!doNotRepaintAfterwards)},this.doWhileSuspended=this.batch,this.getCachedData=_getCachedData,this.timestamp=_timestamp,this.show=function(el,changeEndpoints){return _setVisible(el,"block",changeEndpoints),_currentInstance},this.toggleVisible=_toggleVisible,this.toggleDraggable=_toggleDraggable,this.addListener=this.bind};_ju.extend(root.jsPlumbInstance,_ju.EventGenerator,{setAttribute:function(el,a,v){this.setAttribute(el,a,v)},getAttribute:function(el,a){return this.getAttribute(root.jsPlumb.getElement(el),a)},convertToFullOverlaySpec:function(spec){return _ju.isString(spec)&&(spec=[spec,{}]),spec[1].id=spec[1].id||_ju.uuid(),spec},registerConnectionType:function(id,type){if(this._connectionTypes[id]=root.jsPlumb.extend({},type),type.overlays){for(var to={},i=0;i<type.overlays.length;i++){var fo=this.convertToFullOverlaySpec(type.overlays[i]);to[fo[1].id]=fo}this._connectionTypes[id].overlays=to}},registerConnectionTypes:function(types){for(var i in types)this.registerConnectionType(i,types[i])},registerEndpointType:function(id,type){if(this._endpointTypes[id]=root.jsPlumb.extend({},type),type.overlays){for(var to={},i=0;i<type.overlays.length;i++){var fo=this.convertToFullOverlaySpec(type.overlays[i]);to[fo[1].id]=fo}this._endpointTypes[id].overlays=to}},registerEndpointTypes:function(types){for(var i in types)this.registerEndpointType(i,types[i])},getType:function(id,typeDescriptor){return"connection"===typeDescriptor?this._connectionTypes[id]:this._endpointTypes[id]},setIdChanged:function(oldId,newId){this.setId(oldId,newId,!0)},setParent:function(el,newParent){var _dom=this.getElement(el),_id=this.getId(_dom),_pdom=this.getElement(newParent),_pid=this.getId(_pdom);_dom.parentNode.removeChild(_dom),_pdom.appendChild(_dom),this.getDragManager().setParent(_dom,_id,_pdom,_pid)},extend:function(o1,o2,names){var i;if(names)for(i=0;i<names.length;i++)o1[names[i]]=o2[names[i]];else for(i in o2)o1[i]=o2[i];return o1},floatingConnections:{},getFloatingAnchorIndex:function(jpc){return jpc.endpoints[0].isFloating()?0:jpc.endpoints[1].isFloating()?1:-1}});var jsPlumb=new jsPlumbInstance;root.jsPlumb=jsPlumb,jsPlumb.getInstance=function(_defaults){var j=new jsPlumbInstance(_defaults);return j.init(),j},jsPlumb.each=function(spec,fn){if(null!=spec)if("string"==typeof spec)fn(jsPlumb.getElement(spec));else if(null!=spec.length)for(var i=0;i<spec.length;i++)fn(jsPlumb.getElement(spec[i]));else fn(spec)},"function"==typeof define&&(define("jsplumb",[],function(){return jsPlumb}),define("jsplumbinstance",[],function(){return jsPlumb.getInstance()})),"undefined"!=typeof exports&&(exports.jsPlumb=jsPlumb),"undefined"!=typeof module&&(module.exports=jsPlumb)}.call("undefined"!=typeof window?window:this),function(){var root=this,_ju=root.jsPlumbUtil,_genLoc=function(prefix,e){if(null==e)return[0,0];var ts=_touches(e),t=_getTouch(ts,0);return[t[prefix+"X"],t[prefix+"Y"]]},_pageLocation=_genLoc.bind(this,"page"),_screenLocation=_genLoc.bind(this,"screen"),_clientLocation=_genLoc.bind(this,"client"),_getTouch=function(touches,idx){return touches.item?touches.item(idx):touches[idx]},_touches=function(e){return e.touches&&e.touches.length>0?e.touches:e.changedTouches&&e.changedTouches.length>0?e.changedTouches:e.targetTouches&&e.targetTouches.length>0?e.targetTouches:[e]},DragManager=function(_currentInstance){var _draggables={},_dlist=[],_delements={},_elementsWithEndpoints={},_draggablesForElements={};this.register=function(el){var id=_currentInstance.getId(el),parentOffset=_currentInstance.getOffset(el);_draggables[id]||(_draggables[id]=el,_dlist.push(el),_delements[id]={});var _oneLevel=function(p){if(p)for(var i=0;i<p.childNodes.length;i++)if(3!=p.childNodes[i].nodeType&&8!=p.childNodes[i].nodeType){var cEl=jsPlumb.getElement(p.childNodes[i]),cid=_currentInstance.getId(p.childNodes[i],null,!0);if(cid&&_elementsWithEndpoints[cid]&&_elementsWithEndpoints[cid]>0){var cOff=_currentInstance.getOffset(cEl);_delements[id][cid]={id:cid,offset:{left:cOff.left-parentOffset.left,top:cOff.top-parentOffset.top}},_draggablesForElements[cid]=id}_oneLevel(p.childNodes[i])}};_oneLevel(el)},this.updateOffsets=function(elId,childOffsetOverrides){if(null!=elId){childOffsetOverrides=childOffsetOverrides||{};var domEl=jsPlumb.getElement(elId),id=_currentInstance.getId(domEl),children=_delements[id],parentOffset=_currentInstance.getOffset(domEl);if(children)for(var i in children)if(children.hasOwnProperty(i)){var cel=jsPlumb.getElement(i),cOff=childOffsetOverrides[i]||_currentInstance.getOffset(cel);if(null==cel.offsetParent&&null!=_delements[id][i])continue;_delements[id][i]={id:i,offset:{left:cOff.left-parentOffset.left,top:cOff.top-parentOffset.top}},_draggablesForElements[i]=id}}},this.endpointAdded=function(el,id){id=id||_currentInstance.getId(el);var b=document.body,p=el.parentNode;for(_elementsWithEndpoints[id]=_elementsWithEndpoints[id]?_elementsWithEndpoints[id]+1:1;null!=p&&p!=b;){var pid=_currentInstance.getId(p,null,!0);if(pid&&_draggables[pid]){var pLoc=_currentInstance.getOffset(p);if(null==_delements[pid][id]){var cLoc=_currentInstance.getOffset(el);_delements[pid][id]={id:id,offset:{left:cLoc.left-pLoc.left,top:cLoc.top-pLoc.top}},_draggablesForElements[id]=pid}break}p=p.parentNode}},this.endpointDeleted=function(endpoint){if(_elementsWithEndpoints[endpoint.elementId]&&(_elementsWithEndpoints[endpoint.elementId]--,_elementsWithEndpoints[endpoint.elementId]<=0))for(var i in _delements)_delements.hasOwnProperty(i)&&_delements[i]&&(delete _delements[i][endpoint.elementId],delete _draggablesForElements[endpoint.elementId])},this.changeId=function(oldId,newId){_delements[newId]=_delements[oldId],_delements[oldId]={},_draggablesForElements[newId]=_draggablesForElements[oldId],_draggablesForElements[oldId]=null},this.getElementsForDraggable=function(id){return _delements[id]},this.elementRemoved=function(elementId){var elId=_draggablesForElements[elementId];elId&&(delete _delements[elId][elementId],delete _draggablesForElements[elementId])},this.reset=function(){_draggables={},_dlist=[],_delements={},_elementsWithEndpoints={}},this.dragEnded=function(el){if(null!=el.offsetParent){var id=_currentInstance.getId(el),ancestor=_draggablesForElements[id];ancestor&&this.updateOffsets(ancestor)}},this.setParent=function(el,elId,p,pId,currentChildLocation){var current=_draggablesForElements[elId];_delements[pId]||(_delements[pId]={});var pLoc=_currentInstance.getOffset(p),cLoc=currentChildLocation||_currentInstance.getOffset(el);current&&delete _delements[current][elId],_delements[pId][elId]={id:elId,offset:{left:cLoc.left-pLoc.left,top:cLoc.top-pLoc.top}},_draggablesForElements[elId]=pId},this.clearParent=function(el,elId){var current=_draggablesForElements[elId];current&&(delete _delements[current][elId],delete _draggablesForElements[elId])},this.revalidateParent=function(el,elId,childOffset){var current=_draggablesForElements[elId];if(current){var co={};co[elId]=childOffset,this.updateOffsets(current,co),_currentInstance.revalidate(current)}},this.getDragAncestor=function(el){var de=jsPlumb.getElement(el),id=_currentInstance.getId(de),aid=_draggablesForElements[id];return aid?jsPlumb.getElement(aid):null}},trim=function(str){return null==str?null:str.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},_setClassName=function(el,cn){cn=trim(cn),"undefined"!=typeof el.className.baseVal?el.className.baseVal=cn:el.className=cn},_getClassName=function(el){return"undefined"==typeof el.className.baseVal?el.className:el.className.baseVal},_classManip=function(el,classesToAdd,classesToRemove){classesToAdd=null==classesToAdd?[]:_ju.isArray(classesToAdd)?classesToAdd:classesToAdd.split(/\s+/),classesToRemove=null==classesToRemove?[]:_ju.isArray(classesToRemove)?classesToRemove:classesToRemove.split(/\s+/);var className=_getClassName(el),curClasses=className.split(/\s+/),_oneSet=function(add,classes){for(var i=0;i<classes.length;i++)if(add)curClasses.indexOf(classes[i])==-1&&curClasses.push(classes[i]);else{var idx=curClasses.indexOf(classes[i]);idx!=-1&&curClasses.splice(idx,1)}};_oneSet(!0,classesToAdd),_oneSet(!1,classesToRemove),_setClassName(el,curClasses.join(" "))};root.jsPlumb.extend(root.jsPlumbInstance.prototype,{headless:!1,pageLocation:_pageLocation,screenLocation:_screenLocation,clientLocation:_clientLocation,getDragManager:function(){return null==this.dragManager&&(this.dragManager=new DragManager(this)),this.dragManager},recalculateOffsets:function(elId){this.getDragManager().updateOffsets(elId)},createElement:function(tag,style,clazz,atts){return this.createElementNS(null,tag,style,clazz,atts)},createElementNS:function(ns,tag,style,clazz,atts){var i,e=null==ns?document.createElement(tag):document.createElementNS(ns,tag);style=style||{};for(i in style)e.style[i]=style[i];clazz&&(e.className=clazz),atts=atts||{};for(i in atts)e.setAttribute(i,""+atts[i]);return e},getAttribute:function(el,attName){return null!=el.getAttribute?el.getAttribute(attName):null},setAttribute:function(el,a,v){null!=el.setAttribute&&el.setAttribute(a,v)},setAttributes:function(el,atts){for(var i in atts)atts.hasOwnProperty(i)&&el.setAttribute(i,atts[i])},appendToRoot:function(node){document.body.appendChild(node)},getRenderModes:function(){return["svg"]},getClass:_getClassName,addClass:function(el,clazz){jsPlumb.each(el,function(e){_classManip(e,clazz)})},hasClass:function(el,clazz){return el=jsPlumb.getElement(el),el.classList?el.classList.contains(clazz):_getClassName(el).indexOf(clazz)!=-1},removeClass:function(el,clazz){jsPlumb.each(el,function(e){_classManip(e,null,clazz)})},updateClasses:function(el,toAdd,toRemove){jsPlumb.each(el,function(e){_classManip(e,toAdd,toRemove)})},setClass:function(el,clazz){jsPlumb.each(el,function(e){_setClassName(e,clazz)})},setPosition:function(el,p){el.style.left=p.left+"px",el.style.top=p.top+"px"},getPosition:function(el){var _one=function(prop){var v=el.style[prop];return v?v.substring(0,v.length-2):0};return{left:_one("left"),top:_one("top")}},getStyle:function(el,prop){return"undefined"!=typeof window.getComputedStyle?getComputedStyle(el,null).getPropertyValue(prop):el.currentStyle[prop]},getSelector:function(ctx,spec){var sel=null;return sel=1==arguments.length?null!=ctx.nodeType?ctx:document.querySelectorAll(ctx):ctx.querySelectorAll(spec)},getOffset:function(el,relativeToRoot,container){el=jsPlumb.getElement(el),container=container||this.getContainer();for(var out={left:el.offsetLeft,top:el.offsetTop},op=relativeToRoot||null!=container&&el!=container&&el.offsetParent!=container?el.offsetParent:null,_maybeAdjustScroll=function(offsetParent){null!=offsetParent&&offsetParent!==document.body&&(offsetParent.scrollTop>0||offsetParent.scrollLeft>0)&&(out.left-=offsetParent.scrollLeft,out.top-=offsetParent.scrollTop)}.bind(this);null!=op;)out.left+=op.offsetLeft,out.top+=op.offsetTop,_maybeAdjustScroll(op),op=relativeToRoot?op.offsetParent:op.offsetParent==container?null:op.offsetParent;if(null!=container&&!relativeToRoot&&(container.scrollTop>0||container.scrollLeft>0)){var pp=null!=el.offsetParent?this.getStyle(el.offsetParent,"position"):"static",p=this.getStyle(el,"position");"absolute"!==p&&"fixed"!==p&&"absolute"!==pp&&"fixed"!=pp&&(out.left-=container.scrollLeft,out.top-=container.scrollTop)}return out},getPositionOnElement:function(evt,el,zoom){var box="undefined"!=typeof el.getBoundingClientRect?el.getBoundingClientRect():{left:0,top:0,width:0,height:0},body=document.body,docElem=document.documentElement,scrollTop=window.pageYOffset||docElem.scrollTop||body.scrollTop,scrollLeft=window.pageXOffset||docElem.scrollLeft||body.scrollLeft,clientTop=docElem.clientTop||body.clientTop||0,clientLeft=docElem.clientLeft||body.clientLeft||0,pst=0,psl=0,top=box.top+scrollTop-clientTop+pst*zoom,left=box.left+scrollLeft-clientLeft+psl*zoom,cl=jsPlumb.pageLocation(evt),w=box.width||el.offsetWidth*zoom,h=box.height||el.offsetHeight*zoom,x=(cl[0]-left)/w,y=(cl[1]-top)/h;return[x,y]},getAbsolutePosition:function(el){var _one=function(s){var ss=el.style[s];if(ss)return parseFloat(ss.substring(0,ss.length-2))};return[_one("left"),_one("top")]},setAbsolutePosition:function(el,xy,animateFrom,animateOptions){animateFrom?this.animate(el,{left:"+="+(xy[0]-animateFrom[0]),top:"+="+(xy[1]-animateFrom[1])},animateOptions):(el.style.left=xy[0]+"px",el.style.top=xy[1]+"px")},getSize:function(el){return[el.offsetWidth,el.offsetHeight]},getWidth:function(el){return el.offsetWidth},getHeight:function(el){return el.offsetHeight}})}.call("undefined"!=typeof window?window:this),function(){"use strict";var root=this,_jp=root.jsPlumb,_ju=root.jsPlumbUtil,_internalLabelOverlayId="__label",_makeLabelOverlay=function(component,params){var _params={cssClass:params.cssClass,labelStyle:component.labelStyle,id:_internalLabelOverlayId,component:component,_jsPlumb:component._jsPlumb.instance},mergedParams=_jp.extend(_params,params);return new(_jp.Overlays[component._jsPlumb.instance.getRenderMode()].Label)(mergedParams)},_processOverlay=function(component,o){var _newOverlay=null;if(_ju.isArray(o)){var type=o[0],p=_jp.extend({component:component,_jsPlumb:component._jsPlumb.instance},o[1]);3==o.length&&_jp.extend(p,o[2]),_newOverlay=new(_jp.Overlays[component._jsPlumb.instance.getRenderMode()][type])(p)}else _newOverlay=o.constructor==String?new(_jp.Overlays[component._jsPlumb.instance.getRenderMode()][o])({component:component,_jsPlumb:component._jsPlumb.instance}):o;return _newOverlay.id=_newOverlay.id||_ju.uuid(),component.cacheTypeItem("overlay",_newOverlay,_newOverlay.id),component._jsPlumb.overlays[_newOverlay.id]=_newOverlay,_newOverlay};_jp.OverlayCapableJsPlumbUIComponent=function(params){root.jsPlumbUIComponent.apply(this,arguments),this._jsPlumb.overlays={},this._jsPlumb.overlayPositions={},params.label&&(this.getDefaultType().overlays[_internalLabelOverlayId]=["Label",{label:params.label,location:params.labelLocation||this.defaultLabelLocation||.5,labelStyle:params.labelStyle||this._jsPlumb.instance.Defaults.LabelStyle,id:_internalLabelOverlayId}]),this.setListenerComponent=function(c){if(this._jsPlumb)for(var i in this._jsPlumb.overlays)this._jsPlumb.overlays[i].setListenerComponent(c)}},_jp.OverlayCapableJsPlumbUIComponent.applyType=function(component,t){if(t.overlays){var i,keep={};for(i in t.overlays){var existing=component._jsPlumb.overlays[t.overlays[i][1].id];if(existing)existing.updateFrom(t.overlays[i][1]),keep[t.overlays[i][1].id]=!0;else{var c=component.getCachedTypeItem("overlay",t.overlays[i][1].id);null!=c?(c.reattach(component._jsPlumb.instance),c.setVisible(!0),c.updateFrom(t.overlays[i][1]),component._jsPlumb.overlays[c.id]=c):c=component.addOverlay(t.overlays[i],!0),keep[c.id]=!0}}for(i in component._jsPlumb.overlays)null==keep[component._jsPlumb.overlays[i].id]&&component.removeOverlay(component._jsPlumb.overlays[i].id,!0)}},_ju.extend(_jp.OverlayCapableJsPlumbUIComponent,root.jsPlumbUIComponent,{setHover:function(hover,ignoreAttachedElements){if(this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged())for(var i in this._jsPlumb.overlays)this._jsPlumb.overlays[i][hover?"addClass":"removeClass"](this._jsPlumb.instance.hoverClass)},addOverlay:function(overlay,doNotRepaint){var o=_processOverlay(this,overlay);return doNotRepaint||this.repaint(),o},getOverlay:function(id){return this._jsPlumb.overlays[id]},getOverlays:function(){return this._jsPlumb.overlays},hideOverlay:function(id){var o=this.getOverlay(id);o&&o.hide()},hideOverlays:function(){for(var i in this._jsPlumb.overlays)this._jsPlumb.overlays[i].hide()},showOverlay:function(id){var o=this.getOverlay(id);o&&o.show()},showOverlays:function(){for(var i in this._jsPlumb.overlays)this._jsPlumb.overlays[i].show()},removeAllOverlays:function(doNotRepaint){for(var i in this._jsPlumb.overlays)this._jsPlumb.overlays[i].cleanup&&this._jsPlumb.overlays[i].cleanup();this._jsPlumb.overlays={},this._jsPlumb.overlayPositions=null,doNotRepaint||this.repaint()},removeOverlay:function(overlayId,dontCleanup){var o=this._jsPlumb.overlays[overlayId];o&&(o.setVisible(!1),!dontCleanup&&o.cleanup&&o.cleanup(),delete this._jsPlumb.overlays[overlayId],this._jsPlumb.overlayPositions&&delete this._jsPlumb.overlayPositions[overlayId])},removeOverlays:function(){for(var i=0,j=arguments.length;i<j;i++)this.removeOverlay(arguments[i])},moveParent:function(newParent){if(this.bgCanvas&&(this.bgCanvas.parentNode.removeChild(this.bgCanvas),newParent.appendChild(this.bgCanvas)),this.canvas&&this.canvas.parentNode){this.canvas.parentNode.removeChild(this.canvas),newParent.appendChild(this.canvas);for(var i in this._jsPlumb.overlays)if(this._jsPlumb.overlays[i].isAppendedAtTopLevel){var el=this._jsPlumb.overlays[i].getElement();el.parentNode.removeChild(el),newParent.appendChild(el)}}},getLabel:function(){var lo=this.getOverlay(_internalLabelOverlayId);return null!=lo?lo.getLabel():null},getLabelOverlay:function(){return this.getOverlay(_internalLabelOverlayId)},setLabel:function(l){var lo=this.getOverlay(_internalLabelOverlayId);if(lo)l.constructor==String||l.constructor==Function?lo.setLabel(l):(l.label&&lo.setLabel(l.label),l.location&&lo.setLocation(l.location));else{var params=l.constructor==String||l.constructor==Function?{label:l}:l;lo=_makeLabelOverlay(this,params),this._jsPlumb.overlays[_internalLabelOverlayId]=lo}this._jsPlumb.instance.isSuspendDrawing()||this.repaint()},cleanup:function(force){for(var i in this._jsPlumb.overlays)this._jsPlumb.overlays[i].cleanup(force),this._jsPlumb.overlays[i].destroy(force);force&&(this._jsPlumb.overlays={},this._jsPlumb.overlayPositions=null)},setVisible:function(v){this[v?"showOverlays":"hideOverlays"]()},setAbsoluteOverlayPosition:function(overlay,xy){this._jsPlumb.overlayPositions[overlay.id]=xy},getAbsoluteOverlayPosition:function(overlay){return this._jsPlumb.overlayPositions?this._jsPlumb.overlayPositions[overlay.id]:null},_clazzManip:function(action,clazz,dontUpdateOverlays){if(!dontUpdateOverlays)for(var i in this._jsPlumb.overlays)this._jsPlumb.overlays[i][action+"Class"](clazz)},addClass:function(clazz,dontUpdateOverlays){this._clazzManip("add",clazz,dontUpdateOverlays)},removeClass:function(clazz,dontUpdateOverlays){this._clazzManip("remove",clazz,dontUpdateOverlays)}})}.call("undefined"!=typeof window?window:this),function(){"use strict";var root=this,_jp=root.jsPlumb,_ju=root.jsPlumbUtil,_makeConnectionDragHandler=function(endpoint,placeholder,_jsPlumb){var stopped=!1;return{drag:function(){if(stopped)return stopped=!1,!0;if(placeholder.element){var _ui=_jsPlumb.getUIPosition(arguments,_jsPlumb.getZoom());null!=_ui&&jsPlumb.setPosition(placeholder.element,_ui),_jsPlumb.repaint(placeholder.element,_ui),endpoint.paint({anchorPoint:endpoint.anchor.getCurrentLocation({element:endpoint.element})})}},stopDrag:function(){stopped=!0}}},_makeDraggablePlaceholder=function(placeholder,_jsPlumb,ipco,ips){var n=jsPlumb.createElement("div",{position:"absolute"});_jsPlumb.appendElement(n);var id=_jsPlumb.getId(n);jsPlumb.setPosition(n,ipco),n.style.width=ips[0]+"px",n.style.height=ips[1]+"px",_jsPlumb.manage(id,n,!0),placeholder.id=id,placeholder.element=n},_makeFloatingEndpoint=function(paintStyle,referenceAnchor,endpoint,referenceCanvas,sourceElement,_jsPlumb,_newEndpoint,scope){var floatingAnchor=new _jp.FloatingAnchor({reference:referenceAnchor,referenceCanvas:referenceCanvas,jsPlumbInstance:_jsPlumb});return _newEndpoint({paintStyle:paintStyle,endpoint:endpoint,anchor:floatingAnchor,source:sourceElement,scope:scope})},typeParameters=["connectorStyle","connectorHoverStyle","connectorOverlays","connector","connectionType","connectorClass","connectorHoverClass"],findConnectionToUseForDynamicAnchor=function(ep,elementWithPrecedence){var idx=0;if(null!=elementWithPrecedence)for(var i=0;i<ep.connections.length;i++)if(ep.connections[i].sourceId==elementWithPrecedence||ep.connections[i].targetId==elementWithPrecedence){idx=i;break}return ep.connections[idx]};_jp.Endpoint=function(params){var _jsPlumb=params._jsPlumb,_newConnection=params.newConnection,_newEndpoint=params.newEndpoint;this.idPrefix="_jsplumb_e_",this.defaultLabelLocation=[.5,.5],this.defaultOverlayKeys=["Overlays","EndpointOverlays"],_jp.OverlayCapableJsPlumbUIComponent.apply(this,arguments),this.appendToDefaultType({connectionType:params.connectionType,maxConnections:null==params.maxConnections?this._jsPlumb.instance.Defaults.MaxConnections:params.maxConnections,paintStyle:params.endpointStyle||params.paintStyle||params.style||this._jsPlumb.instance.Defaults.EndpointStyle||_jp.Defaults.EndpointStyle,hoverPaintStyle:params.endpointHoverStyle||params.hoverPaintStyle||this._jsPlumb.instance.Defaults.EndpointHoverStyle||_jp.Defaults.EndpointHoverStyle,connectorStyle:params.connectorStyle,connectorHoverStyle:params.connectorHoverStyle,connectorClass:params.connectorClass,connectorHoverClass:params.connectorHoverClass,connectorOverlays:params.connectorOverlays,connector:params.connector,connectorTooltip:params.connectorTooltip}),this._jsPlumb.enabled=!(params.enabled===!1),this._jsPlumb.visible=!0,this.element=_jp.getElement(params.source),this._jsPlumb.uuid=params.uuid,this._jsPlumb.floatingEndpoint=null;var inPlaceCopy=null;this._jsPlumb.uuid&&(params.endpointsByUUID[this._jsPlumb.uuid]=this),this.elementId=params.elementId,this.dragProxy=params.dragProxy,this._jsPlumb.connectionCost=params.connectionCost,this._jsPlumb.connectionsDirected=params.connectionsDirected,this._jsPlumb.currentAnchorClass="",this._jsPlumb.events={};var _updateAnchorClass=function(){var oldAnchorClass=_jsPlumb.endpointAnchorClassPrefix+"-"+this._jsPlumb.currentAnchorClass;this._jsPlumb.currentAnchorClass=this.anchor.getCssClass();var anchorClass=_jsPlumb.endpointAnchorClassPrefix+(this._jsPlumb.currentAnchorClass?"-"+this._jsPlumb.currentAnchorClass:"");this.removeClass(oldAnchorClass),this.addClass(anchorClass),jsPlumb.updateClasses(this.element,anchorClass,oldAnchorClass)}.bind(this);this.prepareAnchor=function(anchorParams){var a=this._jsPlumb.instance.makeAnchor(anchorParams,this.elementId,_jsPlumb);return a.bind("anchorChanged",function(currentAnchor){this.fire("anchorChanged",{endpoint:this,anchor:currentAnchor}),_updateAnchorClass()}.bind(this)),a},this.setPreparedAnchor=function(anchor,doNotRepaint){return this._jsPlumb.instance.continuousAnchorFactory.clear(this.elementId),this.anchor=anchor,_updateAnchorClass(),doNotRepaint||this._jsPlumb.instance.repaint(this.elementId),this},this.setAnchor=function(anchorParams,doNotRepaint){var a=this.prepareAnchor(anchorParams);return this.setPreparedAnchor(a,doNotRepaint),this};var internalHover=function(state){if(this.connections.length>0)for(var i=0;i<this.connections.length;i++)this.connections[i].setHover(state,!1);else this.setHover(state)}.bind(this);this.bind("mouseover",function(){internalHover(!0)}),this.bind("mouseout",function(){internalHover(!1)}),params._transient||this._jsPlumb.instance.anchorManager.add(this,this.elementId),this.prepareEndpoint=function(ep,typeId){var endpoint,_e=function(t,p){var rm=_jsPlumb.getRenderMode();if(_jp.Endpoints[rm][t])return new _jp.Endpoints[rm][t](p);if(!_jsPlumb.Defaults.DoNotThrowErrors)throw{msg:"jsPlumb: unknown endpoint type '"+t+"'"}},endpointArgs={_jsPlumb:this._jsPlumb.instance,cssClass:params.cssClass,container:params.container,tooltip:params.tooltip,connectorTooltip:params.connectorTooltip,endpoint:this};return _ju.isString(ep)?endpoint=_e(ep,endpointArgs):_ju.isArray(ep)?(endpointArgs=_ju.merge(ep[1],endpointArgs),endpoint=_e(ep[0],endpointArgs)):endpoint=ep.clone(),endpoint.clone=function(){return _ju.isString(ep)?_e(ep,endpointArgs):_ju.isArray(ep)?(endpointArgs=_ju.merge(ep[1],endpointArgs),_e(ep[0],endpointArgs)):void 0}.bind(this),endpoint.typeId=typeId,endpoint},this.setEndpoint=function(ep,doNotRepaint){var _ep=this.prepareEndpoint(ep);this.setPreparedEndpoint(_ep,!0)},this.setPreparedEndpoint=function(ep,doNotRepaint){null!=this.endpoint&&(this.endpoint.cleanup(),this.endpoint.destroy()),this.endpoint=ep,this.type=this.endpoint.type,this.canvas=this.endpoint.canvas},_jp.extend(this,params,typeParameters),this.isSource=params.isSource||!1,this.isTemporarySource=params.isTemporarySource||!1,this.isTarget=params.isTarget||!1,this.connections=params.connections||[],this.connectorPointerEvents=params["connector-pointer-events"],this.scope=params.scope||_jsPlumb.getDefaultScope(),this.timestamp=null,this.reattachConnections=params.reattach||_jsPlumb.Defaults.ReattachConnections,this.connectionsDetachable=_jsPlumb.Defaults.ConnectionsDetachable,params.connectionsDetachable!==!1&&params.detachable!==!1||(this.connectionsDetachable=!1),this.dragAllowedWhenFull=params.dragAllowedWhenFull!==!1,params.onMaxConnections&&this.bind("maxConnections",params.onMaxConnections),this.addConnection=function(connection){this.connections.push(connection),this[(this.connections.length>0?"add":"remove")+"Class"](_jsPlumb.endpointConnectedClass),this[(this.isFull()?"add":"remove")+"Class"](_jsPlumb.endpointFullClass)},this.detachFromConnection=function(connection,idx,doNotCleanup){idx=null==idx?this.connections.indexOf(connection):idx,idx>=0&&(this.connections.splice(idx,1),this[(this.connections.length>0?"add":"remove")+"Class"](_jsPlumb.endpointConnectedClass),this[(this.isFull()?"add":"remove")+"Class"](_jsPlumb.endpointFullClass)),(this._forceDeleteOnDetach||!doNotCleanup&&this._deleteOnDetach)&&0===this.connections.length&&_jsPlumb.deleteObject({endpoint:this,fireEvent:!1,deleteAttachedObjects:doNotCleanup!==!0})},this.detach=function(params){var connectionIndex=params.connectionIndex,connection=params.connection,ignoreTarget=params.ignoreTarget,fireEvent=params.fireEvent,originalEvent=params.originalEvent,endpointBeingDeleted=params.endpointBeingDeleted,forceDetach=params.forceDetach,idx=null==connectionIndex?this.connections.indexOf(connection):connectionIndex,actuallyDetached=!1;return fireEvent=fireEvent!==!1,idx>=0&&(forceDetach||connection._forceDetach||connection.isDetachable()&&connection.isDetachAllowed(connection)&&this.isDetachAllowed(connection)&&_jsPlumb.checkCondition("beforeDetach",connection,endpointBeingDeleted))&&(_jsPlumb.deleteObject({connection:connection,fireEvent:!ignoreTarget&&fireEvent,originalEvent:originalEvent,deleteAttachedObjects:params.deleteAttachedObjects}),actuallyDetached=!0),actuallyDetached},this.detachAll=function(fireEvent,forceDetach){for(var unaffectedConns=[];this.connections.length>0;){var actuallyDetached=this.detach({connection:this.connections[0],ignoreTarget:!1,forceDetach:forceDetach===!0,fireEvent:fireEvent!==!1,originalEvent:null,endpointBeingDeleted:this,connectionIndex:0});actuallyDetached||(unaffectedConns.push(this.connections[0]),this.connections.splice(0,1))}return this.connections=unaffectedConns,this},this.detachFrom=function(targetEndpoint,fireEvent,originalEvent){for(var c=[],i=0;i<this.connections.length;i++)this.connections[i].endpoints[1]!=targetEndpoint&&this.connections[i].endpoints[0]!=targetEndpoint||c.push(this.connections[i]);for(var j=0;j<c.length;j++)this.detach({connection:c[j],ignoreTarget:!1,forceDetach:!0,fireEvent:fireEvent,originalEvent:originalEvent});return this},this.getElement=function(){return this.element},this.setElement=function(el){var parentId=this._jsPlumb.instance.getId(el),curId=this.elementId;return _ju.removeWithFunction(params.endpointsByElement[this.elementId],function(e){return e.id==this.id}.bind(this)),this.element=jsPlumb.getElement(el),this.elementId=_jsPlumb.getId(this.element),_jsPlumb.anchorManager.rehomeEndpoint(this,curId,this.element),_jsPlumb.dragManager.endpointAdded(this.element),_ju.addToList(params.endpointsByElement,parentId,this),this},this.makeInPlaceCopy=function(){var loc=this.anchor.getCurrentLocation({element:this}),o=this.anchor.getOrientation(this),acc=this.anchor.getCssClass(),inPlaceAnchor={bind:function(){},compute:function(){return[loc[0],loc[1]]},getCurrentLocation:function(){return[loc[0],loc[1]]},getOrientation:function(){return o},getCssClass:function(){return acc}};return _newEndpoint({dropOptions:params.dropOptions,anchor:inPlaceAnchor,source:this.element,paintStyle:this.getPaintStyle(),endpoint:params.hideOnDrag?"Blank":this.endpoint,_transient:!0,scope:this.scope,reference:this})},this.connectorSelector=function(){var candidate=this.connections[0];return candidate?candidate:this.connections.length<this._jsPlumb.maxConnections||this._jsPlumb.maxConnections==-1?null:candidate},this.setStyle=this.setPaintStyle,this.paint=function(params){params=params||{};var timestamp=params.timestamp,recalc=!(params.recalc===!1);if(!timestamp||this.timestamp!==timestamp){var info=_jsPlumb.updateOffset({elId:this.elementId,timestamp:timestamp}),xy=params.offset?params.offset.o:info.o;if(null!=xy){var ap=params.anchorPoint,connectorPaintStyle=params.connectorPaintStyle;if(null==ap){var wh=params.dimensions||info.s,anchorParams={xy:[xy.left,xy.top],wh:wh,element:this,timestamp:timestamp};if(recalc&&this.anchor.isDynamic&&this.connections.length>0){var c=findConnectionToUseForDynamicAnchor(this,params.elementWithPrecedence),oIdx=c.endpoints[0]==this?1:0,oId=0===oIdx?c.sourceId:c.targetId,oInfo=_jsPlumb.getCachedData(oId),oOffset=oInfo.o,oWH=oInfo.s;anchorParams.txy=[oOffset.left,oOffset.top],anchorParams.twh=oWH,anchorParams.tElement=c.endpoints[oIdx]}ap=this.anchor.compute(anchorParams)}this.endpoint.compute(ap,this.anchor.getOrientation(this),this._jsPlumb.paintStyleInUse,connectorPaintStyle||this.paintStyleInUse),this.endpoint.paint(this._jsPlumb.paintStyleInUse,this.anchor),this.timestamp=timestamp;for(var i in this._jsPlumb.overlays)if(this._jsPlumb.overlays.hasOwnProperty(i)){var o=this._jsPlumb.overlays[i];o.isVisible()&&(this._jsPlumb.overlayPlacements[i]=o.draw(this.endpoint,this._jsPlumb.paintStyleInUse),o.paint(this._jsPlumb.overlayPlacements[i]))}}}},this.getTypeDescriptor=function(){return"endpoint"},this.isVisible=function(){return this._jsPlumb.visible},this.repaint=this.paint;var draggingInitialised=!1;this.initDraggable=function(){if(!draggingInitialised&&_jp.isDragSupported(this.element)){var payload,placeholderInfo={id:null,element:null},jpc=null,existingJpc=!1,existingJpcParams=null,_dragHandler=_makeConnectionDragHandler(this,placeholderInfo,_jsPlumb),dragOptions=params.dragOptions||{},defaultOpts={},startEvent=_jp.dragEvents.start,stopEvent=_jp.dragEvents.stop,dragEvent=_jp.dragEvents.drag,beforeStartEvent=_jp.dragEvents.beforeStart,beforeStart=function(beforeStartParams){payload=beforeStartParams.e.payload||{}},start=function(startParams){jpc=this.connectorSelector();var _continue=!0;this.isEnabled()||(_continue=!1),null!=jpc||this.isSource||this.isTemporarySource||(_continue=!1),!this.isSource||!this.isFull()||null!=jpc&&this.dragAllowedWhenFull||(_continue=!1),null==jpc||jpc.isDetachable(this)||(_continue=!1);var beforeDrag=_jsPlumb.checkCondition(null==jpc?"beforeDrag":"beforeStartDetach",{endpoint:this,source:this.element,sourceId:this.elementId,connection:jpc});if(beforeDrag===!1?_continue=!1:"object"==typeof beforeDrag?jsPlumb.extend(beforeDrag,payload||{}):beforeDrag=payload||{},_continue===!1)return _jsPlumb.stopDrag&&_jsPlumb.stopDrag(this.canvas),
_dragHandler.stopDrag(),!1;for(var i=0;i<this.connections.length;i++)this.connections[i].setHover(!1);this.addClass("endpointDrag"),_jsPlumb.setConnectionBeingDragged(!0),jpc&&!this.isFull()&&this.isSource&&(jpc=null),_jsPlumb.updateOffset({elId:this.elementId});var ipco=this._jsPlumb.instance.getOffset(this.canvas),canvasElement=this.canvas,ips=this._jsPlumb.instance.getSize(this.canvas);_makeDraggablePlaceholder(placeholderInfo,_jsPlumb,ipco,ips),_jsPlumb.setAttributes(this.canvas,{dragId:placeholderInfo.id,elId:this.elementId});var endpointToFloat=this.dragProxy||this.endpoint;if(null==this.dragProxy&&null!=this.connectionType){var aae=this._jsPlumb.instance.deriveEndpointAndAnchorSpec(this.connectionType);aae.endpoints[1]&&(endpointToFloat=aae.endpoints[1])}var centerAnchor=this._jsPlumb.instance.makeAnchor("Center");centerAnchor.isFloating=!0,this._jsPlumb.floatingEndpoint=_makeFloatingEndpoint(this.getPaintStyle(),centerAnchor,endpointToFloat,this.canvas,placeholderInfo.element,_jsPlumb,_newEndpoint,this.scope);var _savedAnchor=this._jsPlumb.floatingEndpoint.anchor;if(null==jpc)this.setHover(!1,!1),jpc=_newConnection({sourceEndpoint:this,targetEndpoint:this._jsPlumb.floatingEndpoint,source:this.element,target:placeholderInfo.element,anchors:[this.anchor,this._jsPlumb.floatingEndpoint.anchor],paintStyle:params.connectorStyle,hoverPaintStyle:params.connectorHoverStyle,connector:params.connector,overlays:params.connectorOverlays,type:this.connectionType,cssClass:this.connectorClass,hoverClass:this.connectorHoverClass,scope:params.scope,data:beforeDrag}),jpc.pending=!0,jpc.addClass(_jsPlumb.draggingClass),this._jsPlumb.floatingEndpoint.addClass(_jsPlumb.draggingClass),this._jsPlumb.floatingEndpoint.anchor=_savedAnchor,_jsPlumb.fire("connectionDrag",jpc),_jsPlumb.anchorManager.newConnection(jpc);else{existingJpc=!0,jpc.setHover(!1);var anchorIdx=jpc.endpoints[0].id==this.id?0:1;this.detachFromConnection(jpc,null,!0);var dragScope=_jsPlumb.getDragScope(canvasElement);_jsPlumb.setAttribute(this.canvas,"originalScope",dragScope),_jsPlumb.fire("connectionDrag",jpc),0===anchorIdx?(existingJpcParams=[jpc.source,jpc.sourceId,canvasElement,dragScope],_jsPlumb.anchorManager.sourceChanged(jpc.endpoints[anchorIdx].elementId,placeholderInfo.id,jpc,placeholderInfo.element)):(existingJpcParams=[jpc.target,jpc.targetId,canvasElement,dragScope],jpc.target=placeholderInfo.element,jpc.targetId=placeholderInfo.id,_jsPlumb.anchorManager.updateOtherEndpoint(jpc.sourceId,jpc.endpoints[anchorIdx].elementId,jpc.targetId,jpc)),jpc.suspendedEndpoint=jpc.endpoints[anchorIdx],jpc.suspendedElement=jpc.endpoints[anchorIdx].getElement(),jpc.suspendedElementId=jpc.endpoints[anchorIdx].elementId,jpc.suspendedElementType=0===anchorIdx?"source":"target",jpc.suspendedEndpoint.setHover(!1),this._jsPlumb.floatingEndpoint.referenceEndpoint=jpc.suspendedEndpoint,jpc.endpoints[anchorIdx]=this._jsPlumb.floatingEndpoint,jpc.addClass(_jsPlumb.draggingClass),this._jsPlumb.floatingEndpoint.addClass(_jsPlumb.draggingClass)}_jsPlumb.floatingConnections[placeholderInfo.id]=jpc,_ju.addToList(params.endpointsByElement,placeholderInfo.id,this._jsPlumb.floatingEndpoint),_jsPlumb.currentlyDragging=!0}.bind(this),stop=function(){if(_jsPlumb.setConnectionBeingDragged(!1),jpc&&null!=jpc.endpoints){var originalEvent=_jsPlumb.getDropEvent(arguments),idx=_jsPlumb.getFloatingAnchorIndex(jpc);if(jpc.endpoints[0===idx?1:0].anchor.locked=!1,jpc.removeClass(_jsPlumb.draggingClass),this._jsPlumb&&(jpc.deleteConnectionNow||jpc.endpoints[idx]==this._jsPlumb.floatingEndpoint)&&existingJpc&&jpc.suspendedEndpoint){0===idx?(jpc.floatingElement=jpc.source,jpc.floatingId=jpc.sourceId,jpc.floatingEndpoint=jpc.endpoints[0],jpc.floatingIndex=0,jpc.source=existingJpcParams[0],jpc.sourceId=existingJpcParams[1]):(jpc.floatingElement=jpc.target,jpc.floatingId=jpc.targetId,jpc.floatingEndpoint=jpc.endpoints[1],jpc.floatingIndex=1,jpc.target=existingJpcParams[0],jpc.targetId=existingJpcParams[1]);var fe=this._jsPlumb.floatingEndpoint;_jsPlumb.setDragScope(existingJpcParams[2],existingJpcParams[3]),jpc.endpoints[idx]=jpc.suspendedEndpoint,jpc.isReattach()||jpc._forceReattach||jpc._forceDetach||!jpc.endpoints[0===idx?1:0].detach({connection:jpc,ignoreTarget:!1,forceDetach:!1,fireEvent:!0,originalEvent:originalEvent,endpointBeingDeleted:!0})?(jpc.setHover(!1),jpc._forceDetach=null,jpc._forceReattach=null,this._jsPlumb.floatingEndpoint.detachFromConnection(jpc),jpc.suspendedEndpoint.addConnection(jpc),1==idx?_jsPlumb.anchorManager.updateOtherEndpoint(jpc.sourceId,jpc.floatingId,jpc.targetId,jpc):_jsPlumb.anchorManager.sourceChanged(jpc.floatingId,jpc.sourceId,jpc,jpc.source),_jsPlumb.repaint(existingJpcParams[1])):_jsPlumb.deleteObject({endpoint:fe})}this.deleteAfterDragStop?_jsPlumb.deleteObject({endpoint:this}):this._jsPlumb&&this.paint({recalc:!1}),_jsPlumb.fire("connectionDragStop",jpc,originalEvent),jpc.pending&&_jsPlumb.fire("connectionAborted",jpc,originalEvent),_jsPlumb.currentlyDragging=!1,jpc.suspendedElement=null,jpc.suspendedEndpoint=null,jpc=null}placeholderInfo&&placeholderInfo.element&&_jsPlumb.remove(placeholderInfo.element,!1,!1),inPlaceCopy&&_jsPlumb.deleteObject({endpoint:inPlaceCopy}),this._jsPlumb&&(this.canvas.style.visibility="visible",this.anchor.locked=!1,this._jsPlumb.floatingEndpoint=null)}.bind(this);dragOptions=_jp.extend(defaultOpts,dragOptions),dragOptions.scope=this.scope||dragOptions.scope,dragOptions[beforeStartEvent]=_ju.wrap(dragOptions[beforeStartEvent],beforeStart,!1),dragOptions[startEvent]=_ju.wrap(dragOptions[startEvent],start,!1),dragOptions[dragEvent]=_ju.wrap(dragOptions[dragEvent],_dragHandler.drag),dragOptions[stopEvent]=_ju.wrap(dragOptions[stopEvent],stop),dragOptions.multipleDrop=!1,dragOptions.canDrag=function(){return this.isSource||this.isTemporarySource||this.connections.length>0}.bind(this),_jsPlumb.initDraggable(this.canvas,dragOptions,"internal"),this.canvas._jsPlumbRelatedElement=this.element,draggingInitialised=!0}};var ep=params.endpoint||this._jsPlumb.instance.Defaults.Endpoint||_jp.Defaults.Endpoint;this.setEndpoint(ep,!0);var anchorParamsToUse=params.anchor?params.anchor:params.anchors?params.anchors:_jsPlumb.Defaults.Anchor||"Top";this.setAnchor(anchorParamsToUse,!0);var type=["default",params.type||""].join(" ");this.addType(type,params.data,!0),this.canvas=this.endpoint.canvas,this.canvas._jsPlumb=this,this.initDraggable();var _initDropTarget=function(canvas,isTransient,endpoint,referenceEndpoint){if(_jp.isDropSupported(this.element)){var dropOptions=params.dropOptions||_jsPlumb.Defaults.DropOptions||_jp.Defaults.DropOptions;dropOptions=_jp.extend({},dropOptions),dropOptions.scope=dropOptions.scope||this.scope;var dropEvent=_jp.dragEvents.drop,overEvent=_jp.dragEvents.over,outEvent=_jp.dragEvents.out,_ep=this,drop=_jsPlumb.EndpointDropHandler({getEndpoint:function(){return _ep},jsPlumb:_jsPlumb,enabled:function(){return null==endpoint||endpoint.isEnabled()},isFull:function(){return endpoint.isFull()},element:this.element,elementId:this.elementId,isSource:this.isSource,isTarget:this.isTarget,addClass:function(clazz){_ep.addClass(clazz)},removeClass:function(clazz){_ep.removeClass(clazz)},isDropAllowed:function(){return _ep.isDropAllowed.apply(_ep,arguments)},reference:referenceEndpoint,isRedrop:function(jpc,dhParams){return jpc.suspendedEndpoint&&dhParams.reference&&jpc.suspendedEndpoint.id===dhParams.reference.id}});dropOptions[dropEvent]=_ju.wrap(dropOptions[dropEvent],drop,!0),dropOptions[overEvent]=_ju.wrap(dropOptions[overEvent],function(){var draggable=_jp.getDragObject(arguments),id=_jsPlumb.getAttribute(_jp.getElement(draggable),"dragId"),_jpc=_jsPlumb.floatingConnections[id];if(null!=_jpc){var idx=_jsPlumb.getFloatingAnchorIndex(_jpc),_cont=this.isTarget&&0!==idx||_jpc.suspendedEndpoint&&this.referenceEndpoint&&this.referenceEndpoint.id==_jpc.suspendedEndpoint.id;if(_cont){var bb=_jsPlumb.checkCondition("checkDropAllowed",{sourceEndpoint:_jpc.endpoints[idx],targetEndpoint:this,connection:_jpc});this[(bb?"add":"remove")+"Class"](_jsPlumb.endpointDropAllowedClass),this[(bb?"remove":"add")+"Class"](_jsPlumb.endpointDropForbiddenClass),_jpc.endpoints[idx].anchor.over(this.anchor,this)}}}.bind(this)),dropOptions[outEvent]=_ju.wrap(dropOptions[outEvent],function(){var draggable=_jp.getDragObject(arguments),id=null==draggable?null:_jsPlumb.getAttribute(_jp.getElement(draggable),"dragId"),_jpc=id?_jsPlumb.floatingConnections[id]:null;if(null!=_jpc){var idx=_jsPlumb.getFloatingAnchorIndex(_jpc),_cont=this.isTarget&&0!==idx||_jpc.suspendedEndpoint&&this.referenceEndpoint&&this.referenceEndpoint.id==_jpc.suspendedEndpoint.id;_cont&&(this.removeClass(_jsPlumb.endpointDropAllowedClass),this.removeClass(_jsPlumb.endpointDropForbiddenClass),_jpc.endpoints[idx].anchor.out())}}.bind(this)),_jsPlumb.initDroppable(canvas,dropOptions,"internal",isTransient)}}.bind(this);return this.anchor.isFloating||_initDropTarget(this.canvas,!(params._transient||this.anchor.isFloating),this,params.reference),this},_ju.extend(_jp.Endpoint,_jp.OverlayCapableJsPlumbUIComponent,{setVisible:function(v,doNotChangeConnections,doNotNotifyOtherEndpoint){if(this._jsPlumb.visible=v,this.canvas&&(this.canvas.style.display=v?"block":"none"),this[v?"showOverlays":"hideOverlays"](),!doNotChangeConnections)for(var i=0;i<this.connections.length;i++)if(this.connections[i].setVisible(v),!doNotNotifyOtherEndpoint){var oIdx=this===this.connections[i].endpoints[0]?1:0;1==this.connections[i].endpoints[oIdx].connections.length&&this.connections[i].endpoints[oIdx].setVisible(v,!0,!0)}},getAttachedElements:function(){return this.connections},applyType:function(t,doNotRepaint){this.setPaintStyle(t.endpointStyle||t.paintStyle,doNotRepaint),this.setHoverPaintStyle(t.endpointHoverStyle||t.hoverPaintStyle,doNotRepaint),null!=t.maxConnections&&(this._jsPlumb.maxConnections=t.maxConnections),t.scope&&(this.scope=t.scope),_jp.extend(this,t,typeParameters),null!=t.cssClass&&this.canvas&&this._jsPlumb.instance.addClass(this.canvas,t.cssClass),_jp.OverlayCapableJsPlumbUIComponent.applyType(this,t)},isEnabled:function(){return this._jsPlumb.enabled},setEnabled:function(e){this._jsPlumb.enabled=e},cleanup:function(){var anchorClass=this._jsPlumb.instance.endpointAnchorClassPrefix+(this._jsPlumb.currentAnchorClass?"-"+this._jsPlumb.currentAnchorClass:"");jsPlumb.removeClass(this.element,anchorClass),this.anchor=null,this.endpoint.cleanup(!0),this.endpoint.destroy(),this.endpoint=null,this._jsPlumb.instance.destroyDraggable(this.canvas,"internal"),this._jsPlumb.instance.destroyDroppable(this.canvas,"internal")},setHover:function(h){this.endpoint&&this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged()&&this.endpoint.setHover(h)},isFull:function(){return 0===this._jsPlumb.maxConnections||!(this.isFloating()||this._jsPlumb.maxConnections<0||this.connections.length<this._jsPlumb.maxConnections)},isFloating:function(){return null!=this.anchor&&this.anchor.isFloating},isConnectedTo:function(endpoint){var found=!1;if(endpoint)for(var i=0;i<this.connections.length;i++)if(this.connections[i].endpoints[1]==endpoint||this.connections[i].endpoints[0]==endpoint){found=!0;break}return found},getConnectionCost:function(){return this._jsPlumb.connectionCost},setConnectionCost:function(c){this._jsPlumb.connectionCost=c},areConnectionsDirected:function(){return this._jsPlumb.connectionsDirected},setConnectionsDirected:function(b){this._jsPlumb.connectionsDirected=b},setElementId:function(_elId){this.elementId=_elId,this.anchor.elementId=_elId},setReferenceElement:function(_el){this.element=_jp.getElement(_el)},setDragAllowedWhenFull:function(allowed){this.dragAllowedWhenFull=allowed},equals:function(endpoint){return this.anchor.equals(endpoint.anchor)},getUuid:function(){return this._jsPlumb.uuid},computeAnchor:function(params){return this.anchor.compute(params)}}),root.jsPlumbInstance.prototype.EndpointDropHandler=function(dhParams){return function(e){var _jsPlumb=dhParams.jsPlumb;dhParams.removeClass(_jsPlumb.endpointDropAllowedClass),dhParams.removeClass(_jsPlumb.endpointDropForbiddenClass);var originalEvent=_jsPlumb.getDropEvent(arguments),draggable=_jsPlumb.getDragObject(arguments),id=_jsPlumb.getAttribute(draggable,"dragId"),scope=(_jsPlumb.getAttribute(draggable,"elId"),_jsPlumb.getAttribute(draggable,"originalScope")),jpc=_jsPlumb.floatingConnections[id];if(null!=jpc){var existingConnection=null!=jpc.suspendedEndpoint;if(!existingConnection||null!=jpc.suspendedEndpoint._jsPlumb){var _ep=dhParams.getEndpoint(jpc);if(null!=_ep){if(dhParams.isRedrop(jpc,dhParams))return jpc._forceReattach=!0,jpc.setHover(!1),void(dhParams.maybeCleanup&&dhParams.maybeCleanup(_ep));var idx=_jsPlumb.getFloatingAnchorIndex(jpc);if(0===idx&&!dhParams.isSource||1===idx&&!dhParams.isTarget)return void(dhParams.maybeCleanup&&dhParams.maybeCleanup(_ep));dhParams.onDrop&&dhParams.onDrop(jpc),scope&&_jsPlumb.setDragScope(draggable,scope);var isFull=dhParams.isFull(e);if(isFull&&_ep.fire("maxConnections",{endpoint:this,connection:jpc,maxConnections:_ep._jsPlumb.maxConnections},originalEvent),!isFull&&dhParams.enabled()){var _doContinue=!0;0===idx?(jpc.floatingElement=jpc.source,jpc.floatingId=jpc.sourceId,jpc.floatingEndpoint=jpc.endpoints[0],jpc.floatingIndex=0,jpc.source=dhParams.element,jpc.sourceId=dhParams.elementId):(jpc.floatingElement=jpc.target,jpc.floatingId=jpc.targetId,jpc.floatingEndpoint=jpc.endpoints[1],jpc.floatingIndex=1,jpc.target=dhParams.element,jpc.targetId=dhParams.elementId),existingConnection&&jpc.suspendedEndpoint.id!=_ep.id&&(jpc.isDetachAllowed(jpc)&&jpc.endpoints[idx].isDetachAllowed(jpc)&&jpc.suspendedEndpoint.isDetachAllowed(jpc)&&_jsPlumb.checkCondition("beforeDetach",jpc)||(_doContinue=!1));var continueFunction=function(optionalData){jpc.endpoints[idx].detachFromConnection(jpc),jpc.suspendedEndpoint&&jpc.suspendedEndpoint.detachFromConnection(jpc),jpc.endpoints[idx]=_ep,_ep.addConnection(jpc);var params=_ep.getParameters();for(var aParam in params)jpc.setParameter(aParam,params[aParam]);if(existingConnection){var suspendedElementId=jpc.suspendedEndpoint.elementId;_jsPlumb.fireMoveEvent({index:idx,originalSourceId:0===idx?suspendedElementId:jpc.sourceId,newSourceId:0===idx?_ep.elementId:jpc.sourceId,originalTargetId:1==idx?suspendedElementId:jpc.targetId,newTargetId:1==idx?_ep.elementId:jpc.targetId,originalSourceEndpoint:0===idx?jpc.suspendedEndpoint:jpc.endpoints[0],newSourceEndpoint:0===idx?_ep:jpc.endpoints[0],originalTargetEndpoint:1==idx?jpc.suspendedEndpoint:jpc.endpoints[1],newTargetEndpoint:1==idx?_ep:jpc.endpoints[1],connection:jpc},originalEvent)}else params.draggable&&_jsPlumb.initDraggable(this.element,dragOptions,"internal",_jsPlumb);if(1==idx?_jsPlumb.anchorManager.updateOtherEndpoint(jpc.sourceId,jpc.floatingId,jpc.targetId,jpc):_jsPlumb.anchorManager.sourceChanged(jpc.floatingId,jpc.sourceId,jpc,jpc.source),jpc.endpoints[0].finalEndpoint){var _toDelete=jpc.endpoints[0];_toDelete.detachFromConnection(jpc),jpc.endpoints[0]=jpc.endpoints[0].finalEndpoint,jpc.endpoints[0].addConnection(jpc)}_ju.isObject(optionalData)&&jpc.mergeData(optionalData),_jsPlumb.finaliseConnection(jpc,null,originalEvent,!1),jpc.setHover(!1)}.bind(this),dontContinueFunction=function(){jpc.suspendedEndpoint&&(jpc.endpoints[idx]=jpc.suspendedEndpoint,jpc.setHover(!1),jpc._forceDetach=!0,0===idx?(jpc.source=jpc.suspendedEndpoint.element,jpc.sourceId=jpc.suspendedEndpoint.elementId):(jpc.target=jpc.suspendedEndpoint.element,jpc.targetId=jpc.suspendedEndpoint.elementId),jpc.suspendedEndpoint.addConnection(jpc),1==idx?_jsPlumb.anchorManager.updateOtherEndpoint(jpc.sourceId,jpc.floatingId,jpc.targetId,jpc):_jsPlumb.anchorManager.sourceChanged(jpc.floatingId,jpc.sourceId,jpc,jpc.source),_jsPlumb.repaint(jpc.sourceId),jpc._forceDetach=!1)};if(_doContinue=_doContinue&&dhParams.isDropAllowed(jpc.sourceId,jpc.targetId,jpc.scope,jpc,_ep))return continueFunction(_doContinue),!0;dontContinueFunction()}dhParams.maybeCleanup&&dhParams.maybeCleanup(_ep),_jsPlumb.currentlyDragging=!1}}}}}}.call("undefined"!=typeof window?window:this),function(){"use strict";var root=this,_jp=root.jsPlumb,_ju=root.jsPlumbUtil,makeConnector=function(_jsPlumb,renderMode,connectorName,connectorArgs,forComponent){if(!_jsPlumb.Defaults.DoNotThrowErrors&&null==jsPlumb.Connectors[renderMode][connectorName])throw{msg:"jsPlumb: unknown connector type '"+connectorName+"'"};return new _jp.Connectors[renderMode][connectorName](connectorArgs,forComponent)},_makeAnchor=function(anchorParams,elementId,_jsPlumb){return anchorParams?_jsPlumb.makeAnchor(anchorParams,elementId,_jsPlumb):null},_updateConnectedClass=function(conn,element,_jsPlumb,remove){null!=element&&(element._jsPlumbConnections=element._jsPlumbConnections||{},remove?delete element._jsPlumbConnections[conn.id]:element._jsPlumbConnections[conn.id]=!0,_ju.isEmpty(element._jsPlumbConnections)?_jsPlumb.removeClass(element,_jsPlumb.connectedClass):_jsPlumb.addClass(element,_jsPlumb.connectedClass))};_jp.Connection=function(params){var _newEndpoint=params.newEndpoint;this.id=params.id,this.connector=null,this.idPrefix="_jsplumb_c_",this.defaultLabelLocation=.5,this.defaultOverlayKeys=["Overlays","ConnectionOverlays"],this.previousConnection=params.previousConnection,this.source=_jp.getElement(params.source),this.target=_jp.getElement(params.target),params.sourceEndpoint&&(this.source=params.sourceEndpoint.getElement()),params.targetEndpoint&&(this.target=params.targetEndpoint.getElement()),_jp.OverlayCapableJsPlumbUIComponent.apply(this,arguments),this.sourceId=this._jsPlumb.instance.getId(this.source),this.targetId=this._jsPlumb.instance.getId(this.target),this.scope=params.scope,this.endpoints=[],this.endpointStyles=[];var _jsPlumb=this._jsPlumb.instance;_jsPlumb.manage(this.sourceId,this.source),_jsPlumb.manage(this.targetId,this.target),this._jsPlumb.visible=!0,this._jsPlumb.editable=params.editable===!0,this._jsPlumb.params={cssClass:params.cssClass,container:params.container,"pointer-events":params["pointer-events"],editorParams:params.editorParams,overlays:params.overlays},this._jsPlumb.lastPaintedAt=null,this.bind("mouseover",function(){this.setHover(!0)}.bind(this)),this.bind("mouseout",function(){this.setHover(!1)}.bind(this)),this.editableRequested=params.editable!==!1,this.setEditable=function(e){return!!this.connector&&this.connector.setEditable(e)},this.isEditable=function(){return!!this.connector&&this.connector.isEditable()},this.isEditing=function(){return!!this.connector&&this.connector.isEditing()},this.makeEndpoint=function(isSource,el,elId,ep){return elId=elId||this._jsPlumb.instance.getId(el),this.prepareEndpoint(_jsPlumb,_newEndpoint,this,ep,isSource?0:1,params,el,elId)},params.type&&(params.endpoints=this._jsPlumb.instance.deriveEndpointAndAnchorSpec(params.type).endpoints);var eS=this.makeEndpoint(!0,this.source,this.sourceId,params.sourceEndpoint),eT=this.makeEndpoint(!1,this.target,this.targetId,params.targetEndpoint);eS&&_ju.addToList(params.endpointsByElement,this.sourceId,eS),eT&&_ju.addToList(params.endpointsByElement,this.targetId,eT),this.scope||(this.scope=this.endpoints[0].scope),null!=params.deleteEndpointsOnDetach?(this.endpoints[0]._deleteOnDetach=params.deleteEndpointsOnDetach,this.endpoints[1]._deleteOnDetach=params.deleteEndpointsOnDetach):(this.endpoints[0]._doNotDeleteOnDetach||(this.endpoints[0]._deleteOnDetach=!0),this.endpoints[1]._doNotDeleteOnDetach||(this.endpoints[1]._deleteOnDetach=!0));var _detachable=_jsPlumb.Defaults.ConnectionsDetachable;params.detachable===!1&&(_detachable=!1),this.endpoints[0].connectionsDetachable===!1&&(_detachable=!1),this.endpoints[1].connectionsDetachable===!1&&(_detachable=!1);var _reattach=params.reattach||this.endpoints[0].reattachConnections||this.endpoints[1].reattachConnections||_jsPlumb.Defaults.ReattachConnections;this.appendToDefaultType({detachable:_detachable,reattach:_reattach,paintStyle:this.endpoints[0].connectorStyle||this.endpoints[1].connectorStyle||params.paintStyle||_jsPlumb.Defaults.PaintStyle||jsPlumb.Defaults.PaintStyle,hoverPaintStyle:this.endpoints[0].connectorHoverStyle||this.endpoints[1].connectorHoverStyle||params.hoverPaintStyle||_jsPlumb.Defaults.HoverPaintStyle||jsPlumb.Defaults.HoverPaintStyle});var _suspendedAt=_jsPlumb.getSuspendedAt();if(!_jsPlumb.isSuspendDrawing()){var myInfo=_jsPlumb.getCachedData(this.sourceId),myOffset=myInfo.o,myWH=myInfo.s,otherInfo=_jsPlumb.getCachedData(this.targetId),otherOffset=otherInfo.o,otherWH=otherInfo.s,initialTimestamp=_suspendedAt||_jsPlumb.timestamp(),anchorLoc=this.endpoints[0].anchor.compute({xy:[myOffset.left,myOffset.top],wh:myWH,element:this.endpoints[0],elementId:this.endpoints[0].elementId,txy:[otherOffset.left,otherOffset.top],twh:otherWH,tElement:this.endpoints[1],timestamp:initialTimestamp});this.endpoints[0].paint({anchorLoc:anchorLoc,timestamp:initialTimestamp}),anchorLoc=this.endpoints[1].anchor.compute({xy:[otherOffset.left,otherOffset.top],wh:otherWH,element:this.endpoints[1],elementId:this.endpoints[1].elementId,txy:[myOffset.left,myOffset.top],twh:myWH,tElement:this.endpoints[0],timestamp:initialTimestamp}),this.endpoints[1].paint({anchorLoc:anchorLoc,timestamp:initialTimestamp})}this.getTypeDescriptor=function(){return"connection"},this.getAttachedElements=function(){return this.endpoints},this.isDetachable=function(){return this._jsPlumb.detachable===!0},this.setDetachable=function(detachable){this._jsPlumb.detachable=detachable===!0},this.isReattach=function(){return this._jsPlumb.reattach===!0||this.endpoints[0].reattachConnections===!0||this.endpoints[1].reattachConnections===!0},this.setReattach=function(reattach){this._jsPlumb.reattach=reattach===!0},this._jsPlumb.cost=params.cost||this.endpoints[0].getConnectionCost(),this._jsPlumb.directed=params.directed,null==params.directed&&(this._jsPlumb.directed=this.endpoints[0].areConnectionsDirected());var _p=jsPlumb.extend({},this.endpoints[1].getParameters());_jp.extend(_p,this.endpoints[0].getParameters()),_jp.extend(_p,this.getParameters()),this.setParameters(_p),this.setConnector(this.endpoints[0].connector||this.endpoints[1].connector||params.connector||_jsPlumb.Defaults.Connector||_jp.Defaults.Connector,!0),params.geometry&&this.connector.setGeometry(params.geometry);var data=null!=params.data&&_ju.isObject(params.data)?params.data:{};this.getData=function(){return data},this.setData=function(d){data=d||{}},this.mergeData=function(d){data=jsPlumb.extend(data,d)};var _types=["default",this.endpoints[0].connectionType,this.endpoints[1].connectionType,params.type].join(" ");/[^\s]/.test(_types)&&this.addType(_types,params.data,!0),this.updateConnectedClass()},_ju.extend(_jp.Connection,_jp.OverlayCapableJsPlumbUIComponent,{applyType:function(t,doNotRepaint,typeMap){null!=t.detachable&&this.setDetachable(t.detachable),null!=t.reattach&&this.setReattach(t.reattach),t.scope&&(this.scope=t.scope),null!=t.cssClass&&this.canvas&&this._jsPlumb.instance.addClass(this.canvas,t.cssClass);var _anchors=null;t.anchor?(_anchors=this.getCachedTypeItem("anchors",typeMap.anchor),null==_anchors&&(_anchors=[this._jsPlumb.instance.makeAnchor(t.anchor),this._jsPlumb.instance.makeAnchor(t.anchor)],this.cacheTypeItem("anchors",_anchors,typeMap.anchor))):t.anchors&&(_anchors=this.getCachedTypeItem("anchors",typeMap.anchors),null==_anchors&&(_anchors=[this._jsPlumb.instance.makeAnchor(t.anchors[0]),this._jsPlumb.instance.makeAnchor(t.anchors[1])],this.cacheTypeItem("anchors",_anchors,typeMap.anchors))),null!=_anchors&&(this.endpoints[0].anchor=_anchors[0],this.endpoints[1].anchor=_anchors[1],this.endpoints[1].anchor.isDynamic&&this._jsPlumb.instance.repaint(this.endpoints[1].elementId)),_jp.OverlayCapableJsPlumbUIComponent.applyType(this,t)},addClass:function(c,informEndpoints){informEndpoints&&(this.endpoints[0].addClass(c),this.endpoints[1].addClass(c),this.suspendedEndpoint&&this.suspendedEndpoint.addClass(c)),this.connector&&this.connector.addClass(c)},removeClass:function(c,informEndpoints){informEndpoints&&(this.endpoints[0].removeClass(c),this.endpoints[1].removeClass(c),this.suspendedEndpoint&&this.suspendedEndpoint.removeClass(c)),this.connector&&this.connector.removeClass(c)},isVisible:function(){return this._jsPlumb.visible},setVisible:function(v){this._jsPlumb.visible=v,this.connector&&this.connector.setVisible(v),this.repaint()},cleanup:function(){this.updateConnectedClass(!0),this.endpoints=null,this.source=null,this.target=null,null!=this.connector&&(this.connector.cleanup(!0),this.connector.destroy(!0)),this.connector=null},updateConnectedClass:function(remove){this._jsPlumb&&(_updateConnectedClass(this,this.source,this._jsPlumb.instance,remove),_updateConnectedClass(this,this.target,this._jsPlumb.instance,remove))},setHover:function(state){this.connector&&this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged()&&(this.connector.setHover(state),root.jsPlumb[state?"addClass":"removeClass"](this.source,this._jsPlumb.instance.hoverSourceClass),root.jsPlumb[state?"addClass":"removeClass"](this.target,this._jsPlumb.instance.hoverTargetClass))},getUuids:function(){return[this.endpoints[0].getUuid(),this.endpoints[1].getUuid()]},getCost:function(){return this._jsPlumb?this._jsPlumb.cost:-(1/0)},setCost:function(c){this._jsPlumb.cost=c},isDirected:function(){return this._jsPlumb.directed===!0},getConnector:function(){return this.connector},getGeometry:function(){return this.connector?this.connector.getGeometry():null},setGeometry:function(g){this.connector&&this.connector.setGeometry(g)},prepareConnector:function(connectorSpec,typeId){var connector,connectorArgs={_jsPlumb:this._jsPlumb.instance,cssClass:(this._jsPlumb.params.cssClass||"")+(this.isEditable()?this._jsPlumb.instance.editableConnectorClass:""),container:this._jsPlumb.params.container,"pointer-events":this._jsPlumb.params["pointer-events"],editable:this.editableRequested},renderMode=this._jsPlumb.instance.getRenderMode();return _ju.isString(connectorSpec)?connector=makeConnector(this._jsPlumb.instance,renderMode,connectorSpec,connectorArgs,this):_ju.isArray(connectorSpec)&&(connector=1==connectorSpec.length?makeConnector(this._jsPlumb.instance,renderMode,connectorSpec[0],connectorArgs,this):makeConnector(this._jsPlumb.instance,renderMode,connectorSpec[0],_ju.merge(connectorSpec[1],connectorArgs),this)),null!=typeId&&(connector.typeId=typeId),connector},setPreparedConnector:function(connector,doNotRepaint,doNotChangeListenerComponent,typeId){var previous,previousClasses="";if(null!=this.connector&&(previous=this.connector,previousClasses=previous.getClass(),this.connector.cleanup(),this.connector.destroy()),this.connector=connector,typeId&&this.cacheTypeItem("connector",connector,typeId),this.canvas=this.connector.canvas,this.bgCanvas=this.connector.bgCanvas,this.addClass(previousClasses),this.canvas&&(this.canvas._jsPlumb=this),this.bgCanvas&&(this.bgCanvas._jsPlumb=this),null!=previous)for(var o=this.getOverlays(),i=0;i<o.length;i++)o[i].transfer&&o[i].transfer(this.connector);doNotChangeListenerComponent||this.setListenerComponent(this.connector),doNotRepaint||this.repaint()},setConnector:function(connectorSpec,doNotRepaint,doNotChangeListenerComponent,typeId){var connector=this.prepareConnector(connectorSpec,typeId);this.setPreparedConnector(connector,doNotRepaint,doNotChangeListenerComponent,typeId)},paint:function(params){if(!this._jsPlumb.instance.isSuspendDrawing()&&this._jsPlumb.visible){params=params||{};var timestamp=params.timestamp,swap=!1,tId=swap?this.sourceId:this.targetId,sId=swap?this.targetId:this.sourceId,tIdx=swap?0:1,sIdx=swap?1:0;if(null==timestamp||timestamp!=this._jsPlumb.lastPaintedAt){var sourceInfo=this._jsPlumb.instance.updateOffset({elId:sId}).o,targetInfo=this._jsPlumb.instance.updateOffset({elId:tId}).o,sE=this.endpoints[sIdx],tE=this.endpoints[tIdx],sAnchorP=sE.anchor.getCurrentLocation({xy:[sourceInfo.left,sourceInfo.top],wh:[sourceInfo.width,sourceInfo.height],element:sE,timestamp:timestamp}),tAnchorP=tE.anchor.getCurrentLocation({xy:[targetInfo.left,targetInfo.top],wh:[targetInfo.width,targetInfo.height],element:tE,timestamp:timestamp});this.connector.resetBounds(),this.connector.compute({sourcePos:sAnchorP,targetPos:tAnchorP,sourceEndpoint:this.endpoints[sIdx],targetEndpoint:this.endpoints[tIdx],lineWidth:this._jsPlumb.paintStyleInUse.lineWidth,sourceInfo:sourceInfo,targetInfo:targetInfo});var overlayExtents={minX:1/0,minY:1/0,maxX:-(1/0),maxY:-(1/0)};for(var i in this._jsPlumb.overlays)if(this._jsPlumb.overlays.hasOwnProperty(i)){var o=this._jsPlumb.overlays[i];o.isVisible()&&(this._jsPlumb.overlayPlacements[i]=o.draw(this.connector,this._jsPlumb.paintStyleInUse,this.getAbsoluteOverlayPosition(o)),overlayExtents.minX=Math.min(overlayExtents.minX,this._jsPlumb.overlayPlacements[i].minX),overlayExtents.maxX=Math.max(overlayExtents.maxX,this._jsPlumb.overlayPlacements[i].maxX),overlayExtents.minY=Math.min(overlayExtents.minY,this._jsPlumb.overlayPlacements[i].minY),overlayExtents.maxY=Math.max(overlayExtents.maxY,this._jsPlumb.overlayPlacements[i].maxY))}var lineWidth=parseFloat(this._jsPlumb.paintStyleInUse.lineWidth||1)/2,outlineWidth=parseFloat(this._jsPlumb.paintStyleInUse.lineWidth||0),extents={xmin:Math.min(this.connector.bounds.minX-(lineWidth+outlineWidth),overlayExtents.minX),ymin:Math.min(this.connector.bounds.minY-(lineWidth+outlineWidth),overlayExtents.minY),xmax:Math.max(this.connector.bounds.maxX+(lineWidth+outlineWidth),overlayExtents.maxX),ymax:Math.max(this.connector.bounds.maxY+(lineWidth+outlineWidth),overlayExtents.maxY)};this.connector.paint(this._jsPlumb.paintStyleInUse,null,extents);for(var j in this._jsPlumb.overlays)if(this._jsPlumb.overlays.hasOwnProperty(j)){var p=this._jsPlumb.overlays[j];p.isVisible()&&p.paint(this._jsPlumb.overlayPlacements[j],extents)}}this._jsPlumb.lastPaintedAt=timestamp}},repaint:function(params){params=params||{},this.paint({elId:this.sourceId,recalc:!(params.recalc===!1),timestamp:params.timestamp})},prepareEndpoint:function(_jsPlumb,_newEndpoint,conn,existing,index,params,element,elementId){var e;if(existing)conn.endpoints[index]=existing,existing.addConnection(conn);else{params.endpoints||(params.endpoints=[null,null]);var ep=params.endpoints[index]||params.endpoint||_jsPlumb.Defaults.Endpoints[index]||jsPlumb.Defaults.Endpoints[index]||_jsPlumb.Defaults.Endpoint||jsPlumb.Defaults.Endpoint;params.endpointStyles||(params.endpointStyles=[null,null]),params.endpointHoverStyles||(params.endpointHoverStyles=[null,null]);var es=params.endpointStyles[index]||params.endpointStyle||_jsPlumb.Defaults.EndpointStyles[index]||jsPlumb.Defaults.EndpointStyles[index]||_jsPlumb.Defaults.EndpointStyle||jsPlumb.Defaults.EndpointStyle;null==es.fillStyle&&null!=params.paintStyle&&(es.fillStyle=params.paintStyle.strokeStyle),null==es.outlineColor&&null!=params.paintStyle&&(es.outlineColor=params.paintStyle.outlineColor),null==es.outlineWidth&&null!=params.paintStyle&&(es.outlineWidth=params.paintStyle.outlineWidth);var ehs=params.endpointHoverStyles[index]||params.endpointHoverStyle||_jsPlumb.Defaults.EndpointHoverStyles[index]||jsPlumb.Defaults.EndpointHoverStyles[index]||_jsPlumb.Defaults.EndpointHoverStyle||jsPlumb.Defaults.EndpointHoverStyle;null!=params.hoverPaintStyle&&(null==ehs&&(ehs={}),null==ehs.fillStyle&&(ehs.fillStyle=params.hoverPaintStyle.strokeStyle));var a=params.anchors?params.anchors[index]:params.anchor?params.anchor:_makeAnchor(_jsPlumb.Defaults.Anchors[index],elementId,_jsPlumb)||_makeAnchor(_jp.Defaults.Anchors[index],elementId,_jsPlumb)||_makeAnchor(_jsPlumb.Defaults.Anchor,elementId,_jsPlumb)||_makeAnchor(_jp.Defaults.Anchor,elementId,_jsPlumb),u=params.uuids?params.uuids[index]:null;e=_newEndpoint({paintStyle:es,hoverPaintStyle:ehs,endpoint:ep,connections:[conn],uuid:u,anchor:a,source:element,scope:params.scope,reattach:params.reattach||_jsPlumb.Defaults.ReattachConnections,detachable:params.detachable||_jsPlumb.Defaults.ConnectionsDetachable
}),conn.endpoints[index]=e,params.drawEndpoints===!1&&e.setVisible(!1,!0,!0)}return e}})}.call("undefined"!=typeof window?window:this),function(){"use strict";var root=this,_ju=root.jsPlumbUtil,_jp=root.jsPlumb;_jp.AnchorManager=function(params){var _amEndpoints={},continuousAnchorLocations={},userDefinedContinuousAnchorLocations={},continuousAnchorOrientations={},Orientation={HORIZONTAL:"horizontal",VERTICAL:"vertical",DIAGONAL:"diagonal",IDENTITY:"identity"},axes=["left","top","right","bottom"],connectionsByElementId={},self=this,anchorLists={},jsPlumbInstance=params.jsPlumbInstance,floatingConnections={},calculateOrientation=function(sourceId,targetId,sd,td,sourceAnchor,targetAnchor){if(sourceId===targetId)return{orientation:Orientation.IDENTITY,a:["top","top"]};var theta=Math.atan2(td.centery-sd.centery,td.centerx-sd.centerx),theta2=Math.atan2(sd.centery-td.centery,sd.centerx-td.centerx),candidates=[],midpoints={};!function(types,dim){for(var i=0;i<types.length;i++)midpoints[types[i]]={left:[dim[i].left,dim[i].centery],right:[dim[i].right,dim[i].centery],top:[dim[i].centerx,dim[i].top],bottom:[dim[i].centerx,dim[i].bottom]}}(["source","target"],[sd,td]);for(var sf=0;sf<axes.length;sf++)for(var tf=0;tf<axes.length;tf++)candidates.push({source:axes[sf],target:axes[tf],dist:Biltong.lineLength(midpoints.source[axes[sf]],midpoints.target[axes[tf]])});candidates.sort(function(a,b){return a.dist<b.dist?-1:a.dist>b.dist?1:0});for(var sourceEdge=candidates[0].source,targetEdge=candidates[0].target,i=0;i<candidates.length&&(sourceEdge=!sourceAnchor.isContinuous||sourceAnchor.isEdgeSupported(candidates[i].source)?candidates[i].source:null,targetEdge=!targetAnchor.isContinuous||targetAnchor.isEdgeSupported(candidates[i].target)?candidates[i].target:null,null==sourceEdge||null==targetEdge);i++);return{a:[sourceEdge,targetEdge],theta:theta,theta2:theta2}},placeAnchorsOnLine=function(desc,elementDimensions,elementPosition,connections,horizontal,otherMultiplier,reverse){for(var a=[],step=elementDimensions[horizontal?0:1]/(connections.length+1),i=0;i<connections.length;i++){var val=(i+1)*step,other=otherMultiplier*elementDimensions[horizontal?1:0];reverse&&(val=elementDimensions[horizontal?0:1]-val);var dx=horizontal?val:other,x=elementPosition[0]+dx,xp=dx/elementDimensions[0],dy=horizontal?other:val,y=elementPosition[1]+dy,yp=dy/elementDimensions[1];a.push([x,y,xp,yp,connections[i][1],connections[i][2]])}return a},currySort=function(reverseAngles){return function(a,b){var r=!0;return r=reverseAngles?a[0][0]<b[0][0]:a[0][0]>b[0][0],r===!1?-1:1}},leftSort=function(a,b){var p1=a[0][0]<0?-Math.PI-a[0][0]:Math.PI-a[0][0],p2=b[0][0]<0?-Math.PI-b[0][0]:Math.PI-b[0][0];return p1>p2?1:a[0][1]>b[0][1]?1:-1},edgeSortFunctions={top:function(a,b){return a[0]>b[0]?1:-1},right:currySort(!0),bottom:currySort(!0),left:leftSort},_sortHelper=function(_array,_fn){return _array.sort(_fn)},placeAnchors=function(elementId,_anchorLists){var cd=jsPlumbInstance.getCachedData(elementId),sS=cd.s,sO=cd.o,placeSomeAnchors=function(desc,elementDimensions,elementPosition,unsortedConnections,isHorizontal,otherMultiplier,orientation){if(unsortedConnections.length>0)for(var sc=_sortHelper(unsortedConnections,edgeSortFunctions[desc]),reverse="right"===desc||"top"===desc,anchors=placeAnchorsOnLine(desc,elementDimensions,elementPosition,sc,isHorizontal,otherMultiplier,reverse),_setAnchorLocation=function(endpoint,anchorPos){continuousAnchorLocations[endpoint.id]=[anchorPos[0],anchorPos[1],anchorPos[2],anchorPos[3]],continuousAnchorOrientations[endpoint.id]=orientation},i=0;i<anchors.length;i++){var c=anchors[i][4],weAreSource=c.endpoints[0].elementId===elementId,weAreTarget=c.endpoints[1].elementId===elementId;weAreSource&&_setAnchorLocation(c.endpoints[0],anchors[i]),weAreTarget&&_setAnchorLocation(c.endpoints[1],anchors[i])}};placeSomeAnchors("bottom",sS,[sO.left,sO.top],_anchorLists.bottom,!0,1,[0,1]),placeSomeAnchors("top",sS,[sO.left,sO.top],_anchorLists.top,!0,0,[0,-1]),placeSomeAnchors("left",sS,[sO.left,sO.top],_anchorLists.left,!1,0,[-1,0]),placeSomeAnchors("right",sS,[sO.left,sO.top],_anchorLists.right,!1,1,[1,0])};this.reset=function(){_amEndpoints={},connectionsByElementId={},anchorLists={}},this.addFloatingConnection=function(key,conn){floatingConnections[key]=conn},this.removeFloatingConnection=function(key){delete floatingConnections[key]},this.newConnection=function(conn){var sourceId=conn.sourceId,targetId=conn.targetId,ep=conn.endpoints,doRegisterTarget=!0,registerConnection=function(otherIndex,otherEndpoint,otherAnchor,elId,c){sourceId==targetId&&otherAnchor.isContinuous&&(conn._jsPlumb.instance.removeElement(ep[1].canvas),doRegisterTarget=!1),_ju.addToList(connectionsByElementId,elId,[c,otherEndpoint,otherAnchor.constructor==_jp.DynamicAnchor])};registerConnection(0,ep[0],ep[0].anchor,targetId,conn),doRegisterTarget&&registerConnection(1,ep[1],ep[1].anchor,sourceId,conn)};var removeEndpointFromAnchorLists=function(endpoint){!function(list,eId){if(list){var f=function(e){return e[4]==eId};_ju.removeWithFunction(list.top,f),_ju.removeWithFunction(list.left,f),_ju.removeWithFunction(list.bottom,f),_ju.removeWithFunction(list.right,f)}}(anchorLists[endpoint.elementId],endpoint.id)};this.connectionDetached=function(connInfo,doNotRedraw){var connection=connInfo.connection||connInfo,sourceId=connInfo.sourceId,targetId=connInfo.targetId,ep=connection.endpoints,removeConnection=function(otherIndex,otherEndpoint,otherAnchor,elId,c){_ju.removeWithFunction(connectionsByElementId[elId],function(_c){return _c[0].id==c.id})};removeConnection(1,ep[1],ep[1].anchor,sourceId,connection),removeConnection(0,ep[0],ep[0].anchor,targetId,connection),connection.floatingId&&(removeConnection(connection.floatingIndex,connection.floatingEndpoint,connection.floatingEndpoint.anchor,connection.floatingId,connection),removeEndpointFromAnchorLists(connection.floatingEndpoint)),removeEndpointFromAnchorLists(connection.endpoints[0]),removeEndpointFromAnchorLists(connection.endpoints[1]),doNotRedraw||(self.redraw(connection.sourceId),connection.targetId!==connection.sourceId&&self.redraw(connection.targetId))},this.add=function(endpoint,elementId){_ju.addToList(_amEndpoints,elementId,endpoint)},this.changeId=function(oldId,newId){connectionsByElementId[newId]=connectionsByElementId[oldId],_amEndpoints[newId]=_amEndpoints[oldId],delete connectionsByElementId[oldId],delete _amEndpoints[oldId]},this.getConnectionsFor=function(elementId){return connectionsByElementId[elementId]||[]},this.getEndpointsFor=function(elementId){return _amEndpoints[elementId]||[]},this.deleteEndpoint=function(endpoint){_ju.removeWithFunction(_amEndpoints[endpoint.elementId],function(e){return e.id==endpoint.id}),removeEndpointFromAnchorLists(endpoint)},this.clearFor=function(elementId){delete _amEndpoints[elementId],_amEndpoints[elementId]=[]};var _updateAnchorList=function(lists,theta,order,conn,aBoolean,otherElId,idx,reverse,edgeId,elId,connsToPaint,endpointsToPaint){var i,candidate,exactIdx=-1,firstMatchingElIdx=-1,endpoint=conn.endpoints[idx],endpointId=endpoint.id,oIdx=[1,0][idx],values=[[theta,order],conn,aBoolean,otherElId,endpointId],listToAddTo=lists[edgeId],listToRemoveFrom=endpoint._continuousAnchorEdge?lists[endpoint._continuousAnchorEdge]:null;if(listToRemoveFrom){var rIdx=_ju.findWithFunction(listToRemoveFrom,function(e){return e[4]==endpointId});if(rIdx!=-1)for(listToRemoveFrom.splice(rIdx,1),i=0;i<listToRemoveFrom.length;i++)candidate=listToRemoveFrom[i][1],_ju.addWithFunction(connsToPaint,candidate,function(c){return c.id==candidate.id}),_ju.addWithFunction(endpointsToPaint,listToRemoveFrom[i][1].endpoints[idx],function(e){return e.id==candidate.endpoints[idx].id}),_ju.addWithFunction(endpointsToPaint,listToRemoveFrom[i][1].endpoints[oIdx],function(e){return e.id==candidate.endpoints[oIdx].id})}for(i=0;i<listToAddTo.length;i++)candidate=listToAddTo[i][1],1==params.idx&&listToAddTo[i][3]===otherElId&&firstMatchingElIdx==-1&&(firstMatchingElIdx=i),_ju.addWithFunction(connsToPaint,candidate,function(c){return c.id==candidate.id}),_ju.addWithFunction(endpointsToPaint,listToAddTo[i][1].endpoints[idx],function(e){return e.id==candidate.endpoints[idx].id}),_ju.addWithFunction(endpointsToPaint,listToAddTo[i][1].endpoints[oIdx],function(e){return e.id==candidate.endpoints[oIdx].id});if(exactIdx!=-1)listToAddTo[exactIdx]=values;else{var insertIdx=reverse?firstMatchingElIdx!=-1?firstMatchingElIdx:0:listToAddTo.length;listToAddTo.splice(insertIdx,0,values)}endpoint._continuousAnchorEdge=edgeId};this.updateOtherEndpoint=function(sourceElId,oldTargetId,newTargetId,connection){var sIndex=_ju.findWithFunction(connectionsByElementId[sourceElId],function(i){return i[0].id===connection.id}),tIndex=_ju.findWithFunction(connectionsByElementId[oldTargetId],function(i){return i[0].id===connection.id});sIndex!=-1&&(connectionsByElementId[sourceElId][sIndex][0]=connection,connectionsByElementId[sourceElId][sIndex][1]=connection.endpoints[1],connectionsByElementId[sourceElId][sIndex][2]=connection.endpoints[1].anchor.constructor==_jp.DynamicAnchor),tIndex>-1&&(connectionsByElementId[oldTargetId].splice(tIndex,1),_ju.addToList(connectionsByElementId,newTargetId,[connection,connection.endpoints[0],connection.endpoints[0].anchor.constructor==_jp.DynamicAnchor])),connection.updateConnectedClass()},this.sourceChanged=function(originalId,newId,connection,newElement){if(originalId!==newId){connection.sourceId=newId,connection.source=newElement,_ju.removeWithFunction(connectionsByElementId[originalId],function(info){return info[0].id===connection.id});var tIdx=_ju.findWithFunction(connectionsByElementId[connection.targetId],function(i){return i[0].id===connection.id});tIdx>-1&&(connectionsByElementId[connection.targetId][tIdx][0]=connection,connectionsByElementId[connection.targetId][tIdx][1]=connection.endpoints[0],connectionsByElementId[connection.targetId][tIdx][2]=connection.endpoints[0].anchor.constructor==_jp.DynamicAnchor),_ju.addToList(connectionsByElementId,newId,[connection,connection.endpoints[1],connection.endpoints[1].anchor.constructor==_jp.DynamicAnchor]),connection.endpoints[1].anchor.isContinuous&&(connection.source===connection.target?connection._jsPlumb.instance.removeElement(connection.endpoints[1].canvas):null==connection.endpoints[1].canvas.parentNode&&connection._jsPlumb.instance.appendElement(connection.endpoints[1].canvas)),connection.updateConnectedClass()}},this.rehomeEndpoint=function(ep,currentId,element){var eps=_amEndpoints[currentId]||[],elementId=jsPlumbInstance.getId(element);if(elementId!==currentId){var idx=eps.indexOf(ep);if(idx>-1){var _ep=eps.splice(idx,1)[0];self.add(_ep,elementId)}}for(var i=0;i<ep.connections.length;i++)ep.connections[i].sourceId==currentId?self.sourceChanged(currentId,ep.elementId,ep.connections[i],ep.element):ep.connections[i].targetId==currentId&&(ep.connections[i].targetId=ep.elementId,ep.connections[i].target=ep.element,self.updateOtherEndpoint(ep.connections[i].sourceId,currentId,ep.elementId,ep.connections[i]))},this.redraw=function(elementId,ui,timestamp,offsetToUI,clearEdits,doNotRecalcEndpoint){if(!jsPlumbInstance.isSuspendDrawing()){var ep=_amEndpoints[elementId]||[],endpointConnections=connectionsByElementId[elementId]||[],connectionsToPaint=[],endpointsToPaint=[],anchorsToUpdate=[];timestamp=timestamp||jsPlumbInstance.timestamp(),offsetToUI=offsetToUI||{left:0,top:0},ui&&(ui={left:ui.left+offsetToUI.left,top:ui.top+offsetToUI.top});for(var myOffset=jsPlumbInstance.updateOffset({elId:elementId,offset:ui,recalc:!1,timestamp:timestamp}),orientationCache={},i=0;i<endpointConnections.length;i++){var conn=endpointConnections[i][0],sourceId=conn.sourceId,targetId=conn.targetId,sourceContinuous=conn.endpoints[0].anchor.isContinuous,targetContinuous=conn.endpoints[1].anchor.isContinuous;if(sourceContinuous||targetContinuous){var oKey=sourceId+"_"+targetId,o=orientationCache[oKey],oIdx=conn.sourceId==elementId?1:0;sourceContinuous&&!anchorLists[sourceId]&&(anchorLists[sourceId]={top:[],right:[],bottom:[],left:[]}),targetContinuous&&!anchorLists[targetId]&&(anchorLists[targetId]={top:[],right:[],bottom:[],left:[]}),elementId!=targetId&&jsPlumbInstance.updateOffset({elId:targetId,timestamp:timestamp}),elementId!=sourceId&&jsPlumbInstance.updateOffset({elId:sourceId,timestamp:timestamp});var td=jsPlumbInstance.getCachedData(targetId),sd=jsPlumbInstance.getCachedData(sourceId);targetId==sourceId&&(sourceContinuous||targetContinuous)?(_updateAnchorList(anchorLists[sourceId],-Math.PI/2,0,conn,!1,targetId,0,!1,"top",sourceId,connectionsToPaint,endpointsToPaint),_updateAnchorList(anchorLists[targetId],-Math.PI/2,0,conn,!1,sourceId,1,!1,"top",targetId,connectionsToPaint,endpointsToPaint)):(o||(o=calculateOrientation(sourceId,targetId,sd.o,td.o,conn.endpoints[0].anchor,conn.endpoints[1].anchor),orientationCache[oKey]=o),sourceContinuous&&_updateAnchorList(anchorLists[sourceId],o.theta,0,conn,!1,targetId,0,!1,o.a[0],sourceId,connectionsToPaint,endpointsToPaint),targetContinuous&&_updateAnchorList(anchorLists[targetId],o.theta2,-1,conn,!0,sourceId,1,!0,o.a[1],targetId,connectionsToPaint,endpointsToPaint)),sourceContinuous&&_ju.addWithFunction(anchorsToUpdate,sourceId,function(a){return a===sourceId}),targetContinuous&&_ju.addWithFunction(anchorsToUpdate,targetId,function(a){return a===targetId}),_ju.addWithFunction(connectionsToPaint,conn,function(c){return c.id==conn.id}),(sourceContinuous&&0===oIdx||targetContinuous&&1===oIdx)&&_ju.addWithFunction(endpointsToPaint,conn.endpoints[oIdx],function(e){return e.id==conn.endpoints[oIdx].id})}}for(i=0;i<ep.length;i++)0===ep[i].connections.length&&ep[i].anchor.isContinuous&&(anchorLists[elementId]||(anchorLists[elementId]={top:[],right:[],bottom:[],left:[]}),_updateAnchorList(anchorLists[elementId],-Math.PI/2,0,{endpoints:[ep[i],ep[i]],paint:function(){}},!1,elementId,0,!1,ep[i].anchor.getDefaultFace(),elementId,connectionsToPaint,endpointsToPaint),_ju.addWithFunction(anchorsToUpdate,elementId,function(a){return a===elementId}));for(i=0;i<anchorsToUpdate.length;i++)placeAnchors(anchorsToUpdate[i],anchorLists[anchorsToUpdate[i]]);for(i=0;i<ep.length;i++)ep[i].paint({timestamp:timestamp,offset:myOffset,dimensions:myOffset.s,recalc:doNotRecalcEndpoint!==!0});for(i=0;i<endpointsToPaint.length;i++){var cd=jsPlumbInstance.getCachedData(endpointsToPaint[i].elementId);endpointsToPaint[i].paint({timestamp:timestamp,offset:cd,dimensions:cd.s})}for(i=0;i<endpointConnections.length;i++){var otherEndpoint=endpointConnections[i][1];if(otherEndpoint.anchor.constructor==_jp.DynamicAnchor){otherEndpoint.paint({elementWithPrecedence:elementId,timestamp:timestamp}),_ju.addWithFunction(connectionsToPaint,endpointConnections[i][0],function(c){return c.id==endpointConnections[i][0].id});for(var k=0;k<otherEndpoint.connections.length;k++)otherEndpoint.connections[k]!==endpointConnections[i][0]&&_ju.addWithFunction(connectionsToPaint,otherEndpoint.connections[k],function(c){return c.id==otherEndpoint.connections[k].id})}else otherEndpoint.anchor.constructor==_jp.Anchor&&_ju.addWithFunction(connectionsToPaint,endpointConnections[i][0],function(c){return c.id==endpointConnections[i][0].id})}var fc=floatingConnections[elementId];for(fc&&fc.paint({timestamp:timestamp,recalc:!1,elId:elementId}),i=0;i<connectionsToPaint.length;i++)connectionsToPaint[i].paint({elId:elementId,timestamp:timestamp,recalc:!1,clearEdits:clearEdits})}};var ContinuousAnchor=function(anchorParams){_ju.EventGenerator.apply(this),this.type="Continuous",this.isDynamic=!0,this.isContinuous=!0;for(var faces=anchorParams.faces||["top","right","bottom","left"],clockwise=!(anchorParams.clockwise===!1),availableFaces={},opposites={top:"bottom",right:"left",left:"right",bottom:"top"},clockwiseOptions={top:"right",right:"bottom",left:"top",bottom:"left"},antiClockwiseOptions={top:"left",right:"top",left:"bottom",bottom:"right"},secondBest=clockwise?clockwiseOptions:antiClockwiseOptions,lastChoice=clockwise?antiClockwiseOptions:clockwiseOptions,cssClass=anchorParams.cssClass||"",i=0;i<faces.length;i++)availableFaces[faces[i]]=!0;this.getDefaultFace=function(){return 0===faces.length?"top":faces[0]},this.verifyEdge=function(edge){return availableFaces[edge]?edge:availableFaces[opposites[edge]]?opposites[edge]:availableFaces[secondBest[edge]]?secondBest[edge]:availableFaces[lastChoice[edge]]?lastChoice[edge]:edge},this.isEdgeSupported=function(edge){return availableFaces[edge]===!0},this.compute=function(params){return userDefinedContinuousAnchorLocations[params.element.id]||continuousAnchorLocations[params.element.id]||[0,0]},this.getCurrentLocation=function(params){return userDefinedContinuousAnchorLocations[params.element.id]||continuousAnchorLocations[params.element.id]||[0,0]},this.getOrientation=function(endpoint){return continuousAnchorOrientations[endpoint.id]||[0,0]},this.clearUserDefinedLocation=function(){delete userDefinedContinuousAnchorLocations[anchorParams.elementId]},this.setUserDefinedLocation=function(loc){userDefinedContinuousAnchorLocations[anchorParams.elementId]=loc},this.getCssClass=function(){return cssClass}};jsPlumbInstance.continuousAnchorFactory={get:function(params){return new ContinuousAnchor(params)},clear:function(elementId){delete userDefinedContinuousAnchorLocations[elementId],delete continuousAnchorLocations[elementId]}}},_jp.Anchor=function(params){this.x=params.x||0,this.y=params.y||0,this.elementId=params.elementId,this.cssClass=params.cssClass||"",this.userDefinedLocation=null,this.orientation=params.orientation||[0,0],this.lastReturnValue=null,this.offsets=params.offsets||[0,0],this.timestamp=null,_ju.EventGenerator.apply(this),this.compute=function(params){var xy=params.xy,wh=params.wh,timestamp=params.timestamp;return params.clearUserDefinedLocation&&(this.userDefinedLocation=null),timestamp&&timestamp===self.timestamp?this.lastReturnValue:(null!=this.userDefinedLocation?this.lastReturnValue=this.userDefinedLocation:this.lastReturnValue=[xy[0]+this.x*wh[0]+this.offsets[0],xy[1]+this.y*wh[1]+this.offsets[1]],this.timestamp=timestamp,this.lastReturnValue)},this.getCurrentLocation=function(params){return params=params||{},null==this.lastReturnValue||null!=params.timestamp&&this.timestamp!=params.timestamp?this.compute(params):this.lastReturnValue}},_ju.extend(_jp.Anchor,_ju.EventGenerator,{equals:function(anchor){if(!anchor)return!1;var ao=anchor.getOrientation(),o=this.getOrientation();return this.x==anchor.x&&this.y==anchor.y&&this.offsets[0]==anchor.offsets[0]&&this.offsets[1]==anchor.offsets[1]&&o[0]==ao[0]&&o[1]==ao[1]},getUserDefinedLocation:function(){return this.userDefinedLocation},setUserDefinedLocation:function(l){this.userDefinedLocation=l},clearUserDefinedLocation:function(){this.userDefinedLocation=null},getOrientation:function(){return this.orientation},getCssClass:function(){return this.cssClass}}),_jp.FloatingAnchor=function(params){_jp.Anchor.apply(this,arguments);var ref=params.reference,refCanvas=params.referenceCanvas,size=_jp.getSize(refCanvas),xDir=0,yDir=0,orientation=null,_lastResult=null;this.orientation=null,this.x=0,this.y=0,this.isFloating=!0,this.compute=function(params){var xy=params.xy,result=[xy[0]+size[0]/2,xy[1]+size[1]/2];return _lastResult=result,result},this.getOrientation=function(_endpoint){if(orientation)return orientation;var o=ref.getOrientation(_endpoint);return[Math.abs(o[0])*xDir*-1,Math.abs(o[1])*yDir*-1]},this.over=function(anchor,endpoint){orientation=anchor.getOrientation(endpoint)},this.out=function(){orientation=null},this.getCurrentLocation=function(params){return null==_lastResult?this.compute(params):_lastResult}},_ju.extend(_jp.FloatingAnchor,_jp.Anchor);var _convertAnchor=function(anchor,jsPlumbInstance,elementId){return anchor.constructor==_jp.Anchor?anchor:jsPlumbInstance.makeAnchor(anchor,elementId,jsPlumbInstance)};_jp.DynamicAnchor=function(params){_jp.Anchor.apply(this,arguments),this.isDynamic=!0,this.anchors=[],this.elementId=params.elementId,this.jsPlumbInstance=params.jsPlumbInstance;for(var i=0;i<params.anchors.length;i++)this.anchors[i]=_convertAnchor(params.anchors[i],this.jsPlumbInstance,this.elementId);this.getAnchors=function(){return this.anchors},this.locked=!1;var _curAnchor=this.anchors.length>0?this.anchors[0]:null,_lastAnchor=_curAnchor,self=this,_distance=function(anchor,cx,cy,xy,wh){var ax=xy[0]+anchor.x*wh[0],ay=xy[1]+anchor.y*wh[1],acx=xy[0]+wh[0]/2,acy=xy[1]+wh[1]/2;return Math.sqrt(Math.pow(cx-ax,2)+Math.pow(cy-ay,2))+Math.sqrt(Math.pow(acx-ax,2)+Math.pow(acy-ay,2))},_anchorSelector=params.selector||function(xy,wh,txy,twh,anchors){for(var cx=txy[0]+twh[0]/2,cy=txy[1]+twh[1]/2,minIdx=-1,minDist=1/0,i=0;i<anchors.length;i++){var d=_distance(anchors[i],cx,cy,xy,wh);d<minDist&&(minIdx=i+0,minDist=d)}return anchors[minIdx]};this.compute=function(params){var xy=params.xy,wh=params.wh,txy=params.txy,twh=params.twh;this.timestamp=params.timestamp;var udl=self.getUserDefinedLocation();return null!=udl?udl:this.locked||null==txy||null==twh?_curAnchor.compute(params):(params.timestamp=null,_curAnchor=_anchorSelector(xy,wh,txy,twh,this.anchors),this.x=_curAnchor.x,this.y=_curAnchor.y,_curAnchor!=_lastAnchor&&this.fire("anchorChanged",_curAnchor),_lastAnchor=_curAnchor,_curAnchor.compute(params))},this.getCurrentLocation=function(params){return this.getUserDefinedLocation()||(null!=_curAnchor?_curAnchor.getCurrentLocation(params):null)},this.getOrientation=function(_endpoint){return null!=_curAnchor?_curAnchor.getOrientation(_endpoint):[0,0]},this.over=function(anchor,endpoint){null!=_curAnchor&&_curAnchor.over(anchor,endpoint)},this.out=function(){null!=_curAnchor&&_curAnchor.out()},this.getCssClass=function(){return _curAnchor&&_curAnchor.getCssClass()||""}},_ju.extend(_jp.DynamicAnchor,_jp.Anchor);var _curryAnchor=function(x,y,ox,oy,type,fnInit){_jp.Anchors[type]=function(params){var a=params.jsPlumbInstance.makeAnchor([x,y,ox,oy,0,0],params.elementId,params.jsPlumbInstance);return a.type=type,fnInit&&fnInit(a,params),a}};_curryAnchor(.5,0,0,-1,"TopCenter"),_curryAnchor(.5,1,0,1,"BottomCenter"),_curryAnchor(0,.5,-1,0,"LeftMiddle"),_curryAnchor(1,.5,1,0,"RightMiddle"),_curryAnchor(.5,0,0,-1,"Top"),_curryAnchor(.5,1,0,1,"Bottom"),_curryAnchor(0,.5,-1,0,"Left"),_curryAnchor(1,.5,1,0,"Right"),_curryAnchor(.5,.5,0,0,"Center"),_curryAnchor(1,0,0,-1,"TopRight"),_curryAnchor(1,1,0,1,"BottomRight"),_curryAnchor(0,0,0,-1,"TopLeft"),_curryAnchor(0,1,0,1,"BottomLeft"),_jp.Defaults.DynamicAnchors=function(params){return params.jsPlumbInstance.makeAnchors(["TopCenter","RightMiddle","BottomCenter","LeftMiddle"],params.elementId,params.jsPlumbInstance)},_jp.Anchors.AutoDefault=function(params){var a=params.jsPlumbInstance.makeDynamicAnchor(_jp.Defaults.DynamicAnchors(params));return a.type="AutoDefault",a};var _curryContinuousAnchor=function(type,faces){_jp.Anchors[type]=function(params){var a=params.jsPlumbInstance.makeAnchor(["Continuous",{faces:faces}],params.elementId,params.jsPlumbInstance);return a.type=type,a}};_jp.Anchors.Continuous=function(params){return params.jsPlumbInstance.continuousAnchorFactory.get(params)},_curryContinuousAnchor("ContinuousLeft",["left"]),_curryContinuousAnchor("ContinuousTop",["top"]),_curryContinuousAnchor("ContinuousBottom",["bottom"]),_curryContinuousAnchor("ContinuousRight",["right"]),_curryAnchor(0,0,0,0,"Assign",function(anchor,params){var pf=params.position||"Fixed";anchor.positionFinder=pf.constructor==String?params.jsPlumbInstance.AnchorPositionFinders[pf]:pf,anchor.constructorParams=params}),root.jsPlumbInstance.prototype.AnchorPositionFinders={Fixed:function(dp,ep,es){return[(dp.left-ep.left)/es[0],(dp.top-ep.top)/es[1]]},Grid:function(dp,ep,es,params){var dx=dp.left-ep.left,dy=dp.top-ep.top,gx=es[0]/params.grid[0],gy=es[1]/params.grid[1],mx=Math.floor(dx/gx),my=Math.floor(dy/gy);return[(mx*gx+gx/2)/es[0],(my*gy+gy/2)/es[1]]}},_jp.Anchors.Perimeter=function(params){params=params||{};var anchorCount=params.anchorCount||60,shape=params.shape;if(!shape)throw new Error("no shape supplied to Perimeter Anchor type");var _circle=function(){for(var r=.5,step=2*Math.PI/anchorCount,current=0,a=[],i=0;i<anchorCount;i++){var x=r+r*Math.sin(current),y=r+r*Math.cos(current);a.push([x,y,0,0]),current+=step}return a},_path=function(segments){for(var anchorsPerFace=anchorCount/segments.length,a=[],_computeFace=function(x1,y1,x2,y2,fractionalLength){anchorsPerFace=anchorCount*fractionalLength;for(var dx=(x2-x1)/anchorsPerFace,dy=(y2-y1)/anchorsPerFace,i=0;i<anchorsPerFace;i++)a.push([x1+dx*i,y1+dy*i,0,0])},i=0;i<segments.length;i++)_computeFace.apply(null,segments[i]);return a},_shape=function(faces){for(var s=[],i=0;i<faces.length;i++)s.push([faces[i][0],faces[i][1],faces[i][2],faces[i][3],1/faces.length]);return _path(s)},_rectangle=function(){return _shape([[0,0,1,0],[1,0,1,1],[1,1,0,1],[0,1,0,0]])},_shapes={Circle:_circle,Ellipse:_circle,Diamond:function(){return _shape([[.5,0,1,.5],[1,.5,.5,1],[.5,1,0,.5],[0,.5,.5,0]])},Rectangle:_rectangle,Square:_rectangle,Triangle:function(){return _shape([[.5,0,1,1],[1,1,0,1],[0,1,.5,0]])},Path:function(params){for(var points=params.points,p=[],tl=0,i=0;i<points.length-1;i++){var l=Math.sqrt(Math.pow(points[i][2]-points[i][0])+Math.pow(points[i][3]-points[i][1]));tl+=l,p.push([points[i][0],points[i][1],points[i+1][0],points[i+1][1],l])}for(var j=0;j<p.length;j++)p[j][4]=p[j][4]/tl;return _path(p)}},_rotate=function(points,amountInDegrees){for(var o=[],theta=amountInDegrees/180*Math.PI,i=0;i<points.length;i++){var _x=points[i][0]-.5,_y=points[i][1]-.5;o.push([.5+(_x*Math.cos(theta)-_y*Math.sin(theta)),.5+(_x*Math.sin(theta)+_y*Math.cos(theta)),points[i][2],points[i][3]])}return o};if(!_shapes[shape])throw new Error("Shape ["+shape+"] is unknown by Perimeter Anchor type");var da=_shapes[shape](params);params.rotation&&(da=_rotate(da,params.rotation));var a=params.jsPlumbInstance.makeDynamicAnchor(da);return a.type="Perimeter",a}}.call("undefined"!=typeof window?window:this),function(){"use strict";var root=this,_jp=root.jsPlumb,_ju=root.jsPlumbUtil,_jg=root.Biltong;_jp.Segments={AbstractSegment:function(params){this.params=params,this.findClosestPointOnPath=function(x,y){return{d:1/0,x:null,y:null,l:null}},this.getBounds=function(){return{minX:Math.min(params.x1,params.x2),minY:Math.min(params.y1,params.y2),maxX:Math.max(params.x1,params.x2),maxY:Math.max(params.y1,params.y2)}}},Straight:function(params){var length,m,m2,x1,x2,y1,y2,_recalc=(_jp.Segments.AbstractSegment.apply(this,arguments),function(){length=Math.sqrt(Math.pow(x2-x1,2)+Math.pow(y2-y1,2)),m=_jg.gradient({x:x1,y:y1},{x:x2,y:y2}),m2=-1/m});this.type="Straight",this.getLength=function(){return length},this.getGradient=function(){return m},this.getCoordinates=function(){return{x1:x1,y1:y1,x2:x2,y2:y2}},this.setCoordinates=function(coords){x1=coords.x1,y1=coords.y1,x2=coords.x2,y2=coords.y2,_recalc()},this.setCoordinates({x1:params.x1,y1:params.y1,x2:params.x2,y2:params.y2}),this.getBounds=function(){return{minX:Math.min(x1,x2),minY:Math.min(y1,y2),maxX:Math.max(x1,x2),maxY:Math.max(y1,y2)}},this.pointOnPath=function(location,absolute){if(0!==location||absolute){if(1!=location||absolute){var l=absolute?location>0?location:length+location:location*length;return _jg.pointOnLine({x:x1,y:y1},{x:x2,y:y2},l)}return{x:x2,y:y2}}return{x:x1,y:y1}},this.gradientAtPoint=function(_){return m},this.pointAlongPathFrom=function(location,distance,absolute){var p=this.pointOnPath(location,absolute),farAwayPoint=distance<=0?{x:x1,y:y1}:{x:x2,y:y2};return distance<=0&&Math.abs(distance)>1&&(distance*=-1),_jg.pointOnLine(p,farAwayPoint,distance)};var within=function(a,b,c){return c>=Math.min(a,b)&&c<=Math.max(a,b)},closest=function(a,b,c){return Math.abs(c-a)<Math.abs(c-b)?a:b};this.findClosestPointOnPath=function(x,y){var out={d:1/0,x:null,y:null,l:null,x1:x1,x2:x2,y1:y1,y2:y2};if(0===m)out.y=y1,out.x=within(x1,x2,x)?x:closest(x1,x2,x);else if(m==1/0||m==-(1/0))out.x=x1,out.y=within(y1,y2,y)?y:closest(y1,y2,y);else{var b=y1-m*x1,b2=y-m2*x,_x1=(b2-b)/(m-m2),_y1=m*_x1+b;out.x=within(x1,x2,_x1)?_x1:closest(x1,x2,_x1),out.y=within(y1,y2,_y1)?_y1:closest(y1,y2,_y1)}var fractionInSegment=_jg.lineLength([out.x,out.y],[x1,y1]);return out.d=_jg.lineLength([x,y],[out.x,out.y]),out.l=fractionInSegment/length,out}},Arc:function(params){var _calcAngle=(_jp.Segments.AbstractSegment.apply(this,arguments),function(_x,_y){return _jg.theta([params.cx,params.cy],[_x,_y])}),_calcAngleForLocation=function(segment,location){if(segment.anticlockwise){var sa=segment.startAngle<segment.endAngle?segment.startAngle+TWO_PI:segment.startAngle,s=Math.abs(sa-segment.endAngle);return sa-s*location}var ea=segment.endAngle<segment.startAngle?segment.endAngle+TWO_PI:segment.endAngle,ss=Math.abs(ea-segment.startAngle);return segment.startAngle+ss*location},TWO_PI=2*Math.PI;this.radius=params.r,this.anticlockwise=params.ac,this.type="Arc",params.startAngle&&params.endAngle?(this.startAngle=params.startAngle,this.endAngle=params.endAngle,this.x1=params.cx+this.radius*Math.cos(params.startAngle),this.y1=params.cy+this.radius*Math.sin(params.startAngle),this.x2=params.cx+this.radius*Math.cos(params.endAngle),this.y2=params.cy+this.radius*Math.sin(params.endAngle)):(this.startAngle=_calcAngle(params.x1,params.y1),this.endAngle=_calcAngle(params.x2,params.y2),this.x1=params.x1,this.y1=params.y1,this.x2=params.x2,this.y2=params.y2),this.endAngle<0&&(this.endAngle+=TWO_PI),this.startAngle<0&&(this.startAngle+=TWO_PI);var ea=this.endAngle<this.startAngle?this.endAngle+TWO_PI:this.endAngle;this.sweep=Math.abs(ea-this.startAngle),this.anticlockwise&&(this.sweep=TWO_PI-this.sweep);var circumference=2*Math.PI*this.radius,frac=this.sweep/TWO_PI,length=circumference*frac;this.getLength=function(){return length},this.getBounds=function(){return{minX:params.cx-params.r,maxX:params.cx+params.r,minY:params.cy-params.r,maxY:params.cy+params.r}};var VERY_SMALL_VALUE=1e-10,gentleRound=function(n){var f=Math.floor(n),r=Math.ceil(n);return n-f<VERY_SMALL_VALUE?f:r-n<VERY_SMALL_VALUE?r:n};this.pointOnPath=function(location,absolute){if(0===location)return{x:this.x1,y:this.y1,theta:this.startAngle};if(1==location)return{x:this.x2,y:this.y2,theta:this.endAngle};absolute&&(location/=length);var angle=_calcAngleForLocation(this,location),_x=params.cx+params.r*Math.cos(angle),_y=params.cy+params.r*Math.sin(angle);return{x:gentleRound(_x),y:gentleRound(_y),theta:angle}},this.gradientAtPoint=function(location,absolute){var p=this.pointOnPath(location,absolute),m=_jg.normal([params.cx,params.cy],[p.x,p.y]);return this.anticlockwise||m!=1/0&&m!=-(1/0)||(m*=-1),m},this.pointAlongPathFrom=function(location,distance,absolute){var p=this.pointOnPath(location,absolute),arcSpan=distance/circumference*2*Math.PI,dir=this.anticlockwise?-1:1,startAngle=p.theta+dir*arcSpan,startX=params.cx+this.radius*Math.cos(startAngle),startY=params.cy+this.radius*Math.sin(startAngle);return{x:startX,y:startY}}},Bezier:function(params){this.curve=[{x:params.x1,y:params.y1},{x:params.cp1x,y:params.cp1y},{x:params.cp2x,y:params.cp2y},{x:params.x2,y:params.y2}];_jp.Segments.AbstractSegment.apply(this,arguments);this.bounds={minX:Math.min(params.x1,params.x2,params.cp1x,params.cp2x),minY:Math.min(params.y1,params.y2,params.cp1y,params.cp2y),maxX:Math.max(params.x1,params.x2,params.cp1x,params.cp2x),maxY:Math.max(params.y1,params.y2,params.cp1y,params.cp2y)},this.type="Bezier";var _translateLocation=function(_curve,location,absolute){return absolute&&(location=root.jsBezier.locationAlongCurveFrom(_curve,location>0?0:1,location)),location};this.pointOnPath=function(location,absolute){return location=_translateLocation(this.curve,location,absolute),root.jsBezier.pointOnCurve(this.curve,location)},this.gradientAtPoint=function(location,absolute){return location=_translateLocation(this.curve,location,absolute),root.jsBezier.gradientAtPoint(this.curve,location);
},this.pointAlongPathFrom=function(location,distance,absolute){return location=_translateLocation(this.curve,location,absolute),root.jsBezier.pointAlongCurveFrom(this.curve,location,distance)},this.getLength=function(){return root.jsBezier.getLength(this.curve)},this.getBounds=function(){return this.bounds}}};var AbstractComponent=function(){this.resetBounds=function(){this.bounds={minX:1/0,minY:1/0,maxX:-(1/0),maxY:-(1/0)}},this.resetBounds()};_jp.Connectors.AbstractConnector=function(params){AbstractComponent.apply(this,arguments);var segments=[],totalLength=0,segmentProportions=[],segmentProportionalLengths=[],stub=params.stub||0,sourceStub=_ju.isArray(stub)?stub[0]:stub,targetStub=_ju.isArray(stub)?stub[1]:stub,gap=params.gap||0,sourceGap=_ju.isArray(gap)?gap[0]:gap,targetGap=_ju.isArray(gap)?gap[1]:gap,userProvidedSegments=null,edited=!1,paintInfo=null,geometry=null,editable=params.editable!==!1&&null!=jsPlumb.ConnectorEditors&&null!=jsPlumb.ConnectorEditors[this.type],_setGeometry=this.setGeometry=function(g,internallyComputed){edited=!internallyComputed,geometry=g},_getGeometry=this.getGeometry=function(){return geometry};this.hasBeenEdited=function(){return edited},this.isEditing=function(){return null!=this.editor&&this.editor.isActive()},this.setEditable=function(e){return editable=!(!e||null==jsPlumb.ConnectorEditors||null==jsPlumb.ConnectorEditors[this.type]||null!=this.overrideSetEditable&&!this.overrideSetEditable())&&e},this.isEditable=function(){return editable},this.findSegmentForPoint=function(x,y){for(var out={d:1/0,s:null,x:null,y:null,l:null},i=0;i<segments.length;i++){var _s=segments[i].findClosestPointOnPath(x,y);_s.d<out.d&&(out.d=_s.d,out.l=_s.l,out.x=_s.x,out.y=_s.y,out.s=segments[i],out.x1=_s.x1,out.x2=_s.x2,out.y1=_s.y1,out.y2=_s.y2,out.index=i)}return out};var _updateSegmentProportions=function(){for(var curLoc=0,i=0;i<segments.length;i++){var sl=segments[i].getLength();segmentProportionalLengths[i]=sl/totalLength,segmentProportions[i]=[curLoc,curLoc+=sl/totalLength]}},_findSegmentForLocation=function(location,absolute){absolute&&(location=location>0?location/totalLength:(totalLength+location)/totalLength);for(var idx=segmentProportions.length-1,inSegmentProportion=1,i=0;i<segmentProportions.length;i++)if(segmentProportions[i][1]>=location){idx=i,inSegmentProportion=1==location?1:0===location?0:(location-segmentProportions[i][0])/segmentProportionalLengths[i];break}return{segment:segments[idx],proportion:inSegmentProportion,index:idx}},_addSegment=function(conn,type,params){if(params.x1!=params.x2||params.y1!=params.y2){var s=new _jp.Segments[type](params);segments.push(s),totalLength+=s.getLength(),conn.updateBounds(s)}},_clearSegments=function(){totalLength=segments.length=segmentProportions.length=segmentProportionalLengths.length=0};this.setSegments=function(_segs){userProvidedSegments=[],totalLength=0;for(var i=0;i<_segs.length;i++)userProvidedSegments.push(_segs[i]),totalLength+=_segs[i].getLength()},this.getLength=function(){return totalLength};var _prepareCompute=function(params){this.lineWidth=params.lineWidth;var segment=_jg.quadrant(params.sourcePos,params.targetPos),swapX=params.targetPos[0]<params.sourcePos[0],swapY=params.targetPos[1]<params.sourcePos[1],lw=params.lineWidth||1,so=params.sourceEndpoint.anchor.getOrientation(params.sourceEndpoint),to=params.targetEndpoint.anchor.getOrientation(params.targetEndpoint),x=swapX?params.targetPos[0]:params.sourcePos[0],y=swapY?params.targetPos[1]:params.sourcePos[1],w=Math.abs(params.targetPos[0]-params.sourcePos[0]),h=Math.abs(params.targetPos[1]-params.sourcePos[1]);if(0===so[0]&&0===so[1]||0===to[0]&&0===to[1]){var index=w>h?0:1,oIndex=[1,0][index];so=[],to=[],so[index]=params.sourcePos[index]>params.targetPos[index]?-1:1,to[index]=params.sourcePos[index]>params.targetPos[index]?1:-1,so[oIndex]=0,to[oIndex]=0}var sx=swapX?w+sourceGap*so[0]:sourceGap*so[0],sy=swapY?h+sourceGap*so[1]:sourceGap*so[1],tx=swapX?targetGap*to[0]:w+targetGap*to[0],ty=swapY?targetGap*to[1]:h+targetGap*to[1],oProduct=so[0]*to[0]+so[1]*to[1],result={sx:sx,sy:sy,tx:tx,ty:ty,lw:lw,xSpan:Math.abs(tx-sx),ySpan:Math.abs(ty-sy),mx:(sx+tx)/2,my:(sy+ty)/2,so:so,to:to,x:x,y:y,w:w,h:h,segment:segment,startStubX:sx+so[0]*sourceStub,startStubY:sy+so[1]*sourceStub,endStubX:tx+to[0]*targetStub,endStubY:ty+to[1]*targetStub,isXGreaterThanStubTimes2:Math.abs(sx-tx)>sourceStub+targetStub,isYGreaterThanStubTimes2:Math.abs(sy-ty)>sourceStub+targetStub,opposite:oProduct==-1,perpendicular:0===oProduct,orthogonal:1==oProduct,sourceAxis:0===so[0]?"y":"x",points:[x,y,w,h,sx,sy,tx,ty]};return result.anchorOrientation=result.opposite?"opposite":result.orthogonal?"orthogonal":"perpendicular",result};this.getSegments=function(){return segments},this.updateBounds=function(segment){var segBounds=segment.getBounds();this.bounds.minX=Math.min(this.bounds.minX,segBounds.minX),this.bounds.maxX=Math.max(this.bounds.maxX,segBounds.maxX),this.bounds.minY=Math.min(this.bounds.minY,segBounds.minY),this.bounds.maxY=Math.max(this.bounds.maxY,segBounds.maxY)};return this.pointOnPath=function(location,absolute){var seg=_findSegmentForLocation(location,absolute);return seg.segment&&seg.segment.pointOnPath(seg.proportion,!1)||[0,0]},this.gradientAtPoint=function(location,absolute){var seg=_findSegmentForLocation(location,absolute);return seg.segment&&seg.segment.gradientAtPoint(seg.proportion,!1)||0},this.pointAlongPathFrom=function(location,distance,absolute){var seg=_findSegmentForLocation(location,absolute);return seg.segment&&seg.segment.pointAlongPathFrom(seg.proportion,distance,!1)||[0,0]},this.compute=function(params){paintInfo=_prepareCompute.call(this,params),_clearSegments(),this._compute(paintInfo,params),this.x=paintInfo.points[0],this.y=paintInfo.points[1],this.w=paintInfo.points[2],this.h=paintInfo.points[3],this.segment=paintInfo.segment,_updateSegmentProportions()},{addSegment:_addSegment,prepareCompute:_prepareCompute,sourceStub:sourceStub,targetStub:targetStub,maxStub:Math.max(sourceStub,targetStub),sourceGap:sourceGap,targetGap:targetGap,maxGap:Math.max(sourceGap,targetGap),setGeometry:_setGeometry,getGeometry:_getGeometry}},_ju.extend(_jp.Connectors.AbstractConnector,AbstractComponent);var Straight=_jp.Connectors.Straight=function(){this.type="Straight";var _super=_jp.Connectors.AbstractConnector.apply(this,arguments);this._compute=function(paintInfo,_){_super.addSegment(this,"Straight",{x1:paintInfo.sx,y1:paintInfo.sy,x2:paintInfo.startStubX,y2:paintInfo.startStubY}),_super.addSegment(this,"Straight",{x1:paintInfo.startStubX,y1:paintInfo.startStubY,x2:paintInfo.endStubX,y2:paintInfo.endStubY}),_super.addSegment(this,"Straight",{x1:paintInfo.endStubX,y1:paintInfo.endStubY,x2:paintInfo.tx,y2:paintInfo.ty})}};_ju.extend(_jp.Connectors.Straight,_jp.Connectors.AbstractConnector),_jp.registerConnectorType(Straight,"Straight"),_jp.Endpoints.AbstractEndpoint=function(params){AbstractComponent.apply(this,arguments);var compute=this.compute=function(anchorPoint,orientation,endpointStyle,connectorPaintStyle){var out=this._compute.apply(this,arguments);return this.x=out[0],this.y=out[1],this.w=out[2],this.h=out[3],this.bounds.minX=this.x,this.bounds.minY=this.y,this.bounds.maxX=this.x+this.w,this.bounds.maxY=this.y+this.h,out};return{compute:compute,cssClass:params.cssClass}},_ju.extend(_jp.Endpoints.AbstractEndpoint,AbstractComponent),_jp.Endpoints.Dot=function(params){this.type="Dot";_jp.Endpoints.AbstractEndpoint.apply(this,arguments);params=params||{},this.radius=params.radius||10,this.defaultOffset=.5*this.radius,this.defaultInnerRadius=this.radius/3,this._compute=function(anchorPoint,orientation,endpointStyle,connectorPaintStyle){this.radius=endpointStyle.radius||this.radius;var x=anchorPoint[0]-this.radius,y=anchorPoint[1]-this.radius,w=2*this.radius,h=2*this.radius;if(endpointStyle.strokeStyle){var lw=endpointStyle.lineWidth||1;x-=lw,y-=lw,w+=2*lw,h+=2*lw}return[x,y,w,h,this.radius]}},_ju.extend(_jp.Endpoints.Dot,_jp.Endpoints.AbstractEndpoint),_jp.Endpoints.Rectangle=function(params){this.type="Rectangle";_jp.Endpoints.AbstractEndpoint.apply(this,arguments);params=params||{},this.width=params.width||20,this.height=params.height||20,this._compute=function(anchorPoint,orientation,endpointStyle,connectorPaintStyle){var width=endpointStyle.width||this.width,height=endpointStyle.height||this.height,x=anchorPoint[0]-width/2,y=anchorPoint[1]-height/2;return[x,y,width,height]}},_ju.extend(_jp.Endpoints.Rectangle,_jp.Endpoints.AbstractEndpoint);var DOMElementEndpoint=function(params){_jp.jsPlumbUIComponent.apply(this,arguments),this._jsPlumb.displayElements=[]};_ju.extend(DOMElementEndpoint,_jp.jsPlumbUIComponent,{getDisplayElements:function(){return this._jsPlumb.displayElements},appendDisplayElement:function(el){this._jsPlumb.displayElements.push(el)}}),_jp.Endpoints.Image=function(params){this.type="Image",DOMElementEndpoint.apply(this,arguments),_jp.Endpoints.AbstractEndpoint.apply(this,arguments);var _onload=params.onload,src=params.src||params.url,clazz=params.cssClass?" "+params.cssClass:"";this._jsPlumb.img=new Image,this._jsPlumb.ready=!1,this._jsPlumb.initialized=!1,this._jsPlumb.deleted=!1,this._jsPlumb.widthToUse=params.width,this._jsPlumb.heightToUse=params.height,this._jsPlumb.endpoint=params.endpoint,this._jsPlumb.img.onload=function(){null!=this._jsPlumb&&(this._jsPlumb.ready=!0,this._jsPlumb.widthToUse=this._jsPlumb.widthToUse||this._jsPlumb.img.width,this._jsPlumb.heightToUse=this._jsPlumb.heightToUse||this._jsPlumb.img.height,_onload&&_onload(this))}.bind(this),this._jsPlumb.endpoint.setImage=function(_img,onload){var s=_img.constructor==String?_img:_img.src;_onload=onload,this._jsPlumb.img.src=s,null!=this.canvas&&this.canvas.setAttribute("src",this._jsPlumb.img.src)}.bind(this),this._jsPlumb.endpoint.setImage(src,_onload),this._compute=function(anchorPoint,orientation,endpointStyle,connectorPaintStyle){return this.anchorPoint=anchorPoint,this._jsPlumb.ready?[anchorPoint[0]-this._jsPlumb.widthToUse/2,anchorPoint[1]-this._jsPlumb.heightToUse/2,this._jsPlumb.widthToUse,this._jsPlumb.heightToUse]:[0,0,0,0]},this.canvas=jsPlumb.createElement("img",{position:"absolute",margin:0,padding:0,outline:0},this._jsPlumb.instance.endpointClass+clazz),this._jsPlumb.widthToUse&&this.canvas.setAttribute("width",this._jsPlumb.widthToUse),this._jsPlumb.heightToUse&&this.canvas.setAttribute("height",this._jsPlumb.heightToUse),this._jsPlumb.instance.appendElement(this.canvas),this.actuallyPaint=function(d,style,anchor){if(!this._jsPlumb.deleted){this._jsPlumb.initialized||(this.canvas.setAttribute("src",this._jsPlumb.img.src),this.appendDisplayElement(this.canvas),this._jsPlumb.initialized=!0);var x=this.anchorPoint[0]-this._jsPlumb.widthToUse/2,y=this.anchorPoint[1]-this._jsPlumb.heightToUse/2;_ju.sizeElement(this.canvas,x,y,this._jsPlumb.widthToUse,this._jsPlumb.heightToUse)}},this.paint=function(style,anchor){null!=this._jsPlumb&&(this._jsPlumb.ready?this.actuallyPaint(style,anchor):root.setTimeout(function(){this.paint(style,anchor)}.bind(this),200))}},_ju.extend(_jp.Endpoints.Image,[DOMElementEndpoint,_jp.Endpoints.AbstractEndpoint],{cleanup:function(force){force&&(this._jsPlumb.deleted=!0,this.canvas&&this.canvas.parentNode.removeChild(this.canvas),this.canvas=null)}}),_jp.Endpoints.Blank=function(params){_jp.Endpoints.AbstractEndpoint.apply(this,arguments);this.type="Blank",DOMElementEndpoint.apply(this,arguments),this._compute=function(anchorPoint,orientation,endpointStyle,connectorPaintStyle){return[anchorPoint[0],anchorPoint[1],10,0]};var clazz=params.cssClass?" "+params.cssClass:"";this.canvas=jsPlumb.createElement("div",{display:"block",width:"1px",height:"1px",background:"transparent",position:"absolute"},this._jsPlumb.instance.endpointClass+clazz),this._jsPlumb.instance.appendElement(this.canvas),this.paint=function(style,anchor){_ju.sizeElement(this.canvas,this.x,this.y,this.w,this.h)}},_ju.extend(_jp.Endpoints.Blank,[_jp.Endpoints.AbstractEndpoint,DOMElementEndpoint],{cleanup:function(){this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)}}),_jp.Endpoints.Triangle=function(params){this.type="Triangle",_jp.Endpoints.AbstractEndpoint.apply(this,arguments),params=params||{},params.width=params.width||55,params.height=params.height||55,this.width=params.width,this.height=params.height,this._compute=function(anchorPoint,orientation,endpointStyle,connectorPaintStyle){var width=endpointStyle.width||self.width,height=endpointStyle.height||self.height,x=anchorPoint[0]-width/2,y=anchorPoint[1]-height/2;return[x,y,width,height]}};var AbstractOverlay=_jp.Overlays.AbstractOverlay=function(params){this.visible=!0,this.isAppendedAtTopLevel=!0,this.component=params.component,this.loc=null==params.location?.5:params.location,this.endpointLoc=null==params.endpointLocation?[.5,.5]:params.endpointLocation,this.visible=params.visible!==!1};AbstractOverlay.prototype={cleanup:function(force){force&&(this.component=null,this.canvas=null,this.endpointLoc=null)},reattach:function(instance){},setVisible:function(val){this.visible=val,this.component.repaint()},isVisible:function(){return this.visible},hide:function(){this.setVisible(!1)},show:function(){this.setVisible(!0)},incrementLocation:function(amount){this.loc+=amount,this.component.repaint()},setLocation:function(l){this.loc=l,this.component.repaint()},getLocation:function(){return this.loc},updateFrom:function(){}},_jp.Overlays.Arrow=function(params){this.type="Arrow",AbstractOverlay.apply(this,arguments),this.isAppendedAtTopLevel=!1,params=params||{},this.length=params.length||20,this.width=params.width||20,this.id=params.id;var direction=(params.direction||1)<0?-1:1,paintStyle=params.paintStyle||{lineWidth:1},foldback=params.foldback||.623;this.computeMaxSize=function(){return 1.5*self.width},this.elementCreated=function(p,component){if(this.path=p,params.events)for(var i in params.events)jsPlumb.on(p,i,params.events[i])},this.draw=function(component,currentConnectionPaintStyle){var hxy,mid,txy,tail,cxy;if(component.pointAlongPathFrom){if(_ju.isString(this.loc)||this.loc>1||this.loc<0){var l=parseInt(this.loc,10),fromLoc=this.loc<0?1:0;hxy=component.pointAlongPathFrom(fromLoc,l,!1),mid=component.pointAlongPathFrom(fromLoc,l-direction*this.length/2,!1),txy=_jg.pointOnLine(hxy,mid,this.length)}else if(1==this.loc){if(hxy=component.pointOnPath(this.loc),mid=component.pointAlongPathFrom(this.loc,-this.length),txy=_jg.pointOnLine(hxy,mid,this.length),direction==-1){var _=txy;txy=hxy,hxy=_}}else if(0===this.loc){if(txy=component.pointOnPath(this.loc),mid=component.pointAlongPathFrom(this.loc,this.length),hxy=_jg.pointOnLine(txy,mid,this.length),direction==-1){var __=txy;txy=hxy,hxy=__}}else hxy=component.pointAlongPathFrom(this.loc,direction*this.length/2),mid=component.pointOnPath(this.loc),txy=_jg.pointOnLine(hxy,mid,this.length);tail=_jg.perpendicularLineTo(hxy,txy,this.width),cxy=_jg.pointOnLine(hxy,txy,foldback*this.length);var d={hxy:hxy,tail:tail,cxy:cxy},strokeStyle=paintStyle.strokeStyle||currentConnectionPaintStyle.strokeStyle,fillStyle=paintStyle.fillStyle||currentConnectionPaintStyle.strokeStyle,lineWidth=paintStyle.lineWidth||currentConnectionPaintStyle.lineWidth;return{component:component,d:d,lineWidth:lineWidth,strokeStyle:strokeStyle,fillStyle:fillStyle,minX:Math.min(hxy.x,tail[0].x,tail[1].x),maxX:Math.max(hxy.x,tail[0].x,tail[1].x),minY:Math.min(hxy.y,tail[0].y,tail[1].y),maxY:Math.max(hxy.y,tail[0].y,tail[1].y)}}return{component:component,minX:0,maxX:0,minY:0,maxY:0}}},_ju.extend(_jp.Overlays.Arrow,AbstractOverlay,{updateFrom:function(d){this.length=d.length||this.length,this.width=d.width||this.width,this.direction=null!=d.direction?d.direction:this.direction,this.foldback=d.foldback||this.foldback}}),_jp.Overlays.PlainArrow=function(params){params=params||{};var p=_jp.extend(params,{foldback:1});_jp.Overlays.Arrow.call(this,p),this.type="PlainArrow"},_ju.extend(_jp.Overlays.PlainArrow,_jp.Overlays.Arrow),_jp.Overlays.Diamond=function(params){params=params||{};var l=params.length||40,p=jsPlumb.extend(params,{length:l/2,foldback:2});_jp.Overlays.Arrow.call(this,p),this.type="Diamond"},_ju.extend(_jp.Overlays.Diamond,_jp.Overlays.Arrow);var _getDimensions=function(component,forceRefresh){return(null==component._jsPlumb.cachedDimensions||forceRefresh)&&(component._jsPlumb.cachedDimensions=component.getDimensions()),component._jsPlumb.cachedDimensions},AbstractDOMOverlay=function(params){_jp.jsPlumbUIComponent.apply(this,arguments),AbstractOverlay.apply(this,arguments);var _f=this.fire;this.fire=function(){_f.apply(this,arguments),this.component&&this.component.fire.apply(this.component,arguments)},this.detached=!1,this.id=params.id,this._jsPlumb.div=null,this._jsPlumb.initialised=!1,this._jsPlumb.component=params.component,this._jsPlumb.cachedDimensions=null,this._jsPlumb.create=params.create,this._jsPlumb.initiallyInvisible=params.visible===!1,this.getElement=function(){if(null==this._jsPlumb.div){var div=this._jsPlumb.div=jsPlumb.getElement(this._jsPlumb.create(this._jsPlumb.component));div.style.position="absolute",div.className=this._jsPlumb.instance.overlayClass+" "+(this.cssClass?this.cssClass:params.cssClass?params.cssClass:""),this._jsPlumb.instance.appendElement(div),this._jsPlumb.instance.getId(div),this.canvas=div;var ts="translate(-50%, -50%)";div.style.webkitTransform=ts,div.style.mozTransform=ts,div.style.msTransform=ts,div.style.oTransform=ts,div.style.transform=ts,div._jsPlumb=this,params.visible===!1&&(div.style.display="none")}return this._jsPlumb.div},this.draw=function(component,currentConnectionPaintStyle,absolutePosition){var td=_getDimensions(this);if(null!=td&&2==td.length){var cxy={x:0,y:0};if(absolutePosition)cxy={x:absolutePosition[0],y:absolutePosition[1]};else if(component.pointOnPath){var loc=this.loc,absolute=!1;(_ju.isString(this.loc)||this.loc<0||this.loc>1)&&(loc=parseInt(this.loc,10),absolute=!0),cxy=component.pointOnPath(loc,absolute)}else{var locToUse=this.loc.constructor==Array?this.loc:this.endpointLoc;cxy={x:locToUse[0]*component.w,y:locToUse[1]*component.h}}var minx=cxy.x-td[0]/2,miny=cxy.y-td[1]/2;return{component:component,d:{minx:minx,miny:miny,td:td,cxy:cxy},minX:minx,maxX:minx+td[0],minY:miny,maxY:miny+td[1]}}return{minX:0,maxX:0,minY:0,maxY:0}}};_ju.extend(AbstractDOMOverlay,[_jp.jsPlumbUIComponent,AbstractOverlay],{getDimensions:function(){return[1,1]},setVisible:function(state){this._jsPlumb.div&&(this._jsPlumb.div.style.display=state?"block":"none",state&&this._jsPlumb.initiallyInvisible&&(_getDimensions(this,!0),this.component.repaint(),this._jsPlumb.initiallyInvisible=!1))},clearCachedDimensions:function(){this._jsPlumb.cachedDimensions=null},cleanup:function(force){force?null!=this._jsPlumb.div&&(this._jsPlumb.div._jsPlumb=null,this._jsPlumb.instance.removeElement(this._jsPlumb.div)):(this._jsPlumb&&this._jsPlumb.div&&this._jsPlumb.div.parentNode&&this._jsPlumb.div.parentNode.removeChild(this._jsPlumb.div),this.detached=!0)},reattach:function(instance){null!=this._jsPlumb.div&&instance.getContainer().appendChild(this._jsPlumb.div),this.detached=!1},computeMaxSize:function(){var td=_getDimensions(this);return Math.max(td[0],td[1])},paint:function(p,containerExtents){this._jsPlumb.initialised||(this.getElement(),p.component.appendDisplayElement(this._jsPlumb.div),this._jsPlumb.initialised=!0,this.detached&&this._jsPlumb.div.parentNode.removeChild(this._jsPlumb.div)),this._jsPlumb.div.style.left=p.component.x+p.d.minx+"px",this._jsPlumb.div.style.top=p.component.y+p.d.miny+"px"}}),_jp.Overlays.Custom=function(params){this.type="Custom",AbstractDOMOverlay.apply(this,arguments)},_ju.extend(_jp.Overlays.Custom,AbstractDOMOverlay),_jp.Overlays.GuideLines=function(){var self=this;self.length=50,self.lineWidth=5,this.type="GuideLines",AbstractOverlay.apply(this,arguments),_jp.jsPlumbUIComponent.apply(this,arguments),this.draw=function(connector,currentConnectionPaintStyle){var head=connector.pointAlongPathFrom(self.loc,self.length/2),mid=connector.pointOnPath(self.loc),tail=_jg.pointOnLine(head,mid,self.length),tailLine=_jg.perpendicularLineTo(head,tail,40),headLine=_jg.perpendicularLineTo(tail,head,20);return{connector:connector,head:head,tail:tail,headLine:headLine,tailLine:tailLine,minX:Math.min(head.x,tail.x,headLine[0].x,headLine[1].x),minY:Math.min(head.y,tail.y,headLine[0].y,headLine[1].y),maxX:Math.max(head.x,tail.x,headLine[0].x,headLine[1].x),maxY:Math.max(head.y,tail.y,headLine[0].y,headLine[1].y)}}},_jp.Overlays.Label=function(params){this.labelStyle=params.labelStyle;this.cssClass=null!=this.labelStyle?this.labelStyle.cssClass:null;var p=_jp.extend({create:function(){return jsPlumb.createElement("div")}},params);if(_jp.Overlays.Custom.call(this,p),this.type="Label",this.label=params.label||"",this.labelText=null,this.labelStyle){var el=this.getElement();if(this.labelStyle.font=this.labelStyle.font||"12px sans-serif",el.style.font=this.labelStyle.font,el.style.color=this.labelStyle.color||"black",this.labelStyle.fillStyle&&(el.style.background=this.labelStyle.fillStyle),this.labelStyle.borderWidth>0){var dStyle=this.labelStyle.borderStyle?this.labelStyle.borderStyle:"black";el.style.border=this.labelStyle.borderWidth+"px solid "+dStyle}this.labelStyle.padding&&(el.style.padding=this.labelStyle.padding)}},_ju.extend(_jp.Overlays.Label,_jp.Overlays.Custom,{cleanup:function(force){force&&(this.div=null,this.label=null,this.labelText=null,this.cssClass=null,this.labelStyle=null)},getLabel:function(){return this.label},setLabel:function(l){this.label=l,this.labelText=null,this.clearCachedDimensions(),this.update(),this.component.repaint()},getDimensions:function(){return this.update(),AbstractDOMOverlay.prototype.getDimensions.apply(this,arguments)},update:function(){if("function"==typeof this.label){var lt=this.label(this);this.getElement().innerHTML=lt.replace(/\r\n/g,"<br/>")}else null==this.labelText&&(this.labelText=this.label,this.getElement().innerHTML=this.labelText.replace(/\r\n/g,"<br/>"))},updateFrom:function(d){d.label&&this.setLabel(d.label)}})}.call("undefined"!=typeof window?window:this),function(){"use strict";var root=this,_jp=root.jsPlumb,_getEventManager=function(instance){var e=instance._mottle;return e||(e=instance._mottle=new root.Mottle),e};_jp.extend(root.jsPlumbInstance.prototype,{getEventManager:function(){return _getEventManager(this)},on:function(el,event,callback){return this.getEventManager().on.apply(this,arguments),this},off:function(el,event,callback){return this.getEventManager().off.apply(this,arguments),this}})}.call("undefined"!=typeof window?window:this),function(){"use strict";var root=this,_ju=root.jsPlumbUtil,_jpi=root.jsPlumbInstance,GROUP_COLLAPSED_CLASS="jsplumb-group-collapsed",GROUP_EXPANDED_CLASS="jsplumb-group-expanded",GROUP_CONTAINER_SELECTOR="[jsplumb-group-content]",ELEMENT_DRAGGABLE_EVENT="elementDraggable",STOP="stop",REVERT="revert",GROUP_MANAGER="_groupManager",GROUP="_jsPlumbGroup",GROUP_DRAG_SCOPE="_jsPlumbGroupDrag",EVT_CHILD_ADDED="group:addMember",EVT_CHILD_REMOVED="group:removeMember",EVT_GROUP_ADDED="group:add",EVT_GROUP_REMOVED="group:remove",EVT_EXPAND="group:expand",EVT_COLLAPSE="group:collapse",GroupManager=function(_jsPlumb){function _cleanupDetachedConnection(conn){delete conn.proxies;var f,group=_connectionSourceMap[conn.id];null!=group&&(f=function(c){return c.id===conn.id},_ju.removeWithFunction(group.connections.source,f),_ju.removeWithFunction(group.connections.target,f),delete _connectionSourceMap[conn.id]),group=_connectionTargetMap[conn.id],null!=group&&(f=function(c){return c.id===conn.id},_ju.removeWithFunction(group.connections.source,f),_ju.removeWithFunction(group.connections.target,f),delete _connectionTargetMap[conn.id])}function _setVisible(group,state){for(var m=group.getMembers(),i=0;i<m.length;i++)_jsPlumb[state?"show":"hide"](m[i],!0)}function _updateConnectionsForGroup(group){var members=group.getMembers(),c1=_jsPlumb.getConnections({source:members},!0),c2=_jsPlumb.getConnections({target:members},!0),processed={};group.connections.source.length=0,group.connections.target.length=0;var oneSet=function(c){for(var i=0;i<c.length;i++)processed[c[i].id]||(processed[c[i].id]=!0,c[i].source._jsPlumbGroup===group?(c[i].target._jsPlumbGroup!==group&&group.connections.source.push(c[i]),_connectionSourceMap[c[i].id]=group):c[i].target._jsPlumbGroup===group&&(group.connections.target.push(c[i]),_connectionTargetMap[c[i].id]=group))};oneSet(c1),oneSet(c2)}var _managedGroups={},_connectionSourceMap={},_connectionTargetMap={};_jsPlumb.bind("connection",function(p){null!=p.source[GROUP]&&null!=p.target[GROUP]&&p.source[GROUP]===p.target[GROUP]?(_connectionSourceMap[p.connection.id]=p.source[GROUP],_connectionTargetMap[p.connection.id]=p.source[GROUP]):(null!=p.source[GROUP]&&(_ju.suggest(p.source[GROUP].connections.source,p.connection),_connectionSourceMap[p.connection.id]=p.source[GROUP]),null!=p.target[GROUP]&&(_ju.suggest(p.target[GROUP].connections.target,p.connection),_connectionTargetMap[p.connection.id]=p.target[GROUP]))}),_jsPlumb.bind("connectionDetached",function(p){_cleanupDetachedConnection(p.connection)}),_jsPlumb.bind("connectionMoved",function(p){var connMap=0===p.index?_connectionSourceMap:_connectionTargetMap,group=connMap[p.connection.id];if(group){var list=group.connections[0===p.index?"source":"target"],idx=list.indexOf(p.connection);idx!=-1&&list.splice(idx,1)}}),this.addGroup=function(group){_jsPlumb.addClass(group.el,GROUP_EXPANDED_CLASS),_managedGroups[group.id]=group,group.manager=this,_updateConnectionsForGroup(group),_jsPlumb.fire(EVT_GROUP_ADDED,{group:group})},this.addToGroup=function(group,el,doNotFireEvent){group=this.getGroup(group),group&&group.add(el,doNotFireEvent)},this.removeFromGroup=function(group,el,doNotFireEvent){group=this.getGroup(group),group&&group.remove(el,null,doNotFireEvent)},this.getGroup=function(groupId){var group=groupId;if(_ju.isString(groupId)&&(group=_managedGroups[groupId],null==group))throw new TypeError("No such group ["+groupId+"]");return group},this.getGroups=function(){var o=[];for(var g in _managedGroups)o.push(_managedGroups[g]);return o},this.removeGroup=function(group,deleteMembers){group=this.getGroup(group),this.expandGroup(group,!0),group[deleteMembers?"removeAll":"orphanAll"](),_jsPlumb.remove(group.getEl()),delete _managedGroups[group.id],delete _jsPlumb._groups[group.id],_jsPlumb.fire(EVT_GROUP_REMOVED,{group:group})},this.removeAllGroups=function(deleteMembers){for(var g in _managedGroups)this.removeGroup(_managedGroups[g],deleteMembers)};var _collapseConnection=this.collapseConnection=function(c,index,group){var proxyEp,groupEl=group.getEl(),groupElId=_jsPlumb.getId(groupEl),originalElementId=c.endpoints[index].elementId,otherEl=c.endpoints[0===index?1:0].element;otherEl[GROUP]&&!otherEl[GROUP].shouldProxy()&&otherEl[GROUP].collapsed||(c.proxies=c.proxies||[],c.proxies[index]?proxyEp=c.proxies[index].ep:(proxyEp=_jsPlumb.addEndpoint(groupEl,{endpoint:group.getEndpoint(c,index),anchor:group.getAnchor(c,index),parameters:{isProxyEndpoint:!0}}),proxyEp._forceDeleteOnDetach=!0),c.proxies[index]={ep:proxyEp,originalEp:c.endpoints[index]},0===index?_jsPlumb.anchorManager.sourceChanged(originalElementId,groupElId,c,groupEl):(_jsPlumb.anchorManager.updateOtherEndpoint(c.endpoints[0].elementId,originalElementId,groupElId,c),c.target=groupEl,c.targetId=groupElId),c.proxies[index].originalEp.detachFromConnection(c,null,!0),proxyEp.connections=[c],c.endpoints[index]=proxyEp,c.setVisible(!0))};this.collapseGroup=function(group){if(group=this.getGroup(group),null!=group&&!group.collapsed){var groupEl=group.getEl();if(_setVisible(group,!1),group.shouldProxy()){var _collapseSet=function(conns,index){for(var i=0;i<conns.length;i++){var c=conns[i];_collapseConnection(c,index,group)}};_collapseSet(group.connections.source,0),_collapseSet(group.connections.target,1)}group.collapsed=!0,_jsPlumb.removeClass(groupEl,GROUP_EXPANDED_CLASS),_jsPlumb.addClass(groupEl,GROUP_COLLAPSED_CLASS),_jsPlumb.revalidate(groupEl),_jsPlumb.fire(EVT_COLLAPSE,{group:group})}};var _expandConnection=this.expandConnection=function(c,index,group){if(null!=c.proxies&&null!=c.proxies[index]){var groupElId=_jsPlumb.getId(group.getEl()),originalElement=c.proxies[index].originalEp.element,originalElementId=c.proxies[index].originalEp.elementId;c.endpoints[index]=c.proxies[index].originalEp,0===index?_jsPlumb.anchorManager.sourceChanged(groupElId,originalElementId,c,originalElement):(_jsPlumb.anchorManager.updateOtherEndpoint(c.endpoints[0].elementId,groupElId,originalElementId,c),c.target=originalElement,c.targetId=originalElementId),c.proxies[index].ep.detachFromConnection(c,null,!0),c.proxies[index].originalEp.addConnection(c),delete c.proxies[index]}};this.expandGroup=function(group,doNotFireEvent){if(group=this.getGroup(group),null!=group&&group.collapsed){var groupEl=group.getEl();if(_setVisible(group,!0),group.shouldProxy()){var _expandSet=function(conns,index){for(var i=0;i<conns.length;i++){var c=conns[i];_expandConnection(c,index,group)}};_expandSet(group.connections.source,0),_expandSet(group.connections.target,1)}group.collapsed=!1,_jsPlumb.addClass(groupEl,GROUP_EXPANDED_CLASS),_jsPlumb.removeClass(groupEl,GROUP_COLLAPSED_CLASS),_jsPlumb.revalidate(groupEl),this.repaintGroup(group),doNotFireEvent||_jsPlumb.fire(EVT_EXPAND,{group:group})}},this.repaintGroup=function(group){group=this.getGroup(group);for(var m=group.getMembers(),i=0;i<m.length;i++)_jsPlumb.revalidate(m[i])},this.updateConnectionsForGroup=_updateConnectionsForGroup,this.refreshAllGroups=function(){for(var g in _managedGroups)_updateConnectionsForGroup(_managedGroups[g]),_jsPlumb.dragManager.updateOffsets(_jsPlumb.getId(_managedGroups[g].getEl()))}},Group=function(_jsPlumb,params){function _findParent(_el){return _el.offsetParent}function _isInsideParent(_el,pos){var p=_findParent(_el),s=_jsPlumb.getSize(p),ss=_jsPlumb.getSize(_el),leftEdge=pos[0],rightEdge=leftEdge+ss[0],topEdge=pos[1],bottomEdge=topEdge+ss[1];return rightEdge>0&&leftEdge<s[0]&&bottomEdge>0&&topEdge<s[1]}function _orphan(_el){var id=_jsPlumb.getId(_el),pos=_jsPlumb.getOffset(_el);_el.parentNode.removeChild(_el),_jsPlumb.getContainer().appendChild(_el),_jsPlumb.setPosition(_el,pos),delete _el._jsPlumbGroup,_unbindDragHandlers(_el),_jsPlumb.dragManager.clearParent(_el,id)}function _pruneOrOrphan(p){_isInsideParent(p.el,p.pos)||(p.el._jsPlumbGroup.remove(p.el),prune?_jsPlumb.remove(p.el):_orphan(p.el))}function _revalidate(_el){var id=_jsPlumb.getId(_el);_jsPlumb.revalidate(_el),_jsPlumb.dragManager.revalidateParent(_el,id)}function _unbindDragHandlers(_el){_el._katavorioDrag&&((prune||orphan)&&_el._katavorioDrag.off(STOP,_pruneOrOrphan),prune||orphan||!revert||(_el._katavorioDrag.off(REVERT,_revalidate),_el._katavorioDrag.setRevert(null)))}function _bindDragHandlers(_el){_el._katavorioDrag&&((prune||orphan)&&_el._katavorioDrag.on(STOP,_pruneOrOrphan),constrain&&_el._katavorioDrag.setConstrain(!0),ghost&&_el._katavorioDrag.setUseGhostProxy(!0),prune||orphan||!revert||(_el._katavorioDrag.on(REVERT,_revalidate),_el._katavorioDrag.setRevert(function(__el,pos){return!_isInsideParent(__el,pos)})))}var self=this,el=params.el;this.getEl=function(){return el},this.id=params.id||_ju.uuid(),el._isJsPlumbGroup=!0;var da=_jsPlumb.getSelector(el,GROUP_CONTAINER_SELECTOR),dragArea=da&&da.length>0?da[0]:el,ghost=params.ghost===!0,constrain=ghost||params.constrain===!0,revert=params.revert!==!1,orphan=params.orphan===!0,prune=params.prune===!0,dropOverride=params.dropOverride===!0,proxied=params.proxied!==!1,elements=[];if(this.connections={source:[],target:[],internal:[]},this.getAnchor=function(conn,endpointIndex){return params.anchor||"Continuous"},this.getEndpoint=function(conn,endpointIndex){return params.endpoint||["Dot",{radius:10}]},this.collapsed=!1,params.draggable!==!1){var opts={stop:function(params){
_jsPlumb.fire("groupDragStop",jsPlumb.extend(params,{group:self}))},scope:GROUP_DRAG_SCOPE};params.dragOptions&&root.jsPlumb.extend(opts,params.dragOptions),_jsPlumb.draggable(params.el,opts)}params.droppable!==!1&&_jsPlumb.droppable(params.el,{drop:function(p){var groupManager=_jsPlumb.getGroupManager(),_el=p.drag.el;if(!_el._isJsPlumbGroup){var currentGroup=_el._jsPlumbGroup;if(currentGroup!==self){var elpos=_jsPlumb.getOffset(_el,!0),cpos=self.collapsed?_jsPlumb.getOffset(el,!0):_jsPlumb.getOffset(dragArea,!0);if(null!=currentGroup){if(currentGroup.overrideDrop(_el,self))return;currentGroup.remove(_el,!0),groupManager.updateConnectionsForGroup(currentGroup)}self.add(_el,!0);var handleDroppedConnections=function(list,index){var oidx=0==index?1:0;list.each(function(c){c.setVisible(!1),c.endpoints[oidx].element._jsPlumbGroup===self?(c.endpoints[oidx].setVisible(!1),groupManager.expandConnection(c,oidx,self)):(c.endpoints[index].setVisible(!1),groupManager.collapseConnection(c,index,self))})};self.collapsed&&(handleDroppedConnections(_jsPlumb.select({source:_el}),0),handleDroppedConnections(_jsPlumb.select({target:_el}),1));var elId=_jsPlumb.getId(_el);_jsPlumb.dragManager.setParent(_el,elId,el,_jsPlumb.getId(el),elpos),_jsPlumb.setPosition(_el,{left:elpos.left-cpos.left,top:elpos.top-cpos.top}),_jsPlumb.dragManager.revalidateParent(_el,elId,elpos),groupManager.updateConnectionsForGroup(self),setTimeout(function(){_jsPlumb.fire(EVT_CHILD_ADDED,{group:self,el:_el})},0)}}}});var _each=function(_el,fn){for(var els=null==_el.nodeType?_el:[_el],i=0;i<els.length;i++)fn(els[i])};this.overrideDrop=function(_el,targetGroup){return dropOverride&&(revert||prune||orphan)},this.add=function(_el,doNotFireEvent){_each(_el,function(__el){__el._jsPlumbGroup=self,elements.push(__el),_jsPlumb.isAlreadyDraggable(__el)&&_bindDragHandlers(__el),__el.parentNode!=dragArea&&dragArea.appendChild(__el),doNotFireEvent||_jsPlumb.fire(EVT_CHILD_ADDED,{group:self,el:__el})}),_jsPlumb.getGroupManager().updateConnectionsForGroup(self)},this.remove=function(el,manipulateDOM,doNotFireEvent,doNotUpdateConnections){_each(el,function(__el){if(delete __el._jsPlumbGroup,_ju.removeWithFunction(elements,function(e){return e===__el}),manipulateDOM)try{self.getEl().removeChild(__el)}catch(e){jsPlumbUtil.log("Could not remove element from Group "+e)}_unbindDragHandlers(__el),doNotFireEvent||_jsPlumb.fire(EVT_CHILD_REMOVED,{group:self,el:__el})}),doNotUpdateConnections||_jsPlumb.getGroupManager().updateConnectionsForGroup(self)},this.removeAll=function(manipulateDOM,doNotFireEvent){for(var i=0,l=elements.length;i<l;i++)self.remove(elements[0],manipulateDOM,doNotFireEvent,!0);elements.length=0,_jsPlumb.getGroupManager().updateConnectionsForGroup(self)},this.orphanAll=function(){for(var i=0;i<elements.length;i++)_orphan(elements[i]);elements.length=0},this.getMembers=function(){return elements},el[GROUP]=this,_jsPlumb.bind(ELEMENT_DRAGGABLE_EVENT,function(dragParams){dragParams.el._jsPlumbGroup==this&&_bindDragHandlers(dragParams.el)}.bind(this)),this.shouldProxy=function(){return proxied},_jsPlumb.getGroupManager().addGroup(this)};_jpi.prototype.addGroup=function(params){var j=this;if(j._groups=j._groups||{},null!=j._groups[params.id])throw new TypeError("cannot create Group ["+params.id+"]; a Group with that ID exists");if(null!=params.el[GROUP])throw new TypeError("cannot create Group ["+params.id+"]; the given element is already a Group");var group=new Group(j,params);return j._groups[group.id]=group,group},_jpi.prototype.addToGroup=function(group,el,doNotFireEvent){this.getGroupManager().addToGroup(group,el,doNotFireEvent)},_jpi.prototype.removeFromGroup=function(group,el,doNotFireEvent){this.getGroupManager().removeFromGroup(group,el,doNotFireEvent)},_jpi.prototype.removeGroup=function(group,deleteMembers){this.getGroupManager().removeGroup(group,deleteMembers)},_jpi.prototype.removeAllGroups=function(deleteMembers){this.getGroupManager().removeAllGroups(deleteMembers)},_jpi.prototype.getGroup=function(groupId){return this.getGroupManager().getGroup(groupId)},_jpi.prototype.getGroups=function(){return this.getGroupManager().getGroups()},_jpi.prototype.expandGroup=function(group){this.getGroupManager().expandGroup(group)},_jpi.prototype.collapseGroup=function(groupId){this.getGroupManager().collapseGroup(groupId)},_jpi.prototype.repaintGroup=function(group){this.getGroupManager().repaintGroup(group)},_jpi.prototype.toggleGroup=function(group){group=this.getGroupManager().getGroup(group),null!=group&&this.getGroupManager()[group.collapsed?"expandGroup":"collapseGroup"](group)},_jpi.prototype.getGroupManager=function(){var mgr=this[GROUP_MANAGER];return null==mgr&&(mgr=this[GROUP_MANAGER]=new GroupManager(this)),mgr},_jpi.prototype.removeGroupManager=function(){delete this[GROUP_MANAGER]},_jpi.prototype.getGroupFor=function(el){if(el=this.getElement(el))return el[GROUP]}}.call("undefined"!=typeof window?window:this),function(){"use strict";var root=this,_jp=root.jsPlumb,_ju=root.jsPlumbUtil,Flowchart=function(params){this.type="Flowchart",params=params||{},params.stub=null==params.stub?30:params.stub;var segments,lastOrientation,_super=_jp.Connectors.AbstractConnector.apply(this,arguments),midpoint=null==params.midpoint?.5:params.midpoint,alwaysRespectStubs=params.alwaysRespectStubs===!0,lastx=null,lasty=null,cornerRadius=null!=params.cornerRadius?params.cornerRadius:0,sgn=(params.loopbackRadius||25,function(n){return n<0?-1:0===n?0:1}),addSegment=function(segments,x,y,paintInfo){if(lastx!=x||lasty!=y){var lx=null==lastx?paintInfo.sx:lastx,ly=null==lasty?paintInfo.sy:lasty,o=lx==x?"v":"h",sgnx=sgn(x-lx),sgny=sgn(y-ly);lastx=x,lasty=y,segments.push([lx,ly,x,y,o,sgnx,sgny])}},segLength=function(s){return Math.sqrt(Math.pow(s[0]-s[2],2)+Math.pow(s[1]-s[3],2))},_cloneArray=function(a){var _a=[];return _a.push.apply(_a,a),_a},writeSegments=function(conn,segments,paintInfo){for(var next,current=null,i=0;i<segments.length-1;i++){if(current=current||_cloneArray(segments[i]),next=_cloneArray(segments[i+1]),cornerRadius>0&&current[4]!=next[4]){var radiusToUse=Math.min(cornerRadius,segLength(current),segLength(next));current[2]-=current[5]*radiusToUse,current[3]-=current[6]*radiusToUse,next[0]+=next[5]*radiusToUse,next[1]+=next[6]*radiusToUse;var ac=current[6]==next[5]&&1==next[5]||current[6]==next[5]&&0===next[5]&&current[5]!=next[6]||current[6]==next[5]&&next[5]==-1,sgny=next[1]>current[3]?1:-1,sgnx=next[0]>current[2]?1:-1,sgnEqual=sgny==sgnx,cx=sgnEqual&&ac||!sgnEqual&&!ac?next[0]:current[2],cy=sgnEqual&&ac||!sgnEqual&&!ac?current[3]:next[1];_super.addSegment(conn,"Straight",{x1:current[0],y1:current[1],x2:current[2],y2:current[3]}),_super.addSegment(conn,"Arc",{r:radiusToUse,x1:current[2],y1:current[3],x2:next[0],y2:next[1],cx:cx,cy:cy,ac:ac})}else{var dx=current[2]==current[0]?0:current[2]>current[0]?paintInfo.lw/2:-(paintInfo.lw/2),dy=current[3]==current[1]?0:current[3]>current[1]?paintInfo.lw/2:-(paintInfo.lw/2);_super.addSegment(conn,"Straight",{x1:current[0]-dx,y1:current[1]-dy,x2:current[2]+dx,y2:current[3]+dy})}current=next}null!=next&&_super.addSegment(conn,"Straight",{x1:next[0],y1:next[1],x2:next[2],y2:next[3]})};this._compute=function(paintInfo,params){segments=[],lastx=null,lasty=null,lastOrientation=null;var commonStubCalculator=function(){return[paintInfo.startStubX,paintInfo.startStubY,paintInfo.endStubX,paintInfo.endStubY]},stubCalculators={perpendicular:commonStubCalculator,orthogonal:commonStubCalculator,opposite:function(axis){var pi=paintInfo,idx="x"==axis?0:1,areInProximity={x:function(){return 1==pi.so[idx]&&(pi.startStubX>pi.endStubX&&pi.tx>pi.startStubX||pi.sx>pi.endStubX&&pi.tx>pi.sx)||pi.so[idx]==-1&&(pi.startStubX<pi.endStubX&&pi.tx<pi.startStubX||pi.sx<pi.endStubX&&pi.tx<pi.sx)},y:function(){return 1==pi.so[idx]&&(pi.startStubY>pi.endStubY&&pi.ty>pi.startStubY||pi.sy>pi.endStubY&&pi.ty>pi.sy)||pi.so[idx]==-1&&(pi.startStubY<pi.endStubY&&pi.ty<pi.startStubY||pi.sy<pi.endStubY&&pi.ty<pi.sy)}};return!alwaysRespectStubs&&areInProximity[axis]()?{x:[(paintInfo.sx+paintInfo.tx)/2,paintInfo.startStubY,(paintInfo.sx+paintInfo.tx)/2,paintInfo.endStubY],y:[paintInfo.startStubX,(paintInfo.sy+paintInfo.ty)/2,paintInfo.endStubX,(paintInfo.sy+paintInfo.ty)/2]}[axis]:[paintInfo.startStubX,paintInfo.startStubY,paintInfo.endStubX,paintInfo.endStubY]}},stubs=stubCalculators[paintInfo.anchorOrientation](paintInfo.sourceAxis),idx="x"==paintInfo.sourceAxis?0:1,oidx="x"==paintInfo.sourceAxis?1:0,ss=stubs[idx],oss=stubs[oidx],es=stubs[idx+2],oes=stubs[oidx+2];addSegment(segments,stubs[0],stubs[1],paintInfo);var midx=paintInfo.startStubX+(paintInfo.endStubX-paintInfo.startStubX)*midpoint,midy=paintInfo.startStubY+(paintInfo.endStubY-paintInfo.startStubY)*midpoint,orientations={x:[0,1],y:[1,0]},lineCalculators={perpendicular:function(axis){var pi=paintInfo,sis={x:[[[1,2,3,4],null,[2,1,4,3]],null,[[4,3,2,1],null,[3,4,1,2]]],y:[[[3,2,1,4],null,[2,3,4,1]],null,[[4,1,2,3],null,[1,4,3,2]]]},stubs={x:[[pi.startStubX,pi.endStubX],null,[pi.endStubX,pi.startStubX]],y:[[pi.startStubY,pi.endStubY],null,[pi.endStubY,pi.startStubY]]},midLines={x:[[midx,pi.startStubY],[midx,pi.endStubY]],y:[[pi.startStubX,midy],[pi.endStubX,midy]]},linesToEnd={x:[[pi.endStubX,pi.startStubY]],y:[[pi.startStubX,pi.endStubY]]},startToEnd={x:[[pi.startStubX,pi.endStubY],[pi.endStubX,pi.endStubY]],y:[[pi.endStubX,pi.startStubY],[pi.endStubX,pi.endStubY]]},startToMidToEnd={x:[[pi.startStubX,midy],[pi.endStubX,midy],[pi.endStubX,pi.endStubY]],y:[[midx,pi.startStubY],[midx,pi.endStubY],[pi.endStubX,pi.endStubY]]},otherStubs={x:[pi.startStubY,pi.endStubY],y:[pi.startStubX,pi.endStubX]},soIdx=orientations[axis][0],toIdx=orientations[axis][1],_so=pi.so[soIdx]+1,_to=pi.to[toIdx]+1,otherFlipped=pi.to[toIdx]==-1&&otherStubs[axis][1]<otherStubs[axis][0]||1==pi.to[toIdx]&&otherStubs[axis][1]>otherStubs[axis][0],stub1=stubs[axis][_so][0],stub2=stubs[axis][_so][1],segmentIndexes=sis[axis][_so][_to];return pi.segment==segmentIndexes[3]||pi.segment==segmentIndexes[2]&&otherFlipped?midLines[axis]:pi.segment==segmentIndexes[2]&&stub2<stub1?linesToEnd[axis]:pi.segment==segmentIndexes[2]&&stub2>=stub1||pi.segment==segmentIndexes[1]&&!otherFlipped?startToMidToEnd[axis]:pi.segment==segmentIndexes[0]||pi.segment==segmentIndexes[1]&&otherFlipped?startToEnd[axis]:void 0},orthogonal:function(axis,startStub,otherStartStub,endStub,otherEndStub){var pi=paintInfo,extent={x:pi.so[0]==-1?Math.min(startStub,endStub):Math.max(startStub,endStub),y:pi.so[1]==-1?Math.min(startStub,endStub):Math.max(startStub,endStub)}[axis];return{x:[[extent,otherStartStub],[extent,otherEndStub],[endStub,otherEndStub]],y:[[otherStartStub,extent],[otherEndStub,extent],[otherEndStub,endStub]]}[axis]},opposite:function(axis,ss,oss,es){var pi=paintInfo,otherAxis={x:"y",y:"x"}[axis],dim={x:"height",y:"width"}[axis],comparator=pi["is"+axis.toUpperCase()+"GreaterThanStubTimes2"];if(params.sourceEndpoint.elementId==params.targetEndpoint.elementId){var _val=oss+(1-params.sourceEndpoint.anchor[otherAxis])*params.sourceInfo[dim]+_super.maxStub;return{x:[[ss,_val],[es,_val]],y:[[_val,ss],[_val,es]]}[axis]}return!comparator||1==pi.so[idx]&&ss>es||pi.so[idx]==-1&&ss<es?{x:[[ss,midy],[es,midy]],y:[[midx,ss],[midx,es]]}[axis]:1==pi.so[idx]&&ss<es||pi.so[idx]==-1&&ss>es?{x:[[midx,pi.sy],[midx,pi.ty]],y:[[pi.sx,midy],[pi.tx,midy]]}[axis]:void 0}},p=lineCalculators[paintInfo.anchorOrientation](paintInfo.sourceAxis,ss,oss,es,oes);if(p)for(var i=0;i<p.length;i++)addSegment(segments,p[i][0],p[i][1],paintInfo);addSegment(segments,stubs[2],stubs[3],paintInfo),addSegment(segments,paintInfo.tx,paintInfo.ty,paintInfo),writeSegments(this,segments,paintInfo)}};_ju.extend(Flowchart,_jp.Connectors.AbstractConnector),_jp.registerConnectorType(Flowchart,"Flowchart")}.call("undefined"!=typeof window?window:this),function(){"use strict";var root=this,_jp=root.jsPlumb,_ju=root.jsPlumbUtil;_jp.Connectors.AbstractBezierConnector=function(params){params=params||{};var _super,showLoopback=params.showLoopback!==!1,margin=(params.curviness||10,params.margin||5),clockwise=(params.proximityLimit||80,params.orientation&&"clockwise"===params.orientation),loopbackRadius=params.loopbackRadius||25,isLoopbackCurrently=!1;return this.overrideSetEditable=function(){return!isLoopbackCurrently},this._compute=function(paintInfo,p){var sp=p.sourcePos,tp=p.targetPos,_w=Math.abs(sp[0]-tp[0]),_h=Math.abs(sp[1]-tp[1]);if(showLoopback&&p.sourceEndpoint.elementId===p.targetEndpoint.elementId){isLoopbackCurrently=!0;var x1=p.sourcePos[0],y1=p.sourcePos[1]-margin,cx=x1,cy=y1-loopbackRadius,_x=cx-loopbackRadius,_y=cy-loopbackRadius;_w=2*loopbackRadius,_h=2*loopbackRadius,paintInfo.points[0]=_x,paintInfo.points[1]=_y,paintInfo.points[2]=_w,paintInfo.points[3]=_h,_super.addSegment(this,"Arc",{loopback:!0,x1:x1-_x+4,y1:y1-_y,startAngle:0,endAngle:2*Math.PI,r:loopbackRadius,ac:!clockwise,x2:x1-_x-4,y2:y1-_y,cx:cx-_x,cy:cy-_y})}else isLoopbackCurrently=!1,this._computeBezier(paintInfo,p,sp,tp,_w,_h)},_super=_jp.Connectors.AbstractConnector.apply(this,arguments)},_ju.extend(_jp.Connectors.AbstractBezierConnector,_jp.Connectors.AbstractConnector);var Bezier=function(params){params=params||{},this.type="Bezier";var _super=_jp.Connectors.AbstractBezierConnector.apply(this,arguments),majorAnchor=params.curviness||150,minorAnchor=10;this.getCurviness=function(){return majorAnchor},this._findControlPoint=function(point,sourceAnchorPosition,targetAnchorPosition,sourceEndpoint,targetEndpoint,soo,too){var perpendicular=soo[0]!=too[0]||soo[1]==too[1],p=[];return perpendicular?(0===too[0]?p.push(targetAnchorPosition[0]<sourceAnchorPosition[0]?point[0]+minorAnchor:point[0]-minorAnchor):p.push(point[0]+majorAnchor*too[0]),0===too[1]?p.push(targetAnchorPosition[1]<sourceAnchorPosition[1]?point[1]+minorAnchor:point[1]-minorAnchor):p.push(point[1]+majorAnchor*soo[1])):(0===soo[0]?p.push(sourceAnchorPosition[0]<targetAnchorPosition[0]?point[0]+minorAnchor:point[0]-minorAnchor):p.push(point[0]-majorAnchor*soo[0]),0===soo[1]?p.push(sourceAnchorPosition[1]<targetAnchorPosition[1]?point[1]+minorAnchor:point[1]-minorAnchor):p.push(point[1]+majorAnchor*too[1])),p},this._computeBezier=function(paintInfo,p,sp,tp,_w,_h){var _CP,_CP2,geometry=this.getGeometry(),_sx=sp[0]<tp[0]?_w:0,_sy=sp[1]<tp[1]?_h:0,_tx=sp[0]<tp[0]?0:_w,_ty=sp[1]<tp[1]?0:_h;(this.hasBeenEdited()||this.isEditing())&&null!=geometry&&null!=geometry.controlPoints&&null!=geometry.controlPoints[0]&&null!=geometry.controlPoints[1]?(_CP=geometry.controlPoints[0],_CP2=geometry.controlPoints[1]):(_CP=this._findControlPoint([_sx,_sy],sp,tp,p.sourceEndpoint,p.targetEndpoint,paintInfo.so,paintInfo.to),_CP2=this._findControlPoint([_tx,_ty],tp,sp,p.targetEndpoint,p.sourceEndpoint,paintInfo.to,paintInfo.so)),_super.setGeometry({controlPoints:[_CP,_CP2]},!0),_super.addSegment(this,"Bezier",{x1:_sx,y1:_sy,x2:_tx,y2:_ty,cp1x:_CP[0],cp1y:_CP[1],cp2x:_CP2[0],cp2y:_CP2[1]})}};_ju.extend(Bezier,_jp.Connectors.AbstractBezierConnector),_jp.registerConnectorType(Bezier,"Bezier")}.call("undefined"!=typeof window?window:this),function(){"use strict";var root=this,_jp=root.jsPlumb,_ju=root.jsPlumbUtil,_segment=function(x1,y1,x2,y2){return x1<=x2&&y2<=y1?1:x1<=x2&&y1<=y2?2:x2<=x1&&y2>=y1?3:4},_findControlPoint=function(midx,midy,segment,sourceEdge,targetEdge,dx,dy,distance,proximityLimit){return distance<=proximityLimit?[midx,midy]:1===segment?sourceEdge[3]<=0&&targetEdge[3]>=1?[midx+(sourceEdge[2]<.5?-1*dx:dx),midy]:sourceEdge[2]>=1&&targetEdge[2]<=0?[midx,midy+(sourceEdge[3]<.5?-1*dy:dy)]:[midx+-1*dx,midy+-1*dy]:2===segment?sourceEdge[3]>=1&&targetEdge[3]<=0?[midx+(sourceEdge[2]<.5?-1*dx:dx),midy]:sourceEdge[2]>=1&&targetEdge[2]<=0?[midx,midy+(sourceEdge[3]<.5?-1*dy:dy)]:[midx+dx,midy+-1*dy]:3===segment?sourceEdge[3]>=1&&targetEdge[3]<=0?[midx+(sourceEdge[2]<.5?-1*dx:dx),midy]:sourceEdge[2]<=0&&targetEdge[2]>=1?[midx,midy+(sourceEdge[3]<.5?-1*dy:dy)]:[midx+-1*dx,midy+-1*dy]:4===segment?sourceEdge[3]<=0&&targetEdge[3]>=1?[midx+(sourceEdge[2]<.5?-1*dx:dx),midy]:sourceEdge[2]<=0&&targetEdge[2]>=1?[midx,midy+(sourceEdge[3]<.5?-1*dy:dy)]:[midx+dx,midy+-1*dy]:void 0},StateMachine=function(params){params=params||{},this.type="StateMachine";var _controlPoint,_super=_jp.Connectors.AbstractBezierConnector.apply(this,arguments),curviness=params.curviness||10,margin=params.margin||5,proximityLimit=params.proximityLimit||80;params.orientation&&"clockwise"===params.orientation;this._computeBezier=function(paintInfo,params,sp,tp,w,h){var _sx=params.sourcePos[0]<params.targetPos[0]?0:w,_sy=params.sourcePos[1]<params.targetPos[1]?0:h,_tx=params.sourcePos[0]<params.targetPos[0]?w:0,_ty=params.sourcePos[1]<params.targetPos[1]?h:0;0===params.sourcePos[2]&&(_sx-=margin),1===params.sourcePos[2]&&(_sx+=margin),0===params.sourcePos[3]&&(_sy-=margin),1===params.sourcePos[3]&&(_sy+=margin),0===params.targetPos[2]&&(_tx-=margin),1===params.targetPos[2]&&(_tx+=margin),0===params.targetPos[3]&&(_ty-=margin),1===params.targetPos[3]&&(_ty+=margin);var cp1x,cp2x,cp1y,cp2y,_midx=(_sx+_tx)/2,_midy=(_sy+_ty)/2,segment=_segment(_sx,_sy,_tx,_ty),distance=Math.sqrt(Math.pow(_tx-_sx,2)+Math.pow(_ty-_sy,2)),geometry=_super.getGeometry();(this.hasBeenEdited()||this.isEditing())&&null!=geometry?(cp1x=geometry.controlPoints[0][0],cp1y=geometry.controlPoints[0][1],cp2x=geometry.controlPoints[1][0],cp2y=geometry.controlPoints[1][1]):(_controlPoint=_findControlPoint(_midx,_midy,segment,params.sourcePos,params.targetPos,curviness,curviness,distance,proximityLimit),cp1x=_controlPoint[0],cp2x=_controlPoint[0],cp1y=_controlPoint[1],cp2y=_controlPoint[1],_super.setGeometry({controlPoints:[_controlPoint,_controlPoint]},!0)),_super.addSegment(this,"Bezier",{x1:_tx,y1:_ty,x2:_sx,y2:_sy,cp1x:cp1x,cp1y:cp1y,cp2x:cp2x,cp2y:cp2y})}};_ju.extend(StateMachine,_jp.Connectors.AbstractBezierConnector),_jp.registerConnectorType(StateMachine,"StateMachine")}.call("undefined"!=typeof window?window:this),function(){"use strict";var root=this,_jp=root.jsPlumb,_ju=root.jsPlumbUtil,svgAttributeMap={"stroke-linejoin":"stroke-linejoin","stroke-dashoffset":"stroke-dashoffset","stroke-linecap":"stroke-linecap"},STROKE_DASHARRAY="stroke-dasharray",DASHSTYLE="dashstyle",LINEAR_GRADIENT="linearGradient",RADIAL_GRADIENT="radialGradient",DEFS="defs",FILL="fill",STOP="stop",STROKE="stroke",STROKE_WIDTH="stroke-width",STYLE="style",NONE="none",JSPLUMB_GRADIENT="jsplumb_gradient_",LINE_WIDTH="lineWidth",ns={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml"},_attr=function(node,attributes){for(var i in attributes)node.setAttribute(i,""+attributes[i])},_node=function(name,attributes){return attributes=attributes||{},attributes.version="1.1",attributes.xmlns=ns.xhtml,jsPlumb.createElementNS(ns.svg,name,null,null,attributes)},_pos=function(d){return"position:absolute;left:"+d[0]+"px;top:"+d[1]+"px"},_clearGradient=function(parent){for(var els=parent.querySelectorAll(" defs,linearGradient,radialGradient"),i=0;i<els.length;i++)els[i].parentNode.removeChild(els[i])},_updateGradient=function(parent,node,style,dimensions,uiComponent){var id=JSPLUMB_GRADIENT+uiComponent._jsPlumb.instance.idstamp();_clearGradient(parent);var g;g=style.gradient.offset?_node(RADIAL_GRADIENT,{id:id}):_node(LINEAR_GRADIENT,{id:id,gradientUnits:"userSpaceOnUse"});var defs=_node(DEFS);parent.appendChild(defs),defs.appendChild(g);for(var i=0;i<style.gradient.stops.length;i++){var styleToUse=1==uiComponent.segment||2==uiComponent.segment?i:style.gradient.stops.length-1-i,stopColor=style.gradient.stops[styleToUse][1],s=_node(STOP,{offset:Math.floor(100*style.gradient.stops[i][0])+"%","stop-color":stopColor});g.appendChild(s)}var applyGradientTo=style.strokeStyle?STROKE:FILL;node.setAttribute(applyGradientTo,"url(#"+id+")")},_applyStyles=function(parent,node,style,dimensions,uiComponent){if(node.setAttribute(FILL,style.fillStyle?style.fillStyle:NONE),node.setAttribute(STROKE,style.strokeStyle?style.strokeStyle:NONE),style.gradient?_updateGradient(parent,node,style,dimensions,uiComponent):(_clearGradient(parent),node.setAttribute(STYLE,"")),style.lineWidth&&node.setAttribute(STROKE_WIDTH,style.lineWidth),style[DASHSTYLE]&&style[LINE_WIDTH]&&!style[STROKE_DASHARRAY]){var sep=style[DASHSTYLE].indexOf(",")==-1?" ":",",parts=style[DASHSTYLE].split(sep),styleToUse="";parts.forEach(function(p){styleToUse+=Math.floor(p*style.lineWidth)+sep}),node.setAttribute(STROKE_DASHARRAY,styleToUse)}else style[STROKE_DASHARRAY]&&node.setAttribute(STROKE_DASHARRAY,style[STROKE_DASHARRAY]);for(var i in svgAttributeMap)style[i]&&node.setAttribute(svgAttributeMap[i],style[i])},_appendAtIndex=function(svg,path,idx){svg.childNodes.length>idx?svg.insertBefore(path,svg.childNodes[idx]):svg.appendChild(path)};_ju.svg={node:_node,attr:_attr,pos:_pos};var SvgComponent=function(params){var pointerEventsSpec=params.pointerEventsSpec||"all",renderer={};_jp.jsPlumbUIComponent.apply(this,params.originalArgs),this.canvas=null,this.path=null,this.svg=null,this.bgCanvas=null;var clazz=params.cssClass+" "+(params.originalArgs[0].cssClass||""),svgParams={style:"",width:0,height:0,"pointer-events":pointerEventsSpec,position:"absolute"};this.svg=_node("svg",svgParams),params.useDivWrapper?(this.canvas=jsPlumb.createElement("div",{position:"absolute"}),_ju.sizeElement(this.canvas,0,0,1,1),this.canvas.className=clazz):(_attr(this.svg,{class:clazz}),this.canvas=this.svg),params._jsPlumb.appendElement(this.canvas,params.originalArgs[0].parent),params.useDivWrapper&&this.canvas.appendChild(this.svg);var displayElements=[this.canvas];return this.getDisplayElements=function(){return displayElements},this.appendDisplayElement=function(el){displayElements.push(el)},this.paint=function(style,anchor,extents){if(null!=style){var p,xy=[this.x,this.y],wh=[this.w,this.h];null!=extents&&(extents.xmin<0&&(xy[0]+=extents.xmin),extents.ymin<0&&(xy[1]+=extents.ymin),wh[0]=extents.xmax+(extents.xmin<0?-extents.xmin:0),wh[1]=extents.ymax+(extents.ymin<0?-extents.ymin:0)),params.useDivWrapper?(_ju.sizeElement(this.canvas,xy[0],xy[1],wh[0],wh[1]),xy[0]=0,xy[1]=0,p=_pos([0,0])):p=_pos([xy[0],xy[1]]),renderer.paint.apply(this,arguments),_attr(this.svg,{style:p,width:wh[0]||0,height:wh[1]||0})}},{renderer:renderer}};_ju.extend(SvgComponent,_jp.jsPlumbUIComponent,{cleanup:function(force){force||null==this.typeId?(this.canvas&&(this.canvas._jsPlumb=null),this.svg&&(this.svg._jsPlumb=null),this.bgCanvas&&(this.bgCanvas._jsPlumb=null),this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.bgCanvas&&this.bgCanvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.svg=null,this.canvas=null,this.path=null,this.group=null):(this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.bgCanvas&&this.bgCanvas.parentNode&&this.bgCanvas.parentNode.removeChild(this.bgCanvas))},reattach:function(instance){var c=instance.getContainer();this.canvas&&null==this.canvas.parentNode&&c.appendChild(this.canvas),this.bgCanvas&&null==this.bgCanvas.parentNode&&c.appendChild(this.bgCanvas)},setVisible:function(v){this.canvas&&(this.canvas.style.display=v?"block":"none")}}),_jp.ConnectorRenderers.svg=function(params){var self=this,_super=SvgComponent.apply(this,[{cssClass:params._jsPlumb.connectorClass+(this.isEditable()?" "+params._jsPlumb.editableConnectorClass:""),originalArgs:arguments,pointerEventsSpec:"none",_jsPlumb:params._jsPlumb}]),_superSetEditable=this.setEditable;this.setEditable=function(e){var result=_superSetEditable.apply(this,[e]);jsPlumb[result?"addClass":"removeClass"](this.canvas,this._jsPlumb.instance.editableConnectorClass)},_super.renderer.paint=function(style,anchor,extents){var segments=self.getSegments(),p="",offset=[0,0];if(extents.xmin<0&&(offset[0]=-extents.xmin),extents.ymin<0&&(offset[1]=-extents.ymin),segments.length>0){for(var i=0;i<segments.length;i++)p+=_jp.Segments.svg.SegmentRenderer.getPath(segments[i]),p+=" ";var a={d:p,transform:"translate("+offset[0]+","+offset[1]+")","pointer-events":params["pointer-events"]||"visibleStroke"},outlineStyle=null,d=[self.x,self.y,self.w,self.h];if(style.outlineColor){var outlineWidth=style.outlineWidth||1,outlineStrokeWidth=style.lineWidth+2*outlineWidth;outlineStyle=_jp.extend({},style),delete outlineStyle.gradient,outlineStyle.strokeStyle=style.outlineColor,outlineStyle.lineWidth=outlineStrokeWidth,null==self.bgPath?(self.bgPath=_node("path",a),_jp.addClass(self.bgPath,_jp.connectorOutlineClass),_appendAtIndex(self.svg,self.bgPath,0)):_attr(self.bgPath,a),_applyStyles(self.svg,self.bgPath,outlineStyle,d,self)}null==self.path?(self.path=_node("path",a),_appendAtIndex(self.svg,self.path,style.outlineColor?1:0)):_attr(self.path,a),_applyStyles(self.svg,self.path,style,d,self)}}},_ju.extend(_jp.ConnectorRenderers.svg,SvgComponent),_jp.Segments.svg={SegmentRenderer:{getPath:function(segment){return{Straight:function(){var d=segment.getCoordinates();return"M "+d.x1+" "+d.y1+" L "+d.x2+" "+d.y2},Bezier:function(){var d=segment.params;return"M "+d.x1+" "+d.y1+" C "+d.cp1x+" "+d.cp1y+" "+d.cp2x+" "+d.cp2y+" "+d.x2+" "+d.y2},Arc:function(){var d=segment.params,laf=segment.sweep>Math.PI?1:0,sf=segment.anticlockwise?0:1;return"M"+segment.x1+" "+segment.y1+" A "+segment.radius+" "+d.r+" 0 "+laf+","+sf+" "+segment.x2+" "+segment.y2}}[segment.type]()}}};var SvgEndpoint=_jp.SvgEndpoint=function(params){var _super=SvgComponent.apply(this,[{cssClass:params._jsPlumb.endpointClass,originalArgs:arguments,pointerEventsSpec:"all",useDivWrapper:!0,_jsPlumb:params._jsPlumb}]);_super.renderer.paint=function(style){var s=_jp.extend({},style);s.outlineColor&&(s.strokeWidth=s.outlineWidth,s.strokeStyle=s.outlineColor),null==this.node?(this.node=this.makeNode(s),this.svg.appendChild(this.node)):null!=this.updateNode&&this.updateNode(this.node),_applyStyles(this.svg,this.node,s,[this.x,this.y,this.w,this.h],this),_pos(this.node,[this.x,this.y])}.bind(this)};_ju.extend(SvgEndpoint,SvgComponent),_jp.Endpoints.svg.Dot=function(){_jp.Endpoints.Dot.apply(this,arguments),SvgEndpoint.apply(this,arguments),this.makeNode=function(style){return _node("circle",{cx:this.w/2,cy:this.h/2,r:this.radius})},this.updateNode=function(node){_attr(node,{cx:this.w/2,cy:this.h/2,r:this.radius})}},_ju.extend(_jp.Endpoints.svg.Dot,[_jp.Endpoints.Dot,SvgEndpoint]),_jp.Endpoints.svg.Rectangle=function(){_jp.Endpoints.Rectangle.apply(this,arguments),SvgEndpoint.apply(this,arguments),this.makeNode=function(style){return _node("rect",{width:this.w,height:this.h})},this.updateNode=function(node){_attr(node,{width:this.w,height:this.h})}},_ju.extend(_jp.Endpoints.svg.Rectangle,[_jp.Endpoints.Rectangle,SvgEndpoint]),_jp.Endpoints.svg.Image=_jp.Endpoints.Image,_jp.Endpoints.svg.Blank=_jp.Endpoints.Blank,_jp.Overlays.svg.Label=_jp.Overlays.Label,_jp.Overlays.svg.Custom=_jp.Overlays.Custom;var AbstractSvgArrowOverlay=function(superclass,originalArgs){superclass.apply(this,originalArgs),_jp.jsPlumbUIComponent.apply(this,originalArgs),this.isAppendedAtTopLevel=!1;this.path=null,this.paint=function(params,containerExtents){if(params.component.svg&&containerExtents){null==this.path&&(this.path=_node("path",{"pointer-events":"all"}),params.component.svg.appendChild(this.path),this.elementCreated&&this.elementCreated(this.path,params.component),this.canvas=params.component.svg);var clazz=originalArgs&&1==originalArgs.length?originalArgs[0].cssClass||"":"",offset=[0,0];containerExtents.xmin<0&&(offset[0]=-containerExtents.xmin),containerExtents.ymin<0&&(offset[1]=-containerExtents.ymin),_attr(this.path,{d:makePath(params.d),class:clazz,stroke:params.strokeStyle?params.strokeStyle:null,fill:params.fillStyle?params.fillStyle:null,transform:"translate("+offset[0]+","+offset[1]+")"})}};var makePath=function(d){return isNaN(d.cxy.x)||isNaN(d.cxy.y)?"":"M"+d.hxy.x+","+d.hxy.y+" L"+d.tail[0].x+","+d.tail[0].y+" L"+d.cxy.x+","+d.cxy.y+" L"+d.tail[1].x+","+d.tail[1].y+" L"+d.hxy.x+","+d.hxy.y};this.transfer=function(target){target.canvas&&this.path&&this.path.parentNode&&(this.path.parentNode.removeChild(this.path),target.canvas.appendChild(this.path))}};_ju.extend(AbstractSvgArrowOverlay,[_jp.jsPlumbUIComponent,_jp.Overlays.AbstractOverlay],{cleanup:function(force){null!=this.path&&(force?this._jsPlumb.instance.removeElement(this.path):this.path.parentNode&&this.path.parentNode.removeChild(this.path))},reattach:function(instance){this.path&&this.canvas&&null==this.path.parentNode&&this.canvas.appendChild(this.path)},setVisible:function(v){null!=this.path&&(this.path.style.display=v?"block":"none")}}),_jp.Overlays.svg.Arrow=function(){AbstractSvgArrowOverlay.apply(this,[_jp.Overlays.Arrow,arguments])},_ju.extend(_jp.Overlays.svg.Arrow,[_jp.Overlays.Arrow,AbstractSvgArrowOverlay]),_jp.Overlays.svg.PlainArrow=function(){AbstractSvgArrowOverlay.apply(this,[_jp.Overlays.PlainArrow,arguments])},_ju.extend(_jp.Overlays.svg.PlainArrow,[_jp.Overlays.PlainArrow,AbstractSvgArrowOverlay]),_jp.Overlays.svg.Diamond=function(){AbstractSvgArrowOverlay.apply(this,[_jp.Overlays.Diamond,arguments])},_ju.extend(_jp.Overlays.svg.Diamond,[_jp.Overlays.Diamond,AbstractSvgArrowOverlay]),_jp.Overlays.svg.GuideLines=function(){var p1_1,p1_2,path=null,self=this;_jp.Overlays.GuideLines.apply(this,arguments),this.paint=function(params,containerExtents){null==path&&(path=_node("path"),params.connector.svg.appendChild(path),self.attachListeners(path,params.connector),self.attachListeners(path,self),p1_1=_node("path"),params.connector.svg.appendChild(p1_1),self.attachListeners(p1_1,params.connector),self.attachListeners(p1_1,self),p1_2=_node("path"),params.connector.svg.appendChild(p1_2),self.attachListeners(p1_2,params.connector),self.attachListeners(p1_2,self));var offset=[0,0];containerExtents.xmin<0&&(offset[0]=-containerExtents.xmin),containerExtents.ymin<0&&(offset[1]=-containerExtents.ymin),_attr(path,{d:makePath(params.head,params.tail),stroke:"red",fill:null,transform:"translate("+offset[0]+","+offset[1]+")"}),_attr(p1_1,{d:makePath(params.tailLine[0],params.tailLine[1]),stroke:"blue",fill:null,transform:"translate("+offset[0]+","+offset[1]+")"}),_attr(p1_2,{d:makePath(params.headLine[0],params.headLine[1]),stroke:"green",fill:null,transform:"translate("+offset[0]+","+offset[1]+")"})};var makePath=function(d1,d2){return"M "+d1.x+","+d1.y+" L"+d2.x+","+d2.y}},_ju.extend(_jp.Overlays.svg.GuideLines,_jp.Overlays.GuideLines)}.call("undefined"!=typeof window?window:this),function(){"use strict";var root=this,_jp=root.jsPlumb,_ju=root.jsPlumbUtil,_jk=root.Katavorio,_jg=root.Biltong,_getDragManager=function(instance,category){category=category||"main";var key="_katavorio_"+category,k=instance[key],e=instance.getEventManager();return k||(k=new _jk({bind:e.on,unbind:e.off,getSize:jsPlumb.getSize,getPosition:function(el,relativeToRoot){var o=instance.getOffset(el,relativeToRoot,el._katavorioDrag?el.offsetParent:null);return[o.left,o.top]},setPosition:function(el,xy){el.style.left=xy[0]+"px",el.style.top=xy[1]+"px"},addClass:jsPlumb.addClass,removeClass:jsPlumb.removeClass,intersects:_jg.intersects,indexOf:function(l,i){return l.indexOf(i)},css:{noSelect:instance.dragSelectClass,droppable:"jsplumb-droppable",draggable:"jsplumb-draggable",drag:"jsplumb-drag",selected:"jsplumb-drag-selected",active:"jsplumb-drag-active",hover:"jsplumb-drag-hover",ghostProxy:"jsplumb-ghost-proxy"}}),instance[key]=k,instance.bind("zoom",k.setZoom)),k},_animProps=function(o,p){var _one=function(pName){if(null!=p[pName]){if(_ju.isString(p[pName])){var m=p[pName].match(/-=/)?-1:1,v=p[pName].substring(2);return o[pName]+m*v}return p[pName]}return o[pName]};return[_one("left"),_one("top")]};_jp.extend(root.jsPlumbInstance.prototype,{animationSupported:!0,getElement:function(el){return null==el?null:(el="string"==typeof el?el:null!=el.length&&null==el.enctype?el[0]:el,"string"==typeof el?document.getElementById(el):el)},removeElement:function(element){_getDragManager(this).elementRemoved(element),
this.getEventManager().remove(element)},doAnimate:function(el,properties,options){options=options||{};var o=this.getOffset(el),ap=_animProps(o,properties),ldist=ap[0]-o.left,tdist=ap[1]-o.top,d=options.duration||250,step=15,steps=d/step,linc=step/d*ldist,tinc=step/d*tdist,idx=0,_int=setInterval(function(){jsPlumb.setPosition(el,{left:o.left+linc*(idx+1),top:o.top+tinc*(idx+1)}),null!=options.step&&options.step(idx,Math.ceil(steps)),idx++,idx>=steps&&(window.clearInterval(_int),null!=options.complete&&options.complete())},step)},destroyDraggable:function(el,category){_getDragManager(this,category).destroyDraggable(el)},destroyDroppable:function(el,category){_getDragManager(this,category).destroyDroppable(el)},initDraggable:function(el,options,category){_getDragManager(this,category).draggable(el,options)},initDroppable:function(el,options,category){_getDragManager(this,category).droppable(el,options)},isAlreadyDraggable:function(el){return null!=el._katavorioDrag},isDragSupported:function(el,options){return!0},isDropSupported:function(el,options){return!0},isElementDraggable:function(el){return el=jsPlumb.getElement(el),el._katavorioDrag&&el._katavorioDrag.isEnabled()},getDragObject:function(eventArgs){return eventArgs[0].drag.getDragElement()},getDragScope:function(el){return el._katavorioDrag&&el._katavorioDrag.scopes.join(" ")||""},getDropEvent:function(args){return args[0].e},getUIPosition:function(eventArgs,zoom){var el=eventArgs[0].el;if(null==el.offsetParent)return null;var finalPos=eventArgs[0].finalPos||eventArgs[0].pos,p={left:finalPos[0],top:finalPos[1]};if(el._katavorioDrag&&el.offsetParent!==this.getContainer()){var oc=this.getOffset(el.offsetParent);p.left+=oc.left,p.top+=oc.top}return p},setDragFilter:function(el,filter,_exclude){el._katavorioDrag&&el._katavorioDrag.setFilter(filter,_exclude)},setElementDraggable:function(el,draggable){el=jsPlumb.getElement(el),el._katavorioDrag&&el._katavorioDrag.setEnabled(draggable)},setDragScope:function(el,scope){el._katavorioDrag&&el._katavorioDrag.k.setDragScope(el,scope)},setDropScope:function(el,scope){el._katavorioDrop&&el._katavorioDrop.length>0&&el._katavorioDrop[0].k.setDropScope(el,scope)},addToPosse:function(el,spec){var specs=Array.prototype.slice.call(arguments,1),dm=_getDragManager(this);jsPlumb.each(el,function(_el){_el=[jsPlumb.getElement(_el)],_el.push.apply(_el,specs),dm.addToPosse.apply(dm,_el)})},setPosse:function(el,spec){var specs=Array.prototype.slice.call(arguments,1),dm=_getDragManager(this);jsPlumb.each(el,function(_el){_el=[jsPlumb.getElement(_el)],_el.push.apply(_el,specs),dm.setPosse.apply(dm,_el)})},removeFromPosse:function(el,posseId){var specs=Array.prototype.slice.call(arguments,1),dm=_getDragManager(this);jsPlumb.each(el,function(_el){_el=[jsPlumb.getElement(_el)],_el.push.apply(_el,specs),dm.removeFromPosse.apply(dm,_el)})},removeFromAllPosses:function(el){var dm=_getDragManager(this);jsPlumb.each(el,function(_el){dm.removeFromAllPosses(jsPlumb.getElement(_el))})},setPosseState:function(el,posseId,state){var dm=_getDragManager(this);jsPlumb.each(el,function(_el){dm.setPosseState(jsPlumb.getElement(_el),posseId,state)})},dragEvents:{start:"start",stop:"stop",drag:"drag",step:"step",over:"over",out:"out",drop:"drop",complete:"complete",beforeStart:"beforeStart"},animEvents:{step:"step",complete:"complete"},stopDrag:function(el){el._katavorioDrag&&el._katavorioDrag.abort()},addToDragSelection:function(spec){_getDragManager(this).select(spec)},removeFromDragSelection:function(spec){_getDragManager(this).deselect(spec)},clearDragSelection:function(){_getDragManager(this).deselectAll()},trigger:function(el,event,originalEvent,payload){this.getEventManager().trigger(el,event,originalEvent,payload)},doReset:function(){for(var key in this)0===key.indexOf("_katavorio_")&&this[key].reset()}});var ready=function(f){var _do=function(){/complete|loaded|interactive/.test(document.readyState)&&"undefined"!=typeof document.body&&null!=document.body?f():setTimeout(_do,9)};_do()};ready(_jp.init)}.call("undefined"!=typeof window?window:this),function(root,factory){"function"==typeof define&&define.amd?define(["jquery"],factory):factory(root.jQuery)}(this,function($){"use strict";function getBrowserScrollSize(actualSize){if(browser.webkit&&!actualSize)return{height:0,width:0};if(!browser.data.outer){var css={border:"none","box-sizing":"content-box",height:"200px",margin:"0",padding:"0",width:"200px"};browser.data.inner=$("<div>").css($.extend({},css)),browser.data.outer=$("<div>").css($.extend({left:"-1000px",overflow:"scroll",position:"absolute",top:"-1000px"},css)).append(browser.data.inner).appendTo("body")}return browser.data.outer.scrollLeft(1e3).scrollTop(1e3),{height:Math.ceil(browser.data.outer.offset().top-browser.data.inner.offset().top||0),width:Math.ceil(browser.data.outer.offset().left-browser.data.inner.offset().left||0)}}function isScrollOverlaysContent(){var scrollSize=getBrowserScrollSize(!0);return!(scrollSize.height||scrollSize.width)}function isVerticalScroll(event){var e=event.originalEvent;return(!e.axis||e.axis!==e.HORIZONTAL_AXIS)&&!e.wheelDeltaX}var debug=!1,browser={data:{index:0,name:"scrollbar"},macosx:/mac/i.test(navigator.platform),mobile:/android|webos|iphone|ipad|ipod|blackberry/i.test(navigator.userAgent),overlay:null,scroll:null,scrolls:[],webkit:/webkit/i.test(navigator.userAgent)&&!/edge\/\d+/i.test(navigator.userAgent)};browser.scrolls.add=function(instance){this.remove(instance).push(instance)},browser.scrolls.remove=function(instance){for(;$.inArray(instance,this)>=0;)this.splice($.inArray(instance,this),1);return this};var defaults={autoScrollSize:!0,autoUpdate:!0,debug:!1,disableBodyScroll:!1,duration:200,ignoreMobile:!1,ignoreOverlay:!1,scrollStep:30,showArrows:!1,stepScrolling:!0,scrollx:null,scrolly:null,onDestroy:null,onInit:null,onScroll:null,onUpdate:null},BaseScrollbar=function(container){browser.scroll||(browser.overlay=isScrollOverlaysContent(),browser.scroll=getBrowserScrollSize(),updateScrollbars(),$(window).resize(function(){var forceUpdate=!1;if(browser.scroll&&(browser.scroll.height||browser.scroll.width)){var scroll=getBrowserScrollSize();scroll.height===browser.scroll.height&&scroll.width===browser.scroll.width||(browser.scroll=scroll,forceUpdate=!0)}updateScrollbars(forceUpdate)})),this.container=container,this.namespace=".scrollbar_"+browser.data.index++,this.options=$.extend({},defaults,window.jQueryScrollbarOptions||{}),this.scrollTo=null,this.scrollx={},this.scrolly={},container.data(browser.data.name,this),browser.scrolls.add(this)};BaseScrollbar.prototype={destroy:function(){if(this.wrapper){this.container.removeData(browser.data.name),browser.scrolls.remove(this);var scrollLeft=this.container.scrollLeft(),scrollTop=this.container.scrollTop();this.container.insertBefore(this.wrapper).css({height:"",margin:"","max-height":""}).removeClass("scroll-content scroll-scrollx_visible scroll-scrolly_visible").off(this.namespace).scrollLeft(scrollLeft).scrollTop(scrollTop),this.scrollx.scroll.removeClass("scroll-scrollx_visible").find("div").andSelf().off(this.namespace),this.scrolly.scroll.removeClass("scroll-scrolly_visible").find("div").andSelf().off(this.namespace),this.wrapper.remove(),$(document).add("body").off(this.namespace),$.isFunction(this.options.onDestroy)&&this.options.onDestroy.apply(this,[this.container])}},init:function(options){var S=this,c=this.container,cw=this.containerWrapper||c,namespace=this.namespace,o=$.extend(this.options,options||{}),s={x:this.scrollx,y:this.scrolly},w=this.wrapper,initScroll={scrollLeft:c.scrollLeft(),scrollTop:c.scrollTop()};if(browser.mobile&&o.ignoreMobile||browser.overlay&&o.ignoreOverlay||browser.macosx&&!browser.webkit)return!1;if(w)cw.css({height:"auto","margin-bottom":browser.scroll.height*-1+"px","margin-right":browser.scroll.width*-1+"px","max-height":""});else{if(this.wrapper=w=$("<div>").addClass("scroll-wrapper").addClass(c.attr("class")).css("position","absolute"==c.css("position")?"absolute":"relative").insertBefore(c).append(c),c.is("textarea")&&(this.containerWrapper=cw=$("<div>").insertBefore(c).append(c),w.addClass("scroll-textarea")),cw.addClass("scroll-content").css({height:"auto","margin-bottom":browser.scroll.height*-1+"px","margin-right":browser.scroll.width*-1+"px","max-height":""}),c.on("scroll"+namespace,function(event){$.isFunction(o.onScroll)&&o.onScroll.call(S,{maxScroll:s.y.maxScrollOffset,scroll:c.scrollTop(),size:s.y.size,visible:s.y.visible},{maxScroll:s.x.maxScrollOffset,scroll:c.scrollLeft(),size:s.x.size,visible:s.x.visible}),s.x.isVisible&&s.x.scroll.bar.css("left",c.scrollLeft()*s.x.kx+"px"),s.y.isVisible&&s.y.scroll.bar.css("top",c.scrollTop()*s.y.kx+"px")}),w.on("scroll"+namespace,function(){w.scrollTop(0).scrollLeft(0)}),o.disableBodyScroll){var handleMouseScroll=function(event){isVerticalScroll(event)?s.y.isVisible&&s.y.mousewheel(event):s.x.isVisible&&s.x.mousewheel(event)};w.on("MozMousePixelScroll"+namespace,handleMouseScroll),w.on("mousewheel"+namespace,handleMouseScroll),browser.mobile&&w.on("touchstart"+namespace,function(event){var touch=event.originalEvent.touches&&event.originalEvent.touches[0]||event,originalTouch={pageX:touch.pageX,pageY:touch.pageY},originalScroll={left:c.scrollLeft(),top:c.scrollTop()};$(document).on("touchmove"+namespace,function(event){var touch=event.originalEvent.targetTouches&&event.originalEvent.targetTouches[0]||event;c.scrollLeft(originalScroll.left+originalTouch.pageX-touch.pageX),c.scrollTop(originalScroll.top+originalTouch.pageY-touch.pageY),event.preventDefault()}),$(document).on("touchend"+namespace,function(){$(document).off(namespace)})})}$.isFunction(o.onInit)&&o.onInit.apply(this,[c])}$.each(s,function(d,scrollx){var scrollCallback=null,scrollForward=1,scrollOffset="x"===d?"scrollLeft":"scrollTop",scrollStep=o.scrollStep,scrollTo=function(){var currentOffset=c[scrollOffset]();c[scrollOffset](currentOffset+scrollStep),1==scrollForward&&currentOffset+scrollStep>=scrollToValue&&(currentOffset=c[scrollOffset]()),scrollForward==-1&&currentOffset+scrollStep<=scrollToValue&&(currentOffset=c[scrollOffset]()),c[scrollOffset]()==currentOffset&&scrollCallback&&scrollCallback()},scrollToValue=0;scrollx.scroll||(scrollx.scroll=S._getScroll(o["scroll"+d]).addClass("scroll-"+d),o.showArrows&&scrollx.scroll.addClass("scroll-element_arrows_visible"),scrollx.mousewheel=function(event){if(!scrollx.isVisible||"x"===d&&isVerticalScroll(event))return!0;if("y"===d&&!isVerticalScroll(event))return s.x.mousewheel(event),!0;var delta=event.originalEvent.wheelDelta*-1||event.originalEvent.detail,maxScrollValue=scrollx.size-scrollx.visible-scrollx.offset;return(delta>0&&scrollToValue<maxScrollValue||delta<0&&scrollToValue>0)&&(scrollToValue+=delta,scrollToValue<0&&(scrollToValue=0),scrollToValue>maxScrollValue&&(scrollToValue=maxScrollValue),S.scrollTo=S.scrollTo||{},S.scrollTo[scrollOffset]=scrollToValue,setTimeout(function(){S.scrollTo&&(c.stop().animate(S.scrollTo,240,"linear",function(){scrollToValue=c[scrollOffset]()}),S.scrollTo=null)},1)),event.preventDefault(),!1},scrollx.scroll.on("MozMousePixelScroll"+namespace,scrollx.mousewheel).on("mousewheel"+namespace,scrollx.mousewheel).on("mouseenter"+namespace,function(){scrollToValue=c[scrollOffset]()}),scrollx.scroll.find(".scroll-arrow, .scroll-element_track").on("mousedown"+namespace,function(event){if(1!=event.which)return!0;scrollForward=1;var data={eventOffset:event["x"===d?"pageX":"pageY"],maxScrollValue:scrollx.size-scrollx.visible-scrollx.offset,scrollbarOffset:scrollx.scroll.bar.offset()["x"===d?"left":"top"],scrollbarSize:scrollx.scroll.bar["x"===d?"outerWidth":"outerHeight"]()},timeout=0,timer=0;return $(this).hasClass("scroll-arrow")?(scrollForward=$(this).hasClass("scroll-arrow_more")?1:-1,scrollStep=o.scrollStep*scrollForward,scrollToValue=scrollForward>0?data.maxScrollValue:0):(scrollForward=data.eventOffset>data.scrollbarOffset+data.scrollbarSize?1:data.eventOffset<data.scrollbarOffset?-1:0,scrollStep=Math.round(.75*scrollx.visible)*scrollForward,scrollToValue=data.eventOffset-data.scrollbarOffset-(o.stepScrolling?1==scrollForward?data.scrollbarSize:0:Math.round(data.scrollbarSize/2)),scrollToValue=c[scrollOffset]()+scrollToValue/scrollx.kx),S.scrollTo=S.scrollTo||{},S.scrollTo[scrollOffset]=o.stepScrolling?c[scrollOffset]()+scrollStep:scrollToValue,o.stepScrolling&&(scrollCallback=function(){scrollToValue=c[scrollOffset](),clearInterval(timer),clearTimeout(timeout),timeout=0,timer=0},timeout=setTimeout(function(){timer=setInterval(scrollTo,40)},o.duration+100)),setTimeout(function(){S.scrollTo&&(c.animate(S.scrollTo,o.duration),S.scrollTo=null)},1),S._handleMouseDown(scrollCallback,event)}),scrollx.scroll.bar.on("mousedown"+namespace,function(event){if(1!=event.which)return!0;var eventPosition=event["x"===d?"pageX":"pageY"],initOffset=c[scrollOffset]();return scrollx.scroll.addClass("scroll-draggable"),$(document).on("mousemove"+namespace,function(event){var diff=parseInt((event["x"===d?"pageX":"pageY"]-eventPosition)/scrollx.kx,10);c[scrollOffset](initOffset+diff)}),S._handleMouseDown(function(){scrollx.scroll.removeClass("scroll-draggable"),scrollToValue=c[scrollOffset]()},event)}))}),$.each(s,function(d,scrollx){var scrollClass="scroll-scroll"+d+"_visible",scrolly="x"==d?s.y:s.x;scrollx.scroll.removeClass(scrollClass),scrolly.scroll.removeClass(scrollClass),cw.removeClass(scrollClass)}),$.each(s,function(d,scrollx){$.extend(scrollx,"x"==d?{offset:parseInt(c.css("left"),10)||0,size:c.prop("scrollWidth"),visible:w.width()}:{offset:parseInt(c.css("top"),10)||0,size:c.prop("scrollHeight"),visible:w.height()})}),this._updateScroll("x",this.scrollx),this._updateScroll("y",this.scrolly),$.isFunction(o.onUpdate)&&o.onUpdate.apply(this,[c]),$.each(s,function(d,scrollx){var cssOffset="x"===d?"left":"top",cssFullSize="x"===d?"outerWidth":"outerHeight",cssSize="x"===d?"width":"height",offset=parseInt(c.css(cssOffset),10)||0,AreaSize=scrollx.size,AreaVisible=scrollx.visible+offset,scrollSize=scrollx.scroll.size[cssFullSize]()+(parseInt(scrollx.scroll.size.css(cssOffset),10)||0);o.autoScrollSize&&(scrollx.scrollbarSize=parseInt(scrollSize*AreaVisible/AreaSize,10),scrollx.scroll.bar.css(cssSize,scrollx.scrollbarSize+"px")),scrollx.scrollbarSize=scrollx.scroll.bar[cssFullSize](),scrollx.kx=(scrollSize-scrollx.scrollbarSize)/(AreaSize-AreaVisible)||1,scrollx.maxScrollOffset=AreaSize-AreaVisible}),c.scrollLeft(initScroll.scrollLeft).scrollTop(initScroll.scrollTop).trigger("scroll")},_getScroll:function(scroll){var types={advanced:['<div class="scroll-element">','<div class="scroll-element_corner"></div>','<div class="scroll-arrow scroll-arrow_less"></div>','<div class="scroll-arrow scroll-arrow_more"></div>','<div class="scroll-element_outer">','<div class="scroll-element_size"></div>','<div class="scroll-element_inner-wrapper">','<div class="scroll-element_inner scroll-element_track">','<div class="scroll-element_inner-bottom"></div>',"</div>","</div>",'<div class="scroll-bar">','<div class="scroll-bar_body">','<div class="scroll-bar_body-inner"></div>',"</div>",'<div class="scroll-bar_bottom"></div>','<div class="scroll-bar_center"></div>',"</div>","</div>","</div>"].join(""),simple:['<div class="scroll-element">','<div class="scroll-element_outer">','<div class="scroll-element_size"></div>','<div class="scroll-element_track"></div>','<div class="scroll-bar"></div>',"</div>","</div>"].join("")};return types[scroll]&&(scroll=types[scroll]),scroll||(scroll=types.simple),scroll="string"==typeof scroll?$(scroll).appendTo(this.wrapper):$(scroll),$.extend(scroll,{bar:scroll.find(".scroll-bar"),size:scroll.find(".scroll-element_size"),track:scroll.find(".scroll-element_track")}),scroll},_handleMouseDown:function(callback,event){var namespace=this.namespace;return $(document).on("blur"+namespace,function(){$(document).add("body").off(namespace),callback&&callback()}),$(document).on("dragstart"+namespace,function(event){return event.preventDefault(),!1}),$(document).on("mouseup"+namespace,function(){$(document).add("body").off(namespace),callback&&callback()}),$("body").on("selectstart"+namespace,function(event){return event.preventDefault(),!1}),event&&event.preventDefault(),!1},_updateScroll:function(d,scrollx){var container=this.container,containerWrapper=this.containerWrapper||container,scrollClass="scroll-scroll"+d+"_visible",scrolly="x"===d?this.scrolly:this.scrollx,offset=parseInt(this.container.css("x"===d?"left":"top"),10)||0,wrapper=this.wrapper,AreaSize=scrollx.size,AreaVisible=scrollx.visible+offset;scrollx.isVisible=AreaSize-AreaVisible>1,scrollx.isVisible?(scrollx.scroll.addClass(scrollClass),scrolly.scroll.addClass(scrollClass),containerWrapper.addClass(scrollClass)):(scrollx.scroll.removeClass(scrollClass),scrolly.scroll.removeClass(scrollClass),containerWrapper.removeClass(scrollClass)),"y"===d&&(container.is("textarea")||AreaSize<AreaVisible?containerWrapper.css({height:AreaVisible+browser.scroll.height+"px","max-height":"none"}):containerWrapper.css({"max-height":AreaVisible+browser.scroll.height+"px"})),scrollx.size==container.prop("scrollWidth")&&scrolly.size==container.prop("scrollHeight")&&scrollx.visible==wrapper.width()&&scrolly.visible==wrapper.height()&&scrollx.offset==(parseInt(container.css("left"),10)||0)&&scrolly.offset==(parseInt(container.css("top"),10)||0)||($.extend(this.scrollx,{offset:parseInt(container.css("left"),10)||0,size:container.prop("scrollWidth"),visible:wrapper.width()}),$.extend(this.scrolly,{offset:parseInt(container.css("top"),10)||0,size:this.container.prop("scrollHeight"),visible:wrapper.height()}),this._updateScroll("x"===d?"y":"x",scrolly))}};var CustomScrollbar=BaseScrollbar;$.fn.scrollbar=function(command,args){return"string"!=typeof command&&(args=command,command="init"),"undefined"==typeof args&&(args=[]),$.isArray(args)||(args=[args]),this.not("body, .scroll-wrapper").each(function(){var element=$(this),instance=element.data(browser.data.name);(instance||"init"===command)&&(instance||(instance=new CustomScrollbar(element)),instance[command]&&instance[command].apply(instance,args))}),this},$.fn.scrollbar.options=defaults;var updateScrollbars=function(){var timer=0,timerCounter=0;return function(force){var i,container,options,scroll,wrapper,scrollx,scrolly;for(i=0;i<browser.scrolls.length;i++)scroll=browser.scrolls[i],container=scroll.container,options=scroll.options,wrapper=scroll.wrapper,scrollx=scroll.scrollx,scrolly=scroll.scrolly,(force||options.autoUpdate&&wrapper&&wrapper.is(":visible")&&(container.prop("scrollWidth")!=scrollx.size||container.prop("scrollHeight")!=scrolly.size||wrapper.width()!=scrollx.visible||wrapper.height()!=scrolly.visible))&&(scroll.init(),options.debug&&(window.console&&console.log({scrollHeight:container.prop("scrollHeight")+":"+scroll.scrolly.size,scrollWidth:container.prop("scrollWidth")+":"+scroll.scrollx.size,visibleHeight:wrapper.height()+":"+scroll.scrolly.visible,visibleWidth:wrapper.width()+":"+scroll.scrollx.visible},!0),timerCounter++));debug&&timerCounter>10?(window.console&&console.log("Scroll updates exceed 10"),updateScrollbars=function(){}):(clearTimeout(timer),timer=setTimeout(updateScrollbars,300))}}();window.angular&&!function(angular){angular.module("jQueryScrollbar",[]).provider("jQueryScrollbar",function(){var defaultOptions=defaults;return{setOptions:function(options){angular.extend(defaultOptions,options)},$get:function(){return{options:angular.copy(defaultOptions)}}}}).directive("jqueryScrollbar",["jQueryScrollbar","$parse",function(jQueryScrollbar,$parse){return{restrict:"AC",link:function(scope,element,attrs){var model=$parse(attrs.jqueryScrollbar),options=model(scope);element.scrollbar(options||jQueryScrollbar.options).on("$destroy",function(){element.scrollbar("destroy")})}}}])}(window.angular)}),function(factory){"use strict";"function"==typeof define&&define.amd?define(["jquery"],factory):"undefined"!=typeof module&&module.exports?module.exports=factory(require("jquery")):factory(jQuery)}(function($,undefined){"use strict";if(!$.jstree){var _temp1,_temp2,instance_counter=0,ccp_node=!1,ccp_mode=!1,ccp_inst=!1,themes_loaded=[],src=$("script:last").attr("src"),document=window.document,_node=document.createElement("LI");_node.setAttribute("role","treeitem"),_temp1=document.createElement("I"),_temp1.className="jstree-icon jstree-ocl",_temp1.setAttribute("role","presentation"),_node.appendChild(_temp1),_temp1=document.createElement("A"),_temp1.className="jstree-anchor",_temp1.setAttribute("href","#"),_temp1.setAttribute("tabindex","-1"),_temp2=document.createElement("I"),_temp2.className="jstree-icon jstree-themeicon",_temp2.setAttribute("role","presentation"),_temp1.appendChild(_temp2),_node.appendChild(_temp1),_temp1=_temp2=null,$.jstree={version:"3.3.2",defaults:{plugins:[]},plugins:{},path:src&&src.indexOf("/")!==-1?src.replace(/\/[^\/]+$/,""):"",idregex:/[\\:&!^|()\[\]<>@*'+~#";.,=\- \/${}%?`]/g,root:"#"},$.jstree.create=function(el,options){var tmp=new $.jstree.core(++instance_counter),opt=options;return options=$.extend(!0,{},$.jstree.defaults,options),opt&&opt.plugins&&(options.plugins=opt.plugins),$.each(options.plugins,function(i,k){"core"!==i&&(tmp=tmp.plugin(k,options[k]))}),$(el).data("jstree",tmp),tmp.init(el,options),tmp},$.jstree.destroy=function(){$(".jstree:jstree").jstree("destroy"),$(document).off(".jstree")},$.jstree.core=function(id){this._id=id,this._cnt=0,this._wrk=null,this._data={core:{themes:{name:!1,dots:!1,icons:!1},selected:[],last_error:{},working:!1,worker_queue:[],focused:null}}},$.jstree.reference=function(needle){var tmp=null,obj=null;if(!needle||!needle.id||needle.tagName&&needle.nodeType||(needle=needle.id),!obj||!obj.length)try{obj=$(needle)}catch(ignore){}if(!obj||!obj.length)try{obj=$("#"+needle.replace($.jstree.idregex,"\\$&"))}catch(ignore){}return obj&&obj.length&&(obj=obj.closest(".jstree")).length&&(obj=obj.data("jstree"))?tmp=obj:$(".jstree").each(function(){var inst=$(this).data("jstree");if(inst&&inst._model.data[needle])return tmp=inst,!1}),tmp},$.fn.jstree=function(arg){var is_method="string"==typeof arg,args=Array.prototype.slice.call(arguments,1),result=null;return!(arg===!0&&!this.length)&&(this.each(function(){var instance=$.jstree.reference(this),method=is_method&&instance?instance[arg]:null;if(result=is_method&&method?method.apply(instance,args):null,instance||is_method||arg!==undefined&&!$.isPlainObject(arg)||$.jstree.create(this,arg),(instance&&!is_method||arg===!0)&&(result=instance||!1),null!==result&&result!==undefined)return!1}),null!==result&&result!==undefined?result:this)},$.expr.pseudos.jstree=$.expr.createPseudo(function(search){return function(a){return $(a).hasClass("jstree")&&$(a).data("jstree")!==undefined}}),$.jstree.defaults.core={data:!1,strings:!1,check_callback:!1,error:$.noop,animation:200,multiple:!0,themes:{name:!1,url:!1,dir:!1,dots:!0,icons:!0,stripes:!1,variant:!1,responsive:!1},expand_selected_onload:!0,worker:!0,force_text:!1,dblclick_toggle:!0},$.jstree.core.prototype={plugin:function(deco,opts){var Child=$.jstree.plugins[deco];return Child?(this._data[deco]={},Child.prototype=this,new Child(opts,this)):this},init:function(el,options){this._model={data:{},changed:[],force_full_redraw:!1,redraw_timeout:!1,default_state:{loaded:!0,opened:!1,selected:!1,disabled:!1}},this._model.data[$.jstree.root]={id:$.jstree.root,parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}},this.element=$(el).addClass("jstree jstree-"+this._id),this.settings=options,this._data.core.ready=!1,this._data.core.loaded=!1,this._data.core.rtl="rtl"===this.element.css("direction"),this.element[this._data.core.rtl?"addClass":"removeClass"]("jstree-rtl"),this.element.attr("role","tree"),this.settings.core.multiple&&this.element.attr("aria-multiselectable",!0),this.element.attr("tabindex")||this.element.attr("tabindex","0"),this.bind(),this.trigger("init"),this._data.core.original_container_html=this.element.find(" > ul > li").clone(!0),this._data.core.original_container_html.find("li").addBack().contents().filter(function(){return 3===this.nodeType&&(!this.nodeValue||/^\s+$/.test(this.nodeValue))}).remove(),this.element.html("<ul class='jstree-container-ul jstree-children' role='group'><li id='j"+this._id+"_loading' class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='tree-item'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this.element.attr("aria-activedescendant","j"+this._id+"_loading"),this._data.core.li_height=this.get_container_ul().children("li").first().height()||24,this.trigger("loading"),this.load_node($.jstree.root)},destroy:function(keep_html){if(this._wrk)try{window.URL.revokeObjectURL(this._wrk),this._wrk=null}catch(ignore){}keep_html||this.element.empty(),this.teardown()},teardown:function(){this.unbind(),this.element.removeClass("jstree").removeData("jstree").find("[class^='jstree']").addBack().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/gi,"")}),this.element=null},bind:function(){var word="",tout=null,was_click=0;this.element.on("dblclick.jstree",function(e){if(e.target.tagName&&"input"===e.target.tagName.toLowerCase())return!0;if(document.selection&&document.selection.empty)document.selection.empty();else if(window.getSelection){var sel=window.getSelection();try{sel.removeAllRanges(),sel.collapse()}catch(ignore){}}}).on("mousedown.jstree",$.proxy(function(e){e.target===this.element[0]&&(e.preventDefault(),was_click=+new Date)},this)).on("mousedown.jstree",".jstree-ocl",function(e){e.preventDefault()}).on("click.jstree",".jstree-ocl",$.proxy(function(e){this.toggle_node(e.target)},this)).on("dblclick.jstree",".jstree-anchor",$.proxy(function(e){return!(!e.target.tagName||"input"!==e.target.tagName.toLowerCase())||void(this.settings.core.dblclick_toggle&&this.toggle_node(e.target))},this)).on("click.jstree",".jstree-anchor",$.proxy(function(e){e.preventDefault(),e.currentTarget!==document.activeElement&&$(e.currentTarget).focus(),this.activate_node(e.currentTarget,e)},this)).on("keydown.jstree",".jstree-anchor",$.proxy(function(e){if(e.target.tagName&&"input"===e.target.tagName.toLowerCase())return!0;if(32!==e.which&&13!==e.which&&(e.shiftKey||e.ctrlKey||e.altKey||e.metaKey))return!0;var o=null;switch(this._data.core.rtl&&(37===e.which?e.which=39:39===e.which&&(e.which=37)),e.which){case 32:e.ctrlKey&&(e.type="click",$(e.currentTarget).trigger(e));break;case 13:e.type="click",$(e.currentTarget).trigger(e);break;case 37:e.preventDefault(),this.is_open(e.currentTarget)?this.close_node(e.currentTarget):(o=this.get_parent(e.currentTarget),o&&o.id!==$.jstree.root&&this.get_node(o,!0).children(".jstree-anchor").focus());break;case 38:e.preventDefault(),o=this.get_prev_dom(e.currentTarget),o&&o.length&&o.children(".jstree-anchor").focus();break;case 39:e.preventDefault(),this.is_closed(e.currentTarget)?this.open_node(e.currentTarget,function(o){this.get_node(o,!0).children(".jstree-anchor").focus()}):this.is_open(e.currentTarget)&&(o=this.get_node(e.currentTarget,!0).children(".jstree-children")[0],o&&$(this._firstChild(o)).children(".jstree-anchor").focus());break;case 40:e.preventDefault(),o=this.get_next_dom(e.currentTarget),o&&o.length&&o.children(".jstree-anchor").focus();break;case 106:this.open_all();break;case 36:e.preventDefault(),o=this._firstChild(this.get_container_ul()[0]),o&&$(o).children(".jstree-anchor").filter(":visible").focus();break;case 35:e.preventDefault(),this.element.find(".jstree-anchor").filter(":visible").last().focus();break;case 113:e.preventDefault(),this.edit(e.currentTarget)}},this)).on("load_node.jstree",$.proxy(function(e,data){data.status&&(data.node.id!==$.jstree.root||this._data.core.loaded||(this._data.core.loaded=!0,this._firstChild(this.get_container_ul()[0])&&this.element.attr("aria-activedescendant",this._firstChild(this.get_container_ul()[0]).id),this.trigger("loaded")),this._data.core.ready||setTimeout($.proxy(function(){if(this.element&&!this.get_container_ul().find(".jstree-loading").length){if(this._data.core.ready=!0,this._data.core.selected.length){if(this.settings.core.expand_selected_onload){var i,j,tmp=[];for(i=0,j=this._data.core.selected.length;i<j;i++)tmp=tmp.concat(this._model.data[this._data.core.selected[i]].parents);for(tmp=$.vakata.array_unique(tmp),i=0,j=tmp.length;i<j;i++)this.open_node(tmp[i],!1,0)}this.trigger("changed",{action:"ready",selected:this._data.core.selected})}this.trigger("ready")}},this),0))},this)).on("keypress.jstree",$.proxy(function(e){if(e.target.tagName&&"input"===e.target.tagName.toLowerCase())return!0;tout&&clearTimeout(tout),tout=setTimeout(function(){word=""},500);var chr=String.fromCharCode(e.which).toLowerCase(),col=this.element.find(".jstree-anchor").filter(":visible"),ind=col.index(document.activeElement)||0,end=!1;if(word+=chr,word.length>1){if(col.slice(ind).each($.proxy(function(i,v){if(0===$(v).text().toLowerCase().indexOf(word))return $(v).focus(),end=!0,!1},this)),end)return;if(col.slice(0,ind).each($.proxy(function(i,v){if(0===$(v).text().toLowerCase().indexOf(word))return $(v).focus(),end=!0,!1},this)),end)return}if(new RegExp("^"+chr.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")+"+$").test(word)){if(col.slice(ind+1).each($.proxy(function(i,v){if($(v).text().toLowerCase().charAt(0)===chr)return $(v).focus(),end=!0,!1},this)),end)return;if(col.slice(0,ind+1).each($.proxy(function(i,v){if($(v).text().toLowerCase().charAt(0)===chr)return $(v).focus(),end=!0,!1},this)),end)return}},this)).on("init.jstree",$.proxy(function(){var s=this.settings.core.themes;this._data.core.themes.dots=s.dots,this._data.core.themes.stripes=s.stripes,this._data.core.themes.icons=s.icons,this.set_theme(s.name||"default",s.url),this.set_theme_variant(s.variant)},this)).on("loading.jstree",$.proxy(function(){this[this._data.core.themes.dots?"show_dots":"hide_dots"](),this[this._data.core.themes.icons?"show_icons":"hide_icons"](),this[this._data.core.themes.stripes?"show_stripes":"hide_stripes"]()},this)).on("blur.jstree",".jstree-anchor",$.proxy(function(e){this._data.core.focused=null,$(e.currentTarget).filter(".jstree-hovered").mouseleave(),this.element.attr("tabindex","0")},this)).on("focus.jstree",".jstree-anchor",$.proxy(function(e){var tmp=this.get_node(e.currentTarget);tmp&&tmp.id&&(this._data.core.focused=tmp.id),this.element.find(".jstree-hovered").not(e.currentTarget).mouseleave(),$(e.currentTarget).mouseenter(),this.element.attr("tabindex","-1")},this)).on("focus.jstree",$.proxy(function(){if(+new Date-was_click>500&&!this._data.core.focused){was_click=0;var act=this.get_node(this.element.attr("aria-activedescendant"),!0);act&&act.find("> .jstree-anchor").focus()}},this)).on("mouseenter.jstree",".jstree-anchor",$.proxy(function(e){this.hover_node(e.currentTarget)},this)).on("mouseleave.jstree",".jstree-anchor",$.proxy(function(e){this.dehover_node(e.currentTarget)},this))},unbind:function(){this.element.off(".jstree"),$(document).off(".jstree-"+this._id)},trigger:function(ev,data){data||(data={}),data.instance=this,this.element.triggerHandler(ev.replace(".jstree","")+".jstree",data)},get_container:function(){return this.element},get_container_ul:function(){return this.element.children(".jstree-children").first()},get_string:function(key){var a=this.settings.core.strings;return $.isFunction(a)?a.call(this,key):a&&a[key]?a[key]:key},_firstChild:function(dom){for(dom=dom?dom.firstChild:null;null!==dom&&1!==dom.nodeType;)dom=dom.nextSibling;return dom},_nextSibling:function(dom){for(dom=dom?dom.nextSibling:null;null!==dom&&1!==dom.nodeType;)dom=dom.nextSibling;return dom},_previousSibling:function(dom){for(dom=dom?dom.previousSibling:null;null!==dom&&1!==dom.nodeType;)dom=dom.previousSibling;return dom},get_node:function(obj,as_dom){obj&&obj.id&&(obj=obj.id);var dom;try{if(this._model.data[obj])obj=this._model.data[obj];else if("string"==typeof obj&&this._model.data[obj.replace(/^#/,"")])obj=this._model.data[obj.replace(/^#/,"")];else if("string"==typeof obj&&(dom=$("#"+obj.replace($.jstree.idregex,"\\$&"),this.element)).length&&this._model.data[dom.closest(".jstree-node").attr("id")])obj=this._model.data[dom.closest(".jstree-node").attr("id")];else if((dom=$(obj,this.element)).length&&this._model.data[dom.closest(".jstree-node").attr("id")])obj=this._model.data[dom.closest(".jstree-node").attr("id")];else{
if(!(dom=$(obj,this.element)).length||!dom.hasClass("jstree"))return!1;obj=this._model.data[$.jstree.root]}return as_dom&&(obj=obj.id===$.jstree.root?this.element:$("#"+obj.id.replace($.jstree.idregex,"\\$&"),this.element)),obj}catch(ex){return!1}},get_path:function(obj,glue,ids){if(obj=obj.parents?obj:this.get_node(obj),!obj||obj.id===$.jstree.root||!obj.parents)return!1;var i,j,p=[];for(p.push(ids?obj.id:obj.text),i=0,j=obj.parents.length;i<j;i++)p.push(ids?obj.parents[i]:this.get_text(obj.parents[i]));return p=p.reverse().slice(1),glue?p.join(glue):p},get_next_dom:function(obj,strict){var tmp;if(obj=this.get_node(obj,!0),obj[0]===this.element[0]){for(tmp=this._firstChild(this.get_container_ul()[0]);tmp&&0===tmp.offsetHeight;)tmp=this._nextSibling(tmp);return!!tmp&&$(tmp)}if(!obj||!obj.length)return!1;if(strict){tmp=obj[0];do tmp=this._nextSibling(tmp);while(tmp&&0===tmp.offsetHeight);return!!tmp&&$(tmp)}if(obj.hasClass("jstree-open")){for(tmp=this._firstChild(obj.children(".jstree-children")[0]);tmp&&0===tmp.offsetHeight;)tmp=this._nextSibling(tmp);if(null!==tmp)return $(tmp)}tmp=obj[0];do tmp=this._nextSibling(tmp);while(tmp&&0===tmp.offsetHeight);return null!==tmp?$(tmp):obj.parentsUntil(".jstree",".jstree-node").nextAll(".jstree-node:visible").first()},get_prev_dom:function(obj,strict){var tmp;if(obj=this.get_node(obj,!0),obj[0]===this.element[0]){for(tmp=this.get_container_ul()[0].lastChild;tmp&&0===tmp.offsetHeight;)tmp=this._previousSibling(tmp);return!!tmp&&$(tmp)}if(!obj||!obj.length)return!1;if(strict){tmp=obj[0];do tmp=this._previousSibling(tmp);while(tmp&&0===tmp.offsetHeight);return!!tmp&&$(tmp)}tmp=obj[0];do tmp=this._previousSibling(tmp);while(tmp&&0===tmp.offsetHeight);if(null!==tmp){for(obj=$(tmp);obj.hasClass("jstree-open");)obj=obj.children(".jstree-children").first().children(".jstree-node:visible:last");return obj}return tmp=obj[0].parentNode.parentNode,!(!tmp||!tmp.className||tmp.className.indexOf("jstree-node")===-1)&&$(tmp)},get_parent:function(obj){return obj=this.get_node(obj),!(!obj||obj.id===$.jstree.root)&&obj.parent},get_children_dom:function(obj){return obj=this.get_node(obj,!0),obj[0]===this.element[0]?this.get_container_ul().children(".jstree-node"):!(!obj||!obj.length)&&obj.children(".jstree-children").children(".jstree-node")},is_parent:function(obj){return obj=this.get_node(obj),obj&&(obj.state.loaded===!1||obj.children.length>0)},is_loaded:function(obj){return obj=this.get_node(obj),obj&&obj.state.loaded},is_loading:function(obj){return obj=this.get_node(obj),obj&&obj.state&&obj.state.loading},is_open:function(obj){return obj=this.get_node(obj),obj&&obj.state.opened},is_closed:function(obj){return obj=this.get_node(obj),obj&&this.is_parent(obj)&&!obj.state.opened},is_leaf:function(obj){return!this.is_parent(obj)},load_node:function(obj,callback){var k,l,i,j,c;if($.isArray(obj))return this._load_nodes(obj.slice(),callback),!0;if(obj=this.get_node(obj),!obj)return callback&&callback.call(this,obj,!1),!1;if(obj.state.loaded){for(obj.state.loaded=!1,i=0,j=obj.parents.length;i<j;i++)this._model.data[obj.parents[i]].children_d=$.vakata.array_filter(this._model.data[obj.parents[i]].children_d,function(v){return $.inArray(v,obj.children_d)===-1});for(k=0,l=obj.children_d.length;k<l;k++)this._model.data[obj.children_d[k]].state.selected&&(c=!0),delete this._model.data[obj.children_d[k]];c&&(this._data.core.selected=$.vakata.array_filter(this._data.core.selected,function(v){return $.inArray(v,obj.children_d)===-1})),obj.children=[],obj.children_d=[],c&&this.trigger("changed",{action:"load_node",node:obj,selected:this._data.core.selected})}return obj.state.failed=!1,obj.state.loading=!0,this.get_node(obj,!0).addClass("jstree-loading").attr("aria-busy",!0),this._load_node(obj,$.proxy(function(status){obj=this._model.data[obj.id],obj.state.loading=!1,obj.state.loaded=status,obj.state.failed=!obj.state.loaded;var dom=this.get_node(obj,!0),i=0,j=0,m=this._model.data,has_children=!1;for(i=0,j=obj.children.length;i<j;i++)if(m[obj.children[i]]&&!m[obj.children[i]].state.hidden){has_children=!0;break}obj.state.loaded&&dom&&dom.length&&(dom.removeClass("jstree-closed jstree-open jstree-leaf"),has_children?"#"!==obj.id&&dom.addClass(obj.state.opened?"jstree-open":"jstree-closed"):dom.addClass("jstree-leaf")),dom.removeClass("jstree-loading").attr("aria-busy",!1),this.trigger("load_node",{node:obj,status:status}),callback&&callback.call(this,obj,status)},this)),!0},_load_nodes:function(nodes,callback,is_callback,force_reload){var i,j,r=!0,c=function(){this._load_nodes(nodes,callback,!0)},m=this._model.data,tmp=[];for(i=0,j=nodes.length;i<j;i++)m[nodes[i]]&&(!m[nodes[i]].state.loaded&&!m[nodes[i]].state.failed||!is_callback&&force_reload)&&(this.is_loading(nodes[i])||this.load_node(nodes[i],c),r=!1);if(r){for(i=0,j=nodes.length;i<j;i++)m[nodes[i]]&&m[nodes[i]].state.loaded&&tmp.push(nodes[i]);callback&&!callback.done&&(callback.call(this,tmp),callback.done=!0)}},load_all:function(obj,callback){if(obj||(obj=$.jstree.root),obj=this.get_node(obj),!obj)return!1;var i,j,to_load=[],m=this._model.data,c=m[obj.id].children_d;for(obj.state&&!obj.state.loaded&&to_load.push(obj.id),i=0,j=c.length;i<j;i++)m[c[i]]&&m[c[i]].state&&!m[c[i]].state.loaded&&to_load.push(c[i]);to_load.length?this._load_nodes(to_load,function(){this.load_all(obj,callback)}):(callback&&callback.call(this,obj),this.trigger("load_all",{node:obj}))},_load_node:function(obj,callback){var t,s=this.settings.core.data,notTextOrCommentNode=function(){return 3!==this.nodeType&&8!==this.nodeType};return s?$.isFunction(s)?s.call(this,obj,$.proxy(function(d){d===!1?callback.call(this,!1):this["string"==typeof d?"_append_html_data":"_append_json_data"](obj,"string"==typeof d?$($.parseHTML(d)).filter(notTextOrCommentNode):d,function(status){callback.call(this,status)})},this)):"object"==typeof s?s.url?(s=$.extend(!0,{},s),$.isFunction(s.url)&&(s.url=s.url.call(this,obj)),$.isFunction(s.data)&&(s.data=s.data.call(this,obj)),$.ajax(s).done($.proxy(function(d,t,x){var type=x.getResponseHeader("Content-Type");return type&&type.indexOf("json")!==-1||"object"==typeof d?this._append_json_data(obj,d,function(status){callback.call(this,status)}):type&&type.indexOf("html")!==-1||"string"==typeof d?this._append_html_data(obj,$($.parseHTML(d)).filter(notTextOrCommentNode),function(status){callback.call(this,status)}):(this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:obj.id,xhr:x})},this.settings.core.error.call(this,this._data.core.last_error),callback.call(this,!1))},this)).fail($.proxy(function(f){callback.call(this,!1),this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:obj.id,xhr:f})},this.settings.core.error.call(this,this._data.core.last_error)},this))):(t=$.isArray(s)||$.isPlainObject(s)?JSON.parse(JSON.stringify(s)):s,obj.id===$.jstree.root?this._append_json_data(obj,t,function(status){callback.call(this,status)}):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_05",reason:"Could not load node",data:JSON.stringify({id:obj.id})},this.settings.core.error.call(this,this._data.core.last_error),callback.call(this,!1))):"string"==typeof s?obj.id===$.jstree.root?this._append_html_data(obj,$($.parseHTML(s)).filter(notTextOrCommentNode),function(status){callback.call(this,status)}):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_06",reason:"Could not load node",data:JSON.stringify({id:obj.id})},this.settings.core.error.call(this,this._data.core.last_error),callback.call(this,!1)):callback.call(this,!1):obj.id===$.jstree.root?this._append_html_data(obj,this._data.core.original_container_html.clone(!0),function(status){callback.call(this,status)}):callback.call(this,!1)},_node_changed:function(obj){obj=this.get_node(obj),obj&&this._model.changed.push(obj.id)},_append_html_data:function(dom,data,cb){dom=this.get_node(dom),dom.children=[],dom.children_d=[];var tmp,i,j,dat=data.is("ul")?data.children():data,par=dom.id,chd=[],dpc=[],m=this._model.data,p=m[par],s=this._data.core.selected.length;for(dat.each($.proxy(function(i,v){tmp=this._parse_model_from_html($(v),par,p.parents.concat()),tmp&&(chd.push(tmp),dpc.push(tmp),m[tmp].children_d.length&&(dpc=dpc.concat(m[tmp].children_d)))},this)),p.children=chd,p.children_d=dpc,i=0,j=p.parents.length;i<j;i++)m[p.parents[i]].children_d=m[p.parents[i]].children_d.concat(dpc);this.trigger("model",{nodes:dpc,parent:par}),par!==$.jstree.root?(this._node_changed(par),this.redraw()):(this.get_container_ul().children(".jstree-initial-node").remove(),this.redraw(!0)),this._data.core.selected.length!==s&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),cb.call(this,!0)},_append_json_data:function(dom,data,cb,force_processing){if(null!==this.element){dom=this.get_node(dom),dom.children=[],dom.children_d=[],data.d&&(data=data.d,"string"==typeof data&&(data=JSON.parse(data))),$.isArray(data)||(data=[data]);var w=null,args={df:this._model.default_state,dat:data,par:dom.id,m:this._model.data,t_id:this._id,t_cnt:this._cnt,sel:this._data.core.selected},func=function(data,undefined){data.data&&(data=data.data);var tmp,i,j,rslt,dat=data.dat,par=data.par,chd=[],dpc=[],add=[],df=data.df,t_id=data.t_id,t_cnt=data.t_cnt,m=data.m,p=m[par],sel=data.sel,parse_flat=function(d,p,ps){ps=ps?ps.concat():[],p&&ps.unshift(p);var i,j,c,e,tid=d.id.toString(),tmp={id:tid,text:d.text||"",icon:d.icon===undefined||d.icon,parent:p,parents:ps,children:d.children||[],children_d:d.children_d||[],data:d.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(i in df)df.hasOwnProperty(i)&&(tmp.state[i]=df[i]);if(d&&d.data&&d.data.jstree&&d.data.jstree.icon&&(tmp.icon=d.data.jstree.icon),tmp.icon!==undefined&&null!==tmp.icon&&""!==tmp.icon||(tmp.icon=!0),d&&d.data&&(tmp.data=d.data,d.data.jstree))for(i in d.data.jstree)d.data.jstree.hasOwnProperty(i)&&(tmp.state[i]=d.data.jstree[i]);if(d&&"object"==typeof d.state)for(i in d.state)d.state.hasOwnProperty(i)&&(tmp.state[i]=d.state[i]);if(d&&"object"==typeof d.li_attr)for(i in d.li_attr)d.li_attr.hasOwnProperty(i)&&(tmp.li_attr[i]=d.li_attr[i]);if(tmp.li_attr.id||(tmp.li_attr.id=tid),d&&"object"==typeof d.a_attr)for(i in d.a_attr)d.a_attr.hasOwnProperty(i)&&(tmp.a_attr[i]=d.a_attr[i]);for(d&&d.children&&d.children===!0&&(tmp.state.loaded=!1,tmp.children=[],tmp.children_d=[]),m[tmp.id]=tmp,i=0,j=tmp.children.length;i<j;i++)c=parse_flat(m[tmp.children[i]],tmp.id,ps),e=m[c],tmp.children_d.push(c),e.children_d.length&&(tmp.children_d=tmp.children_d.concat(e.children_d));return delete d.data,delete d.children,m[tmp.id].original=d,tmp.state.selected&&add.push(tmp.id),tmp.id},parse_nest=function(d,p,ps){ps=ps?ps.concat():[],p&&ps.unshift(p);var i,j,c,e,tmp,tid=!1;do tid="j"+t_id+"_"+ ++t_cnt;while(m[tid]);tmp={id:!1,text:"string"==typeof d?d:"",icon:"object"!=typeof d||d.icon===undefined||d.icon,parent:p,parents:ps,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(i in df)df.hasOwnProperty(i)&&(tmp.state[i]=df[i]);if(d&&d.id&&(tmp.id=d.id.toString()),d&&d.text&&(tmp.text=d.text),d&&d.data&&d.data.jstree&&d.data.jstree.icon&&(tmp.icon=d.data.jstree.icon),tmp.icon!==undefined&&null!==tmp.icon&&""!==tmp.icon||(tmp.icon=!0),d&&d.data&&(tmp.data=d.data,d.data.jstree))for(i in d.data.jstree)d.data.jstree.hasOwnProperty(i)&&(tmp.state[i]=d.data.jstree[i]);if(d&&"object"==typeof d.state)for(i in d.state)d.state.hasOwnProperty(i)&&(tmp.state[i]=d.state[i]);if(d&&"object"==typeof d.li_attr)for(i in d.li_attr)d.li_attr.hasOwnProperty(i)&&(tmp.li_attr[i]=d.li_attr[i]);if(tmp.li_attr.id&&!tmp.id&&(tmp.id=tmp.li_attr.id.toString()),tmp.id||(tmp.id=tid),tmp.li_attr.id||(tmp.li_attr.id=tmp.id),d&&"object"==typeof d.a_attr)for(i in d.a_attr)d.a_attr.hasOwnProperty(i)&&(tmp.a_attr[i]=d.a_attr[i]);if(d&&d.children&&d.children.length){for(i=0,j=d.children.length;i<j;i++)c=parse_nest(d.children[i],tmp.id,ps),e=m[c],tmp.children.push(c),e.children_d.length&&(tmp.children_d=tmp.children_d.concat(e.children_d));tmp.children_d=tmp.children_d.concat(tmp.children)}return d&&d.children&&d.children===!0&&(tmp.state.loaded=!1,tmp.children=[],tmp.children_d=[]),delete d.data,delete d.children,tmp.original=d,m[tmp.id]=tmp,tmp.state.selected&&add.push(tmp.id),tmp.id};if(dat.length&&dat[0].id!==undefined&&dat[0].parent!==undefined){for(i=0,j=dat.length;i<j;i++)dat[i].children||(dat[i].children=[]),m[dat[i].id.toString()]=dat[i];for(i=0,j=dat.length;i<j;i++)m[dat[i].parent.toString()].children.push(dat[i].id.toString()),p.children_d.push(dat[i].id.toString());for(i=0,j=p.children.length;i<j;i++)tmp=parse_flat(m[p.children[i]],par,p.parents.concat()),dpc.push(tmp),m[tmp].children_d.length&&(dpc=dpc.concat(m[tmp].children_d));for(i=0,j=p.parents.length;i<j;i++)m[p.parents[i]].children_d=m[p.parents[i]].children_d.concat(dpc);rslt={cnt:t_cnt,mod:m,sel:sel,par:par,dpc:dpc,add:add}}else{for(i=0,j=dat.length;i<j;i++)tmp=parse_nest(dat[i],par,p.parents.concat()),tmp&&(chd.push(tmp),dpc.push(tmp),m[tmp].children_d.length&&(dpc=dpc.concat(m[tmp].children_d)));for(p.children=chd,p.children_d=dpc,i=0,j=p.parents.length;i<j;i++)m[p.parents[i]].children_d=m[p.parents[i]].children_d.concat(dpc);rslt={cnt:t_cnt,mod:m,sel:sel,par:par,dpc:dpc,add:add}}return"undefined"!=typeof window&&"undefined"!=typeof window.document?rslt:void postMessage(rslt)},rslt=function(rslt,worker){if(null!==this.element){this._cnt=rslt.cnt;var i,m=this._model.data;for(i in m)m.hasOwnProperty(i)&&m[i].state&&m[i].state.loading&&rslt.mod[i]&&(rslt.mod[i].state.loading=!0);if(this._model.data=rslt.mod,worker){var j,a=rslt.add,r=rslt.sel,s=this._data.core.selected.slice();if(m=this._model.data,r.length!==s.length||$.vakata.array_unique(r.concat(s)).length!==r.length){for(i=0,j=r.length;i<j;i++)$.inArray(r[i],a)===-1&&$.inArray(r[i],s)===-1&&(m[r[i]].state.selected=!1);for(i=0,j=s.length;i<j;i++)$.inArray(s[i],r)===-1&&(m[s[i]].state.selected=!0)}}rslt.add.length&&(this._data.core.selected=this._data.core.selected.concat(rslt.add)),this.trigger("model",{nodes:rslt.dpc,parent:rslt.par}),rslt.par!==$.jstree.root?(this._node_changed(rslt.par),this.redraw()):this.redraw(!0),rslt.add.length&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),cb.call(this,!0)}};if(this.settings.core.worker&&window.Blob&&window.URL&&window.Worker)try{null===this._wrk&&(this._wrk=window.URL.createObjectURL(new window.Blob(["self.onmessage = "+func.toString()],{type:"text/javascript"}))),!this._data.core.working||force_processing?(this._data.core.working=!0,w=new window.Worker(this._wrk),w.onmessage=$.proxy(function(e){rslt.call(this,e.data,!0);try{w.terminate(),w=null}catch(ignore){}this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1},this),args.par?w.postMessage(args):this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1):this._data.core.worker_queue.push([dom,data,cb,!0])}catch(e){rslt.call(this,func(args),!1),this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1}else rslt.call(this,func(args),!1)}},_parse_model_from_html:function(d,p,ps){ps=ps?[].concat(ps):[],p&&ps.unshift(p);var c,e,i,tmp,tid,m=this._model.data,data={id:!1,text:!1,icon:!0,parent:p,parents:ps,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(i in this._model.default_state)this._model.default_state.hasOwnProperty(i)&&(data.state[i]=this._model.default_state[i]);if(tmp=$.vakata.attributes(d,!0),$.each(tmp,function(i,v){return v=$.trim(v),!v.length||(data.li_attr[i]=v,void("id"===i&&(data.id=v.toString())))}),tmp=d.children("a").first(),tmp.length&&(tmp=$.vakata.attributes(tmp,!0),$.each(tmp,function(i,v){v=$.trim(v),v.length&&(data.a_attr[i]=v)})),tmp=d.children("a").first().length?d.children("a").first().clone():d.clone(),tmp.children("ins, i, ul").remove(),tmp=tmp.html(),tmp=$("<div />").html(tmp),data.text=this.settings.core.force_text?tmp.text():tmp.html(),tmp=d.data(),data.data=tmp?$.extend(!0,{},tmp):null,data.state.opened=d.hasClass("jstree-open"),data.state.selected=d.children("a").hasClass("jstree-clicked"),data.state.disabled=d.children("a").hasClass("jstree-disabled"),data.data&&data.data.jstree)for(i in data.data.jstree)data.data.jstree.hasOwnProperty(i)&&(data.state[i]=data.data.jstree[i]);tmp=d.children("a").children(".jstree-themeicon"),tmp.length&&(data.icon=!tmp.hasClass("jstree-themeicon-hidden")&&tmp.attr("rel")),data.state.icon!==undefined&&(data.icon=data.state.icon),data.icon!==undefined&&null!==data.icon&&""!==data.icon||(data.icon=!0),tmp=d.children("ul").children("li");do tid="j"+this._id+"_"+ ++this._cnt;while(m[tid]);return data.id=data.li_attr.id?data.li_attr.id.toString():tid,tmp.length?(tmp.each($.proxy(function(i,v){c=this._parse_model_from_html($(v),data.id,ps),e=this._model.data[c],data.children.push(c),e.children_d.length&&(data.children_d=data.children_d.concat(e.children_d))},this)),data.children_d=data.children_d.concat(data.children)):d.hasClass("jstree-closed")&&(data.state.loaded=!1),data.li_attr.class&&(data.li_attr.class=data.li_attr.class.replace("jstree-closed","").replace("jstree-open","")),data.a_attr.class&&(data.a_attr.class=data.a_attr.class.replace("jstree-clicked","").replace("jstree-disabled","")),m[data.id]=data,data.state.selected&&this._data.core.selected.push(data.id),data.id},_parse_model_from_flat_json:function(d,p,ps){ps=ps?ps.concat():[],p&&ps.unshift(p);var i,j,c,e,tid=d.id.toString(),m=this._model.data,df=this._model.default_state,tmp={id:tid,text:d.text||"",icon:d.icon===undefined||d.icon,parent:p,parents:ps,children:d.children||[],children_d:d.children_d||[],data:d.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(i in df)df.hasOwnProperty(i)&&(tmp.state[i]=df[i]);if(d&&d.data&&d.data.jstree&&d.data.jstree.icon&&(tmp.icon=d.data.jstree.icon),tmp.icon!==undefined&&null!==tmp.icon&&""!==tmp.icon||(tmp.icon=!0),d&&d.data&&(tmp.data=d.data,d.data.jstree))for(i in d.data.jstree)d.data.jstree.hasOwnProperty(i)&&(tmp.state[i]=d.data.jstree[i]);if(d&&"object"==typeof d.state)for(i in d.state)d.state.hasOwnProperty(i)&&(tmp.state[i]=d.state[i]);if(d&&"object"==typeof d.li_attr)for(i in d.li_attr)d.li_attr.hasOwnProperty(i)&&(tmp.li_attr[i]=d.li_attr[i]);if(tmp.li_attr.id||(tmp.li_attr.id=tid),d&&"object"==typeof d.a_attr)for(i in d.a_attr)d.a_attr.hasOwnProperty(i)&&(tmp.a_attr[i]=d.a_attr[i]);for(d&&d.children&&d.children===!0&&(tmp.state.loaded=!1,tmp.children=[],tmp.children_d=[]),m[tmp.id]=tmp,i=0,j=tmp.children.length;i<j;i++)c=this._parse_model_from_flat_json(m[tmp.children[i]],tmp.id,ps),e=m[c],tmp.children_d.push(c),e.children_d.length&&(tmp.children_d=tmp.children_d.concat(e.children_d));return delete d.data,delete d.children,m[tmp.id].original=d,tmp.state.selected&&this._data.core.selected.push(tmp.id),tmp.id},_parse_model_from_json:function(d,p,ps){ps=ps?ps.concat():[],p&&ps.unshift(p);var i,j,c,e,tmp,tid=!1,m=this._model.data,df=this._model.default_state;do tid="j"+this._id+"_"+ ++this._cnt;while(m[tid]);tmp={id:!1,text:"string"==typeof d?d:"",icon:"object"!=typeof d||d.icon===undefined||d.icon,parent:p,parents:ps,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(i in df)df.hasOwnProperty(i)&&(tmp.state[i]=df[i]);if(d&&d.id&&(tmp.id=d.id.toString()),d&&d.text&&(tmp.text=d.text),d&&d.data&&d.data.jstree&&d.data.jstree.icon&&(tmp.icon=d.data.jstree.icon),tmp.icon!==undefined&&null!==tmp.icon&&""!==tmp.icon||(tmp.icon=!0),d&&d.data&&(tmp.data=d.data,d.data.jstree))for(i in d.data.jstree)d.data.jstree.hasOwnProperty(i)&&(tmp.state[i]=d.data.jstree[i]);if(d&&"object"==typeof d.state)for(i in d.state)d.state.hasOwnProperty(i)&&(tmp.state[i]=d.state[i]);if(d&&"object"==typeof d.li_attr)for(i in d.li_attr)d.li_attr.hasOwnProperty(i)&&(tmp.li_attr[i]=d.li_attr[i]);if(tmp.li_attr.id&&!tmp.id&&(tmp.id=tmp.li_attr.id.toString()),tmp.id||(tmp.id=tid),tmp.li_attr.id||(tmp.li_attr.id=tmp.id),d&&"object"==typeof d.a_attr)for(i in d.a_attr)d.a_attr.hasOwnProperty(i)&&(tmp.a_attr[i]=d.a_attr[i]);if(d&&d.children&&d.children.length){for(i=0,j=d.children.length;i<j;i++)c=this._parse_model_from_json(d.children[i],tmp.id,ps),e=m[c],tmp.children.push(c),e.children_d.length&&(tmp.children_d=tmp.children_d.concat(e.children_d));tmp.children_d=tmp.children_d.concat(tmp.children)}return d&&d.children&&d.children===!0&&(tmp.state.loaded=!1,tmp.children=[],tmp.children_d=[]),delete d.data,delete d.children,tmp.original=d,m[tmp.id]=tmp,tmp.state.selected&&this._data.core.selected.push(tmp.id),tmp.id},_redraw:function(){var tmp,i,j,nodes=this._model.force_full_redraw?this._model.data[$.jstree.root].children.concat([]):this._model.changed.concat([]),f=document.createElement("UL"),fe=this._data.core.focused;for(i=0,j=nodes.length;i<j;i++)tmp=this.redraw_node(nodes[i],!0,this._model.force_full_redraw),tmp&&this._model.force_full_redraw&&f.appendChild(tmp);this._model.force_full_redraw&&(f.className=this.get_container_ul()[0].className,f.setAttribute("role","group"),this.element.empty().append(f)),null!==fe&&(tmp=this.get_node(fe,!0),tmp&&tmp.length&&tmp.children(".jstree-anchor")[0]!==document.activeElement?tmp.children(".jstree-anchor").focus():this._data.core.focused=null),this._model.force_full_redraw=!1,this._model.changed=[],this.trigger("redraw",{nodes:nodes})},redraw:function(full){full&&(this._model.force_full_redraw=!0),this._redraw()},draw_children:function(node){var obj=this.get_node(node),i=!1,j=!1,k=!1,d=document;if(!obj)return!1;if(obj.id===$.jstree.root)return this.redraw(!0);if(node=this.get_node(node,!0),!node||!node.length)return!1;if(node.children(".jstree-children").remove(),node=node[0],obj.children.length&&obj.state.loaded){for(k=d.createElement("UL"),k.setAttribute("role","group"),k.className="jstree-children",i=0,j=obj.children.length;i<j;i++)k.appendChild(this.redraw_node(obj.children[i],!0,!0));node.appendChild(k)}},redraw_node:function(node,deep,is_callback,force_render){var obj=this.get_node(node),par=!1,ind=!1,old=!1,i=!1,j=!1,k=!1,c="",d=document,m=this._model.data,f=!1,tmp=null,t=0,l=0,has_children=!1,last_sibling=!1;if(!obj)return!1;if(obj.id===$.jstree.root)return this.redraw(!0);if(deep=deep||0===obj.children.length,node=document.querySelector?this.element[0].querySelector("#"+("0123456789".indexOf(obj.id[0])!==-1?"\\3"+obj.id[0]+" "+obj.id.substr(1).replace($.jstree.idregex,"\\$&"):obj.id.replace($.jstree.idregex,"\\$&"))):document.getElementById(obj.id))node=$(node),is_callback||(par=node.parent().parent()[0],par===this.element[0]&&(par=null),ind=node.index()),deep||!obj.children.length||node.children(".jstree-children").length||(deep=!0),deep||(old=node.children(".jstree-children")[0]),f=node.children(".jstree-anchor")[0]===document.activeElement,node.remove();else if(deep=!0,!is_callback){if(par=obj.parent!==$.jstree.root?$("#"+obj.parent.replace($.jstree.idregex,"\\$&"),this.element)[0]:null,!(null===par||par&&m[obj.parent].state.opened))return!1;ind=$.inArray(obj.id,null===par?m[$.jstree.root].children:m[obj.parent].children)}node=_node.cloneNode(!0),c="jstree-node ";for(i in obj.li_attr)if(obj.li_attr.hasOwnProperty(i)){if("id"===i)continue;"class"!==i?node.setAttribute(i,obj.li_attr[i]):c+=obj.li_attr[i]}for(obj.a_attr.id||(obj.a_attr.id=obj.id+"_anchor"),node.setAttribute("aria-selected",!!obj.state.selected),node.setAttribute("aria-level",obj.parents.length),node.setAttribute("aria-labelledby",obj.a_attr.id),obj.state.disabled&&node.setAttribute("aria-disabled",!0),i=0,j=obj.children.length;i<j;i++)if(!m[obj.children[i]].state.hidden){has_children=!0;break}if(null!==obj.parent&&m[obj.parent]&&!obj.state.hidden&&(i=$.inArray(obj.id,m[obj.parent].children),last_sibling=obj.id,i!==-1))for(i++,j=m[obj.parent].children.length;i<j&&(m[m[obj.parent].children[i]].state.hidden||(last_sibling=m[obj.parent].children[i]),last_sibling===obj.id);i++);obj.state.hidden&&(c+=" jstree-hidden"),obj.state.loaded&&!has_children?c+=" jstree-leaf":(c+=obj.state.opened&&obj.state.loaded?" jstree-open":" jstree-closed",node.setAttribute("aria-expanded",obj.state.opened&&obj.state.loaded)),last_sibling===obj.id&&(c+=" jstree-last"),node.id=obj.id,node.className=c,c=(obj.state.selected?" jstree-clicked":"")+(obj.state.disabled?" jstree-disabled":"");for(j in obj.a_attr)if(obj.a_attr.hasOwnProperty(j)){if("href"===j&&"#"===obj.a_attr[j])continue;"class"!==j?node.childNodes[1].setAttribute(j,obj.a_attr[j]):c+=" "+obj.a_attr[j]}if(c.length&&(node.childNodes[1].className="jstree-anchor "+c),(obj.icon&&obj.icon!==!0||obj.icon===!1)&&(obj.icon===!1?node.childNodes[1].childNodes[0].className+=" jstree-themeicon-hidden":obj.icon.indexOf("/")===-1&&obj.icon.indexOf(".")===-1?node.childNodes[1].childNodes[0].className+=" "+obj.icon+" jstree-themeicon-custom":(node.childNodes[1].childNodes[0].style.backgroundImage='url("'+obj.icon+'")',node.childNodes[1].childNodes[0].style.backgroundPosition="center center",node.childNodes[1].childNodes[0].style.backgroundSize="auto",node.childNodes[1].childNodes[0].className+=" jstree-themeicon-custom")),this.settings.core.force_text?node.childNodes[1].appendChild(d.createTextNode(obj.text)):node.childNodes[1].innerHTML+=obj.text,deep&&obj.children.length&&(obj.state.opened||force_render)&&obj.state.loaded){for(k=d.createElement("UL"),k.setAttribute("role","group"),k.className="jstree-children",i=0,j=obj.children.length;i<j;i++)k.appendChild(this.redraw_node(obj.children[i],deep,!0));node.appendChild(k)}if(old&&node.appendChild(old),!is_callback){for(par||(par=this.element[0]),i=0,j=par.childNodes.length;i<j;i++)if(par.childNodes[i]&&par.childNodes[i].className&&par.childNodes[i].className.indexOf("jstree-children")!==-1){tmp=par.childNodes[i];break}tmp||(tmp=d.createElement("UL"),tmp.setAttribute("role","group"),tmp.className="jstree-children",par.appendChild(tmp)),par=tmp,ind<par.childNodes.length?par.insertBefore(node,par.childNodes[ind]):par.appendChild(node),f&&(t=this.element[0].scrollTop,l=this.element[0].scrollLeft,node.childNodes[1].focus(),this.element[0].scrollTop=t,this.element[0].scrollLeft=l)}return obj.state.opened&&!obj.state.loaded&&(obj.state.opened=!1,setTimeout($.proxy(function(){this.open_node(obj.id,!1,0)},this),0)),node},open_node:function(obj,callback,animation){var t1,t2,d,t;if($.isArray(obj)){for(obj=obj.slice(),t1=0,t2=obj.length;t1<t2;t1++)this.open_node(obj[t1],callback,animation);return!0}return obj=this.get_node(obj),!(!obj||obj.id===$.jstree.root)&&(animation=animation===undefined?this.settings.core.animation:animation,this.is_closed(obj)?this.is_loaded(obj)?(d=this.get_node(obj,!0),t=this,d.length&&(animation&&d.children(".jstree-children").length&&d.children(".jstree-children").stop(!0,!0),obj.children.length&&!this._firstChild(d.children(".jstree-children")[0])&&this.draw_children(obj),animation?(this.trigger("before_open",{node:obj}),d.children(".jstree-children").css("display","none").end().removeClass("jstree-closed").addClass("jstree-open").attr("aria-expanded",!0).children(".jstree-children").stop(!0,!0).slideDown(animation,function(){this.style.display="",t.element&&t.trigger("after_open",{node:obj})})):(this.trigger("before_open",{node:obj}),d[0].className=d[0].className.replace("jstree-closed","jstree-open"),d[0].setAttribute("aria-expanded",!0))),obj.state.opened=!0,callback&&callback.call(this,obj,!0),d.length||this.trigger("before_open",{node:obj}),this.trigger("open_node",{node:obj}),animation&&d.length||this.trigger("after_open",{node:obj}),!0):this.is_loading(obj)?setTimeout($.proxy(function(){this.open_node(obj,callback,animation)},this),500):void this.load_node(obj,function(o,ok){return ok?this.open_node(o,callback,animation):!!callback&&callback.call(this,o,!1)}):(callback&&callback.call(this,obj,!1),!1))},_open_to:function(obj){if(obj=this.get_node(obj),!obj||obj.id===$.jstree.root)return!1;var i,j,p=obj.parents;for(i=0,j=p.length;i<j;i+=1)i!==$.jstree.root&&this.open_node(p[i],!1,0);return $("#"+obj.id.replace($.jstree.idregex,"\\$&"),this.element)},close_node:function(obj,animation){var t1,t2,t,d;if($.isArray(obj)){for(obj=obj.slice(),t1=0,t2=obj.length;t1<t2;t1++)this.close_node(obj[t1],animation);return!0}return obj=this.get_node(obj),!(!obj||obj.id===$.jstree.root)&&(!this.is_closed(obj)&&(animation=animation===undefined?this.settings.core.animation:animation,t=this,d=this.get_node(obj,!0),obj.state.opened=!1,this.trigger("close_node",{node:obj}),void(d.length?animation?d.children(".jstree-children").attr("style","display:block !important").end().removeClass("jstree-open").addClass("jstree-closed").attr("aria-expanded",!1).children(".jstree-children").stop(!0,!0).slideUp(animation,function(){this.style.display="",d.children(".jstree-children").remove(),t.element&&t.trigger("after_close",{node:obj})}):(d[0].className=d[0].className.replace("jstree-open","jstree-closed"),d.attr("aria-expanded",!1).children(".jstree-children").remove(),this.trigger("after_close",{node:obj})):this.trigger("after_close",{node:obj}))))},toggle_node:function(obj){var t1,t2;if($.isArray(obj)){for(obj=obj.slice(),t1=0,t2=obj.length;t1<t2;t1++)this.toggle_node(obj[t1]);return!0}return this.is_closed(obj)?this.open_node(obj):this.is_open(obj)?this.close_node(obj):void 0},open_all:function(obj,animation,original_obj){if(obj||(obj=$.jstree.root),obj=this.get_node(obj),!obj)return!1;var i,j,_this,dom=obj.id===$.jstree.root?this.get_container_ul():this.get_node(obj,!0);if(!dom.length){for(i=0,j=obj.children_d.length;i<j;i++)this.is_closed(this._model.data[obj.children_d[i]])&&(this._model.data[obj.children_d[i]].state.opened=!0);return this.trigger("open_all",{node:obj})}original_obj=original_obj||dom,_this=this,dom=this.is_closed(obj)?dom.find(".jstree-closed").addBack():dom.find(".jstree-closed"),dom.each(function(){_this.open_node(this,function(node,status){status&&this.is_parent(node)&&this.open_all(node,animation,original_obj)},animation||0)}),0===original_obj.find(".jstree-closed").length&&this.trigger("open_all",{node:this.get_node(original_obj)})},close_all:function(obj,animation){if(obj||(obj=$.jstree.root),obj=this.get_node(obj),!obj)return!1;var i,j,dom=obj.id===$.jstree.root?this.get_container_ul():this.get_node(obj,!0),_this=this;for(dom.length&&(dom=this.is_open(obj)?dom.find(".jstree-open").addBack():dom.find(".jstree-open"),$(dom.get().reverse()).each(function(){_this.close_node(this,animation||0)})),i=0,j=obj.children_d.length;i<j;i++)this._model.data[obj.children_d[i]].state.opened=!1;this.trigger("close_all",{node:obj})},is_disabled:function(obj){return obj=this.get_node(obj),obj&&obj.state&&obj.state.disabled},enable_node:function(obj){var t1,t2;if($.isArray(obj)){for(obj=obj.slice(),t1=0,t2=obj.length;t1<t2;t1++)this.enable_node(obj[t1]);return!0}return obj=this.get_node(obj),!(!obj||obj.id===$.jstree.root)&&(obj.state.disabled=!1,this.get_node(obj,!0).children(".jstree-anchor").removeClass("jstree-disabled").attr("aria-disabled",!1),void this.trigger("enable_node",{node:obj}))},disable_node:function(obj){var t1,t2;if($.isArray(obj)){for(obj=obj.slice(),t1=0,t2=obj.length;t1<t2;t1++)this.disable_node(obj[t1]);return!0}return obj=this.get_node(obj),!(!obj||obj.id===$.jstree.root)&&(obj.state.disabled=!0,this.get_node(obj,!0).children(".jstree-anchor").addClass("jstree-disabled").attr("aria-disabled",!0),void this.trigger("disable_node",{node:obj}))},is_hidden:function(obj){return obj=this.get_node(obj),obj.state.hidden===!0},hide_node:function(obj,skip_redraw){var t1,t2;if($.isArray(obj)){for(obj=obj.slice(),t1=0,t2=obj.length;t1<t2;t1++)this.hide_node(obj[t1],!0);return skip_redraw||this.redraw(),
!0}return obj=this.get_node(obj),!(!obj||obj.id===$.jstree.root)&&void(obj.state.hidden||(obj.state.hidden=!0,this._node_changed(obj.parent),skip_redraw||this.redraw(),this.trigger("hide_node",{node:obj})))},show_node:function(obj,skip_redraw){var t1,t2;if($.isArray(obj)){for(obj=obj.slice(),t1=0,t2=obj.length;t1<t2;t1++)this.show_node(obj[t1],!0);return skip_redraw||this.redraw(),!0}return obj=this.get_node(obj),!(!obj||obj.id===$.jstree.root)&&void(obj.state.hidden&&(obj.state.hidden=!1,this._node_changed(obj.parent),skip_redraw||this.redraw(),this.trigger("show_node",{node:obj})))},hide_all:function(skip_redraw){var i,m=this._model.data,ids=[];for(i in m)m.hasOwnProperty(i)&&i!==$.jstree.root&&!m[i].state.hidden&&(m[i].state.hidden=!0,ids.push(i));return this._model.force_full_redraw=!0,skip_redraw||this.redraw(),this.trigger("hide_all",{nodes:ids}),ids},show_all:function(skip_redraw){var i,m=this._model.data,ids=[];for(i in m)m.hasOwnProperty(i)&&i!==$.jstree.root&&m[i].state.hidden&&(m[i].state.hidden=!1,ids.push(i));return this._model.force_full_redraw=!0,skip_redraw||this.redraw(),this.trigger("show_all",{nodes:ids}),ids},activate_node:function(obj,e){if(this.is_disabled(obj))return!1;if(e&&"object"==typeof e||(e={}),this._data.core.last_clicked=this._data.core.last_clicked&&this._data.core.last_clicked.id!==undefined?this.get_node(this._data.core.last_clicked.id):null,this._data.core.last_clicked&&!this._data.core.last_clicked.state.selected&&(this._data.core.last_clicked=null),!this._data.core.last_clicked&&this._data.core.selected.length&&(this._data.core.last_clicked=this.get_node(this._data.core.selected[this._data.core.selected.length-1])),this.settings.core.multiple&&(e.metaKey||e.ctrlKey||e.shiftKey)&&(!e.shiftKey||this._data.core.last_clicked&&this.get_parent(obj)&&this.get_parent(obj)===this._data.core.last_clicked.parent))if(e.shiftKey){var i,j,o=this.get_node(obj).id,l=this._data.core.last_clicked.id,p=this.get_node(this._data.core.last_clicked.parent).children,c=!1;for(i=0,j=p.length;i<j;i+=1)p[i]===o&&(c=!c),p[i]===l&&(c=!c),this.is_disabled(p[i])||!c&&p[i]!==o&&p[i]!==l?this.deselect_node(p[i],!0,e):this.is_hidden(p[i])||this.select_node(p[i],!0,!1,e);this.trigger("changed",{action:"select_node",node:this.get_node(obj),selected:this._data.core.selected,event:e})}else this.is_selected(obj)?this.deselect_node(obj,!1,e):this.select_node(obj,!1,!1,e);else!this.settings.core.multiple&&(e.metaKey||e.ctrlKey||e.shiftKey)&&this.is_selected(obj)?this.deselect_node(obj,!1,e):(this.deselect_all(!0),this.select_node(obj,!1,!1,e),this._data.core.last_clicked=this.get_node(obj));this.trigger("activate_node",{node:this.get_node(obj),event:e})},hover_node:function(obj){if(obj=this.get_node(obj,!0),!obj||!obj.length||obj.children(".jstree-hovered").length)return!1;var o=this.element.find(".jstree-hovered"),t=this.element;o&&o.length&&this.dehover_node(o),obj.children(".jstree-anchor").addClass("jstree-hovered"),this.trigger("hover_node",{node:this.get_node(obj)}),setTimeout(function(){t.attr("aria-activedescendant",obj[0].id)},0)},dehover_node:function(obj){return obj=this.get_node(obj,!0),!!(obj&&obj.length&&obj.children(".jstree-hovered").length)&&(obj.children(".jstree-anchor").removeClass("jstree-hovered"),void this.trigger("dehover_node",{node:this.get_node(obj)}))},select_node:function(obj,supress_event,prevent_open,e){var dom,t1,t2;if($.isArray(obj)){for(obj=obj.slice(),t1=0,t2=obj.length;t1<t2;t1++)this.select_node(obj[t1],supress_event,prevent_open,e);return!0}return obj=this.get_node(obj),!(!obj||obj.id===$.jstree.root)&&(dom=this.get_node(obj,!0),void(obj.state.selected||(obj.state.selected=!0,this._data.core.selected.push(obj.id),prevent_open||(dom=this._open_to(obj)),dom&&dom.length&&dom.attr("aria-selected",!0).children(".jstree-anchor").addClass("jstree-clicked"),this.trigger("select_node",{node:obj,selected:this._data.core.selected,event:e}),supress_event||this.trigger("changed",{action:"select_node",node:obj,selected:this._data.core.selected,event:e}))))},deselect_node:function(obj,supress_event,e){var t1,t2,dom;if($.isArray(obj)){for(obj=obj.slice(),t1=0,t2=obj.length;t1<t2;t1++)this.deselect_node(obj[t1],supress_event,e);return!0}return obj=this.get_node(obj),!(!obj||obj.id===$.jstree.root)&&(dom=this.get_node(obj,!0),void(obj.state.selected&&(obj.state.selected=!1,this._data.core.selected=$.vakata.array_remove_item(this._data.core.selected,obj.id),dom.length&&dom.attr("aria-selected",!1).children(".jstree-anchor").removeClass("jstree-clicked"),this.trigger("deselect_node",{node:obj,selected:this._data.core.selected,event:e}),supress_event||this.trigger("changed",{action:"deselect_node",node:obj,selected:this._data.core.selected,event:e}))))},select_all:function(supress_event){var i,j,tmp=this._data.core.selected.concat([]);for(this._data.core.selected=this._model.data[$.jstree.root].children_d.concat(),i=0,j=this._data.core.selected.length;i<j;i++)this._model.data[this._data.core.selected[i]]&&(this._model.data[this._data.core.selected[i]].state.selected=!0);this.redraw(!0),this.trigger("select_all",{selected:this._data.core.selected}),supress_event||this.trigger("changed",{action:"select_all",selected:this._data.core.selected,old_selection:tmp})},deselect_all:function(supress_event){var i,j,tmp=this._data.core.selected.concat([]);for(i=0,j=this._data.core.selected.length;i<j;i++)this._model.data[this._data.core.selected[i]]&&(this._model.data[this._data.core.selected[i]].state.selected=!1);this._data.core.selected=[],this.element.find(".jstree-clicked").removeClass("jstree-clicked").parent().attr("aria-selected",!1),this.trigger("deselect_all",{selected:this._data.core.selected,node:tmp}),supress_event||this.trigger("changed",{action:"deselect_all",selected:this._data.core.selected,old_selection:tmp})},is_selected:function(obj){return obj=this.get_node(obj),!(!obj||obj.id===$.jstree.root)&&obj.state.selected},get_selected:function(full){return full?$.map(this._data.core.selected,$.proxy(function(i){return this.get_node(i)},this)):this._data.core.selected.slice()},get_top_selected:function(full){var i,j,k,l,tmp=this.get_selected(!0),obj={};for(i=0,j=tmp.length;i<j;i++)obj[tmp[i].id]=tmp[i];for(i=0,j=tmp.length;i<j;i++)for(k=0,l=tmp[i].children_d.length;k<l;k++)obj[tmp[i].children_d[k]]&&delete obj[tmp[i].children_d[k]];tmp=[];for(i in obj)obj.hasOwnProperty(i)&&tmp.push(i);return full?$.map(tmp,$.proxy(function(i){return this.get_node(i)},this)):tmp},get_bottom_selected:function(full){var i,j,tmp=this.get_selected(!0),obj=[];for(i=0,j=tmp.length;i<j;i++)tmp[i].children.length||obj.push(tmp[i].id);return full?$.map(obj,$.proxy(function(i){return this.get_node(i)},this)):obj},get_state:function(){var i,state={core:{open:[],scroll:{left:this.element.scrollLeft(),top:this.element.scrollTop()},selected:[]}};for(i in this._model.data)this._model.data.hasOwnProperty(i)&&i!==$.jstree.root&&(this._model.data[i].state.opened&&state.core.open.push(i),this._model.data[i].state.selected&&state.core.selected.push(i));return state},set_state:function(state,callback){if(state){if(state.core){var _this,i;if(state.core.open)return $.isArray(state.core.open)&&state.core.open.length?this._load_nodes(state.core.open,function(nodes){this.open_node(nodes,!1,0),delete state.core.open,this.set_state(state,callback)}):(delete state.core.open,this.set_state(state,callback)),!1;if(state.core.scroll)return state.core.scroll&&state.core.scroll.left!==undefined&&this.element.scrollLeft(state.core.scroll.left),state.core.scroll&&state.core.scroll.top!==undefined&&this.element.scrollTop(state.core.scroll.top),delete state.core.scroll,this.set_state(state,callback),!1;if(state.core.selected)return _this=this,this.deselect_all(),$.each(state.core.selected,function(i,v){_this.select_node(v,!1,!0)}),delete state.core.selected,this.set_state(state,callback),!1;for(i in state)state.hasOwnProperty(i)&&"core"!==i&&$.inArray(i,this.settings.plugins)===-1&&delete state[i];if($.isEmptyObject(state.core))return delete state.core,this.set_state(state,callback),!1}return!$.isEmptyObject(state)||(state=null,callback&&callback.call(this),this.trigger("set_state"),!1)}return!1},refresh:function(skip_loading,forget_state){this._data.core.state=forget_state===!0?{}:this.get_state(),forget_state&&$.isFunction(forget_state)&&(this._data.core.state=forget_state.call(this,this._data.core.state)),this._cnt=0,this._model.data={},this._model.data[$.jstree.root]={id:$.jstree.root,parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}},this._data.core.selected=[],this._data.core.last_clicked=null,this._data.core.focused=null;var c=this.get_container_ul()[0].className;skip_loading||(this.element.html("<ul class='"+c+"' role='group'><li class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='treeitem' id='j"+this._id+"_loading'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this.element.attr("aria-activedescendant","j"+this._id+"_loading")),this.load_node($.jstree.root,function(o,s){s&&(this.get_container_ul()[0].className=c,this._firstChild(this.get_container_ul()[0])&&this.element.attr("aria-activedescendant",this._firstChild(this.get_container_ul()[0]).id),this.set_state($.extend(!0,{},this._data.core.state),function(){this.trigger("refresh")})),this._data.core.state=null})},refresh_node:function(obj){if(obj=this.get_node(obj),!obj||obj.id===$.jstree.root)return!1;var opened=[],to_load=[],s=this._data.core.selected.concat([]);to_load.push(obj.id),obj.state.opened===!0&&opened.push(obj.id),this.get_node(obj,!0).find(".jstree-open").each(function(){to_load.push(this.id),opened.push(this.id)}),this._load_nodes(to_load,$.proxy(function(nodes){this.open_node(opened,!1,0),this.select_node(s),this.trigger("refresh_node",{node:obj,nodes:nodes})},this),!1,!0)},set_id:function(obj,id){if(obj=this.get_node(obj),!obj||obj.id===$.jstree.root)return!1;var i,j,m=this._model.data,old=obj.id;for(id=id.toString(),m[obj.parent].children[$.inArray(obj.id,m[obj.parent].children)]=id,i=0,j=obj.parents.length;i<j;i++)m[obj.parents[i]].children_d[$.inArray(obj.id,m[obj.parents[i]].children_d)]=id;for(i=0,j=obj.children.length;i<j;i++)m[obj.children[i]].parent=id;for(i=0,j=obj.children_d.length;i<j;i++)m[obj.children_d[i]].parents[$.inArray(obj.id,m[obj.children_d[i]].parents)]=id;return i=$.inArray(obj.id,this._data.core.selected),i!==-1&&(this._data.core.selected[i]=id),i=this.get_node(obj.id,!0),i&&(i.attr("id",id),this.element.attr("aria-activedescendant")===obj.id&&this.element.attr("aria-activedescendant",id)),delete m[obj.id],obj.id=id,obj.li_attr.id=id,m[id]=obj,this.trigger("set_id",{node:obj,new:obj.id,old:old}),!0},get_text:function(obj){return obj=this.get_node(obj),!(!obj||obj.id===$.jstree.root)&&obj.text},set_text:function(obj,val){var t1,t2;if($.isArray(obj)){for(obj=obj.slice(),t1=0,t2=obj.length;t1<t2;t1++)this.set_text(obj[t1],val);return!0}return obj=this.get_node(obj),!(!obj||obj.id===$.jstree.root)&&(obj.text=val,this.get_node(obj,!0).length&&this.redraw_node(obj.id),this.trigger("set_text",{obj:obj,text:val}),!0)},get_json:function(obj,options,flat){if(obj=this.get_node(obj||$.jstree.root),!obj)return!1;options&&options.flat&&!flat&&(flat=[]);var i,j,tmp={id:obj.id,text:obj.text,icon:this.get_icon(obj),li_attr:$.extend(!0,{},obj.li_attr),a_attr:$.extend(!0,{},obj.a_attr),state:{},data:(!options||!options.no_data)&&$.extend(!0,{},obj.data)};if(options&&options.flat?tmp.parent=obj.parent:tmp.children=[],options&&options.no_state)delete tmp.state;else for(i in obj.state)obj.state.hasOwnProperty(i)&&(tmp.state[i]=obj.state[i]);if(options&&options.no_li_attr&&delete tmp.li_attr,options&&options.no_a_attr&&delete tmp.a_attr,options&&options.no_id&&(delete tmp.id,tmp.li_attr&&tmp.li_attr.id&&delete tmp.li_attr.id,tmp.a_attr&&tmp.a_attr.id&&delete tmp.a_attr.id),options&&options.flat&&obj.id!==$.jstree.root&&flat.push(tmp),!options||!options.no_children)for(i=0,j=obj.children.length;i<j;i++)options&&options.flat?this.get_json(obj.children[i],options,flat):tmp.children.push(this.get_json(obj.children[i],options));return options&&options.flat?flat:obj.id===$.jstree.root?tmp.children:tmp},create_node:function(par,node,pos,callback,is_loaded){if(null===par&&(par=$.jstree.root),par=this.get_node(par),!par)return!1;if(pos=pos===undefined?"last":pos,!pos.toString().match(/^(before|after)$/)&&!is_loaded&&!this.is_loaded(par))return this.load_node(par,function(){this.create_node(par,node,pos,callback,!0)});node||(node={text:this.get_string("New node")}),"string"==typeof node&&(node={text:node}),node.text===undefined&&(node.text=this.get_string("New node"));var tmp,dpc,i,j;switch(par.id===$.jstree.root&&("before"===pos&&(pos="first"),"after"===pos&&(pos="last")),pos){case"before":tmp=this.get_node(par.parent),pos=$.inArray(par.id,tmp.children),par=tmp;break;case"after":tmp=this.get_node(par.parent),pos=$.inArray(par.id,tmp.children)+1,par=tmp;break;case"inside":case"first":pos=0;break;case"last":pos=par.children.length;break;default:pos||(pos=0)}if(pos>par.children.length&&(pos=par.children.length),node.id||(node.id=!0),!this.check("create_node",node,par,pos))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(node.id===!0&&delete node.id,node=this._parse_model_from_json(node,par.id,par.parents.concat()),!node)return!1;for(tmp=this.get_node(node),dpc=[],dpc.push(node),dpc=dpc.concat(tmp.children_d),this.trigger("model",{nodes:dpc,parent:par.id}),par.children_d=par.children_d.concat(dpc),i=0,j=par.parents.length;i<j;i++)this._model.data[par.parents[i]].children_d=this._model.data[par.parents[i]].children_d.concat(dpc);for(node=tmp,tmp=[],i=0,j=par.children.length;i<j;i++)tmp[i>=pos?i+1:i]=par.children[i];return tmp[pos]=node.id,par.children=tmp,this.redraw_node(par,!0),callback&&callback.call(this,this.get_node(node)),this.trigger("create_node",{node:this.get_node(node),parent:par.id,position:pos}),node.id},rename_node:function(obj,val){var t1,t2,old;if($.isArray(obj)){for(obj=obj.slice(),t1=0,t2=obj.length;t1<t2;t1++)this.rename_node(obj[t1],val);return!0}return obj=this.get_node(obj),!(!obj||obj.id===$.jstree.root)&&(old=obj.text,this.check("rename_node",obj,this.get_parent(obj),val)?(this.set_text(obj,val),this.trigger("rename_node",{node:obj,text:val,old:old}),!0):(this.settings.core.error.call(this,this._data.core.last_error),!1))},delete_node:function(obj){var t1,t2,par,pos,tmp,i,j,k,l,c,top,lft;if($.isArray(obj)){for(obj=obj.slice(),t1=0,t2=obj.length;t1<t2;t1++)this.delete_node(obj[t1]);return!0}if(obj=this.get_node(obj),!obj||obj.id===$.jstree.root)return!1;if(par=this.get_node(obj.parent),pos=$.inArray(obj.id,par.children),c=!1,!this.check("delete_node",obj,par,pos))return this.settings.core.error.call(this,this._data.core.last_error),!1;for(pos!==-1&&(par.children=$.vakata.array_remove(par.children,pos)),tmp=obj.children_d.concat([]),tmp.push(obj.id),i=0,j=obj.parents.length;i<j;i++)this._model.data[obj.parents[i]].children_d=$.vakata.array_filter(this._model.data[obj.parents[i]].children_d,function(v){return $.inArray(v,tmp)===-1});for(k=0,l=tmp.length;k<l;k++)if(this._model.data[tmp[k]].state.selected){c=!0;break}for(c&&(this._data.core.selected=$.vakata.array_filter(this._data.core.selected,function(v){return $.inArray(v,tmp)===-1})),this.trigger("delete_node",{node:obj,parent:par.id}),c&&this.trigger("changed",{action:"delete_node",node:obj,selected:this._data.core.selected,parent:par.id}),k=0,l=tmp.length;k<l;k++)delete this._model.data[tmp[k]];return $.inArray(this._data.core.focused,tmp)!==-1&&(this._data.core.focused=null,top=this.element[0].scrollTop,lft=this.element[0].scrollLeft,par.id===$.jstree.root?this._model.data[$.jstree.root].children[0]&&this.get_node(this._model.data[$.jstree.root].children[0],!0).children(".jstree-anchor").focus():this.get_node(par,!0).children(".jstree-anchor").focus(),this.element[0].scrollTop=top,this.element[0].scrollLeft=lft),this.redraw_node(par,!0),!0},check:function(chk,obj,par,pos,more){obj=obj&&obj.id?obj:this.get_node(obj),par=par&&par.id?par:this.get_node(par);var tmp=chk.match(/^move_node|copy_node|create_node$/i)?par:obj,chc=this.settings.core.check_callback;return"move_node"!==chk&&"copy_node"!==chk||more&&more.is_multi||obj.id!==par.id&&("move_node"!==chk||$.inArray(obj.id,par.children)!==pos)&&$.inArray(par.id,obj.children_d)===-1?(tmp&&tmp.data&&(tmp=tmp.data),tmp&&tmp.functions&&(tmp.functions[chk]===!1||tmp.functions[chk]===!0)?(tmp.functions[chk]===!1&&(this._data.core.last_error={error:"check",plugin:"core",id:"core_02",reason:"Node data prevents function: "+chk,data:JSON.stringify({chk:chk,pos:pos,obj:!(!obj||!obj.id)&&obj.id,par:!(!par||!par.id)&&par.id})}),tmp.functions[chk]):!(chc===!1||$.isFunction(chc)&&chc.call(this,chk,obj,par,pos,more)===!1||chc&&chc[chk]===!1)||(this._data.core.last_error={error:"check",plugin:"core",id:"core_03",reason:"User config for core.check_callback prevents function: "+chk,data:JSON.stringify({chk:chk,pos:pos,obj:!(!obj||!obj.id)&&obj.id,par:!(!par||!par.id)&&par.id})},!1)):(this._data.core.last_error={error:"check",plugin:"core",id:"core_01",reason:"Moving parent inside child",data:JSON.stringify({chk:chk,pos:pos,obj:!(!obj||!obj.id)&&obj.id,par:!(!par||!par.id)&&par.id})},!1)},last_error:function(){return this._data.core.last_error},move_node:function(obj,par,pos,callback,is_loaded,skip_redraw,origin){var t1,t2,old_par,old_pos,new_par,old_ins,is_multi,dpc,tmp,i,j,k,l,p;if(par=this.get_node(par),pos=pos===undefined?0:pos,!par)return!1;if(!pos.toString().match(/^(before|after)$/)&&!is_loaded&&!this.is_loaded(par))return this.load_node(par,function(){this.move_node(obj,par,pos,callback,!0,!1,origin)});if($.isArray(obj)){if(1!==obj.length){for(t1=0,t2=obj.length;t1<t2;t1++)(tmp=this.move_node(obj[t1],par,pos,callback,is_loaded,!1,origin))&&(par=tmp,pos="after");return this.redraw(),!0}obj=obj[0]}if(obj=obj&&obj.id?obj:this.get_node(obj),!obj||obj.id===$.jstree.root)return!1;if(old_par=(obj.parent||$.jstree.root).toString(),new_par=pos.toString().match(/^(before|after)$/)&&par.id!==$.jstree.root?this.get_node(par.parent):par,old_ins=origin?origin:this._model.data[obj.id]?this:$.jstree.reference(obj.id),is_multi=!old_ins||!old_ins._id||this._id!==old_ins._id,old_pos=old_ins&&old_ins._id&&old_par&&old_ins._model.data[old_par]&&old_ins._model.data[old_par].children?$.inArray(obj.id,old_ins._model.data[old_par].children):-1,old_ins&&old_ins._id&&(obj=old_ins._model.data[obj.id]),is_multi)return!!(tmp=this.copy_node(obj,par,pos,callback,is_loaded,!1,origin))&&(old_ins&&old_ins.delete_node(obj),tmp);switch(par.id===$.jstree.root&&("before"===pos&&(pos="first"),"after"===pos&&(pos="last")),pos){case"before":pos=$.inArray(par.id,new_par.children);break;case"after":pos=$.inArray(par.id,new_par.children)+1;break;case"inside":case"first":pos=0;break;case"last":pos=new_par.children.length;break;default:pos||(pos=0)}if(pos>new_par.children.length&&(pos=new_par.children.length),!this.check("move_node",obj,new_par,pos,{core:!0,origin:origin,is_multi:old_ins&&old_ins._id&&old_ins._id!==this._id,is_foreign:!old_ins||!old_ins._id}))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(obj.parent===new_par.id){for(dpc=new_par.children.concat(),tmp=$.inArray(obj.id,dpc),tmp!==-1&&(dpc=$.vakata.array_remove(dpc,tmp),pos>tmp&&pos--),tmp=[],i=0,j=dpc.length;i<j;i++)tmp[i>=pos?i+1:i]=dpc[i];tmp[pos]=obj.id,new_par.children=tmp,this._node_changed(new_par.id),this.redraw(new_par.id===$.jstree.root)}else{for(tmp=obj.children_d.concat(),tmp.push(obj.id),i=0,j=obj.parents.length;i<j;i++){for(dpc=[],p=old_ins._model.data[obj.parents[i]].children_d,k=0,l=p.length;k<l;k++)$.inArray(p[k],tmp)===-1&&dpc.push(p[k]);old_ins._model.data[obj.parents[i]].children_d=dpc}for(old_ins._model.data[old_par].children=$.vakata.array_remove_item(old_ins._model.data[old_par].children,obj.id),i=0,j=new_par.parents.length;i<j;i++)this._model.data[new_par.parents[i]].children_d=this._model.data[new_par.parents[i]].children_d.concat(tmp);for(dpc=[],i=0,j=new_par.children.length;i<j;i++)dpc[i>=pos?i+1:i]=new_par.children[i];for(dpc[pos]=obj.id,new_par.children=dpc,new_par.children_d.push(obj.id),new_par.children_d=new_par.children_d.concat(obj.children_d),obj.parent=new_par.id,tmp=new_par.parents.concat(),tmp.unshift(new_par.id),p=obj.parents.length,obj.parents=tmp,tmp=tmp.concat(),i=0,j=obj.children_d.length;i<j;i++)this._model.data[obj.children_d[i]].parents=this._model.data[obj.children_d[i]].parents.slice(0,p*-1),Array.prototype.push.apply(this._model.data[obj.children_d[i]].parents,tmp);old_par!==$.jstree.root&&new_par.id!==$.jstree.root||(this._model.force_full_redraw=!0),this._model.force_full_redraw||(this._node_changed(old_par),this._node_changed(new_par.id)),skip_redraw||this.redraw()}return callback&&callback.call(this,obj,new_par,pos),this.trigger("move_node",{node:obj,parent:new_par.id,position:pos,old_parent:old_par,old_position:old_pos,is_multi:old_ins&&old_ins._id&&old_ins._id!==this._id,is_foreign:!old_ins||!old_ins._id,old_instance:old_ins,new_instance:this}),obj.id},copy_node:function(obj,par,pos,callback,is_loaded,skip_redraw,origin){var t1,t2,dpc,tmp,i,j,node,old_par,new_par,old_ins,is_multi;if(par=this.get_node(par),pos=pos===undefined?0:pos,!par)return!1;if(!pos.toString().match(/^(before|after)$/)&&!is_loaded&&!this.is_loaded(par))return this.load_node(par,function(){this.copy_node(obj,par,pos,callback,!0,!1,origin)});if($.isArray(obj)){if(1!==obj.length){for(t1=0,t2=obj.length;t1<t2;t1++)(tmp=this.copy_node(obj[t1],par,pos,callback,is_loaded,!0,origin))&&(par=tmp,pos="after");return this.redraw(),!0}obj=obj[0]}if(obj=obj&&obj.id?obj:this.get_node(obj),!obj||obj.id===$.jstree.root)return!1;switch(old_par=(obj.parent||$.jstree.root).toString(),new_par=pos.toString().match(/^(before|after)$/)&&par.id!==$.jstree.root?this.get_node(par.parent):par,old_ins=origin?origin:this._model.data[obj.id]?this:$.jstree.reference(obj.id),is_multi=!old_ins||!old_ins._id||this._id!==old_ins._id,old_ins&&old_ins._id&&(obj=old_ins._model.data[obj.id]),par.id===$.jstree.root&&("before"===pos&&(pos="first"),"after"===pos&&(pos="last")),pos){case"before":pos=$.inArray(par.id,new_par.children);break;case"after":pos=$.inArray(par.id,new_par.children)+1;break;case"inside":case"first":pos=0;break;case"last":pos=new_par.children.length;break;default:pos||(pos=0)}if(pos>new_par.children.length&&(pos=new_par.children.length),!this.check("copy_node",obj,new_par,pos,{core:!0,origin:origin,is_multi:old_ins&&old_ins._id&&old_ins._id!==this._id,is_foreign:!old_ins||!old_ins._id}))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(node=old_ins?old_ins.get_json(obj,{no_id:!0,no_data:!0,no_state:!0}):obj,!node)return!1;if(node.id===!0&&delete node.id,node=this._parse_model_from_json(node,new_par.id,new_par.parents.concat()),!node)return!1;for(tmp=this.get_node(node),obj&&obj.state&&obj.state.loaded===!1&&(tmp.state.loaded=!1),dpc=[],dpc.push(node),dpc=dpc.concat(tmp.children_d),this.trigger("model",{nodes:dpc,parent:new_par.id}),i=0,j=new_par.parents.length;i<j;i++)this._model.data[new_par.parents[i]].children_d=this._model.data[new_par.parents[i]].children_d.concat(dpc);for(dpc=[],i=0,j=new_par.children.length;i<j;i++)dpc[i>=pos?i+1:i]=new_par.children[i];return dpc[pos]=tmp.id,new_par.children=dpc,new_par.children_d.push(tmp.id),new_par.children_d=new_par.children_d.concat(tmp.children_d),new_par.id===$.jstree.root&&(this._model.force_full_redraw=!0),this._model.force_full_redraw||this._node_changed(new_par.id),skip_redraw||this.redraw(new_par.id===$.jstree.root),callback&&callback.call(this,tmp,new_par,pos),this.trigger("copy_node",{node:tmp,original:obj,parent:new_par.id,position:pos,old_parent:old_par,old_position:old_ins&&old_ins._id&&old_par&&old_ins._model.data[old_par]&&old_ins._model.data[old_par].children?$.inArray(obj.id,old_ins._model.data[old_par].children):-1,is_multi:old_ins&&old_ins._id&&old_ins._id!==this._id,is_foreign:!old_ins||!old_ins._id,old_instance:old_ins,new_instance:this}),tmp.id},cut:function(obj){if(obj||(obj=this._data.core.selected.concat()),$.isArray(obj)||(obj=[obj]),!obj.length)return!1;var o,t1,t2,tmp=[];for(t1=0,t2=obj.length;t1<t2;t1++)o=this.get_node(obj[t1]),o&&o.id&&o.id!==$.jstree.root&&tmp.push(o);return!!tmp.length&&(ccp_node=tmp,ccp_inst=this,ccp_mode="move_node",void this.trigger("cut",{node:obj}))},copy:function(obj){if(obj||(obj=this._data.core.selected.concat()),$.isArray(obj)||(obj=[obj]),!obj.length)return!1;var o,t1,t2,tmp=[];for(t1=0,t2=obj.length;t1<t2;t1++)o=this.get_node(obj[t1]),o&&o.id&&o.id!==$.jstree.root&&tmp.push(o);return!!tmp.length&&(ccp_node=tmp,ccp_inst=this,ccp_mode="copy_node",void this.trigger("copy",{node:obj}))},get_buffer:function(){return{mode:ccp_mode,node:ccp_node,inst:ccp_inst}},can_paste:function(){return ccp_mode!==!1&&ccp_node!==!1},paste:function(obj,pos){return obj=this.get_node(obj),!!(obj&&ccp_mode&&ccp_mode.match(/^(copy_node|move_node)$/)&&ccp_node)&&(this[ccp_mode](ccp_node,obj,pos,!1,!1,!1,ccp_inst)&&this.trigger("paste",{parent:obj.id,node:ccp_node,mode:ccp_mode}),ccp_node=!1,ccp_mode=!1,void(ccp_inst=!1))},clear_buffer:function(){ccp_node=!1,ccp_mode=!1,ccp_inst=!1,this.trigger("clear_buffer")},edit:function(obj,default_text,callback){var rtl,w,a,s,t,h1,h2,fn,tmp,cancel=!1;return!!(obj=this.get_node(obj))&&(this.settings.core.check_callback===!1?(this._data.core.last_error={error:"check",plugin:"core",id:"core_07",reason:"Could not edit node because of check_callback"},this.settings.core.error.call(this,this._data.core.last_error),!1):(tmp=obj,default_text="string"==typeof default_text?default_text:obj.text,this.set_text(obj,""),obj=this._open_to(obj),tmp.text=default_text,rtl=this._data.core.rtl,w=this.element.width(),this._data.core.focused=tmp.id,a=obj.children(".jstree-anchor").focus(),s=$("<span>"),t=default_text,h1=$("<div />",{css:{position:"absolute",top:"-200px",left:rtl?"0px":"-1000px",visibility:"hidden"}}).appendTo("body"),h2=$("<input />",{value:t,class:"jstree-rename-input",css:{padding:"0",border:"1px solid silver","box-sizing":"border-box",display:"inline-block",height:this._data.core.li_height+"px",lineHeight:this._data.core.li_height+"px",width:"150px"},blur:$.proxy(function(e){e.stopImmediatePropagation(),e.preventDefault();var nv,i=s.children(".jstree-rename-input"),v=i.val(),f=this.settings.core.force_text;""===v&&(v=t),h1.remove(),s.replaceWith(a),s.remove(),t=f?t:$("<div></div>").append($.parseHTML(t)).html(),this.set_text(obj,t),nv=!!this.rename_node(obj,f?$("<div></div>").text(v).text():$("<div></div>").append($.parseHTML(v)).html()),nv||this.set_text(obj,t),this._data.core.focused=tmp.id,setTimeout($.proxy(function(){var node=this.get_node(tmp.id,!0);node.length&&(this._data.core.focused=tmp.id,node.children(".jstree-anchor").focus())},this),0),callback&&callback.call(this,tmp,nv,cancel),h2=null},this),keydown:function(e){var key=e.which;27===key&&(cancel=!0,this.value=t),27!==key&&13!==key&&37!==key&&38!==key&&39!==key&&40!==key&&32!==key||e.stopImmediatePropagation(),27!==key&&13!==key||(e.preventDefault(),this.blur())},click:function(e){e.stopImmediatePropagation()},mousedown:function(e){e.stopImmediatePropagation()},keyup:function(e){h2.width(Math.min(h1.text("pW"+this.value).width(),w))},keypress:function(e){if(13===e.which)return!1}}),fn={fontFamily:a.css("fontFamily")||"",fontSize:a.css("fontSize")||"",fontWeight:a.css("fontWeight")||"",fontStyle:a.css("fontStyle")||"",fontStretch:a.css("fontStretch")||"",fontVariant:a.css("fontVariant")||"",letterSpacing:a.css("letterSpacing")||"",wordSpacing:a.css("wordSpacing")||""},s.attr("class",a.attr("class")).append(a.contents().clone()).append(h2),a.replaceWith(s),h1.css(fn),h2.css(fn).width(Math.min(h1.text("pW"+h2[0].value).width(),w))[0].select(),void $(document).one("mousedown.jstree touchstart.jstree dnd_start.vakata",function(e){h2&&e.target!==h2&&$(h2).blur()})))},set_theme:function(theme_name,theme_url){if(!theme_name)return!1;if(theme_url===!0){var dir=this.settings.core.themes.dir;dir||(dir=$.jstree.path+"/themes"),theme_url=dir+"/"+theme_name+"/style.css"}theme_url&&$.inArray(theme_url,themes_loaded)===-1&&($("head").append('<link rel="stylesheet" href="'+theme_url+'" type="text/css" />'),themes_loaded.push(theme_url)),this._data.core.themes.name&&this.element.removeClass("jstree-"+this._data.core.themes.name),this._data.core.themes.name=theme_name,this.element.addClass("jstree-"+theme_name),this.element[this.settings.core.themes.responsive?"addClass":"removeClass"]("jstree-"+theme_name+"-responsive"),this.trigger("set_theme",{theme:theme_name})},get_theme:function(){return this._data.core.themes.name},set_theme_variant:function(variant_name){this._data.core.themes.variant&&this.element.removeClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant),this._data.core.themes.variant=variant_name,variant_name&&this.element.addClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant)},get_theme_variant:function(){return this._data.core.themes.variant},show_stripes:function(){this._data.core.themes.stripes=!0,this.get_container_ul().addClass("jstree-striped")},hide_stripes:function(){this._data.core.themes.stripes=!1,this.get_container_ul().removeClass("jstree-striped")},toggle_stripes:function(){this._data.core.themes.stripes?this.hide_stripes():this.show_stripes()},show_dots:function(){this._data.core.themes.dots=!0,this.get_container_ul().removeClass("jstree-no-dots")},hide_dots:function(){this._data.core.themes.dots=!1,this.get_container_ul().addClass("jstree-no-dots")},toggle_dots:function(){this._data.core.themes.dots?this.hide_dots():this.show_dots()},show_icons:function(){this._data.core.themes.icons=!0,this.get_container_ul().removeClass("jstree-no-icons")},hide_icons:function(){this._data.core.themes.icons=!1,this.get_container_ul().addClass("jstree-no-icons")},toggle_icons:function(){this._data.core.themes.icons?this.hide_icons():this.show_icons()},set_icon:function(obj,icon){var t1,t2,dom,old;if($.isArray(obj)){for(obj=obj.slice(),t1=0,t2=obj.length;t1<t2;t1++)this.set_icon(obj[t1],icon);return!0}return obj=this.get_node(obj),!(!obj||obj.id===$.jstree.root)&&(old=obj.icon,obj.icon=icon===!0||null===icon||icon===undefined||""===icon||icon,dom=this.get_node(obj,!0).children(".jstree-anchor").children(".jstree-themeicon"),icon===!1?this.hide_icon(obj):icon===!0||null===icon||icon===undefined||""===icon?(dom.removeClass("jstree-themeicon-custom "+old).css("background","").removeAttr("rel"),old===!1&&this.show_icon(obj)):icon.indexOf("/")===-1&&icon.indexOf(".")===-1?(dom.removeClass(old).css("background",""),dom.addClass(icon+" jstree-themeicon-custom").attr("rel",icon),old===!1&&this.show_icon(obj)):(dom.removeClass(old).css("background",""),dom.addClass("jstree-themeicon-custom").css("background","url('"+icon+"') center center no-repeat").attr("rel",icon),old===!1&&this.show_icon(obj)),!0)},get_icon:function(obj){return obj=this.get_node(obj),!(!obj||obj.id===$.jstree.root)&&obj.icon},hide_icon:function(obj){var t1,t2;if($.isArray(obj)){for(obj=obj.slice(),t1=0,t2=obj.length;t1<t2;t1++)this.hide_icon(obj[t1]);return!0}return obj=this.get_node(obj),!(!obj||obj===$.jstree.root)&&(obj.icon=!1,this.get_node(obj,!0).children(".jstree-anchor").children(".jstree-themeicon").addClass("jstree-themeicon-hidden"),!0)},show_icon:function(obj){var t1,t2,dom;if($.isArray(obj)){for(obj=obj.slice(),t1=0,t2=obj.length;t1<t2;t1++)this.show_icon(obj[t1]);return!0}return obj=this.get_node(obj),!(!obj||obj===$.jstree.root)&&(dom=this.get_node(obj,!0),obj.icon=!dom.length||dom.children(".jstree-anchor").children(".jstree-themeicon").attr("rel"),obj.icon||(obj.icon=!0),dom.children(".jstree-anchor").children(".jstree-themeicon").removeClass("jstree-themeicon-hidden"),
!0)}},$.vakata={},$.vakata.attributes=function(node,with_values){node=$(node)[0];var attr=with_values?{}:[];return node&&node.attributes&&$.each(node.attributes,function(i,v){$.inArray(v.name.toLowerCase(),["style","contenteditable","hasfocus","tabindex"])===-1&&null!==v.value&&""!==$.trim(v.value)&&(with_values?attr[v.name]=v.value:attr.push(v.name))}),attr},$.vakata.array_unique=function(array){var i,l,a=[],o={};for(i=0,l=array.length;i<l;i++)o[array[i]]===undefined&&(a.push(array[i]),o[array[i]]=!0);return a},$.vakata.array_remove=function(array,from){return array.splice(from,1),array},$.vakata.array_remove_item=function(array,item){var tmp=$.inArray(item,array);return tmp!==-1?$.vakata.array_remove(array,tmp):array},$.vakata.array_filter=function(c,a,b,d,e){if(c.filter)return c.filter(a,b);d=[];for(e in c)~~e+""==e+""&&e>=0&&a.call(b,c[e],+e,c)&&d.push(c[e]);return d},$.jstree.plugins.changed=function(options,parent){var last=[];this.trigger=function(ev,data){var i,j;if(data||(data={}),"changed"===ev.replace(".jstree","")){data.changed={selected:[],deselected:[]};var tmp={};for(i=0,j=last.length;i<j;i++)tmp[last[i]]=1;for(i=0,j=data.selected.length;i<j;i++)tmp[data.selected[i]]?tmp[data.selected[i]]=2:data.changed.selected.push(data.selected[i]);for(i=0,j=last.length;i<j;i++)1===tmp[last[i]]&&data.changed.deselected.push(last[i]);last=data.selected.slice()}parent.trigger.call(this,ev,data)},this.refresh=function(skip_loading,forget_state){return last=[],parent.refresh.apply(this,arguments)}};var _i=document.createElement("I");_i.className="jstree-icon jstree-checkbox",_i.setAttribute("role","presentation"),$.jstree.defaults.checkbox={visible:!0,three_state:!0,whole_node:!0,keep_selected_style:!0,cascade:"",tie_selection:!0},$.jstree.plugins.checkbox=function(options,parent){this.bind=function(){parent.bind.call(this),this._data.checkbox.uto=!1,this._data.checkbox.selected=[],this.settings.checkbox.three_state&&(this.settings.checkbox.cascade="up+down+undetermined"),this.element.on("init.jstree",$.proxy(function(){this._data.checkbox.visible=this.settings.checkbox.visible,this.settings.checkbox.keep_selected_style||this.element.addClass("jstree-checkbox-no-clicked"),this.settings.checkbox.tie_selection&&this.element.addClass("jstree-checkbox-selection")},this)).on("loading.jstree",$.proxy(function(){this[this._data.checkbox.visible?"show_checkboxes":"hide_checkboxes"]()},this)),this.settings.checkbox.cascade.indexOf("undetermined")!==-1&&this.element.on("changed.jstree uncheck_node.jstree check_node.jstree uncheck_all.jstree check_all.jstree move_node.jstree copy_node.jstree redraw.jstree open_node.jstree",$.proxy(function(){this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout($.proxy(this._undetermined,this),50)},this)),this.settings.checkbox.tie_selection||this.element.on("model.jstree",$.proxy(function(e,data){var i,j,m=this._model.data,dpc=(m[data.parent],data.nodes);for(i=0,j=dpc.length;i<j;i++)m[dpc[i]].state.checked=m[dpc[i]].state.checked||m[dpc[i]].original&&m[dpc[i]].original.state&&m[dpc[i]].original.state.checked,m[dpc[i]].state.checked&&this._data.checkbox.selected.push(dpc[i])},this)),this.settings.checkbox.cascade.indexOf("up")===-1&&this.settings.checkbox.cascade.indexOf("down")===-1||this.element.on("model.jstree",$.proxy(function(e,data){var c,i,j,k,l,tmp,m=this._model.data,p=m[data.parent],dpc=data.nodes,chd=[],s=this.settings.checkbox.cascade,t=this.settings.checkbox.tie_selection;if(s.indexOf("down")!==-1)if(p.state[t?"selected":"checked"]){for(i=0,j=dpc.length;i<j;i++)m[dpc[i]].state[t?"selected":"checked"]=!0;this._data[t?"core":"checkbox"].selected=this._data[t?"core":"checkbox"].selected.concat(dpc)}else for(i=0,j=dpc.length;i<j;i++)if(m[dpc[i]].state[t?"selected":"checked"]){for(k=0,l=m[dpc[i]].children_d.length;k<l;k++)m[m[dpc[i]].children_d[k]].state[t?"selected":"checked"]=!0;this._data[t?"core":"checkbox"].selected=this._data[t?"core":"checkbox"].selected.concat(m[dpc[i]].children_d)}if(s.indexOf("up")!==-1){for(i=0,j=p.children_d.length;i<j;i++)m[p.children_d[i]].children.length||chd.push(m[p.children_d[i]].parent);for(chd=$.vakata.array_unique(chd),k=0,l=chd.length;k<l;k++)for(p=m[chd[k]];p&&p.id!==$.jstree.root;){for(c=0,i=0,j=p.children.length;i<j;i++)c+=m[p.children[i]].state[t?"selected":"checked"];if(c!==j)break;p.state[t?"selected":"checked"]=!0,this._data[t?"core":"checkbox"].selected.push(p.id),tmp=this.get_node(p,!0),tmp&&tmp.length&&tmp.attr("aria-selected",!0).children(".jstree-anchor").addClass(t?"jstree-clicked":"jstree-checked"),p=this.get_node(p.parent)}}this._data[t?"core":"checkbox"].selected=$.vakata.array_unique(this._data[t?"core":"checkbox"].selected)},this)).on(this.settings.checkbox.tie_selection?"select_node.jstree":"check_node.jstree",$.proxy(function(e,data){var i,j,c,tmp,obj=data.node,m=this._model.data,par=this.get_node(obj.parent),dom=this.get_node(obj,!0),s=this.settings.checkbox.cascade,t=this.settings.checkbox.tie_selection,sel={},cur=this._data[t?"core":"checkbox"].selected;for(i=0,j=cur.length;i<j;i++)sel[cur[i]]=!0;if(s.indexOf("down")!==-1)for(i=0,j=obj.children_d.length;i<j;i++)sel[obj.children_d[i]]=!0,tmp=m[obj.children_d[i]],tmp.state[t?"selected":"checked"]=!0,tmp&&tmp.original&&tmp.original.state&&tmp.original.state.undetermined&&(tmp.original.state.undetermined=!1);if(s.indexOf("up")!==-1)for(;par&&par.id!==$.jstree.root;){for(c=0,i=0,j=par.children.length;i<j;i++)c+=m[par.children[i]].state[t?"selected":"checked"];if(c!==j)break;par.state[t?"selected":"checked"]=!0,sel[par.id]=!0,tmp=this.get_node(par,!0),tmp&&tmp.length&&tmp.attr("aria-selected",!0).children(".jstree-anchor").addClass(t?"jstree-clicked":"jstree-checked"),par=this.get_node(par.parent)}cur=[];for(i in sel)sel.hasOwnProperty(i)&&cur.push(i);this._data[t?"core":"checkbox"].selected=cur,s.indexOf("down")!==-1&&dom.length&&dom.find(".jstree-anchor").addClass(t?"jstree-clicked":"jstree-checked").parent().attr("aria-selected",!0)},this)).on(this.settings.checkbox.tie_selection?"deselect_all.jstree":"uncheck_all.jstree",$.proxy(function(e,data){var i,j,tmp,obj=this.get_node($.jstree.root),m=this._model.data;for(i=0,j=obj.children_d.length;i<j;i++)tmp=m[obj.children_d[i]],tmp&&tmp.original&&tmp.original.state&&tmp.original.state.undetermined&&(tmp.original.state.undetermined=!1)},this)).on(this.settings.checkbox.tie_selection?"deselect_node.jstree":"uncheck_node.jstree",$.proxy(function(e,data){var i,j,tmp,obj=data.node,dom=this.get_node(obj,!0),s=this.settings.checkbox.cascade,t=this.settings.checkbox.tie_selection,cur=this._data[t?"core":"checkbox"].selected,sel={};if(obj&&obj.original&&obj.original.state&&obj.original.state.undetermined&&(obj.original.state.undetermined=!1),s.indexOf("down")!==-1)for(i=0,j=obj.children_d.length;i<j;i++)tmp=this._model.data[obj.children_d[i]],tmp.state[t?"selected":"checked"]=!1,tmp&&tmp.original&&tmp.original.state&&tmp.original.state.undetermined&&(tmp.original.state.undetermined=!1);if(s.indexOf("up")!==-1)for(i=0,j=obj.parents.length;i<j;i++)tmp=this._model.data[obj.parents[i]],tmp.state[t?"selected":"checked"]=!1,tmp&&tmp.original&&tmp.original.state&&tmp.original.state.undetermined&&(tmp.original.state.undetermined=!1),tmp=this.get_node(obj.parents[i],!0),tmp&&tmp.length&&tmp.attr("aria-selected",!1).children(".jstree-anchor").removeClass(t?"jstree-clicked":"jstree-checked");for(sel={},i=0,j=cur.length;i<j;i++)s.indexOf("down")!==-1&&$.inArray(cur[i],obj.children_d)!==-1||s.indexOf("up")!==-1&&$.inArray(cur[i],obj.parents)!==-1||(sel[cur[i]]=!0);cur=[];for(i in sel)sel.hasOwnProperty(i)&&cur.push(i);this._data[t?"core":"checkbox"].selected=cur,s.indexOf("down")!==-1&&dom.length&&dom.find(".jstree-anchor").removeClass(t?"jstree-clicked":"jstree-checked").parent().attr("aria-selected",!1)},this)),this.settings.checkbox.cascade.indexOf("up")!==-1&&this.element.on("delete_node.jstree",$.proxy(function(e,data){for(var i,j,c,tmp,p=this.get_node(data.parent),m=this._model.data,t=this.settings.checkbox.tie_selection;p&&p.id!==$.jstree.root&&!p.state[t?"selected":"checked"];){for(c=0,i=0,j=p.children.length;i<j;i++)c+=m[p.children[i]].state[t?"selected":"checked"];if(!(j>0&&c===j))break;p.state[t?"selected":"checked"]=!0,this._data[t?"core":"checkbox"].selected.push(p.id),tmp=this.get_node(p,!0),tmp&&tmp.length&&tmp.attr("aria-selected",!0).children(".jstree-anchor").addClass(t?"jstree-clicked":"jstree-checked"),p=this.get_node(p.parent)}},this)).on("move_node.jstree",$.proxy(function(e,data){var p,c,i,j,tmp,is_multi=data.is_multi,old_par=data.old_parent,new_par=this.get_node(data.parent),m=this._model.data,t=this.settings.checkbox.tie_selection;if(!is_multi)for(p=this.get_node(old_par);p&&p.id!==$.jstree.root&&!p.state[t?"selected":"checked"];){for(c=0,i=0,j=p.children.length;i<j;i++)c+=m[p.children[i]].state[t?"selected":"checked"];if(!(j>0&&c===j))break;p.state[t?"selected":"checked"]=!0,this._data[t?"core":"checkbox"].selected.push(p.id),tmp=this.get_node(p,!0),tmp&&tmp.length&&tmp.attr("aria-selected",!0).children(".jstree-anchor").addClass(t?"jstree-clicked":"jstree-checked"),p=this.get_node(p.parent)}for(p=new_par;p&&p.id!==$.jstree.root;){for(c=0,i=0,j=p.children.length;i<j;i++)c+=m[p.children[i]].state[t?"selected":"checked"];if(c===j)p.state[t?"selected":"checked"]||(p.state[t?"selected":"checked"]=!0,this._data[t?"core":"checkbox"].selected.push(p.id),tmp=this.get_node(p,!0),tmp&&tmp.length&&tmp.attr("aria-selected",!0).children(".jstree-anchor").addClass(t?"jstree-clicked":"jstree-checked"));else{if(!p.state[t?"selected":"checked"])break;p.state[t?"selected":"checked"]=!1,this._data[t?"core":"checkbox"].selected=$.vakata.array_remove_item(this._data[t?"core":"checkbox"].selected,p.id),tmp=this.get_node(p,!0),tmp&&tmp.length&&tmp.attr("aria-selected",!1).children(".jstree-anchor").removeClass(t?"jstree-clicked":"jstree-checked")}p=this.get_node(p.parent)}},this))},this._undetermined=function(){if(null!==this.element){var i,j,k,l,o={},m=this._model.data,t=this.settings.checkbox.tie_selection,s=this._data[t?"core":"checkbox"].selected,p=[],tt=this;for(i=0,j=s.length;i<j;i++)if(m[s[i]]&&m[s[i]].parents)for(k=0,l=m[s[i]].parents.length;k<l&&o[m[s[i]].parents[k]]===undefined;k++)m[s[i]].parents[k]!==$.jstree.root&&(o[m[s[i]].parents[k]]=!0,p.push(m[s[i]].parents[k]));for(this.element.find(".jstree-closed").not(":has(.jstree-children)").each(function(){var tmp2,tmp=tt.get_node(this);if(tmp.state.loaded){for(i=0,j=tmp.children_d.length;i<j;i++)if(tmp2=m[tmp.children_d[i]],!tmp2.state.loaded&&tmp2.original&&tmp2.original.state&&tmp2.original.state.undetermined&&tmp2.original.state.undetermined===!0)for(o[tmp2.id]===undefined&&tmp2.id!==$.jstree.root&&(o[tmp2.id]=!0,p.push(tmp2.id)),k=0,l=tmp2.parents.length;k<l;k++)o[tmp2.parents[k]]===undefined&&tmp2.parents[k]!==$.jstree.root&&(o[tmp2.parents[k]]=!0,p.push(tmp2.parents[k]))}else if(tmp.original&&tmp.original.state&&tmp.original.state.undetermined&&tmp.original.state.undetermined===!0)for(o[tmp.id]===undefined&&tmp.id!==$.jstree.root&&(o[tmp.id]=!0,p.push(tmp.id)),k=0,l=tmp.parents.length;k<l;k++)o[tmp.parents[k]]===undefined&&tmp.parents[k]!==$.jstree.root&&(o[tmp.parents[k]]=!0,p.push(tmp.parents[k]))}),this.element.find(".jstree-undetermined").removeClass("jstree-undetermined"),i=0,j=p.length;i<j;i++)m[p[i]].state[t?"selected":"checked"]||(s=this.get_node(p[i],!0),s&&s.length&&s.children(".jstree-anchor").children(".jstree-checkbox").addClass("jstree-undetermined"))}},this.redraw_node=function(obj,deep,is_callback,force_render){if(obj=parent.redraw_node.apply(this,arguments)){var i,j,tmp=null,icon=null;for(i=0,j=obj.childNodes.length;i<j;i++)if(obj.childNodes[i]&&obj.childNodes[i].className&&obj.childNodes[i].className.indexOf("jstree-anchor")!==-1){tmp=obj.childNodes[i];break}tmp&&(!this.settings.checkbox.tie_selection&&this._model.data[obj.id].state.checked&&(tmp.className+=" jstree-checked"),icon=_i.cloneNode(!1),this._model.data[obj.id].state.checkbox_disabled&&(icon.className+=" jstree-checkbox-disabled"),tmp.insertBefore(icon,tmp.childNodes[0]))}return is_callback||this.settings.checkbox.cascade.indexOf("undetermined")===-1||(this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout($.proxy(this._undetermined,this),50)),obj},this.show_checkboxes=function(){this._data.core.themes.checkboxes=!0,this.get_container_ul().removeClass("jstree-no-checkboxes")},this.hide_checkboxes=function(){this._data.core.themes.checkboxes=!1,this.get_container_ul().addClass("jstree-no-checkboxes")},this.toggle_checkboxes=function(){this._data.core.themes.checkboxes?this.hide_checkboxes():this.show_checkboxes()},this.is_undetermined=function(obj){obj=this.get_node(obj);var i,j,s=this.settings.checkbox.cascade,t=this.settings.checkbox.tie_selection,d=this._data[t?"core":"checkbox"].selected,m=this._model.data;if(!obj||obj.state[t?"selected":"checked"]===!0||s.indexOf("undetermined")===-1||s.indexOf("down")===-1&&s.indexOf("up")===-1)return!1;if(!obj.state.loaded&&obj.original.state.undetermined===!0)return!0;for(i=0,j=obj.children_d.length;i<j;i++)if($.inArray(obj.children_d[i],d)!==-1||!m[obj.children_d[i]].state.loaded&&m[obj.children_d[i]].original.state.undetermined)return!0;return!1},this.disable_checkbox=function(obj){var t1,t2,dom;if($.isArray(obj)){for(obj=obj.slice(),t1=0,t2=obj.length;t1<t2;t1++)this.disable_checkbox(obj[t1]);return!0}return obj=this.get_node(obj),!(!obj||obj.id===$.jstree.root)&&(dom=this.get_node(obj,!0),void(obj.state.checkbox_disabled||(obj.state.checkbox_disabled=!0,dom&&dom.length&&dom.children(".jstree-anchor").children(".jstree-checkbox").addClass("jstree-checkbox-disabled"),this.trigger("disable_checkbox",{node:obj}))))},this.enable_checkbox=function(obj){var t1,t2,dom;if($.isArray(obj)){for(obj=obj.slice(),t1=0,t2=obj.length;t1<t2;t1++)this.enable_checkbox(obj[t1]);return!0}return obj=this.get_node(obj),!(!obj||obj.id===$.jstree.root)&&(dom=this.get_node(obj,!0),void(obj.state.checkbox_disabled&&(obj.state.checkbox_disabled=!1,dom&&dom.length&&dom.children(".jstree-anchor").children(".jstree-checkbox").removeClass("jstree-checkbox-disabled"),this.trigger("enable_checkbox",{node:obj}))))},this.activate_node=function(obj,e){return!$(e.target).hasClass("jstree-checkbox-disabled")&&(this.settings.checkbox.tie_selection&&(this.settings.checkbox.whole_node||$(e.target).hasClass("jstree-checkbox"))&&(e.ctrlKey=!0),this.settings.checkbox.tie_selection||!this.settings.checkbox.whole_node&&!$(e.target).hasClass("jstree-checkbox")?parent.activate_node.call(this,obj,e):!this.is_disabled(obj)&&(this.is_checked(obj)?this.uncheck_node(obj,e):this.check_node(obj,e),void this.trigger("activate_node",{node:this.get_node(obj)})))},this.check_node=function(obj,e){if(this.settings.checkbox.tie_selection)return this.select_node(obj,!1,!0,e);var dom,t1,t2;if($.isArray(obj)){for(obj=obj.slice(),t1=0,t2=obj.length;t1<t2;t1++)this.check_node(obj[t1],e);return!0}return obj=this.get_node(obj),!(!obj||obj.id===$.jstree.root)&&(dom=this.get_node(obj,!0),void(obj.state.checked||(obj.state.checked=!0,this._data.checkbox.selected.push(obj.id),dom&&dom.length&&dom.children(".jstree-anchor").addClass("jstree-checked"),this.trigger("check_node",{node:obj,selected:this._data.checkbox.selected,event:e}))))},this.uncheck_node=function(obj,e){if(this.settings.checkbox.tie_selection)return this.deselect_node(obj,!1,e);var t1,t2,dom;if($.isArray(obj)){for(obj=obj.slice(),t1=0,t2=obj.length;t1<t2;t1++)this.uncheck_node(obj[t1],e);return!0}return obj=this.get_node(obj),!(!obj||obj.id===$.jstree.root)&&(dom=this.get_node(obj,!0),void(obj.state.checked&&(obj.state.checked=!1,this._data.checkbox.selected=$.vakata.array_remove_item(this._data.checkbox.selected,obj.id),dom.length&&dom.children(".jstree-anchor").removeClass("jstree-checked"),this.trigger("uncheck_node",{node:obj,selected:this._data.checkbox.selected,event:e}))))},this.check_all=function(){if(this.settings.checkbox.tie_selection)return this.select_all();var i,j;this._data.checkbox.selected.concat([]);for(this._data.checkbox.selected=this._model.data[$.jstree.root].children_d.concat(),i=0,j=this._data.checkbox.selected.length;i<j;i++)this._model.data[this._data.checkbox.selected[i]]&&(this._model.data[this._data.checkbox.selected[i]].state.checked=!0);this.redraw(!0),this.trigger("check_all",{selected:this._data.checkbox.selected})},this.uncheck_all=function(){if(this.settings.checkbox.tie_selection)return this.deselect_all();var i,j,tmp=this._data.checkbox.selected.concat([]);for(i=0,j=this._data.checkbox.selected.length;i<j;i++)this._model.data[this._data.checkbox.selected[i]]&&(this._model.data[this._data.checkbox.selected[i]].state.checked=!1);this._data.checkbox.selected=[],this.element.find(".jstree-checked").removeClass("jstree-checked"),this.trigger("uncheck_all",{selected:this._data.checkbox.selected,node:tmp})},this.is_checked=function(obj){return this.settings.checkbox.tie_selection?this.is_selected(obj):(obj=this.get_node(obj),!(!obj||obj.id===$.jstree.root)&&obj.state.checked)},this.get_checked=function(full){return this.settings.checkbox.tie_selection?this.get_selected(full):full?$.map(this._data.checkbox.selected,$.proxy(function(i){return this.get_node(i)},this)):this._data.checkbox.selected},this.get_top_checked=function(full){if(this.settings.checkbox.tie_selection)return this.get_top_selected(full);var i,j,k,l,tmp=this.get_checked(!0),obj={};for(i=0,j=tmp.length;i<j;i++)obj[tmp[i].id]=tmp[i];for(i=0,j=tmp.length;i<j;i++)for(k=0,l=tmp[i].children_d.length;k<l;k++)obj[tmp[i].children_d[k]]&&delete obj[tmp[i].children_d[k]];tmp=[];for(i in obj)obj.hasOwnProperty(i)&&tmp.push(i);return full?$.map(tmp,$.proxy(function(i){return this.get_node(i)},this)):tmp},this.get_bottom_checked=function(full){if(this.settings.checkbox.tie_selection)return this.get_bottom_selected(full);var i,j,tmp=this.get_checked(!0),obj=[];for(i=0,j=tmp.length;i<j;i++)tmp[i].children.length||obj.push(tmp[i].id);return full?$.map(obj,$.proxy(function(i){return this.get_node(i)},this)):obj},this.load_node=function(obj,callback){var k,l,c,tmp;if(!$.isArray(obj)&&!this.settings.checkbox.tie_selection&&(tmp=this.get_node(obj),tmp&&tmp.state.loaded))for(k=0,l=tmp.children_d.length;k<l;k++)this._model.data[tmp.children_d[k]].state.checked&&(c=!0,this._data.checkbox.selected=$.vakata.array_remove_item(this._data.checkbox.selected,tmp.children_d[k]));return parent.load_node.apply(this,arguments)},this.get_state=function(){var state=parent.get_state.apply(this,arguments);return this.settings.checkbox.tie_selection?state:(state.checkbox=this._data.checkbox.selected.slice(),state)},this.set_state=function(state,callback){var res=parent.set_state.apply(this,arguments);if(res&&state.checkbox){if(!this.settings.checkbox.tie_selection){this.uncheck_all();var _this=this;$.each(state.checkbox,function(i,v){_this.check_node(v)})}return delete state.checkbox,this.set_state(state,callback),!1}return res},this.refresh=function(skip_loading,forget_state){return this.settings.checkbox.tie_selection||(this._data.checkbox.selected=[]),parent.refresh.apply(this,arguments)}},$.jstree.defaults.conditionalselect=function(){return!0},$.jstree.plugins.conditionalselect=function(options,parent){this.activate_node=function(obj,e){this.settings.conditionalselect.call(this,this.get_node(obj),e)&&parent.activate_node.call(this,obj,e)}},$.jstree.defaults.contextmenu={select_node:!0,show_at_node:!0,items:function(o,cb){return{create:{separator_before:!1,separator_after:!0,_disabled:!1,label:"Create",action:function(data){var inst=$.jstree.reference(data.reference),obj=inst.get_node(data.reference);inst.create_node(obj,{},"last",function(new_node){setTimeout(function(){inst.edit(new_node)},0)})}},rename:{separator_before:!1,separator_after:!1,_disabled:!1,label:"Rename",action:function(data){var inst=$.jstree.reference(data.reference),obj=inst.get_node(data.reference);inst.edit(obj)}},remove:{separator_before:!1,icon:!1,separator_after:!1,_disabled:!1,label:"Delete",action:function(data){var inst=$.jstree.reference(data.reference),obj=inst.get_node(data.reference);inst.is_selected(obj)?inst.delete_node(inst.get_selected()):inst.delete_node(obj)}},ccp:{separator_before:!0,icon:!1,separator_after:!1,label:"Edit",action:!1,submenu:{cut:{separator_before:!1,separator_after:!1,label:"Cut",action:function(data){var inst=$.jstree.reference(data.reference),obj=inst.get_node(data.reference);inst.is_selected(obj)?inst.cut(inst.get_top_selected()):inst.cut(obj)}},copy:{separator_before:!1,icon:!1,separator_after:!1,label:"Copy",action:function(data){var inst=$.jstree.reference(data.reference),obj=inst.get_node(data.reference);inst.is_selected(obj)?inst.copy(inst.get_top_selected()):inst.copy(obj)}},paste:{separator_before:!1,icon:!1,_disabled:function(data){return!$.jstree.reference(data.reference).can_paste()},separator_after:!1,label:"Paste",action:function(data){var inst=$.jstree.reference(data.reference),obj=inst.get_node(data.reference);inst.paste(obj)}}}}}}},$.jstree.plugins.contextmenu=function(options,parent){this.bind=function(){parent.bind.call(this);var ex,ey,last_ts=0,cto=null;this.element.on("contextmenu.jstree",".jstree-anchor",$.proxy(function(e,data){"input"!==e.target.tagName.toLowerCase()&&(e.preventDefault(),last_ts=e.ctrlKey?+new Date:0,(data||cto)&&(last_ts=+new Date+1e4),cto&&clearTimeout(cto),this.is_loading(e.currentTarget)||this.show_contextmenu(e.currentTarget,e.pageX,e.pageY,e))},this)).on("click.jstree",".jstree-anchor",$.proxy(function(e){this._data.contextmenu.visible&&(!last_ts||+new Date-last_ts>250)&&$.vakata.context.hide(),last_ts=0},this)).on("touchstart.jstree",".jstree-anchor",function(e){e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches[0]&&(ex=e.originalEvent.changedTouches[0].clientX,ey=e.originalEvent.changedTouches[0].clientY,cto=setTimeout(function(){$(e.currentTarget).trigger("contextmenu",!0)},750))}).on("touchmove.vakata.jstree",function(e){cto&&e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches[0]&&(Math.abs(ex-e.originalEvent.changedTouches[0].clientX)>50||Math.abs(ey-e.originalEvent.changedTouches[0].clientY)>50)&&clearTimeout(cto)}).on("touchend.vakata.jstree",function(e){cto&&clearTimeout(cto)}),$(document).on("context_hide.vakata.jstree",$.proxy(function(e,data){this._data.contextmenu.visible=!1,$(data.reference).removeClass("jstree-context")},this))},this.teardown=function(){this._data.contextmenu.visible&&$.vakata.context.hide(),parent.teardown.call(this)},this.show_contextmenu=function(obj,x,y,e){if(obj=this.get_node(obj),!obj||obj.id===$.jstree.root)return!1;var s=this.settings.contextmenu,d=this.get_node(obj,!0),a=d.children(".jstree-anchor"),o=!1,i=!1;(s.show_at_node||x===undefined||y===undefined)&&(o=a.offset(),x=o.left,y=o.top+this._data.core.li_height),this.settings.contextmenu.select_node&&!this.is_selected(obj)&&this.activate_node(obj,e),i=s.items,$.isFunction(i)&&(i=i.call(this,obj,$.proxy(function(i){this._show_contextmenu(obj,x,y,i)},this))),$.isPlainObject(i)&&this._show_contextmenu(obj,x,y,i)},this._show_contextmenu=function(obj,x,y,i){var d=this.get_node(obj,!0),a=d.children(".jstree-anchor");$(document).one("context_show.vakata.jstree",$.proxy(function(e,data){var cls="jstree-contextmenu jstree-"+this.get_theme()+"-contextmenu";$(data.element).addClass(cls),a.addClass("jstree-context")},this)),this._data.contextmenu.visible=!0,$.vakata.context.show(a,{x:x,y:y},i),this.trigger("show_contextmenu",{node:obj,x:x,y:y})}},function($){var right_to_left=!1,vakata_context={element:!1,reference:!1,position_x:0,position_y:0,items:[],html:"",is_visible:!1};$.vakata.context={settings:{hide_onmouseleave:0,icons:!0},_trigger:function(event_name){$(document).triggerHandler("context_"+event_name+".vakata",{reference:vakata_context.reference,element:vakata_context.element,position:{x:vakata_context.position_x,y:vakata_context.position_y}})},_execute:function(i){return i=vakata_context.items[i],!(!i||i._disabled&&(!$.isFunction(i._disabled)||i._disabled({item:i,reference:vakata_context.reference,element:vakata_context.element}))||!i.action)&&i.action.call(null,{item:i,reference:vakata_context.reference,element:vakata_context.element,position:{x:vakata_context.position_x,y:vakata_context.position_y}})},_parse:function(o,is_callback){if(!o)return!1;is_callback||(vakata_context.html="",vakata_context.items=[]);var tmp,str="",sep=!1;return is_callback&&(str+="<ul>"),$.each(o,function(i,val){return!val||(vakata_context.items.push(val),!sep&&val.separator_before&&(str+="<li class='vakata-context-separator'><a href='#' "+($.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;</a></li>"),sep=!1,str+="<li class='"+(val._class||"")+(val._disabled===!0||$.isFunction(val._disabled)&&val._disabled({item:val,reference:vakata_context.reference,element:vakata_context.element})?" vakata-contextmenu-disabled ":"")+"' "+(val.shortcut?" data-shortcut='"+val.shortcut+"' ":"")+">",str+="<a href='#' rel='"+(vakata_context.items.length-1)+"' "+(val.title?"title='"+val.title+"'":"")+">",$.vakata.context.settings.icons&&(str+="<i ",val.icon&&(str+=val.icon.indexOf("/")!==-1||val.icon.indexOf(".")!==-1?" style='background:url(\""+val.icon+"\") center center no-repeat' ":" class='"+val.icon+"' "),str+="></i><span class='vakata-contextmenu-sep'>&#160;</span>"),str+=($.isFunction(val.label)?val.label({item:i,reference:vakata_context.reference,element:vakata_context.element}):val.label)+(val.shortcut?' <span class="vakata-contextmenu-shortcut vakata-contextmenu-shortcut-'+val.shortcut+'">'+(val.shortcut_label||"")+"</span>":"")+"</a>",val.submenu&&(tmp=$.vakata.context._parse(val.submenu,!0),tmp&&(str+=tmp)),str+="</li>",void(val.separator_after&&(str+="<li class='vakata-context-separator'><a href='#' "+($.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;</a></li>",sep=!0)))}),str=str.replace(/<li class\='vakata-context-separator'\><\/li\>$/,""),is_callback&&(str+="</ul>"),is_callback||(vakata_context.html=str,$.vakata.context._trigger("parse")),str.length>10&&str},_show_submenu:function(o){if(o=$(o),o.length&&o.children("ul").length){var e=o.children("ul"),xl=o.offset().left,x=xl+o.outerWidth(),y=o.offset().top,w=e.width(),h=e.height(),dw=$(window).width()+$(window).scrollLeft(),dh=$(window).height()+$(window).scrollTop();right_to_left?o[x-(w+10+o.outerWidth())<0?"addClass":"removeClass"]("vakata-context-left"):o[x+w>dw&&xl>dw-x?"addClass":"removeClass"]("vakata-context-right"),y+h+10>dh&&e.css("bottom","-1px"),o.hasClass("vakata-context-right")?xl<w&&e.css("margin-right",xl-w):dw-x<w&&e.css("margin-left",dw-x-w),e.show()}},show:function(reference,position,data){var o,e,x,y,w,h,dw,dh,cond=!0;switch(vakata_context.element&&vakata_context.element.length&&vakata_context.element.width(""),cond){case!position&&!reference:return!1;case!!position&&!!reference:vakata_context.reference=reference,vakata_context.position_x=position.x,vakata_context.position_y=position.y;break;case!position&&!!reference:vakata_context.reference=reference,o=reference.offset(),vakata_context.position_x=o.left+reference.outerHeight(),vakata_context.position_y=o.top;break;case!!position&&!reference:vakata_context.position_x=position.x,vakata_context.position_y=position.y}reference&&!data&&$(reference).data("vakata_contextmenu")&&(data=$(reference).data("vakata_contextmenu")),$.vakata.context._parse(data)&&vakata_context.element.html(vakata_context.html),vakata_context.items.length&&(vakata_context.element.appendTo("body"),e=vakata_context.element,x=vakata_context.position_x,y=vakata_context.position_y,w=e.width(),h=e.height(),dw=$(window).width()+$(window).scrollLeft(),dh=$(window).height()+$(window).scrollTop(),right_to_left&&(x-=e.outerWidth()-$(reference).outerWidth(),x<$(window).scrollLeft()+20&&(x=$(window).scrollLeft()+20)),x+w+20>dw&&(x=dw-(w+20)),y+h+20>dh&&(y=dh-(h+20)),vakata_context.element.css({left:x,top:y}).show().find("a").first().focus().parent().addClass("vakata-context-hover"),vakata_context.is_visible=!0,$.vakata.context._trigger("show"))},hide:function(){vakata_context.is_visible&&(vakata_context.element.hide().find("ul").hide().end().find(":focus").blur().end().detach(),vakata_context.is_visible=!1,$.vakata.context._trigger("hide"))}},$(function(){right_to_left="rtl"===$("body").css("direction");var to=!1;vakata_context.element=$("<ul class='vakata-context'></ul>"),vakata_context.element.on("mouseenter","li",function(e){e.stopImmediatePropagation(),$.contains(this,e.relatedTarget)||(to&&clearTimeout(to),vakata_context.element.find(".vakata-context-hover").removeClass("vakata-context-hover").end(),$(this).siblings().find("ul").hide().end().end().parentsUntil(".vakata-context","li").addBack().addClass("vakata-context-hover"),$.vakata.context._show_submenu(this))}).on("mouseleave","li",function(e){$.contains(this,e.relatedTarget)||$(this).find(".vakata-context-hover").addBack().removeClass("vakata-context-hover")}).on("mouseleave",function(e){$(this).find(".vakata-context-hover").removeClass("vakata-context-hover"),$.vakata.context.settings.hide_onmouseleave&&(to=setTimeout(function(t){return function(){$.vakata.context.hide()}}(this),$.vakata.context.settings.hide_onmouseleave))}).on("click","a",function(e){e.preventDefault(),$(this).blur().parent().hasClass("vakata-context-disabled")||$.vakata.context._execute($(this).attr("rel"))===!1||$.vakata.context.hide()}).on("keydown","a",function(e){var o=null;switch(e.which){case 13:case 32:e.type="mouseup",e.preventDefault(),$(e.currentTarget).trigger(e);break;case 37:vakata_context.is_visible&&(vakata_context.element.find(".vakata-context-hover").last().closest("li").first().find("ul").hide().find(".vakata-context-hover").removeClass("vakata-context-hover").end().end().children("a").focus(),e.stopImmediatePropagation(),e.preventDefault());break;case 38:vakata_context.is_visible&&(o=vakata_context.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").prevAll("li:not(.vakata-context-separator)").first(),o.length||(o=vakata_context.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").last()),o.addClass("vakata-context-hover").children("a").focus(),e.stopImmediatePropagation(),e.preventDefault());break;case 39:vakata_context.is_visible&&(vakata_context.element.find(".vakata-context-hover").last().children("ul").show().children("li:not(.vakata-context-separator)").removeClass("vakata-context-hover").first().addClass("vakata-context-hover").children("a").focus(),e.stopImmediatePropagation(),e.preventDefault());break;case 40:vakata_context.is_visible&&(o=vakata_context.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").nextAll("li:not(.vakata-context-separator)").first(),o.length||(o=vakata_context.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").first()),o.addClass("vakata-context-hover").children("a").focus(),e.stopImmediatePropagation(),e.preventDefault());break;case 27:$.vakata.context.hide(),e.preventDefault()}}).on("keydown",function(e){e.preventDefault();var a=vakata_context.element.find(".vakata-contextmenu-shortcut-"+e.which).parent();a.parent().not(".vakata-context-disabled")&&a.click()}),$(document).on("mousedown.vakata.jstree",function(e){vakata_context.is_visible&&!$.contains(vakata_context.element[0],e.target)&&$.vakata.context.hide()}).on("context_show.vakata.jstree",function(e,data){vakata_context.element.find("li:has(ul)").children("a").addClass("vakata-context-parent"),right_to_left&&vakata_context.element.addClass("vakata-context-rtl").css("direction","rtl"),vakata_context.element.find("ul").hide().end()})})}($),$.jstree.defaults.dnd={copy:!0,open_timeout:500,
is_draggable:!0,check_while_dragging:!0,always_copy:!1,inside_pos:0,drag_selection:!0,touch:!0,large_drop_target:!1,large_drag_target:!1,use_html5:!1};var drg,elm;$.jstree.plugins.dnd=function(options,parent){this.init=function(el,options){parent.init.call(this,el,options),this.settings.dnd.use_html5=this.settings.dnd.use_html5&&"draggable"in document.createElement("span")},this.bind=function(){parent.bind.call(this),this.element.on(this.settings.dnd.use_html5?"dragstart.jstree":"mousedown.jstree touchstart.jstree",this.settings.dnd.large_drag_target?".jstree-node":".jstree-anchor",$.proxy(function(e){if(this.settings.dnd.large_drag_target&&$(e.target).closest(".jstree-node")[0]!==e.currentTarget)return!0;if("touchstart"===e.type&&(!this.settings.dnd.touch||"selected"===this.settings.dnd.touch&&!$(e.currentTarget).closest(".jstree-node").children(".jstree-anchor").hasClass("jstree-clicked")))return!0;var obj=this.get_node(e.target),mlt=this.is_selected(obj)&&this.settings.dnd.drag_selection?this.get_top_selected().length:1,txt=mlt>1?mlt+" "+this.get_string("nodes"):this.get_text(e.currentTarget);if(this.settings.core.force_text&&(txt=$.vakata.html.escape(txt)),obj&&obj.id&&obj.id!==$.jstree.root&&(1===e.which||"touchstart"===e.type||"dragstart"===e.type)&&(this.settings.dnd.is_draggable===!0||$.isFunction(this.settings.dnd.is_draggable)&&this.settings.dnd.is_draggable.call(this,mlt>1?this.get_top_selected(!0):[obj],e))){if(drg={jstree:!0,origin:this,obj:this.get_node(obj,!0),nodes:mlt>1?this.get_top_selected():[obj.id]},elm=e.currentTarget,!this.settings.dnd.use_html5)return this.element.trigger("mousedown.jstree"),$.vakata.dnd.start(e,drg,'<div id="jstree-dnd" class="jstree-'+this.get_theme()+" jstree-"+this.get_theme()+"-"+this.get_theme_variant()+" "+(this.settings.core.themes.responsive?" jstree-dnd-responsive":"")+'"><i class="jstree-icon jstree-er"></i>'+txt+'<ins class="jstree-copy" style="display:none;">+</ins></div>');$.vakata.dnd._trigger("start",e,{helper:$(),element:elm,data:drg})}},this)),this.settings.dnd.use_html5&&this.element.on("dragover.jstree",function(e){return e.preventDefault(),$.vakata.dnd._trigger("move",e,{helper:$(),element:elm,data:drg}),!1}).on("drop.jstree",$.proxy(function(e){return e.preventDefault(),$.vakata.dnd._trigger("stop",e,{helper:$(),element:elm,data:drg}),!1},this))},this.redraw_node=function(obj,deep,callback,force_render){if(obj=parent.redraw_node.apply(this,arguments),obj&&this.settings.dnd.use_html5)if(this.settings.dnd.large_drag_target)obj.setAttribute("draggable",!0);else{var i,j,tmp=null;for(i=0,j=obj.childNodes.length;i<j;i++)if(obj.childNodes[i]&&obj.childNodes[i].className&&obj.childNodes[i].className.indexOf("jstree-anchor")!==-1){tmp=obj.childNodes[i];break}tmp&&tmp.setAttribute("draggable",!0)}return obj}},$(function(){var lastmv=!1,laster=!1,lastev=!1,opento=!1,marker=$('<div id="jstree-marker">&#160;</div>').hide();$(document).on("dnd_start.vakata.jstree",function(e,data){lastmv=!1,lastev=!1,data&&data.data&&data.data.jstree&&marker.appendTo("body")}).on("dnd_move.vakata.jstree",function(e,data){if(opento&&(data.event&&"dragover"===data.event.type&&data.event.target===lastev.target||clearTimeout(opento)),data&&data.data&&data.data.jstree&&(!data.event.target.id||"jstree-marker"!==data.event.target.id)){lastev=data.event;var l,t,h,p,i,o,ok,t1,t2,op,ps,pr,ip,tm,is_copy,pn,ins=$.jstree.reference(data.event.target),ref=!1,off=!1,rel=!1;if(ins&&ins._data&&ins._data.dnd)if(marker.attr("class","jstree-"+ins.get_theme()+(ins.settings.core.themes.responsive?" jstree-dnd-responsive":"")),is_copy=data.data.origin&&(data.data.origin.settings.dnd.always_copy||data.data.origin.settings.dnd.copy&&(data.event.metaKey||data.event.ctrlKey)),data.helper.children().attr("class","jstree-"+ins.get_theme()+" jstree-"+ins.get_theme()+"-"+ins.get_theme_variant()+" "+(ins.settings.core.themes.responsive?" jstree-dnd-responsive":"")).find(".jstree-copy").first()[is_copy?"show":"hide"](),data.event.target!==ins.element[0]&&data.event.target!==ins.get_container_ul()[0]||0!==ins.get_container_ul().children().length){if(ref=ins.settings.dnd.large_drop_target?$(data.event.target).closest(".jstree-node").children(".jstree-anchor"):$(data.event.target).closest(".jstree-anchor"),ref&&ref.length&&ref.parent().is(".jstree-closed, .jstree-open, .jstree-leaf")&&(off=ref.offset(),rel=(data.event.pageY!==undefined?data.event.pageY:data.event.originalEvent.pageY)-off.top,h=ref.outerHeight(),o=rel<h/3?["b","i","a"]:rel>h-h/3?["a","i","b"]:rel>h/2?["i","a","b"]:["i","b","a"],$.each(o,function(j,v){switch(v){case"b":l=off.left-6,t=off.top,p=ins.get_parent(ref),i=ref.parent().index();break;case"i":ip=ins.settings.dnd.inside_pos,tm=ins.get_node(ref.parent()),l=off.left-2,t=off.top+h/2+1,p=tm.id,i="first"===ip?0:"last"===ip?tm.children.length:Math.min(ip,tm.children.length);break;case"a":l=off.left-6,t=off.top+h,p=ins.get_parent(ref),i=ref.parent().index()+1}for(ok=!0,t1=0,t2=data.data.nodes.length;t1<t2;t1++)if(op=data.data.origin&&(data.data.origin.settings.dnd.always_copy||data.data.origin.settings.dnd.copy&&(data.event.metaKey||data.event.ctrlKey))?"copy_node":"move_node",ps=i,"move_node"===op&&"a"===v&&data.data.origin&&data.data.origin===ins&&p===ins.get_parent(data.data.nodes[t1])&&(pr=ins.get_node(p),ps>$.inArray(data.data.nodes[t1],pr.children)&&(ps-=1)),ok=ok&&(ins&&ins.settings&&ins.settings.dnd&&ins.settings.dnd.check_while_dragging===!1||ins.check(op,data.data.origin&&data.data.origin!==ins?data.data.origin.get_node(data.data.nodes[t1]):data.data.nodes[t1],p,ps,{dnd:!0,ref:ins.get_node(ref.parent()),pos:v,origin:data.data.origin,is_multi:data.data.origin&&data.data.origin!==ins,is_foreign:!data.data.origin})),!ok){ins&&ins.last_error&&(laster=ins.last_error());break}if("i"===v&&ref.parent().is(".jstree-closed")&&ins.settings.dnd.open_timeout&&(opento=setTimeout(function(x,z){return function(){x.open_node(z)}}(ins,ref),ins.settings.dnd.open_timeout)),ok)return pn=ins.get_node(p,!0),pn.hasClass(".jstree-dnd-parent")||($(".jstree-dnd-parent").removeClass("jstree-dnd-parent"),pn.addClass("jstree-dnd-parent")),lastmv={ins:ins,par:p,pos:"i"!==v||"last"!==ip||0!==i||ins.is_loaded(tm)?i:"last"},marker.css({left:l+"px",top:t+"px"}).show(),data.helper.find(".jstree-icon").first().removeClass("jstree-er").addClass("jstree-ok"),data.event.originalEvent&&data.event.originalEvent.dataTransfer&&(data.event.originalEvent.dataTransfer.dropEffect=is_copy?"copy":"move"),laster={},o=!0,!1}),o===!0))return}else{for(ok=!0,t1=0,t2=data.data.nodes.length;t1<t2&&(ok=ok&&ins.check(data.data.origin&&(data.data.origin.settings.dnd.always_copy||data.data.origin.settings.dnd.copy&&(data.event.metaKey||data.event.ctrlKey))?"copy_node":"move_node",data.data.origin&&data.data.origin!==ins?data.data.origin.get_node(data.data.nodes[t1]):data.data.nodes[t1],$.jstree.root,"last",{dnd:!0,ref:ins.get_node($.jstree.root),pos:"i",origin:data.data.origin,is_multi:data.data.origin&&data.data.origin!==ins,is_foreign:!data.data.origin}),ok);t1++);if(ok)return lastmv={ins:ins,par:$.jstree.root,pos:"last"},marker.hide(),data.helper.find(".jstree-icon").first().removeClass("jstree-er").addClass("jstree-ok"),void(data.event.originalEvent&&data.event.originalEvent.dataTransfer&&(data.event.originalEvent.dataTransfer.dropEffect=is_copy?"copy":"move"))}$(".jstree-dnd-parent").removeClass("jstree-dnd-parent"),lastmv=!1,data.helper.find(".jstree-icon").removeClass("jstree-ok").addClass("jstree-er"),data.event.originalEvent&&data.event.originalEvent.dataTransfer&&(data.event.originalEvent.dataTransfer.dropEffect="none"),marker.hide()}}).on("dnd_scroll.vakata.jstree",function(e,data){data&&data.data&&data.data.jstree&&(marker.hide(),lastmv=!1,lastev=!1,data.helper.find(".jstree-icon").first().removeClass("jstree-ok").addClass("jstree-er"))}).on("dnd_stop.vakata.jstree",function(e,data){if($(".jstree-dnd-parent").removeClass("jstree-dnd-parent"),opento&&clearTimeout(opento),data&&data.data&&data.data.jstree){marker.hide().detach();var i,j,nodes=[];if(lastmv){for(i=0,j=data.data.nodes.length;i<j;i++)nodes[i]=data.data.origin?data.data.origin.get_node(data.data.nodes[i]):data.data.nodes[i];lastmv.ins[data.data.origin&&(data.data.origin.settings.dnd.always_copy||data.data.origin.settings.dnd.copy&&(data.event.metaKey||data.event.ctrlKey))?"copy_node":"move_node"](nodes,lastmv.par,lastmv.pos,!1,!1,!1,data.data.origin)}else i=$(data.event.target).closest(".jstree"),i.length&&laster&&laster.error&&"check"===laster.error&&(i=i.jstree(!0),i&&i.settings.core.error.call(this,laster));lastev=!1,lastmv=!1}}).on("keyup.jstree keydown.jstree",function(e,data){data=$.vakata.dnd._get(),data&&data.data&&data.data.jstree&&("keyup"===e.type&&27===e.which?(opento&&clearTimeout(opento),lastmv=!1,laster=!1,lastev=!1,opento=!1,marker.hide().detach(),$.vakata.dnd._clean()):(data.helper.find(".jstree-copy").first()[data.data.origin&&(data.data.origin.settings.dnd.always_copy||data.data.origin.settings.dnd.copy&&(e.metaKey||e.ctrlKey))?"show":"hide"](),lastev&&(lastev.metaKey=e.metaKey,lastev.ctrlKey=e.ctrlKey,$.vakata.dnd._trigger("move",lastev))))})}),function($){$.vakata.html={div:$("<div />"),escape:function(str){return $.vakata.html.div.text(str).html()},strip:function(str){return $.vakata.html.div.empty().append($.parseHTML(str)).text()}};var vakata_dnd={element:!1,target:!1,is_down:!1,is_drag:!1,helper:!1,helper_w:0,data:!1,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:!1,scroll_i:!1,is_touch:!1};$.vakata.dnd={settings:{scroll_speed:10,scroll_proximity:20,helper_left:5,helper_top:10,threshold:5,threshold_touch:50},_trigger:function(event_name,e,data){data===undefined&&(data=$.vakata.dnd._get()),data.event=e,$(document).triggerHandler("dnd_"+event_name+".vakata",data)},_get:function(){return{data:vakata_dnd.data,element:vakata_dnd.element,helper:vakata_dnd.helper}},_clean:function(){vakata_dnd.helper&&vakata_dnd.helper.remove(),vakata_dnd.scroll_i&&(clearInterval(vakata_dnd.scroll_i),vakata_dnd.scroll_i=!1),vakata_dnd={element:!1,target:!1,is_down:!1,is_drag:!1,helper:!1,helper_w:0,data:!1,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:!1,scroll_i:!1,is_touch:!1},$(document).off("mousemove.vakata.jstree touchmove.vakata.jstree",$.vakata.dnd.drag),$(document).off("mouseup.vakata.jstree touchend.vakata.jstree",$.vakata.dnd.stop)},_scroll:function(init_only){if(!vakata_dnd.scroll_e||!vakata_dnd.scroll_l&&!vakata_dnd.scroll_t)return vakata_dnd.scroll_i&&(clearInterval(vakata_dnd.scroll_i),vakata_dnd.scroll_i=!1),!1;if(!vakata_dnd.scroll_i)return vakata_dnd.scroll_i=setInterval($.vakata.dnd._scroll,100),!1;if(init_only===!0)return!1;var i=vakata_dnd.scroll_e.scrollTop(),j=vakata_dnd.scroll_e.scrollLeft();vakata_dnd.scroll_e.scrollTop(i+vakata_dnd.scroll_t*$.vakata.dnd.settings.scroll_speed),vakata_dnd.scroll_e.scrollLeft(j+vakata_dnd.scroll_l*$.vakata.dnd.settings.scroll_speed),i===vakata_dnd.scroll_e.scrollTop()&&j===vakata_dnd.scroll_e.scrollLeft()||$.vakata.dnd._trigger("scroll",vakata_dnd.scroll_e)},start:function(e,data,html){"touchstart"===e.type&&e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches[0]&&(e.pageX=e.originalEvent.changedTouches[0].pageX,e.pageY=e.originalEvent.changedTouches[0].pageY,e.target=document.elementFromPoint(e.originalEvent.changedTouches[0].pageX-window.pageXOffset,e.originalEvent.changedTouches[0].pageY-window.pageYOffset)),vakata_dnd.is_drag&&$.vakata.dnd.stop({});try{e.currentTarget.unselectable="on",e.currentTarget.onselectstart=function(){return!1},e.currentTarget.style&&(e.currentTarget.style.touchAction="none",e.currentTarget.style.msTouchAction="none",e.currentTarget.style.MozUserSelect="none")}catch(ignore){}return vakata_dnd.init_x=e.pageX,vakata_dnd.init_y=e.pageY,vakata_dnd.data=data,vakata_dnd.is_down=!0,vakata_dnd.element=e.currentTarget,vakata_dnd.target=e.target,vakata_dnd.is_touch="touchstart"===e.type,html!==!1&&(vakata_dnd.helper=$("<div id='vakata-dnd'></div>").html(html).css({display:"block",margin:"0",padding:"0",position:"absolute",top:"-2000px",lineHeight:"16px",zIndex:"10000"})),$(document).on("mousemove.vakata.jstree touchmove.vakata.jstree",$.vakata.dnd.drag),$(document).on("mouseup.vakata.jstree touchend.vakata.jstree",$.vakata.dnd.stop),!1},drag:function(e){if("touchmove"===e.type&&e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches[0]&&(e.pageX=e.originalEvent.changedTouches[0].pageX,e.pageY=e.originalEvent.changedTouches[0].pageY,e.target=document.elementFromPoint(e.originalEvent.changedTouches[0].pageX-window.pageXOffset,e.originalEvent.changedTouches[0].pageY-window.pageYOffset)),vakata_dnd.is_down){if(!vakata_dnd.is_drag){if(!(Math.abs(e.pageX-vakata_dnd.init_x)>(vakata_dnd.is_touch?$.vakata.dnd.settings.threshold_touch:$.vakata.dnd.settings.threshold)||Math.abs(e.pageY-vakata_dnd.init_y)>(vakata_dnd.is_touch?$.vakata.dnd.settings.threshold_touch:$.vakata.dnd.settings.threshold)))return;vakata_dnd.helper&&(vakata_dnd.helper.appendTo("body"),vakata_dnd.helper_w=vakata_dnd.helper.outerWidth()),vakata_dnd.is_drag=!0,$(vakata_dnd.target).one("click.vakata",!1),$.vakata.dnd._trigger("start",e)}var d=!1,w=!1,dh=!1,wh=!1,dw=!1,ww=!1,dt=!1,dl=!1,ht=!1,hl=!1;return vakata_dnd.scroll_t=0,vakata_dnd.scroll_l=0,vakata_dnd.scroll_e=!1,$($(e.target).parentsUntil("body").addBack().get().reverse()).filter(function(){return/^auto|scroll$/.test($(this).css("overflow"))&&(this.scrollHeight>this.offsetHeight||this.scrollWidth>this.offsetWidth)}).each(function(){var t=$(this),o=t.offset();if(this.scrollHeight>this.offsetHeight&&(o.top+t.height()-e.pageY<$.vakata.dnd.settings.scroll_proximity&&(vakata_dnd.scroll_t=1),e.pageY-o.top<$.vakata.dnd.settings.scroll_proximity&&(vakata_dnd.scroll_t=-1)),this.scrollWidth>this.offsetWidth&&(o.left+t.width()-e.pageX<$.vakata.dnd.settings.scroll_proximity&&(vakata_dnd.scroll_l=1),e.pageX-o.left<$.vakata.dnd.settings.scroll_proximity&&(vakata_dnd.scroll_l=-1)),vakata_dnd.scroll_t||vakata_dnd.scroll_l)return vakata_dnd.scroll_e=$(this),!1}),vakata_dnd.scroll_e||(d=$(document),w=$(window),dh=d.height(),wh=w.height(),dw=d.width(),ww=w.width(),dt=d.scrollTop(),dl=d.scrollLeft(),dh>wh&&e.pageY-dt<$.vakata.dnd.settings.scroll_proximity&&(vakata_dnd.scroll_t=-1),dh>wh&&wh-(e.pageY-dt)<$.vakata.dnd.settings.scroll_proximity&&(vakata_dnd.scroll_t=1),dw>ww&&e.pageX-dl<$.vakata.dnd.settings.scroll_proximity&&(vakata_dnd.scroll_l=-1),dw>ww&&ww-(e.pageX-dl)<$.vakata.dnd.settings.scroll_proximity&&(vakata_dnd.scroll_l=1),(vakata_dnd.scroll_t||vakata_dnd.scroll_l)&&(vakata_dnd.scroll_e=d)),vakata_dnd.scroll_e&&$.vakata.dnd._scroll(!0),vakata_dnd.helper&&(ht=parseInt(e.pageY+$.vakata.dnd.settings.helper_top,10),hl=parseInt(e.pageX+$.vakata.dnd.settings.helper_left,10),dh&&ht+25>dh&&(ht=dh-50),dw&&hl+vakata_dnd.helper_w>dw&&(hl=dw-(vakata_dnd.helper_w+2)),vakata_dnd.helper.css({left:hl+"px",top:ht+"px"})),$.vakata.dnd._trigger("move",e),!1}},stop:function(e){if("touchend"===e.type&&e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches[0]&&(e.pageX=e.originalEvent.changedTouches[0].pageX,e.pageY=e.originalEvent.changedTouches[0].pageY,e.target=document.elementFromPoint(e.originalEvent.changedTouches[0].pageX-window.pageXOffset,e.originalEvent.changedTouches[0].pageY-window.pageYOffset)),vakata_dnd.is_drag)e.target!==vakata_dnd.target&&$(vakata_dnd.target).off("click.vakata"),$.vakata.dnd._trigger("stop",e);else if("touchend"===e.type&&e.target===vakata_dnd.target){var to=setTimeout(function(){$(e.target).click()},100);$(e.target).one("click",function(){to&&clearTimeout(to)})}return $.vakata.dnd._clean(),!1}}}($),$.jstree.defaults.massload=null,$.jstree.plugins.massload=function(options,parent){this.init=function(el,options){this._data.massload={},parent.init.call(this,el,options)},this._load_nodes=function(nodes,callback,is_callback,force_reload){var i,j,dom,s=this.settings.massload,toLoad=(JSON.stringify(nodes),[]),m=this._model.data;if(!is_callback){for(i=0,j=nodes.length;i<j;i++)m[nodes[i]]&&(m[nodes[i]].state.loaded||m[nodes[i]].state.failed)&&!force_reload||(toLoad.push(nodes[i]),dom=this.get_node(nodes[i],!0),dom&&dom.length&&dom.addClass("jstree-loading").attr("aria-busy",!0));if(this._data.massload={},toLoad.length){if($.isFunction(s))return s.call(this,toLoad,$.proxy(function(data){var i,j;if(data)for(i in data)data.hasOwnProperty(i)&&(this._data.massload[i]=data[i]);for(i=0,j=nodes.length;i<j;i++)dom=this.get_node(nodes[i],!0),dom&&dom.length&&dom.removeClass("jstree-loading").attr("aria-busy",!1);parent._load_nodes.call(this,nodes,callback,is_callback,force_reload)},this));if("object"==typeof s&&s&&s.url)return s=$.extend(!0,{},s),$.isFunction(s.url)&&(s.url=s.url.call(this,toLoad)),$.isFunction(s.data)&&(s.data=s.data.call(this,toLoad)),$.ajax(s).done($.proxy(function(data,t,x){var i,j;if(data)for(i in data)data.hasOwnProperty(i)&&(this._data.massload[i]=data[i]);for(i=0,j=nodes.length;i<j;i++)dom=this.get_node(nodes[i],!0),dom&&dom.length&&dom.removeClass("jstree-loading").attr("aria-busy",!1);parent._load_nodes.call(this,nodes,callback,is_callback,force_reload)},this)).fail($.proxy(function(f){parent._load_nodes.call(this,nodes,callback,is_callback,force_reload)},this))}}return parent._load_nodes.call(this,nodes,callback,is_callback,force_reload)},this._load_node=function(obj,callback){var dom,data=this._data.massload[obj.id],rslt=null;return data?(rslt=this["string"==typeof data?"_append_html_data":"_append_json_data"](obj,"string"==typeof data?$($.parseHTML(data)).filter(function(){return 3!==this.nodeType}):data,function(status){callback.call(this,status)}),dom=this.get_node(obj.id,!0),dom&&dom.length&&dom.removeClass("jstree-loading").attr("aria-busy",!1),delete this._data.massload[obj.id],rslt):parent._load_node.call(this,obj,callback)}},$.jstree.defaults.search={ajax:!1,fuzzy:!1,case_sensitive:!1,show_only_matches:!1,show_only_matches_children:!1,close_opened_onclear:!0,search_leaves_only:!1,search_callback:!1},$.jstree.plugins.search=function(options,parent){this.bind=function(){parent.bind.call(this),this._data.search.str="",this._data.search.dom=$(),this._data.search.res=[],this._data.search.opn=[],this._data.search.som=!1,this._data.search.smc=!1,this._data.search.hdn=[],this.element.on("search.jstree",$.proxy(function(e,data){if(this._data.search.som&&data.res.length){var i,j,k,l,m=this._model.data,p=[];for(i=0,j=data.res.length;i<j;i++)if(m[data.res[i]]&&!m[data.res[i]].state.hidden&&(p.push(data.res[i]),p=p.concat(m[data.res[i]].parents),this._data.search.smc))for(k=0,l=m[data.res[i]].children_d.length;k<l;k++)m[m[data.res[i]].children_d[k]]&&!m[m[data.res[i]].children_d[k]].state.hidden&&p.push(m[data.res[i]].children_d[k]);p=$.vakata.array_remove_item($.vakata.array_unique(p),$.jstree.root),this._data.search.hdn=this.hide_all(!0),this.show_node(p,!0),this.redraw(!0)}},this)).on("clear_search.jstree",$.proxy(function(e,data){this._data.search.som&&data.res.length&&(this.show_node(this._data.search.hdn,!0),this.redraw(!0))},this))},this.search=function(str,skip_async,show_only_matches,inside,append,show_only_matches_children){if(str===!1||""===$.trim(str.toString()))return this.clear_search();inside=this.get_node(inside),inside=inside&&inside.id?inside.id:null,str=str.toString();var i,j,s=this.settings.search,a=!!s.ajax&&s.ajax,m=this._model.data,f=null,r=[],p=[];if(this._data.search.res.length&&!append&&this.clear_search(),show_only_matches===undefined&&(show_only_matches=s.show_only_matches),show_only_matches_children===undefined&&(show_only_matches_children=s.show_only_matches_children),!skip_async&&a!==!1)return $.isFunction(a)?a.call(this,str,$.proxy(function(d){d&&d.d&&(d=d.d),this._load_nodes($.isArray(d)?$.vakata.array_unique(d):[],function(){this.search(str,!0,show_only_matches,inside,append)})},this),inside):(a=$.extend({},a),a.data||(a.data={}),a.data.str=str,inside&&(a.data.inside=inside),$.ajax(a).fail($.proxy(function(){this._data.core.last_error={error:"ajax",plugin:"search",id:"search_01",reason:"Could not load search parents",data:JSON.stringify(a)},this.settings.core.error.call(this,this._data.core.last_error)},this)).done($.proxy(function(d){d&&d.d&&(d=d.d),this._load_nodes($.isArray(d)?$.vakata.array_unique(d):[],function(){this.search(str,!0,show_only_matches,inside,append)})},this)));if(append||(this._data.search.str=str,this._data.search.dom=$(),this._data.search.res=[],this._data.search.opn=[],this._data.search.som=show_only_matches,this._data.search.smc=show_only_matches_children),f=new $.vakata.search(str,!0,{caseSensitive:s.case_sensitive,fuzzy:s.fuzzy}),$.each(m[inside?inside:$.jstree.root].children_d,function(ii,i){var v=m[i];v.text&&!v.state.hidden&&(!s.search_leaves_only||v.state.loaded&&0===v.children.length)&&(s.search_callback&&s.search_callback.call(this,str,v)||!s.search_callback&&f.search(v.text).isMatch)&&(r.push(i),p=p.concat(v.parents))}),r.length){for(p=$.vakata.array_unique(p),i=0,j=p.length;i<j;i++)p[i]!==$.jstree.root&&m[p[i]]&&this.open_node(p[i],null,0)===!0&&this._data.search.opn.push(p[i]);append?(this._data.search.dom=this._data.search.dom.add($(this.element[0].querySelectorAll("#"+$.map(r,function(v){return"0123456789".indexOf(v[0])!==-1?"\\3"+v[0]+" "+v.substr(1).replace($.jstree.idregex,"\\$&"):v.replace($.jstree.idregex,"\\$&")}).join(", #")))),this._data.search.res=$.vakata.array_unique(this._data.search.res.concat(r))):(this._data.search.dom=$(this.element[0].querySelectorAll("#"+$.map(r,function(v){return"0123456789".indexOf(v[0])!==-1?"\\3"+v[0]+" "+v.substr(1).replace($.jstree.idregex,"\\$&"):v.replace($.jstree.idregex,"\\$&")}).join(", #"))),this._data.search.res=r),this._data.search.dom.children(".jstree-anchor").addClass("jstree-search")}this.trigger("search",{nodes:this._data.search.dom,str:str,res:this._data.search.res,show_only_matches:show_only_matches})},this.clear_search=function(){this.settings.search.close_opened_onclear&&this.close_node(this._data.search.opn,0),this.trigger("clear_search",{nodes:this._data.search.dom,str:this._data.search.str,res:this._data.search.res}),this._data.search.res.length&&(this._data.search.dom=$(this.element[0].querySelectorAll("#"+$.map(this._data.search.res,function(v){return"0123456789".indexOf(v[0])!==-1?"\\3"+v[0]+" "+v.substr(1).replace($.jstree.idregex,"\\$&"):v.replace($.jstree.idregex,"\\$&")}).join(", #"))),this._data.search.dom.children(".jstree-anchor").removeClass("jstree-search")),this._data.search.str="",this._data.search.res=[],this._data.search.opn=[],this._data.search.dom=$()},this.redraw_node=function(obj,deep,callback,force_render){if(obj=parent.redraw_node.apply(this,arguments),obj&&$.inArray(obj.id,this._data.search.res)!==-1){var i,j,tmp=null;for(i=0,j=obj.childNodes.length;i<j;i++)if(obj.childNodes[i]&&obj.childNodes[i].className&&obj.childNodes[i].className.indexOf("jstree-anchor")!==-1){tmp=obj.childNodes[i];break}tmp&&(tmp.className+=" jstree-search")}return obj}},function($){$.vakata.search=function(pattern,txt,options){options=options||{},options=$.extend({},$.vakata.search.defaults,options),options.fuzzy!==!1&&(options.fuzzy=!0),pattern=options.caseSensitive?pattern:pattern.toLowerCase();var matchmask,pattern_alphabet,match_bitapScore,search,MATCH_LOCATION=options.location,MATCH_DISTANCE=options.distance,MATCH_THRESHOLD=options.threshold,patternLen=pattern.length;return patternLen>32&&(options.fuzzy=!1),options.fuzzy&&(matchmask=1<<patternLen-1,pattern_alphabet=function(){var mask={},i=0;for(i=0;i<patternLen;i++)mask[pattern.charAt(i)]=0;for(i=0;i<patternLen;i++)mask[pattern.charAt(i)]|=1<<patternLen-i-1;return mask}(),match_bitapScore=function(e,x){var accuracy=e/patternLen,proximity=Math.abs(MATCH_LOCATION-x);return MATCH_DISTANCE?accuracy+proximity/MATCH_DISTANCE:proximity?1:accuracy}),search=function(text){if(text=options.caseSensitive?text:text.toLowerCase(),pattern===text||text.indexOf(pattern)!==-1)return{isMatch:!0,score:0};if(!options.fuzzy)return{isMatch:!1,score:1};var i,j,binMin,binMid,lastRd,start,finish,rd,charMatch,textLen=text.length,scoreThreshold=MATCH_THRESHOLD,bestLoc=text.indexOf(pattern,MATCH_LOCATION),binMax=patternLen+textLen,score=1,locations=[];for(bestLoc!==-1&&(scoreThreshold=Math.min(match_bitapScore(0,bestLoc),scoreThreshold),bestLoc=text.lastIndexOf(pattern,MATCH_LOCATION+patternLen),bestLoc!==-1&&(scoreThreshold=Math.min(match_bitapScore(0,bestLoc),scoreThreshold))),bestLoc=-1,i=0;i<patternLen;i++){for(binMin=0,binMid=binMax;binMin<binMid;)match_bitapScore(i,MATCH_LOCATION+binMid)<=scoreThreshold?binMin=binMid:binMax=binMid,binMid=Math.floor((binMax-binMin)/2+binMin);for(binMax=binMid,start=Math.max(1,MATCH_LOCATION-binMid+1),finish=Math.min(MATCH_LOCATION+binMid,textLen)+patternLen,rd=new Array(finish+2),rd[finish+1]=(1<<i)-1,j=finish;j>=start;j--)if(charMatch=pattern_alphabet[text.charAt(j-1)],0===i?rd[j]=(rd[j+1]<<1|1)&charMatch:rd[j]=(rd[j+1]<<1|1)&charMatch|((lastRd[j+1]|lastRd[j])<<1|1)|lastRd[j+1],rd[j]&matchmask&&(score=match_bitapScore(i,j-1),score<=scoreThreshold)){if(scoreThreshold=score,bestLoc=j-1,locations.push(bestLoc),!(bestLoc>MATCH_LOCATION))break;start=Math.max(1,2*MATCH_LOCATION-bestLoc)}if(match_bitapScore(i+1,MATCH_LOCATION)>scoreThreshold)break;lastRd=rd}return{isMatch:bestLoc>=0,score:score}},txt===!0?{search:search}:search(txt)},$.vakata.search.defaults={location:0,distance:100,threshold:.6,fuzzy:!1,caseSensitive:!1}}($),$.jstree.defaults.sort=function(a,b){return this.get_text(a)>this.get_text(b)?1:-1},$.jstree.plugins.sort=function(options,parent){this.bind=function(){parent.bind.call(this),this.element.on("model.jstree",$.proxy(function(e,data){this.sort(data.parent,!0)},this)).on("rename_node.jstree create_node.jstree",$.proxy(function(e,data){this.sort(data.parent||data.node.parent,!1),this.redraw_node(data.parent||data.node.parent,!0)},this)).on("move_node.jstree copy_node.jstree",$.proxy(function(e,data){this.sort(data.parent,!1),this.redraw_node(data.parent,!0)},this))},this.sort=function(obj,deep){var i,j;if(obj=this.get_node(obj),obj&&obj.children&&obj.children.length&&(obj.children.sort($.proxy(this.settings.sort,this)),deep))for(i=0,j=obj.children_d.length;i<j;i++)this.sort(obj.children_d[i],!1)}};var to=!1;$.jstree.defaults.state={key:"jstree",events:"changed.jstree open_node.jstree close_node.jstree check_node.jstree uncheck_node.jstree",ttl:!1,filter:!1},$.jstree.plugins.state=function(options,parent){this.bind=function(){parent.bind.call(this);var bind=$.proxy(function(){this.element.on(this.settings.state.events,$.proxy(function(){to&&clearTimeout(to),to=setTimeout($.proxy(function(){this.save_state()},this),100)},this)),this.trigger("state_ready")},this);this.element.on("ready.jstree",$.proxy(function(e,data){this.element.one("restore_state.jstree",bind),this.restore_state()||bind()},this))},this.save_state=function(){var st={state:this.get_state(),ttl:this.settings.state.ttl,sec:+new Date};$.vakata.storage.set(this.settings.state.key,JSON.stringify(st))},this.restore_state=function(){var k=$.vakata.storage.get(this.settings.state.key);if(k)try{k=JSON.parse(k)}catch(ex){return!1}return!(k&&k.ttl&&k.sec&&+new Date-k.sec>k.ttl)&&(k&&k.state&&(k=k.state),k&&$.isFunction(this.settings.state.filter)&&(k=this.settings.state.filter.call(this,k)),!!k&&(this.element.one("set_state.jstree",function(e,data){data.instance.trigger("restore_state",{state:$.extend(!0,{},k)})}),this.set_state(k),!0))},this.clear_state=function(){return $.vakata.storage.del(this.settings.state.key)}},function($,undefined){$.vakata.storage={set:function(key,val){return window.localStorage.setItem(key,val)},get:function(key){return window.localStorage.getItem(key)},del:function(key){return window.localStorage.removeItem(key)}}}($),$.jstree.defaults.types={default:{}},$.jstree.defaults.types[$.jstree.root]={},$.jstree.plugins.types=function(options,parent){this.init=function(el,options){var i,j;if(options&&options.types&&options.types.default)for(i in options.types)if("default"!==i&&i!==$.jstree.root&&options.types.hasOwnProperty(i))for(j in options.types.default)options.types.default.hasOwnProperty(j)&&options.types[i][j]===undefined&&(options.types[i][j]=options.types.default[j]);parent.init.call(this,el,options),this._model.data[$.jstree.root].type=$.jstree.root},this.refresh=function(skip_loading,forget_state){parent.refresh.call(this,skip_loading,forget_state),this._model.data[$.jstree.root].type=$.jstree.root},this.bind=function(){this.element.on("model.jstree",$.proxy(function(e,data){var i,j,k,m=this._model.data,dpc=data.nodes,t=this.settings.types,c="default";for(i=0,j=dpc.length;i<j;i++){if(c="default",m[dpc[i]].original&&m[dpc[i]].original.type&&t[m[dpc[i]].original.type]&&(c=m[dpc[i]].original.type),m[dpc[i]].data&&m[dpc[i]].data.jstree&&m[dpc[i]].data.jstree.type&&t[m[dpc[i]].data.jstree.type]&&(c=m[dpc[i]].data.jstree.type),m[dpc[i]].type=c,m[dpc[i]].icon===!0&&t[c].icon!==undefined&&(m[dpc[i]].icon=t[c].icon),t[c].li_attr!==undefined&&"object"==typeof t[c].li_attr)for(k in t[c].li_attr)if(t[c].li_attr.hasOwnProperty(k)){if("id"===k)continue;m[dpc[i]].li_attr[k]===undefined?m[dpc[i]].li_attr[k]=t[c].li_attr[k]:"class"===k&&(m[dpc[i]].li_attr.class=t[c].li_attr.class+" "+m[dpc[i]].li_attr.class)}if(t[c].a_attr!==undefined&&"object"==typeof t[c].a_attr)for(k in t[c].a_attr)if(t[c].a_attr.hasOwnProperty(k)){if("id"===k)continue;m[dpc[i]].a_attr[k]===undefined?m[dpc[i]].a_attr[k]=t[c].a_attr[k]:"href"===k&&"#"===m[dpc[i]].a_attr[k]?m[dpc[i]].a_attr.href=t[c].a_attr.href:"class"===k&&(m[dpc[i]].a_attr.class=t[c].a_attr.class+" "+m[dpc[i]].a_attr.class)}}m[$.jstree.root].type=$.jstree.root},this)),parent.bind.call(this)},this.get_json=function(obj,options,flat){var i,j,m=this._model.data,opt=options?$.extend(!0,{},options,{no_id:!1}):{},tmp=parent.get_json.call(this,obj,opt,flat);if(tmp===!1)return!1;if($.isArray(tmp))for(i=0,j=tmp.length;i<j;i++)tmp[i].type=tmp[i].id&&m[tmp[i].id]&&m[tmp[i].id].type?m[tmp[i].id].type:"default",options&&options.no_id&&(delete tmp[i].id,tmp[i].li_attr&&tmp[i].li_attr.id&&delete tmp[i].li_attr.id,tmp[i].a_attr&&tmp[i].a_attr.id&&delete tmp[i].a_attr.id);else tmp.type=tmp.id&&m[tmp.id]&&m[tmp.id].type?m[tmp.id].type:"default",options&&options.no_id&&(tmp=this._delete_ids(tmp));return tmp},this._delete_ids=function(tmp){if($.isArray(tmp)){for(var i=0,j=tmp.length;i<j;i++)tmp[i]=this._delete_ids(tmp[i]);return tmp}return delete tmp.id,tmp.li_attr&&tmp.li_attr.id&&delete tmp.li_attr.id,tmp.a_attr&&tmp.a_attr.id&&delete tmp.a_attr.id,tmp.children&&$.isArray(tmp.children)&&(tmp.children=this._delete_ids(tmp.children)),tmp},this.check=function(chk,obj,par,pos,more){if(parent.check.call(this,chk,obj,par,pos,more)===!1)return!1;obj=obj&&obj.id?obj:this.get_node(obj),par=par&&par.id?par:this.get_node(par);var tmp,d,i,j,m=obj&&obj.id?more&&more.origin?more.origin:$.jstree.reference(obj.id):null;switch(m=m&&m._model&&m._model.data?m._model.data:null,chk){case"create_node":case"move_node":case"copy_node":if("move_node"!==chk||$.inArray(obj.id,par.children)===-1){if(tmp=this.get_rules(par),tmp.max_children!==undefined&&tmp.max_children!==-1&&tmp.max_children===par.children.length)return this._data.core.last_error={error:"check",plugin:"types",id:"types_01",reason:"max_children prevents function: "+chk,data:JSON.stringify({chk:chk,pos:pos,obj:!(!obj||!obj.id)&&obj.id,par:!(!par||!par.id)&&par.id})},!1;if(tmp.valid_children!==undefined&&tmp.valid_children!==-1&&$.inArray(obj.type||"default",tmp.valid_children)===-1)return this._data.core.last_error={error:"check",plugin:"types",id:"types_02",reason:"valid_children prevents function: "+chk,data:JSON.stringify({chk:chk,pos:pos,obj:!(!obj||!obj.id)&&obj.id,par:!(!par||!par.id)&&par.id})},!1;if(m&&obj.children_d&&obj.parents){for(d=0,i=0,j=obj.children_d.length;i<j;i++)d=Math.max(d,m[obj.children_d[i]].parents.length);d=d-obj.parents.length+1;
}(d<=0||d===undefined)&&(d=1);do{if(tmp.max_depth!==undefined&&tmp.max_depth!==-1&&tmp.max_depth<d)return this._data.core.last_error={error:"check",plugin:"types",id:"types_03",reason:"max_depth prevents function: "+chk,data:JSON.stringify({chk:chk,pos:pos,obj:!(!obj||!obj.id)&&obj.id,par:!(!par||!par.id)&&par.id})},!1;par=this.get_node(par.parent),tmp=this.get_rules(par),d++}while(par)}}return!0},this.get_rules=function(obj){if(obj=this.get_node(obj),!obj)return!1;var tmp=this.get_type(obj,!0);return tmp.max_depth===undefined&&(tmp.max_depth=-1),tmp.max_children===undefined&&(tmp.max_children=-1),tmp.valid_children===undefined&&(tmp.valid_children=-1),tmp},this.get_type=function(obj,rules){return obj=this.get_node(obj),!!obj&&(rules?$.extend({type:obj.type},this.settings.types[obj.type]):obj.type)},this.set_type=function(obj,type){var t,t1,t2,old_type,old_icon,k,d,a,m=this._model.data;if($.isArray(obj)){for(obj=obj.slice(),t1=0,t2=obj.length;t1<t2;t1++)this.set_type(obj[t1],type);return!0}if(t=this.settings.types,obj=this.get_node(obj),!t[type]||!obj)return!1;if(d=this.get_node(obj,!0),d&&d.length&&(a=d.children(".jstree-anchor")),old_type=obj.type,old_icon=this.get_icon(obj),obj.type=type,(old_icon===!0||t[old_type]&&t[old_type].icon!==undefined&&old_icon===t[old_type].icon)&&this.set_icon(obj,t[type].icon===undefined||t[type].icon),t[old_type].li_attr!==undefined&&"object"==typeof t[old_type].li_attr)for(k in t[old_type].li_attr)if(t[old_type].li_attr.hasOwnProperty(k)){if("id"===k)continue;"class"===k?(m[obj.id].li_attr.class=(m[obj.id].li_attr.class||"").replace(t[old_type].li_attr[k],""),d&&d.removeClass(t[old_type].li_attr[k])):m[obj.id].li_attr[k]===t[old_type].li_attr[k]&&(m[obj.id].li_attr[k]=null,d&&d.removeAttr(k))}if(t[old_type].a_attr!==undefined&&"object"==typeof t[old_type].a_attr)for(k in t[old_type].a_attr)if(t[old_type].a_attr.hasOwnProperty(k)){if("id"===k)continue;"class"===k?(m[obj.id].a_attr.class=(m[obj.id].a_attr.class||"").replace(t[old_type].a_attr[k],""),a&&a.removeClass(t[old_type].a_attr[k])):m[obj.id].a_attr[k]===t[old_type].a_attr[k]&&("href"===k?(m[obj.id].a_attr[k]="#",a&&a.attr("href","#")):(delete m[obj.id].a_attr[k],a&&a.removeAttr(k)))}if(t[type].li_attr!==undefined&&"object"==typeof t[type].li_attr)for(k in t[type].li_attr)if(t[type].li_attr.hasOwnProperty(k)){if("id"===k)continue;m[obj.id].li_attr[k]===undefined?(m[obj.id].li_attr[k]=t[type].li_attr[k],d&&("class"===k?d.addClass(t[type].li_attr[k]):d.attr(k,t[type].li_attr[k]))):"class"===k&&(m[obj.id].li_attr.class=t[type].li_attr[k]+" "+m[obj.id].li_attr.class,d&&d.addClass(t[type].li_attr[k]))}if(t[type].a_attr!==undefined&&"object"==typeof t[type].a_attr)for(k in t[type].a_attr)if(t[type].a_attr.hasOwnProperty(k)){if("id"===k)continue;m[obj.id].a_attr[k]===undefined?(m[obj.id].a_attr[k]=t[type].a_attr[k],a&&("class"===k?a.addClass(t[type].a_attr[k]):a.attr(k,t[type].a_attr[k]))):"href"===k&&"#"===m[obj.id].a_attr[k]?(m[obj.id].a_attr.href=t[type].a_attr.href,a&&a.attr("href",t[type].a_attr.href)):"class"===k&&(m[obj.id].a_attr.class=t[type].a_attr.class+" "+m[obj.id].a_attr.class,a&&a.addClass(t[type].a_attr[k]))}return!0}},$.jstree.defaults.unique={case_sensitive:!1,duplicate:function(name,counter){return name+" ("+counter+")"}},$.jstree.plugins.unique=function(options,parent){this.check=function(chk,obj,par,pos,more){if(parent.check.call(this,chk,obj,par,pos,more)===!1)return!1;if(obj=obj&&obj.id?obj:this.get_node(obj),par=par&&par.id?par:this.get_node(par),!par||!par.children)return!0;var i,j,n="rename_node"===chk?pos:obj.text,c=[],s=this.settings.unique.case_sensitive,m=this._model.data;for(i=0,j=par.children.length;i<j;i++)c.push(s?m[par.children[i]].text:m[par.children[i]].text.toLowerCase());switch(s||(n=n.toLowerCase()),chk){case"delete_node":return!0;case"rename_node":return i=$.inArray(n,c)===-1||obj.text&&obj.text[s?"toString":"toLowerCase"]()===n,i||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_01",reason:"Child with name "+n+" already exists. Preventing: "+chk,data:JSON.stringify({chk:chk,pos:pos,obj:!(!obj||!obj.id)&&obj.id,par:!(!par||!par.id)&&par.id})}),i;case"create_node":return i=$.inArray(n,c)===-1,i||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_04",reason:"Child with name "+n+" already exists. Preventing: "+chk,data:JSON.stringify({chk:chk,pos:pos,obj:!(!obj||!obj.id)&&obj.id,par:!(!par||!par.id)&&par.id})}),i;case"copy_node":return i=$.inArray(n,c)===-1,i||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_02",reason:"Child with name "+n+" already exists. Preventing: "+chk,data:JSON.stringify({chk:chk,pos:pos,obj:!(!obj||!obj.id)&&obj.id,par:!(!par||!par.id)&&par.id})}),i;case"move_node":return i=obj.parent===par.id&&(!more||!more.is_multi)||$.inArray(n,c)===-1,i||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_03",reason:"Child with name "+n+" already exists. Preventing: "+chk,data:JSON.stringify({chk:chk,pos:pos,obj:!(!obj||!obj.id)&&obj.id,par:!(!par||!par.id)&&par.id})}),i}return!0},this.create_node=function(par,node,pos,callback,is_loaded){if(!node||node.text===undefined){if(null===par&&(par=$.jstree.root),par=this.get_node(par),!par)return parent.create_node.call(this,par,node,pos,callback,is_loaded);if(pos=pos===undefined?"last":pos,!pos.toString().match(/^(before|after)$/)&&!is_loaded&&!this.is_loaded(par))return parent.create_node.call(this,par,node,pos,callback,is_loaded);node||(node={});var tmp,n,dpc,i,j,m=this._model.data,s=this.settings.unique.case_sensitive,cb=this.settings.unique.duplicate;for(n=tmp=this.get_string("New node"),dpc=[],i=0,j=par.children.length;i<j;i++)dpc.push(s?m[par.children[i]].text:m[par.children[i]].text.toLowerCase());for(i=1;$.inArray(s?n:n.toLowerCase(),dpc)!==-1;)n=cb.call(this,tmp,++i).toString();node.text=n}return parent.create_node.call(this,par,node,pos,callback,is_loaded)}};var div=document.createElement("DIV");if(div.setAttribute("unselectable","on"),div.setAttribute("role","presentation"),div.className="jstree-wholerow",div.innerHTML="&#160;",$.jstree.plugins.wholerow=function(options,parent){this.bind=function(){parent.bind.call(this),this.element.on("ready.jstree set_state.jstree",$.proxy(function(){this.hide_dots()},this)).on("init.jstree loading.jstree ready.jstree",$.proxy(function(){this.get_container_ul().addClass("jstree-wholerow-ul")},this)).on("deselect_all.jstree",$.proxy(function(e,data){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked")},this)).on("changed.jstree",$.proxy(function(e,data){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked");var i,j,tmp=!1;for(i=0,j=data.selected.length;i<j;i++)tmp=this.get_node(data.selected[i],!0),tmp&&tmp.length&&tmp.children(".jstree-wholerow").addClass("jstree-wholerow-clicked")},this)).on("open_node.jstree",$.proxy(function(e,data){this.get_node(data.node,!0).find(".jstree-clicked").parent().children(".jstree-wholerow").addClass("jstree-wholerow-clicked")},this)).on("hover_node.jstree dehover_node.jstree",$.proxy(function(e,data){"hover_node"===e.type&&this.is_disabled(data.node)||this.get_node(data.node,!0).children(".jstree-wholerow")["hover_node"===e.type?"addClass":"removeClass"]("jstree-wholerow-hovered")},this)).on("contextmenu.jstree",".jstree-wholerow",$.proxy(function(e){if(this._data.contextmenu){e.preventDefault();var tmp=$.Event("contextmenu",{metaKey:e.metaKey,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,pageX:e.pageX,pageY:e.pageY});$(e.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(tmp)}},this)).on("click.jstree",".jstree-wholerow",function(e){e.stopImmediatePropagation();var tmp=$.Event("click",{metaKey:e.metaKey,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey});$(e.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(tmp).focus()}).on("click.jstree",".jstree-leaf > .jstree-ocl",$.proxy(function(e){e.stopImmediatePropagation();var tmp=$.Event("click",{metaKey:e.metaKey,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey});$(e.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(tmp).focus()},this)).on("mouseover.jstree",".jstree-wholerow, .jstree-icon",$.proxy(function(e){return e.stopImmediatePropagation(),this.is_disabled(e.currentTarget)||this.hover_node(e.currentTarget),!1},this)).on("mouseleave.jstree",".jstree-node",$.proxy(function(e){this.dehover_node(e.currentTarget)},this))},this.teardown=function(){this.settings.wholerow&&this.element.find(".jstree-wholerow").remove(),parent.teardown.call(this)},this.redraw_node=function(obj,deep,callback,force_render){if(obj=parent.redraw_node.apply(this,arguments)){var tmp=div.cloneNode(!0);$.inArray(obj.id,this._data.core.selected)!==-1&&(tmp.className+=" jstree-wholerow-clicked"),this._data.core.focused&&this._data.core.focused===obj.id&&(tmp.className+=" jstree-wholerow-hovered"),obj.insertBefore(tmp,obj.childNodes[0])}return obj}},document.registerElement&&Object&&Object.create){var proto=Object.create(HTMLElement.prototype);proto.createdCallback=function(){var i,c={core:{},plugins:[]};for(i in $.jstree.plugins)$.jstree.plugins.hasOwnProperty(i)&&this.attributes[i]&&(c.plugins.push(i),this.getAttribute(i)&&JSON.parse(this.getAttribute(i))&&(c[i]=JSON.parse(this.getAttribute(i))));for(i in $.jstree.defaults.core)$.jstree.defaults.core.hasOwnProperty(i)&&this.attributes[i]&&(c.core[i]=JSON.parse(this.getAttribute(i))||this.getAttribute(i));$(this).jstree(c)};try{document.registerElement("vakata-jstree",{prototype:proto})}catch(ignore){}}}});var _self="undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{},Prism=function(){var lang=/\blang(?:uage)?-(\w+)\b/i,uniqueId=0,_=_self.Prism={util:{encode:function(tokens){return tokens instanceof Token?new Token(tokens.type,_.util.encode(tokens.content),tokens.alias):"Array"===_.util.type(tokens)?tokens.map(_.util.encode):tokens.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(o){return Object.prototype.toString.call(o).match(/\[object (\w+)\]/)[1]},objId:function(obj){return obj.__id||Object.defineProperty(obj,"__id",{value:++uniqueId}),obj.__id},clone:function(o){var type=_.util.type(o);switch(type){case"Object":var clone={};for(var key in o)o.hasOwnProperty(key)&&(clone[key]=_.util.clone(o[key]));return clone;case"Array":return o.map&&o.map(function(v){return _.util.clone(v)})}return o}},languages:{extend:function(id,redef){var lang=_.util.clone(_.languages[id]);for(var key in redef)lang[key]=redef[key];return lang},insertBefore:function(inside,before,insert,root){root=root||_.languages;var grammar=root[inside];if(2==arguments.length){insert=arguments[1];for(var newToken in insert)insert.hasOwnProperty(newToken)&&(grammar[newToken]=insert[newToken]);return grammar}var ret={};for(var token in grammar)if(grammar.hasOwnProperty(token)){if(token==before)for(var newToken in insert)insert.hasOwnProperty(newToken)&&(ret[newToken]=insert[newToken]);ret[token]=grammar[token]}return _.languages.DFS(_.languages,function(key,value){value===root[inside]&&key!=inside&&(this[key]=ret)}),root[inside]=ret},DFS:function(o,callback,type,visited){visited=visited||{};for(var i in o)o.hasOwnProperty(i)&&(callback.call(o,i,o[i],type||i),"Object"!==_.util.type(o[i])||visited[_.util.objId(o[i])]?"Array"!==_.util.type(o[i])||visited[_.util.objId(o[i])]||(visited[_.util.objId(o[i])]=!0,_.languages.DFS(o[i],callback,i,visited)):(visited[_.util.objId(o[i])]=!0,_.languages.DFS(o[i],callback,null,visited)))}},plugins:{},highlightAll:function(async,callback){var env={callback:callback,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};_.hooks.run("before-highlightall",env);for(var element,elements=env.elements||document.querySelectorAll(env.selector),i=0;element=elements[i++];)_.highlightElement(element,async===!0,env.callback)},highlightElement:function(element,async,callback){for(var language,grammar,parent=element;parent&&!lang.test(parent.className);)parent=parent.parentNode;parent&&(language=(parent.className.match(lang)||[,""])[1].toLowerCase(),grammar=_.languages[language]),element.className=element.className.replace(lang,"").replace(/\s+/g," ")+" language-"+language,parent=element.parentNode,/pre/i.test(parent.nodeName)&&(parent.className=parent.className.replace(lang,"").replace(/\s+/g," ")+" language-"+language);var code=element.textContent,env={element:element,language:language,grammar:grammar,code:code};if(_.hooks.run("before-sanity-check",env),!env.code||!env.grammar)return void _.hooks.run("complete",env);if(_.hooks.run("before-highlight",env),async&&_self.Worker){var worker=new Worker(_.filename);worker.onmessage=function(evt){env.highlightedCode=evt.data,_.hooks.run("before-insert",env),env.element.innerHTML=env.highlightedCode,callback&&callback.call(env.element),_.hooks.run("after-highlight",env),_.hooks.run("complete",env)},worker.postMessage(JSON.stringify({language:env.language,code:env.code,immediateClose:!0}))}else env.highlightedCode=_.highlight(env.code,env.grammar,env.language),_.hooks.run("before-insert",env),env.element.innerHTML=env.highlightedCode,callback&&callback.call(element),_.hooks.run("after-highlight",env),_.hooks.run("complete",env)},highlight:function(text,grammar,language){var tokens=_.tokenize(text,grammar);return Token.stringify(_.util.encode(tokens),language)},tokenize:function(text,grammar,language){var Token=_.Token,strarr=[text],rest=grammar.rest;if(rest){for(var token in rest)grammar[token]=rest[token];delete grammar.rest}tokenloop:for(var token in grammar)if(grammar.hasOwnProperty(token)&&grammar[token]){var patterns=grammar[token];patterns="Array"===_.util.type(patterns)?patterns:[patterns];for(var j=0;j<patterns.length;++j){var pattern=patterns[j],inside=pattern.inside,lookbehind=!!pattern.lookbehind,greedy=!!pattern.greedy,lookbehindLength=0,alias=pattern.alias;if(greedy&&!pattern.pattern.global){var flags=pattern.pattern.toString().match(/[imuy]*$/)[0];pattern.pattern=RegExp(pattern.pattern.source,flags+"g")}pattern=pattern.pattern||pattern;for(var i=0,pos=0;i<strarr.length;pos+=(strarr[i].matchedStr||strarr[i]).length,++i){var str=strarr[i];if(strarr.length>text.length)break tokenloop;if(!(str instanceof Token)){pattern.lastIndex=0;var match=pattern.exec(str),delNum=1;if(!match&&greedy&&i!=strarr.length-1){if(pattern.lastIndex=pos,match=pattern.exec(text),!match)break;for(var from=match.index+(lookbehind?match[1].length:0),to=match.index+match[0].length,k=i,p=pos,len=strarr.length;k<len&&p<to;++k)p+=(strarr[k].matchedStr||strarr[k]).length,from>=p&&(++i,pos=p);if(strarr[i]instanceof Token||strarr[k-1].greedy)continue;delNum=k-i,str=text.slice(pos,p),match.index-=pos}if(match){lookbehind&&(lookbehindLength=match[1].length);var from=match.index+lookbehindLength,match=match[0].slice(lookbehindLength),to=from+match.length,before=str.slice(0,from),after=str.slice(to),args=[i,delNum];before&&args.push(before);var wrapped=new Token(token,inside?_.tokenize(match,inside):match,alias,match,greedy);args.push(wrapped),after&&args.push(after),Array.prototype.splice.apply(strarr,args)}}}}}return strarr},hooks:{all:{},add:function(name,callback){var hooks=_.hooks.all;hooks[name]=hooks[name]||[],hooks[name].push(callback)},run:function(name,env){var callbacks=_.hooks.all[name];if(callbacks&&callbacks.length)for(var callback,i=0;callback=callbacks[i++];)callback(env)}}},Token=_.Token=function(type,content,alias,matchedStr,greedy){this.type=type,this.content=content,this.alias=alias,this.matchedStr=matchedStr||null,this.greedy=!!greedy};if(Token.stringify=function(o,language,parent){if("string"==typeof o)return o;if("Array"===_.util.type(o))return o.map(function(element){return Token.stringify(element,language,o)}).join("");var env={type:o.type,content:Token.stringify(o.content,language,parent),tag:"span",classes:["token",o.type],attributes:{},language:language,parent:parent};if("comment"==env.type&&(env.attributes.spellcheck="true"),o.alias){var aliases="Array"===_.util.type(o.alias)?o.alias:[o.alias];Array.prototype.push.apply(env.classes,aliases)}_.hooks.run("wrap",env);var attributes="";for(var name in env.attributes)attributes+=(attributes?" ":"")+name+'="'+(env.attributes[name]||"")+'"';return"<"+env.tag+' class="'+env.classes.join(" ")+'"'+(attributes?" "+attributes:"")+">"+env.content+"</"+env.tag+">"},!_self.document)return _self.addEventListener?(_self.addEventListener("message",function(evt){var message=JSON.parse(evt.data),lang=message.language,code=message.code,immediateClose=message.immediateClose;_self.postMessage(_.highlight(code,_.languages[lang],lang)),immediateClose&&_self.close()},!1),_self.Prism):_self.Prism;var script=document.currentScript||[].slice.call(document.getElementsByTagName("script")).pop();return script&&(_.filename=script.src,document.addEventListener&&!script.hasAttribute("data-manual")&&("loading"!==document.readyState?window.requestAnimationFrame?window.requestAnimationFrame(_.highlightAll):window.setTimeout(_.highlightAll,16):document.addEventListener("DOMContentLoaded",_.highlightAll))),_self.Prism}();"undefined"!=typeof module&&module.exports&&(module.exports=Prism),"undefined"!=typeof global&&(global.Prism=Prism),Prism.languages.markup={comment:/<!--[\w\W]*?-->/,prolog:/<\?[\w\W]+?\?>/,doctype:/<!DOCTYPE[\w\W]+?>/i,cdata:/<!\[CDATA\[[\w\W]*?]]>/i,tag:{pattern:/<\/?(?!\d)[^\s>\/=$<]+(?:\s+[^\s>\/=]+(?:=(?:("|')(?:\\\1|\\?(?!\1)[\w\W])*\1|[^\s'">=]+))?)*\s*\/?>/i,inside:{tag:{pattern:/^<\/?[^\s>\/]+/i,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"attr-value":{pattern:/=(?:('|")[\w\W]*?(\1)|[^\s>]+)/i,inside:{punctuation:/[=>"']/}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:/&#?[\da-z]{1,8};/i},Prism.hooks.add("wrap",function(env){"entity"===env.type&&(env.attributes.title=env.content.replace(/&amp;/,"&"))}),Prism.languages.xml=Prism.languages.markup,Prism.languages.html=Prism.languages.markup,Prism.languages.mathml=Prism.languages.markup,Prism.languages.svg=Prism.languages.markup,Prism.languages.css={comment:/\/\*[\w\W]*?\*\//,atrule:{pattern:/@[\w-]+?.*?(;|(?=\s*\{))/i,inside:{rule:/@[\w-]+/}},url:/url\((?:(["'])(\\(?:\r\n|[\w\W])|(?!\1)[^\\\r\n])*\1|.*?)\)/i,selector:/[^\{\}\s][^\{\};]*?(?=\s*\{)/,string:{pattern:/("|')(\\(?:\r\n|[\w\W])|(?!\1)[^\\\r\n])*\1/,greedy:!0},property:/(\b|\B)[\w-]+(?=\s*:)/i,important:/\B!important\b/i,function:/[-a-z0-9]+(?=\()/i,punctuation:/[(){};:]/},Prism.languages.css.atrule.inside.rest=Prism.util.clone(Prism.languages.css),Prism.languages.markup&&(Prism.languages.insertBefore("markup","tag",{style:{pattern:/(<style[\w\W]*?>)[\w\W]*?(?=<\/style>)/i,lookbehind:!0,inside:Prism.languages.css,alias:"language-css"}}),Prism.languages.insertBefore("inside","attr-value",{"style-attr":{pattern:/\s*style=("|').*?\1/i,inside:{"attr-name":{pattern:/^\s*style/i,inside:Prism.languages.markup.tag.inside},punctuation:/^\s*=\s*['"]|['"]\s*$/,"attr-value":{pattern:/.+/i,inside:Prism.languages.css}},alias:"language-css"}},Prism.languages.markup.tag)),Prism.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\w\W]*?\*\//,lookbehind:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0}],string:{pattern:/(["'])(\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/((?:\b(?:class|interface|extends|implements|trait|instanceof|new)\s+)|(?:catch\s+\())[a-z0-9_\.\\]+/i,lookbehind:!0,inside:{punctuation:/(\.|\\)/}},keyword:/\b(if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/,boolean:/\b(true|false)\b/,function:/[a-z0-9_]+(?=\()/i,number:/\b-?(?:0x[\da-f]+|\d*\.?\d+(?:e[+-]?\d+)?)\b/i,operator:/--?|\+\+?|!=?=?|<=?|>=?|==?=?|&&?|\|\|?|\?|\*|\/|~|\^|%/,punctuation:/[{}[\];(),.:]/},Prism.languages.javascript=Prism.languages.extend("clike",{keyword:/\b(as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|var|void|while|with|yield)\b/,number:/\b-?(0x[\dA-Fa-f]+|0b[01]+|0o[0-7]+|\d*\.?\d+([Ee][+-]?\d+)?|NaN|Infinity)\b/,function:/[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*(?=\()/i,operator:/--?|\+\+?|!=?=?|<=?|>=?|==?=?|&&?|\|\|?|\?|\*\*?|\/|~|\^|%|\.{3}/}),Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:/(^|[^\/])\/(?!\/)(\[.+?]|\\.|[^\/\\\r\n])+\/[gimyu]{0,5}(?=\s*($|[\r\n,.;})]))/,lookbehind:!0,greedy:!0}}),Prism.languages.insertBefore("javascript","string",{"template-string":{pattern:/`(?:\\\\|\\?[^\\])*?`/,greedy:!0,inside:{interpolation:{pattern:/\$\{[^}]+\}/,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}}}),Prism.languages.markup&&Prism.languages.insertBefore("markup","tag",{script:{pattern:/(<script[\w\W]*?>)[\w\W]*?(?=<\/script>)/i,lookbehind:!0,inside:Prism.languages.javascript,alias:"language-javascript"}}),Prism.languages.js=Prism.languages.javascript,function(Prism){var insideString={variable:[{pattern:/\$?\(\([\w\W]+?\)\)/,inside:{variable:[{pattern:/(^\$\(\([\w\W]+)\)\)/,lookbehind:!0},/^\$\(\(/],number:/\b-?(?:0x[\dA-Fa-f]+|\d*\.?\d+(?:[Ee]-?\d+)?)\b/,operator:/--?|-=|\+\+?|\+=|!=?|~|\*\*?|\*=|\/=?|%=?|<<=?|>>=?|<=?|>=?|==?|&&?|&=|\^=?|\|\|?|\|=|\?|:/,punctuation:/\(\(?|\)\)?|,|;/}},{pattern:/\$\([^)]+\)|`[^`]+`/,inside:{variable:/^\$\(|^`|\)$|`$/}},/\$(?:[a-z0-9_#\?\*!@]+|\{[^}]+\})/i]};Prism.languages.bash={shebang:{pattern:/^#!\s*\/bin\/bash|^#!\s*\/bin\/sh/,alias:"important"},comment:{pattern:/(^|[^"{\\])#.*/,lookbehind:!0},string:[{pattern:/((?:^|[^<])<<\s*)(?:"|')?(\w+?)(?:"|')?\s*\r?\n(?:[\s\S])*?\r?\n\2/g,lookbehind:!0,greedy:!0,inside:insideString},{pattern:/(["'])(?:\\\\|\\?[^\\])*?\1/g,greedy:!0,inside:insideString}],variable:insideString.variable,function:{pattern:/(^|\s|;|\||&)(?:alias|apropos|apt-get|aptitude|aspell|awk|basename|bash|bc|bg|builtin|bzip2|cal|cat|cd|cfdisk|chgrp|chmod|chown|chroot|chkconfig|cksum|clear|cmp|comm|command|cp|cron|crontab|csplit|cut|date|dc|dd|ddrescue|df|diff|diff3|dig|dir|dircolors|dirname|dirs|dmesg|du|egrep|eject|enable|env|ethtool|eval|exec|expand|expect|export|expr|fdformat|fdisk|fg|fgrep|file|find|fmt|fold|format|free|fsck|ftp|fuser|gawk|getopts|git|grep|groupadd|groupdel|groupmod|groups|gzip|hash|head|help|hg|history|hostname|htop|iconv|id|ifconfig|ifdown|ifup|import|install|jobs|join|kill|killall|less|link|ln|locate|logname|logout|look|lpc|lpr|lprint|lprintd|lprintq|lprm|ls|lsof|make|man|mkdir|mkfifo|mkisofs|mknod|more|most|mount|mtools|mtr|mv|mmv|nano|netstat|nice|nl|nohup|notify-send|npm|nslookup|open|op|passwd|paste|pathchk|ping|pkill|popd|pr|printcap|printenv|printf|ps|pushd|pv|pwd|quota|quotacheck|quotactl|ram|rar|rcp|read|readarray|readonly|reboot|rename|renice|remsync|rev|rm|rmdir|rsync|screen|scp|sdiff|sed|seq|service|sftp|shift|shopt|shutdown|sleep|slocate|sort|source|split|ssh|stat|strace|su|sudo|sum|suspend|sync|tail|tar|tee|test|time|timeout|times|touch|top|traceroute|trap|tr|tsort|tty|type|ulimit|umask|umount|unalias|uname|unexpand|uniq|units|unrar|unshar|uptime|useradd|userdel|usermod|users|uuencode|uudecode|v|vdir|vi|vmstat|wait|watch|wc|wget|whereis|which|who|whoami|write|xargs|xdg-open|yes|zip)(?=$|\s|;|\||&)/,lookbehind:!0},keyword:{pattern:/(^|\s|;|\||&)(?:let|:|\.|if|then|else|elif|fi|for|break|continue|while|in|case|function|select|do|done|until|echo|exit|return|set|declare)(?=$|\s|;|\||&)/,lookbehind:!0},boolean:{pattern:/(^|\s|;|\||&)(?:true|false)(?=$|\s|;|\||&)/,lookbehind:!0},operator:/&&?|\|\|?|==?|!=?|<<<?|>>|<=?|>=?|=~/,punctuation:/\$?\(\(?|\)\)?|\.\.|[{}[\];]/};var inside=insideString.variable[1].inside;inside.function=Prism.languages.bash.function,inside.keyword=Prism.languages.bash.keyword,inside.boolean=Prism.languages.bash.boolean,inside.operator=Prism.languages.bash.operator,inside.punctuation=Prism.languages.bash.punctuation}(Prism),Prism.languages.git={comment:/^#.*/m,deleted:/^[-–].*/m,inserted:/^\+.*/m,string:/("|')(\\?.)*?\1/m,command:{pattern:/^.*\$ git .*$/m,inside:{parameter:/\s(--|-)\w+/m}},coord:/^@@.*@@$/m,commit_sha1:/^commit \w{40}$/m},Prism.languages.php=Prism.languages.extend("clike",{keyword:/\b(and|or|xor|array|as|break|case|cfunction|class|const|continue|declare|default|die|do|else|elseif|enddeclare|endfor|endforeach|endif|endswitch|endwhile|extends|for|foreach|function|include|include_once|global|if|new|return|static|switch|use|require|require_once|var|while|abstract|interface|public|implements|private|protected|parent|throw|null|echo|print|trait|namespace|final|yield|goto|instanceof|finally|try|catch)\b/i,constant:/\b[A-Z0-9_]{2,}\b/,comment:{pattern:/(^|[^\\])(?:\/\*[\w\W]*?\*\/|\/\/.*)/,lookbehind:!0,greedy:!0}}),Prism.languages.insertBefore("php","class-name",{"shell-comment":{pattern:/(^|[^\\])#.*/,lookbehind:!0,alias:"comment"}}),Prism.languages.insertBefore("php","keyword",{delimiter:/\?>|<\?(?:php)?/i,variable:/\$\w+\b/i,package:{pattern:/(\\|namespace\s+|use\s+)[\w\\]+/,lookbehind:!0,inside:{punctuation:/\\/}}}),Prism.languages.insertBefore("php","operator",{property:{pattern:/(->)[\w]+/,lookbehind:!0}}),Prism.languages.markup&&(Prism.hooks.add("before-highlight",function(env){"php"===env.language&&(env.tokenStack=[],env.code=env.code.replace(/(?:<\?php|<\?)[\w\W]*?(?:\?>)/gi,function(match){return env.tokenStack.push(match),"{{{PHP"+env.tokenStack.length+"}}}"}))}),Prism.hooks.add("after-highlight",function(env){if("php"===env.language){for(var t,i=0;t=env.tokenStack[i];i++)env.highlightedCode=env.highlightedCode.replace("{{{PHP"+(i+1)+"}}}",Prism.highlight(t,env.grammar,"php").replace(/\$/g,"$$$$"));env.element.innerHTML=env.highlightedCode}}),Prism.hooks.add("wrap",function(env){"php"===env.language&&"markup"===env.type&&(env.content=env.content.replace(/(\{\{\{PHP[0-9]+\}\}\})/g,'<span class="token php">$1</span>'))}),Prism.languages.insertBefore("php","comment",{markup:{pattern:/<[^?]\/?(.*?)>/,inside:Prism.languages.markup},php:/\{\{\{PHP[0-9]+\}\}\}/})),Prism.languages.scss=Prism.languages.extend("css",{comment:{pattern:/(^|[^\\])(?:\/\*[\w\W]*?\*\/|\/\/.*)/,lookbehind:!0},atrule:{pattern:/@[\w-]+(?:\([^()]+\)|[^(])*?(?=\s+[{;])/,inside:{rule:/@[\w-]+/}},url:/(?:[-a-z]+-)*url(?=\()/i,selector:{pattern:/(?=\S)[^@;\{\}\(\)]?([^@;\{\}\(\)]|&|#\{\$[-_\w]+\})+(?=\s*\{(\}|\s|[^\}]+(:|\{)[^\}]+))/m,inside:{parent:{pattern:/&/,alias:"important"},placeholder:/%[-_\w]+/,variable:/\$[-_\w]+|#\{\$[-_\w]+\}/}}}),Prism.languages.insertBefore("scss","atrule",{keyword:[/@(?:if|else(?: if)?|for|each|while|import|extend|debug|warn|mixin|include|function|return|content)/i,{pattern:/( +)(?:from|through)(?= )/,lookbehind:!0}]}),Prism.languages.scss.property={pattern:/(?:[\w-]|\$[-_\w]+|#\{\$[-_\w]+\})+(?=\s*:)/i,inside:{variable:/\$[-_\w]+|#\{\$[-_\w]+\}/}},Prism.languages.insertBefore("scss","important",{variable:/\$[-_\w]+|#\{\$[-_\w]+\}/}),Prism.languages.insertBefore("scss","function",{placeholder:{pattern:/%[-_\w]+/,alias:"selector"},statement:{pattern:/\B!(?:default|optional)\b/i,alias:"keyword"},boolean:/\b(?:true|false)\b/,null:/\bnull\b/,operator:{pattern:/(\s)(?:[-+*\/%]|[=!]=|<=?|>=?|and|or|not)(?=\s)/,lookbehind:!0}}),Prism.languages.scss.atrule.inside.rest=Prism.util.clone(Prism.languages.scss),function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?factory(exports):"function"==typeof define&&define.amd?define(["exports"],factory):factory(global.async=global.async||{})}(this,function(exports){"use strict";function apply(func,thisArg,args){var length=args.length;switch(length){case 0:return func.call(thisArg);case 1:return func.call(thisArg,args[0]);case 2:return func.call(thisArg,args[0],args[1]);case 3:return func.call(thisArg,args[0],args[1],args[2])}return func.apply(thisArg,args)}function isObject(value){var type=typeof value;return!!value&&("object"==type||"function"==type)}function isFunction(value){var tag=isObject(value)?objectToString.call(value):"";return tag==funcTag||tag==genTag}function isObjectLike(value){return!!value&&"object"==typeof value}function isSymbol(value){return"symbol"==typeof value||isObjectLike(value)&&objectToString$1.call(value)==symbolTag}function toNumber(value){if("number"==typeof value)return value;if(isSymbol(value))return NAN;if(isObject(value)){var other=isFunction(value.valueOf)?value.valueOf():value;value=isObject(other)?other+"":other}if("string"!=typeof value)return 0===value?value:+value;value=value.replace(reTrim,"");var isBinary=reIsBinary.test(value);return isBinary||reIsOctal.test(value)?freeParseInt(value.slice(2),isBinary?2:8):reIsBadHex.test(value)?NAN:+value}function toFinite(value){if(!value)return 0===value?value:0;if(value=toNumber(value),value===INFINITY||value===-INFINITY){var sign=value<0?-1:1;return sign*MAX_INTEGER}return value===value?value:0}function toInteger(value){var result=toFinite(value),remainder=result%1;return result===result?remainder?result-remainder:result:0}function rest(func,start){if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);return start=nativeMax(void 0===start?func.length-1:toInteger(start),0),function(){for(var args=arguments,index=-1,length=nativeMax(args.length-start,0),array=Array(length);++index<length;)array[index]=args[start+index];switch(start){case 0:return func.call(this,array);case 1:return func.call(this,args[0],array);case 2:return func.call(this,args[0],args[1],array)}var otherArgs=Array(start+1);for(index=-1;++index<start;)otherArgs[index]=args[index];return otherArgs[start]=array,apply(func,this,otherArgs)}}function initialParams(fn){return rest(function(args){var callback=args.pop();fn.call(this,args,callback)})}function applyEach$1(eachfn){return rest(function(fns,args){var go=initialParams(function(args,callback){var that=this;return eachfn(fns,function(fn,cb){fn.apply(that,args.concat([cb]))},callback)});return args.length?go.apply(this,args):go})}function baseProperty(key){return function(object){return null==object?void 0:object[key]}}function isLength(value){return"number"==typeof value&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}function isArrayLike(value){return null!=value&&isLength(getLength(value))&&!isFunction(value)}function noop(){}function once(fn){return function(){if(null!==fn){var callFn=fn;fn=null,callFn.apply(this,arguments)}}}function getIterator(coll){return iteratorSymbol&&coll[iteratorSymbol]&&coll[iteratorSymbol]()}function getPrototype(value){return nativeGetPrototype(Object(value))}function baseHas(object,key){return null!=object&&(hasOwnProperty.call(object,key)||"object"==typeof object&&key in object&&null===getPrototype(object))}function baseKeys(object){return nativeKeys(Object(object))}function baseTimes(n,iteratee){for(var index=-1,result=Array(n);++index<n;)result[index]=iteratee(index);return result}function isArrayLikeObject(value){return isObjectLike(value)&&isArrayLike(value)}function isArguments(value){return isArrayLikeObject(value)&&hasOwnProperty$1.call(value,"callee")&&(!propertyIsEnumerable.call(value,"callee")||objectToString$2.call(value)==argsTag)}function isString(value){return"string"==typeof value||!isArray(value)&&isObjectLike(value)&&objectToString$3.call(value)==stringTag}function indexKeys(object){var length=object?object.length:void 0;return isLength(length)&&(isArray(object)||isString(object)||isArguments(object))?baseTimes(length,String):null}function isIndex(value,length){return length=null==length?MAX_SAFE_INTEGER$1:length,!!length&&("number"==typeof value||reIsUint.test(value))&&value>-1&&value%1==0&&value<length}function isPrototype(value){var Ctor=value&&value.constructor,proto="function"==typeof Ctor&&Ctor.prototype||objectProto$5;
return value===proto}function keys(object){var isProto=isPrototype(object);if(!isProto&&!isArrayLike(object))return baseKeys(object);var indexes=indexKeys(object),skipIndexes=!!indexes,result=indexes||[],length=result.length;for(var key in object)!baseHas(object,key)||skipIndexes&&("length"==key||isIndex(key,length))||isProto&&"constructor"==key||result.push(key);return result}function createArrayIterator(coll){var i=-1,len=coll.length;return function(){return++i<len?{value:coll[i],key:i}:null}}function createES2015Iterator(iterator){var i=-1;return function(){var item=iterator.next();return item.done?null:(i++,{value:item.value,key:i})}}function createObjectIterator(obj){var okeys=keys(obj),i=-1,len=okeys.length;return function(){var key=okeys[++i];return i<len?{value:obj[key],key:key}:null}}function iterator(coll){if(isArrayLike(coll))return createArrayIterator(coll);var iterator=getIterator(coll);return iterator?createES2015Iterator(iterator):createObjectIterator(coll)}function onlyOnce(fn){return function(){if(null===fn)throw new Error("Callback was already called.");var callFn=fn;fn=null,callFn.apply(this,arguments)}}function _eachOfLimit(limit){return function(obj,iteratee,callback){function iterateeCallback(err){if(running-=1,err)done=!0,callback(err);else{if(done&&running<=0)return callback(null);replenish()}}function replenish(){for(;running<limit&&!done;){var elem=nextElem();if(null===elem)return done=!0,void(running<=0&&callback(null));running+=1,iteratee(elem.value,elem.key,onlyOnce(iterateeCallback))}}if(callback=once(callback||noop),limit<=0||!obj)return callback(null);var nextElem=iterator(obj),done=!1,running=0;replenish()}}function eachOfLimit(coll,limit,iteratee,callback){_eachOfLimit(limit)(coll,iteratee,callback)}function doLimit(fn,limit){return function(iterable,iteratee,callback){return fn(iterable,limit,iteratee,callback)}}function before(n,func){var result;if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT$1);return n=toInteger(n),function(){return--n>0&&(result=func.apply(this,arguments)),n<=1&&(func=void 0),result}}function once$1(func){return before(2,func)}function eachOfArrayLike(coll,iteratee,callback){function iteratorCallback(err){err?callback(err):++completed===length&&callback(null)}callback=once$1(callback||noop);var index=0,completed=0,length=coll.length;for(0===length&&callback(null);index<length;index++)iteratee(coll[index],index,onlyOnce(iteratorCallback))}function eachOf(coll,iteratee,callback){var eachOfImplementation=isArrayLike(coll)?eachOfArrayLike:eachOfGeneric;eachOfImplementation(coll,iteratee,callback)}function doParallel(fn){return function(obj,iteratee,callback){return fn(eachOf,obj,iteratee,callback)}}function _asyncMap(eachfn,arr,iteratee,callback){callback=once(callback||noop),arr=arr||[];var results=[],counter=0;eachfn(arr,function(value,_,callback){var index=counter++;iteratee(value,function(err,v){results[index]=v,callback(err)})},function(err){callback(err,results)})}function doParallelLimit(fn){return function(obj,limit,iteratee,callback){return fn(_eachOfLimit(limit),obj,iteratee,callback)}}function asyncify(func){return initialParams(function(args,callback){var result;try{result=func.apply(this,args)}catch(e){return callback(e)}isObject(result)&&"function"==typeof result.then?result.then(function(value){callback(null,value)},function(err){callback(err.message?err:new Error(err))}):callback(null,result)})}function arrayEach(array,iteratee){for(var index=-1,length=array?array.length:0;++index<length&&iteratee(array[index],index,array)!==!1;);return array}function createBaseFor(fromRight){return function(object,iteratee,keysFunc){for(var index=-1,iterable=Object(object),props=keysFunc(object),length=props.length;length--;){var key=props[fromRight?length:++index];if(iteratee(iterable[key],key,iterable)===!1)break}return object}}function baseForOwn(object,iteratee){return object&&baseFor(object,iteratee,keys)}function indexOfNaN(array,fromIndex,fromRight){for(var length=array.length,index=fromIndex+(fromRight?1:-1);fromRight?index--:++index<length;){var other=array[index];if(other!==other)return index}return-1}function baseIndexOf(array,value,fromIndex){if(value!==value)return indexOfNaN(array,fromIndex);for(var index=fromIndex-1,length=array.length;++index<length;)if(array[index]===value)return index;return-1}function auto(tasks,concurrency,callback){function enqueueTask(key,task){readyTasks.push(function(){runTask(key,task)})}function processQueue(){if(0===readyTasks.length&&0===runningTasks)return callback(null,results);for(;readyTasks.length&&runningTasks<concurrency;){var run=readyTasks.shift();run()}}function addListener(taskName,fn){var taskListeners=listeners[taskName];taskListeners||(taskListeners=listeners[taskName]=[]),taskListeners.push(fn)}function taskComplete(taskName){var taskListeners=listeners[taskName]||[];arrayEach(taskListeners,function(fn){fn()}),processQueue()}function runTask(key,task){if(!hasError){var taskCallback=onlyOnce(rest(function(err,args){if(runningTasks--,args.length<=1&&(args=args[0]),err){var safeResults={};baseForOwn(results,function(val,rkey){safeResults[rkey]=val}),safeResults[key]=args,hasError=!0,listeners=[],callback(err,safeResults)}else results[key]=args,taskComplete(key)}));runningTasks++;var taskFn=task[task.length-1];task.length>1?taskFn(results,taskCallback):taskFn(taskCallback)}}function checkForDeadlocks(){for(var currentTask,counter=0;readyToCheck.length;)currentTask=readyToCheck.pop(),counter++,arrayEach(getDependents(currentTask),function(dependent){0===--uncheckedDependencies[dependent]&&readyToCheck.push(dependent)});if(counter!==numTasks)throw new Error("async.auto cannot execute tasks due to a recursive dependency")}function getDependents(taskName){var result=[];return baseForOwn(tasks,function(task,key){isArray(task)&&baseIndexOf(task,taskName,0)>=0&&result.push(key)}),result}"function"==typeof concurrency&&(callback=concurrency,concurrency=null),callback=once(callback||noop);var keys$$=keys(tasks),numTasks=keys$$.length;if(!numTasks)return callback(null);concurrency||(concurrency=numTasks);var results={},runningTasks=0,hasError=!1,listeners={},readyTasks=[],readyToCheck=[],uncheckedDependencies={};baseForOwn(tasks,function(task,key){if(!isArray(task))return enqueueTask(key,[task]),void readyToCheck.push(key);var dependencies=task.slice(0,task.length-1),remainingDependencies=dependencies.length;return 0===remainingDependencies?(enqueueTask(key,task),void readyToCheck.push(key)):(uncheckedDependencies[key]=remainingDependencies,void arrayEach(dependencies,function(dependencyName){if(!tasks[dependencyName])throw new Error("async.auto task `"+key+"` has a non-existent dependency in "+dependencies.join(", "));addListener(dependencyName,function(){remainingDependencies--,0===remainingDependencies&&enqueueTask(key,task)})}))}),checkForDeadlocks(),processQueue()}function arrayMap(array,iteratee){for(var index=-1,length=array?array.length:0,result=Array(length);++index<length;)result[index]=iteratee(array[index],index,array);return result}function copyArray(source,array){var index=-1,length=source.length;for(array||(array=Array(length));++index<length;)array[index]=source[index];return array}function checkGlobal(value){return value&&value.Object===Object?value:null}function baseToString(value){if("string"==typeof value)return value;if(isSymbol(value))return symbolToString?symbolToString.call(value):"";var result=value+"";return"0"==result&&1/value==-INFINITY$1?"-0":result}function baseSlice(array,start,end){var index=-1,length=array.length;start<0&&(start=-start>length?0:length+start),end=end>length?length:end,end<0&&(end+=length),length=start>end?0:end-start>>>0,start>>>=0;for(var result=Array(length);++index<length;)result[index]=array[index+start];return result}function castSlice(array,start,end){var length=array.length;return end=void 0===end?length:end,!start&&end>=length?array:baseSlice(array,start,end)}function charsEndIndex(strSymbols,chrSymbols){for(var index=strSymbols.length;index--&&baseIndexOf(chrSymbols,strSymbols[index],0)>-1;);return index}function charsStartIndex(strSymbols,chrSymbols){for(var index=-1,length=strSymbols.length;++index<length&&baseIndexOf(chrSymbols,strSymbols[index],0)>-1;);return index}function stringToArray(string){return string.match(reComplexSymbol)}function toString(value){return null==value?"":baseToString(value)}function trim(string,chars,guard){if(string=toString(string),string&&(guard||void 0===chars))return string.replace(reTrim$1,"");if(!string||!(chars=baseToString(chars)))return string;var strSymbols=stringToArray(string),chrSymbols=stringToArray(chars),start=charsStartIndex(strSymbols,chrSymbols),end=charsEndIndex(strSymbols,chrSymbols)+1;return castSlice(strSymbols,start,end).join("")}function parseParams(func){return func=func.toString().replace(STRIP_COMMENTS,""),func=func.match(FN_ARGS)[2].replace(" ",""),func=func?func.split(FN_ARG_SPLIT):[],func=func.map(function(arg){return trim(arg.replace(FN_ARG,""))})}function autoInject(tasks,callback){var newTasks={};baseForOwn(tasks,function(taskFn,key){function newTask(results,taskCb){var newArgs=arrayMap(params,function(name){return results[name]});newArgs.push(taskCb),taskFn.apply(null,newArgs)}var params;if(isArray(taskFn))params=copyArray(taskFn),taskFn=params.pop(),newTasks[key]=params.concat(params.length>0?newTask:taskFn);else if(1===taskFn.length)newTasks[key]=taskFn;else{if(params=parseParams(taskFn),0===taskFn.length&&0===params.length)throw new Error("autoInject task functions require explicit parameters.");params.pop(),newTasks[key]=params.concat(newTask)}}),auto(newTasks,callback)}function fallback(fn){setTimeout(fn,0)}function wrap(defer){return rest(function(fn,args){defer(function(){fn.apply(null,args)})})}function DLL(){this.head=this.tail=null,this.length=0}function setInitial(dll,node){dll.length=1,dll.head=dll.tail=node}function queue(worker,concurrency,payload){function _insert(data,insertAtFront,callback){if(null!=callback&&"function"!=typeof callback)throw new Error("task callback must be a function");return q.started=!0,isArray(data)||(data=[data]),0===data.length&&q.idle()?setImmediate$1(function(){q.drain()}):(arrayEach(data,function(task){var item={data:task,callback:callback||noop};insertAtFront?q._tasks.unshift(item):q._tasks.push(item)}),void setImmediate$1(q.process))}function _next(tasks){return rest(function(args){workers-=1,arrayEach(tasks,function(task){arrayEach(workersList,function(worker,index){if(worker===task)return workersList.splice(index,1),!1}),task.callback.apply(task,args),null!=args[0]&&q.error(args[0],task.data)}),workers<=q.concurrency-q.buffer&&q.unsaturated(),q.idle()&&q.drain(),q.process()})}if(null==concurrency)concurrency=1;else if(0===concurrency)throw new Error("Concurrency must not be zero");var workers=0,workersList=[],q={_tasks:new DLL,concurrency:concurrency,payload:payload,saturated:noop,unsaturated:noop,buffer:concurrency/4,empty:noop,drain:noop,error:noop,started:!1,paused:!1,push:function(data,callback){_insert(data,!1,callback)},kill:function(){q.drain=noop,q._tasks.empty()},unshift:function(data,callback){_insert(data,!0,callback)},process:function(){for(;!q.paused&&workers<q.concurrency&&q._tasks.length;){var tasks=[],data=[],l=q._tasks.length;q.payload&&(l=Math.min(l,q.payload));for(var i=0;i<l;i++){var node=q._tasks.shift();tasks.push(node),data.push(node.data)}0===q._tasks.length&&q.empty(),workers+=1,workersList.push(tasks[0]),workers===q.concurrency&&q.saturated();var cb=onlyOnce(_next(tasks));worker(data,cb)}},length:function(){return q._tasks.length},running:function(){return workers},workersList:function(){return workersList},idle:function(){return q._tasks.length+workers===0},pause:function(){q.paused=!0},resume:function(){if(q.paused!==!1){q.paused=!1;for(var resumeCount=Math.min(q.concurrency,q._tasks.length),w=1;w<=resumeCount;w++)setImmediate$1(q.process)}}};return q}function cargo(worker,payload){return queue(worker,1,payload)}function reduce(coll,memo,iteratee,callback){callback=once(callback||noop),eachOfSeries(coll,function(x,i,callback){iteratee(memo,x,function(err,v){memo=v,callback(err)})},function(err){callback(err,memo)})}function concat$1(eachfn,arr,fn,callback){var result=[];eachfn(arr,function(x,index,cb){fn(x,function(err,y){result=result.concat(y||[]),cb(err)})},function(err){callback(err,result)})}function doSeries(fn){return function(obj,iteratee,callback){return fn(eachOfSeries,obj,iteratee,callback)}}function identity(value){return value}function _createTester(eachfn,check,getResult){return function(arr,limit,iteratee,cb){function done(err){cb&&(err?cb(err):cb(null,getResult(!1)))}function wrappedIteratee(x,_,callback){return cb?void iteratee(x,function(err,v){cb&&(err?(cb(err),cb=iteratee=!1):check(v)&&(cb(null,getResult(!0,x)),cb=iteratee=!1)),callback()}):callback()}arguments.length>3?(cb=cb||noop,eachfn(arr,limit,wrappedIteratee,done)):(cb=iteratee,cb=cb||noop,iteratee=limit,eachfn(arr,wrappedIteratee,done))}}function _findGetResult(v,x){return x}function consoleFunc(name){return rest(function(fn,args){fn.apply(null,args.concat([rest(function(err,args){"object"==typeof console&&(err?console.error&&console.error(err):console[name]&&arrayEach(args,function(x){console[name](x)}))})]))})}function doDuring(fn,test,callback){function check(err,truth){return err?callback(err):truth?void fn(next):callback(null)}callback=onlyOnce(callback||noop);var next=rest(function(err,args){return err?callback(err):(args.push(check),void test.apply(this,args))});check(null,!0)}function doWhilst(iteratee,test,callback){callback=onlyOnce(callback||noop);var next=rest(function(err,args){return err?callback(err):test.apply(this,args)?iteratee(next):void callback.apply(null,[null].concat(args))});iteratee(next)}function doUntil(fn,test,callback){doWhilst(fn,function(){return!test.apply(this,arguments)},callback)}function during(test,fn,callback){function next(err){return err?callback(err):void test(check)}function check(err,truth){return err?callback(err):truth?void fn(next):callback(null)}callback=onlyOnce(callback||noop),test(check)}function _withoutIndex(iteratee){return function(value,index,callback){return iteratee(value,callback)}}function eachLimit(coll,iteratee,callback){eachOf(coll,_withoutIndex(iteratee),callback)}function eachLimit$1(coll,limit,iteratee,callback){_eachOfLimit(limit)(coll,_withoutIndex(iteratee),callback)}function ensureAsync(fn){return initialParams(function(args,callback){var sync=!0;args.push(function(){var innerArgs=arguments;sync?setImmediate$1(function(){callback.apply(null,innerArgs)}):callback.apply(null,innerArgs)}),fn.apply(this,args),sync=!1})}function notId(v){return!v}function _filter(eachfn,arr,iteratee,callback){callback=once(callback||noop);var results=[];eachfn(arr,function(x,index,callback){iteratee(x,function(err,v){err?callback(err):(v&&results.push({index:index,value:x}),callback())})},function(err){err?callback(err):callback(null,arrayMap(results.sort(function(a,b){return a.index-b.index}),baseProperty("value")))})}function forever(fn,errback){function next(err){return err?done(err):void task(next)}var done=onlyOnce(errback||noop),task=ensureAsync(fn);next()}function mapValuesLimit(obj,limit,iteratee,callback){callback=once(callback||noop);var newObj={};eachOfLimit(obj,limit,function(val,key,next){iteratee(val,key,function(err,result){return err?next(err):(newObj[key]=result,void next())})},function(err){callback(err,newObj)})}function has(obj,key){return key in obj}function memoize(fn,hasher){var memo=Object.create(null),queues=Object.create(null);hasher=hasher||identity;var memoized=initialParams(function(args,callback){var key=hasher.apply(null,args);has(memo,key)?setImmediate$1(function(){callback.apply(null,memo[key])}):has(queues,key)?queues[key].push(callback):(queues[key]=[callback],fn.apply(null,args.concat([rest(function(args){memo[key]=args;var q=queues[key];delete queues[key];for(var i=0,l=q.length;i<l;i++)q[i].apply(null,args)})])))});return memoized.memo=memo,memoized.unmemoized=fn,memoized}function _parallel(eachfn,tasks,callback){callback=callback||noop;var results=isArrayLike(tasks)?[]:{};eachfn(tasks,function(task,key,callback){task(rest(function(err,args){args.length<=1&&(args=args[0]),results[key]=args,callback(err)}))},function(err){callback(err,results)})}function parallelLimit(tasks,callback){_parallel(eachOf,tasks,callback)}function parallelLimit$1(tasks,limit,callback){_parallel(_eachOfLimit(limit),tasks,callback)}function queue$1(worker,concurrency){return queue(function(items,cb){worker(items[0],cb)},concurrency,1)}function priorityQueue(worker,concurrency){var q=queue$1(worker,concurrency);return q.push=function(data,priority,callback){if(null==callback&&(callback=noop),"function"!=typeof callback)throw new Error("task callback must be a function");if(q.started=!0,isArray(data)||(data=[data]),0===data.length)return setImmediate$1(function(){q.drain()});priority=priority||0;for(var nextNode=q._tasks.head;nextNode&&priority>=nextNode.priority;)nextNode=nextNode.next;arrayEach(data,function(task){var item={data:task,priority:priority,callback:callback};nextNode?q._tasks.insertBefore(nextNode,item):q._tasks.push(item)}),setImmediate$1(q.process)},delete q.unshift,q}function race(tasks,callback){return callback=once(callback||noop),isArray(tasks)?tasks.length?void arrayEach(tasks,function(task){task(callback)}):callback():callback(new TypeError("First argument to race must be an array of functions"))}function reduceRight(array,memo,iteratee,callback){var reversed=slice.call(array).reverse();reduce(reversed,memo,iteratee,callback)}function reflect(fn){return initialParams(function(args,reflectCallback){return args.push(rest(function(err,cbArgs){if(err)reflectCallback(null,{error:err});else{var value=null;1===cbArgs.length?value=cbArgs[0]:cbArgs.length>1&&(value=cbArgs),reflectCallback(null,{value:value})}})),fn.apply(this,args)})}function reject$1(eachfn,arr,iteratee,callback){_filter(eachfn,arr,function(value,cb){iteratee(value,function(err,v){err?cb(err):cb(null,!v)})},callback)}function reflectAll(tasks){var results;return isArray(tasks)?results=arrayMap(tasks,reflect):(results={},baseForOwn(tasks,function(task,key){results[key]=reflect.call(this,task)})),results}function constant$1(value){return function(){return value}}function retry(opts,task,callback){function parseTimes(acc,t){if("object"==typeof t)acc.times=+t.times||DEFAULT_TIMES,acc.intervalFunc="function"==typeof t.interval?t.interval:constant$1(+t.interval||DEFAULT_INTERVAL);else{if("number"!=typeof t&&"string"!=typeof t)throw new Error("Invalid arguments for async.retry");acc.times=+t||DEFAULT_TIMES}}function retryAttempt(){task(function(err){err&&attempt++<options.times?setTimeout(retryAttempt,options.intervalFunc(attempt)):callback.apply(null,arguments)})}var DEFAULT_TIMES=5,DEFAULT_INTERVAL=0,options={times:DEFAULT_TIMES,intervalFunc:constant$1(DEFAULT_INTERVAL)};if(arguments.length<3&&"function"==typeof opts?(callback=task||noop,task=opts):(parseTimes(options,opts),callback=callback||noop),"function"!=typeof task)throw new Error("Invalid arguments for async.retry");var attempt=1;retryAttempt()}function retryable(opts,task){return task||(task=opts,opts=null),initialParams(function(args,callback){function taskFn(cb){task.apply(null,args.concat([cb]))}opts?retry(opts,taskFn,callback):retry(taskFn,callback)})}function series(tasks,callback){_parallel(eachOfSeries,tasks,callback)}function sortBy(coll,iteratee,callback){function comparator(left,right){var a=left.criteria,b=right.criteria;return a<b?-1:a>b?1:0}map(coll,function(x,callback){iteratee(x,function(err,criteria){return err?callback(err):void callback(null,{value:x,criteria:criteria})})},function(err,results){return err?callback(err):void callback(null,arrayMap(results.sort(comparator),baseProperty("value")))})}function timeout(asyncFn,milliseconds,info){function injectedCallback(){timedOut||(originalCallback.apply(null,arguments),clearTimeout(timer))}function timeoutCallback(){var name=asyncFn.name||"anonymous",error=new Error('Callback function "'+name+'" timed out.');error.code="ETIMEDOUT",info&&(error.info=info),timedOut=!0,originalCallback(error)}var originalCallback,timer,timedOut=!1;return initialParams(function(args,origCallback){originalCallback=origCallback,timer=setTimeout(timeoutCallback,milliseconds),asyncFn.apply(null,args.concat(injectedCallback))})}function baseRange(start,end,step,fromRight){for(var index=-1,length=nativeMax$1(nativeCeil((end-start)/(step||1)),0),result=Array(length);length--;)result[fromRight?length:++index]=start,start+=step;return result}function timeLimit(count,limit,iteratee,callback){mapLimit(baseRange(0,count,1),limit,iteratee,callback)}function transform(coll,accumulator,iteratee,callback){3===arguments.length&&(callback=iteratee,iteratee=accumulator,accumulator=isArray(coll)?[]:{}),callback=once(callback||noop),eachOf(coll,function(v,k,cb){iteratee(accumulator,v,k,cb)},function(err){callback(err,accumulator)})}function unmemoize(fn){return function(){return(fn.unmemoized||fn).apply(null,arguments)}}function whilst(test,iteratee,callback){if(callback=onlyOnce(callback||noop),!test())return callback(null);var next=rest(function(err,args){return err?callback(err):test()?iteratee(next):void callback.apply(null,[null].concat(args))});iteratee(next)}function until(test,fn,callback){whilst(function(){return!test.apply(this,arguments)},fn,callback)}function waterfall(tasks,callback){function nextTask(args){if(taskIndex===tasks.length)return callback.apply(null,[null].concat(args));var taskCallback=onlyOnce(rest(function(err,args){return err?callback.apply(null,[err].concat(args)):void nextTask(args)}));args.push(taskCallback);var task=tasks[taskIndex++];task.apply(null,args)}if(callback=once(callback||noop),!isArray(tasks))return callback(new Error("First argument to waterfall must be an array of functions"));if(!tasks.length)return callback();var taskIndex=0;nextTask([])}var _defer,funcTag="[object Function]",genTag="[object GeneratorFunction]",objectProto=Object.prototype,objectToString=objectProto.toString,symbolTag="[object Symbol]",objectProto$1=Object.prototype,objectToString$1=objectProto$1.toString,NAN=NaN,reTrim=/^\s+|\s+$/g,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt,INFINITY=1/0,MAX_INTEGER=1.7976931348623157e308,FUNC_ERROR_TEXT="Expected a function",nativeMax=Math.max,getLength=baseProperty("length"),MAX_SAFE_INTEGER=9007199254740991,iteratorSymbol="function"==typeof Symbol&&Symbol.iterator,nativeGetPrototype=Object.getPrototypeOf,objectProto$2=Object.prototype,hasOwnProperty=objectProto$2.hasOwnProperty,nativeKeys=Object.keys,argsTag="[object Arguments]",objectProto$3=Object.prototype,hasOwnProperty$1=objectProto$3.hasOwnProperty,objectToString$2=objectProto$3.toString,propertyIsEnumerable=objectProto$3.propertyIsEnumerable,isArray=Array.isArray,stringTag="[object String]",objectProto$4=Object.prototype,objectToString$3=objectProto$4.toString,MAX_SAFE_INTEGER$1=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/,objectProto$5=Object.prototype,FUNC_ERROR_TEXT$1="Expected a function",eachOfGeneric=doLimit(eachOfLimit,1/0),map=doParallel(_asyncMap),applyEach=applyEach$1(map),mapLimit=doParallelLimit(_asyncMap),mapSeries=doLimit(mapLimit,1),applyEachSeries=applyEach$1(mapSeries),apply$1=rest(function(fn,args){return rest(function(callArgs){return fn.apply(null,args.concat(callArgs))})}),baseFor=createBaseFor(),freeGlobal=checkGlobal("object"==typeof global&&global),freeSelf=checkGlobal("object"==typeof self&&self),thisGlobal=checkGlobal("object"==typeof this&&this),root=freeGlobal||freeSelf||thisGlobal||Function("return this")(),Symbol$1=root.Symbol,INFINITY$1=1/0,symbolProto=Symbol$1?Symbol$1.prototype:void 0,symbolToString=symbolProto?symbolProto.toString:void 0,rsAstralRange="\\ud800-\\udfff",rsComboMarksRange="\\u0300-\\u036f\\ufe20-\\ufe23",rsComboSymbolsRange="\\u20d0-\\u20f0",rsVarRange="\\ufe0e\\ufe0f",rsAstral="["+rsAstralRange+"]",rsCombo="["+rsComboMarksRange+rsComboSymbolsRange+"]",rsFitz="\\ud83c[\\udffb-\\udfff]",rsModifier="(?:"+rsCombo+"|"+rsFitz+")",rsNonAstral="[^"+rsAstralRange+"]",rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]",rsZWJ="\\u200d",reOptMod=rsModifier+"?",rsOptVar="["+rsVarRange+"]?",rsOptJoin="(?:"+rsZWJ+"(?:"+[rsNonAstral,rsRegional,rsSurrPair].join("|")+")"+rsOptVar+reOptMod+")*",rsSeq=rsOptVar+reOptMod+rsOptJoin,rsSymbol="(?:"+[rsNonAstral+rsCombo+"?",rsCombo,rsRegional,rsSurrPair,rsAstral].join("|")+")",reComplexSymbol=RegExp(rsFitz+"(?="+rsFitz+")|"+rsSymbol+rsSeq,"g"),reTrim$1=/^\s+|\s+$/g,FN_ARGS=/^(function)?\s*[^\(]*\(\s*([^\)]*)\)/m,FN_ARG_SPLIT=/,/,FN_ARG=/(=.+)?(\s*)$/,STRIP_COMMENTS=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,hasSetImmediate="function"==typeof setImmediate&&setImmediate,hasNextTick="object"==typeof process&&"function"==typeof process.nextTick;_defer=hasSetImmediate?setImmediate:hasNextTick?process.nextTick:fallback;var setImmediate$1=wrap(_defer);DLL.prototype.removeLink=function(node){return node.prev?node.prev.next=node.next:this.head=node.next,node.next?node.next.prev=node.prev:this.tail=node.prev,node.prev=node.next=null,this.length-=1,node},DLL.prototype.empty=DLL,DLL.prototype.insertAfter=function(node,newNode){newNode.prev=node,newNode.next=node.next,node.next?node.next.prev=newNode:this.tail=newNode,node.next=newNode,this.length+=1},DLL.prototype.insertBefore=function(node,newNode){newNode.prev=node.prev,newNode.next=node,node.prev?node.prev.next=newNode:this.head=newNode,node.prev=newNode,this.length+=1},DLL.prototype.unshift=function(node){this.head?this.insertBefore(this.head,node):setInitial(this,node)},DLL.prototype.push=function(node){this.tail?this.insertAfter(this.tail,node):setInitial(this,node)},DLL.prototype.shift=function(){return this.head&&this.removeLink(this.head)},DLL.prototype.pop=function(){return this.tail&&this.removeLink(this.tail)};var _defer$1,eachOfSeries=doLimit(eachOfLimit,1),seq=rest(function(functions){return rest(function(args){var that=this,cb=args[args.length-1];"function"==typeof cb?args.pop():cb=noop,reduce(functions,args,function(newargs,fn,cb){fn.apply(that,newargs.concat([rest(function(err,nextargs){cb(err,nextargs)})]))},function(err,results){cb.apply(that,[err].concat(results))})})}),compose=rest(function(args){return seq.apply(null,args.reverse())}),concat=doParallel(concat$1),concatSeries=doSeries(concat$1),constant=rest(function(values){var args=[null].concat(values);return initialParams(function(ignoredArgs,callback){return callback.apply(this,args)})}),detect=_createTester(eachOf,identity,_findGetResult),detectLimit=_createTester(eachOfLimit,identity,_findGetResult),detectSeries=_createTester(eachOfSeries,identity,_findGetResult),dir=consoleFunc("dir"),eachSeries=doLimit(eachLimit$1,1),every=_createTester(eachOf,notId,notId),everyLimit=_createTester(eachOfLimit,notId,notId),everySeries=doLimit(everyLimit,1),filter=doParallel(_filter),filterLimit=doParallelLimit(_filter),filterSeries=doLimit(filterLimit,1),log=consoleFunc("log"),mapValues=doLimit(mapValuesLimit,1/0),mapValuesSeries=doLimit(mapValuesLimit,1);_defer$1=hasNextTick?process.nextTick:hasSetImmediate?setImmediate:fallback;var nextTick=wrap(_defer$1),slice=Array.prototype.slice,reject=doParallel(reject$1),rejectLimit=doParallelLimit(reject$1),rejectSeries=doLimit(rejectLimit,1),some=_createTester(eachOf,Boolean,identity),someLimit=_createTester(eachOfLimit,Boolean,identity),someSeries=doLimit(someLimit,1),nativeCeil=Math.ceil,nativeMax$1=Math.max,times=doLimit(timeLimit,1/0),timesSeries=doLimit(timeLimit,1),index={applyEach:applyEach,applyEachSeries:applyEachSeries,apply:apply$1,asyncify:asyncify,auto:auto,autoInject:autoInject,cargo:cargo,compose:compose,concat:concat,concatSeries:concatSeries,constant:constant,detect:detect,detectLimit:detectLimit,detectSeries:detectSeries,dir:dir,doDuring:doDuring,doUntil:doUntil,doWhilst:doWhilst,during:during,each:eachLimit,eachLimit:eachLimit$1,eachOf:eachOf,eachOfLimit:eachOfLimit,eachOfSeries:eachOfSeries,eachSeries:eachSeries,ensureAsync:ensureAsync,every:every,everyLimit:everyLimit,everySeries:everySeries,filter:filter,filterLimit:filterLimit,filterSeries:filterSeries,forever:forever,log:log,map:map,mapLimit:mapLimit,mapSeries:mapSeries,mapValues:mapValues,mapValuesLimit:mapValuesLimit,mapValuesSeries:mapValuesSeries,memoize:memoize,nextTick:nextTick,parallel:parallelLimit,parallelLimit:parallelLimit$1,priorityQueue:priorityQueue,queue:queue$1,race:race,reduce:reduce,reduceRight:reduceRight,reflect:reflect,reflectAll:reflectAll,reject:reject,rejectLimit:rejectLimit,rejectSeries:rejectSeries,retry:retry,retryable:retryable,seq:seq,series:series,setImmediate:setImmediate$1,some:some,someLimit:someLimit,someSeries:someSeries,sortBy:sortBy,timeout:timeout,times:times,timesLimit:timeLimit,timesSeries:timesSeries,transform:transform,unmemoize:unmemoize,until:until,waterfall:waterfall,whilst:whilst,all:every,any:some,forEach:eachLimit,forEachSeries:eachSeries,forEachLimit:eachLimit$1,forEachOf:eachOf,forEachOfSeries:eachOfSeries,forEachOfLimit:eachOfLimit,inject:reduce,foldl:reduce,foldr:reduceRight,select:filter,selectLimit:filterLimit,selectSeries:filterSeries,wrapSync:asyncify};exports.default=index,exports.applyEach=applyEach,exports.applyEachSeries=applyEachSeries,exports.apply=apply$1,exports.asyncify=asyncify,exports.auto=auto,exports.autoInject=autoInject,exports.cargo=cargo,exports.compose=compose,exports.concat=concat,exports.concatSeries=concatSeries,exports.constant=constant,exports.detect=detect,exports.detectLimit=detectLimit,exports.detectSeries=detectSeries,exports.dir=dir,exports.doDuring=doDuring,exports.doUntil=doUntil,exports.doWhilst=doWhilst,exports.during=during,exports.each=eachLimit,exports.eachLimit=eachLimit$1,exports.eachOf=eachOf,exports.eachOfLimit=eachOfLimit,exports.eachOfSeries=eachOfSeries,exports.eachSeries=eachSeries,exports.ensureAsync=ensureAsync,exports.every=every,exports.everyLimit=everyLimit,exports.everySeries=everySeries,exports.filter=filter,exports.filterLimit=filterLimit,exports.filterSeries=filterSeries,exports.forever=forever,exports.log=log,exports.map=map,exports.mapLimit=mapLimit,exports.mapSeries=mapSeries,exports.mapValues=mapValues,exports.mapValuesLimit=mapValuesLimit,exports.mapValuesSeries=mapValuesSeries,exports.memoize=memoize,exports.nextTick=nextTick,exports.parallel=parallelLimit,exports.parallelLimit=parallelLimit$1,exports.priorityQueue=priorityQueue,exports.queue=queue$1,exports.race=race,exports.reduce=reduce,exports.reduceRight=reduceRight,exports.reflect=reflect,exports.reflectAll=reflectAll,exports.reject=reject,exports.rejectLimit=rejectLimit,exports.rejectSeries=rejectSeries,exports.retry=retry,exports.retryable=retryable,exports.seq=seq,exports.series=series,exports.setImmediate=setImmediate$1,exports.some=some,exports.someLimit=someLimit,exports.someSeries=someSeries,exports.sortBy=sortBy,exports.timeout=timeout,exports.times=times,exports.timesLimit=timeLimit,exports.timesSeries=timesSeries,exports.transform=transform,exports.unmemoize=unmemoize,exports.until=until,exports.waterfall=waterfall,exports.whilst=whilst,exports.all=every,exports.allLimit=everyLimit,exports.allSeries=everySeries,exports.any=some,exports.anyLimit=someLimit,exports.anySeries=someSeries,exports.find=detect,exports.findLimit=detectLimit,exports.findSeries=detectSeries,exports.forEach=eachLimit,exports.forEachSeries=eachSeries,exports.forEachLimit=eachLimit$1,exports.forEachOf=eachOf,exports.forEachOfSeries=eachOfSeries,exports.forEachOfLimit=eachOfLimit,exports.inject=reduce,exports.foldl=reduce,exports.foldr=reduceRight,exports.select=filter,exports.selectLimit=filterLimit,exports.selectSeries=filterSeries,exports.wrapSync=asyncify;
}),function(){function addMapEntry(map,pair){return map.set(pair[0],pair[1]),map}function addSetEntry(set,value){return set.add(value),set}function apply(func,thisArg,args){switch(args.length){case 0:return func.call(thisArg);case 1:return func.call(thisArg,args[0]);case 2:return func.call(thisArg,args[0],args[1]);case 3:return func.call(thisArg,args[0],args[1],args[2])}return func.apply(thisArg,args)}function arrayAggregator(array,setter,iteratee,accumulator){for(var index=-1,length=array?array.length:0;++index<length;){var value=array[index];setter(accumulator,value,iteratee(value),array)}return accumulator}function arrayEach(array,iteratee){for(var index=-1,length=array?array.length:0;++index<length&&iteratee(array[index],index,array)!==!1;);return array}function arrayEachRight(array,iteratee){for(var length=array?array.length:0;length--&&iteratee(array[length],length,array)!==!1;);return array}function arrayEvery(array,predicate){for(var index=-1,length=array?array.length:0;++index<length;)if(!predicate(array[index],index,array))return!1;return!0}function arrayFilter(array,predicate){for(var index=-1,length=array?array.length:0,resIndex=0,result=[];++index<length;){var value=array[index];predicate(value,index,array)&&(result[resIndex++]=value)}return result}function arrayIncludes(array,value){var length=array?array.length:0;return!!length&&baseIndexOf(array,value,0)>-1}function arrayIncludesWith(array,value,comparator){for(var index=-1,length=array?array.length:0;++index<length;)if(comparator(value,array[index]))return!0;return!1}function arrayMap(array,iteratee){for(var index=-1,length=array?array.length:0,result=Array(length);++index<length;)result[index]=iteratee(array[index],index,array);return result}function arrayPush(array,values){for(var index=-1,length=values.length,offset=array.length;++index<length;)array[offset+index]=values[index];return array}function arrayReduce(array,iteratee,accumulator,initAccum){var index=-1,length=array?array.length:0;for(initAccum&&length&&(accumulator=array[++index]);++index<length;)accumulator=iteratee(accumulator,array[index],index,array);return accumulator}function arrayReduceRight(array,iteratee,accumulator,initAccum){var length=array?array.length:0;for(initAccum&&length&&(accumulator=array[--length]);length--;)accumulator=iteratee(accumulator,array[length],length,array);return accumulator}function arraySome(array,predicate){for(var index=-1,length=array?array.length:0;++index<length;)if(predicate(array[index],index,array))return!0;return!1}function asciiToArray(string){return string.split("")}function asciiWords(string){return string.match(reAsciiWord)||[]}function baseFindKey(collection,predicate,eachFunc){var result;return eachFunc(collection,function(value,key,collection){if(predicate(value,key,collection))return result=key,!1}),result}function baseFindIndex(array,predicate,fromIndex,fromRight){for(var length=array.length,index=fromIndex+(fromRight?1:-1);fromRight?index--:++index<length;)if(predicate(array[index],index,array))return index;return-1}function baseIndexOf(array,value,fromIndex){if(value!==value)return baseFindIndex(array,baseIsNaN,fromIndex);for(var index=fromIndex-1,length=array.length;++index<length;)if(array[index]===value)return index;return-1}function baseIndexOfWith(array,value,fromIndex,comparator){for(var index=fromIndex-1,length=array.length;++index<length;)if(comparator(array[index],value))return index;return-1}function baseIsNaN(value){return value!==value}function baseMean(array,iteratee){var length=array?array.length:0;return length?baseSum(array,iteratee)/length:NAN}function baseProperty(key){return function(object){return null==object?undefined:object[key]}}function basePropertyOf(object){return function(key){return null==object?undefined:object[key]}}function baseReduce(collection,iteratee,accumulator,initAccum,eachFunc){return eachFunc(collection,function(value,index,collection){accumulator=initAccum?(initAccum=!1,value):iteratee(accumulator,value,index,collection)}),accumulator}function baseSortBy(array,comparer){var length=array.length;for(array.sort(comparer);length--;)array[length]=array[length].value;return array}function baseSum(array,iteratee){for(var result,index=-1,length=array.length;++index<length;){var current=iteratee(array[index]);current!==undefined&&(result=result===undefined?current:result+current)}return result}function baseTimes(n,iteratee){for(var index=-1,result=Array(n);++index<n;)result[index]=iteratee(index);return result}function baseToPairs(object,props){return arrayMap(props,function(key){return[key,object[key]]})}function baseUnary(func){return function(value){return func(value)}}function baseValues(object,props){return arrayMap(props,function(key){return object[key]})}function cacheHas(cache,key){return cache.has(key)}function charsStartIndex(strSymbols,chrSymbols){for(var index=-1,length=strSymbols.length;++index<length&&baseIndexOf(chrSymbols,strSymbols[index],0)>-1;);return index}function charsEndIndex(strSymbols,chrSymbols){for(var index=strSymbols.length;index--&&baseIndexOf(chrSymbols,strSymbols[index],0)>-1;);return index}function countHolders(array,placeholder){for(var length=array.length,result=0;length--;)array[length]===placeholder&&result++;return result}function escapeStringChar(chr){return"\\"+stringEscapes[chr]}function getValue(object,key){return null==object?undefined:object[key]}function hasUnicode(string){return reHasUnicode.test(string)}function hasUnicodeWord(string){return reHasUnicodeWord.test(string)}function isHostObject(value){var result=!1;if(null!=value&&"function"!=typeof value.toString)try{result=!!(value+"")}catch(e){}return result}function iteratorToArray(iterator){for(var data,result=[];!(data=iterator.next()).done;)result.push(data.value);return result}function mapToArray(map){var index=-1,result=Array(map.size);return map.forEach(function(value,key){result[++index]=[key,value]}),result}function overArg(func,transform){return function(arg){return func(transform(arg))}}function replaceHolders(array,placeholder){for(var index=-1,length=array.length,resIndex=0,result=[];++index<length;){var value=array[index];value!==placeholder&&value!==PLACEHOLDER||(array[index]=PLACEHOLDER,result[resIndex++]=index)}return result}function setToArray(set){var index=-1,result=Array(set.size);return set.forEach(function(value){result[++index]=value}),result}function setToPairs(set){var index=-1,result=Array(set.size);return set.forEach(function(value){result[++index]=[value,value]}),result}function stringSize(string){return hasUnicode(string)?unicodeSize(string):asciiSize(string)}function stringToArray(string){return hasUnicode(string)?unicodeToArray(string):asciiToArray(string)}function unicodeSize(string){for(var result=reUnicode.lastIndex=0;reUnicode.test(string);)result++;return result}function unicodeToArray(string){return string.match(reUnicode)||[]}function unicodeWords(string){return string.match(reUnicodeWord)||[]}function runInContext(context){function lodash(value){if(isObjectLike(value)&&!isArray(value)&&!(value instanceof LazyWrapper)){if(value instanceof LodashWrapper)return value;if(hasOwnProperty.call(value,"__wrapped__"))return wrapperClone(value)}return new LodashWrapper(value)}function baseLodash(){}function LodashWrapper(value,chainAll){this.__wrapped__=value,this.__actions__=[],this.__chain__=!!chainAll,this.__index__=0,this.__values__=undefined}function LazyWrapper(value){this.__wrapped__=value,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=MAX_ARRAY_LENGTH,this.__views__=[]}function lazyClone(){var result=new LazyWrapper(this.__wrapped__);return result.__actions__=copyArray(this.__actions__),result.__dir__=this.__dir__,result.__filtered__=this.__filtered__,result.__iteratees__=copyArray(this.__iteratees__),result.__takeCount__=this.__takeCount__,result.__views__=copyArray(this.__views__),result}function lazyReverse(){if(this.__filtered__){var result=new LazyWrapper(this);result.__dir__=-1,result.__filtered__=!0}else result=this.clone(),result.__dir__*=-1;return result}function lazyValue(){var array=this.__wrapped__.value(),dir=this.__dir__,isArr=isArray(array),isRight=dir<0,arrLength=isArr?array.length:0,view=getView(0,arrLength,this.__views__),start=view.start,end=view.end,length=end-start,index=isRight?end:start-1,iteratees=this.__iteratees__,iterLength=iteratees.length,resIndex=0,takeCount=nativeMin(length,this.__takeCount__);if(!isArr||arrLength<LARGE_ARRAY_SIZE||arrLength==length&&takeCount==length)return baseWrapperValue(array,this.__actions__);var result=[];outer:for(;length--&&resIndex<takeCount;){index+=dir;for(var iterIndex=-1,value=array[index];++iterIndex<iterLength;){var data=iteratees[iterIndex],iteratee=data.iteratee,type=data.type,computed=iteratee(value);if(type==LAZY_MAP_FLAG)value=computed;else if(!computed){if(type==LAZY_FILTER_FLAG)continue outer;break outer}}result[resIndex++]=value}return result}function Hash(entries){var index=-1,length=entries?entries.length:0;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{}}function hashDelete(key){return this.has(key)&&delete this.__data__[key]}function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return result===HASH_UNDEFINED?undefined:result}return hasOwnProperty.call(data,key)?data[key]:undefined}function hashHas(key){var data=this.__data__;return nativeCreate?data[key]!==undefined:hasOwnProperty.call(data,key)}function hashSet(key,value){var data=this.__data__;return data[key]=nativeCreate&&value===undefined?HASH_UNDEFINED:value,this}function ListCache(entries){var index=-1,length=entries?entries.length:0;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function listCacheClear(){this.__data__=[]}function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);if(index<0)return!1;var lastIndex=data.length-1;return index==lastIndex?data.pop():splice.call(data,index,1),!0}function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?undefined:data[index][1]}function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1}function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);return index<0?data.push([key,value]):data[index][1]=value,this}function MapCache(entries){var index=-1,length=entries?entries.length:0;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function mapCacheClear(){this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}}function mapCacheDelete(key){return getMapData(this,key).delete(key)}function mapCacheGet(key){return getMapData(this,key).get(key)}function mapCacheHas(key){return getMapData(this,key).has(key)}function mapCacheSet(key,value){return getMapData(this,key).set(key,value),this}function SetCache(values){var index=-1,length=values?values.length:0;for(this.__data__=new MapCache;++index<length;)this.add(values[index])}function setCacheAdd(value){return this.__data__.set(value,HASH_UNDEFINED),this}function setCacheHas(value){return this.__data__.has(value)}function Stack(entries){this.__data__=new ListCache(entries)}function stackClear(){this.__data__=new ListCache}function stackDelete(key){return this.__data__.delete(key)}function stackGet(key){return this.__data__.get(key)}function stackHas(key){return this.__data__.has(key)}function stackSet(key,value){var cache=this.__data__;if(cache instanceof ListCache){var pairs=cache.__data__;if(!Map||pairs.length<LARGE_ARRAY_SIZE-1)return pairs.push([key,value]),this;cache=this.__data__=new MapCache(pairs)}return cache.set(key,value),this}function arrayLikeKeys(value,inherited){var result=isArray(value)||isArguments(value)?baseTimes(value.length,String):[],length=result.length,skipIndexes=!!length;for(var key in value)!inherited&&!hasOwnProperty.call(value,key)||skipIndexes&&("length"==key||isIndex(key,length))||result.push(key);return result}function assignInDefaults(objValue,srcValue,key,object){return objValue===undefined||eq(objValue,objectProto[key])&&!hasOwnProperty.call(object,key)?srcValue:objValue}function assignMergeValue(object,key,value){(value===undefined||eq(object[key],value))&&("number"!=typeof key||value!==undefined||key in object)||(object[key]=value)}function assignValue(object,key,value){var objValue=object[key];hasOwnProperty.call(object,key)&&eq(objValue,value)&&(value!==undefined||key in object)||(object[key]=value)}function assocIndexOf(array,key){for(var length=array.length;length--;)if(eq(array[length][0],key))return length;return-1}function baseAggregator(collection,setter,iteratee,accumulator){return baseEach(collection,function(value,key,collection){setter(accumulator,value,iteratee(value),collection)}),accumulator}function baseAssign(object,source){return object&&copyObject(source,keys(source),object)}function baseAt(object,paths){for(var index=-1,isNil=null==object,length=paths.length,result=Array(length);++index<length;)result[index]=isNil?undefined:get(object,paths[index]);return result}function baseClamp(number,lower,upper){return number===number&&(upper!==undefined&&(number=number<=upper?number:upper),lower!==undefined&&(number=number>=lower?number:lower)),number}function baseClone(value,isDeep,isFull,customizer,key,object,stack){var result;if(customizer&&(result=object?customizer(value,key,object,stack):customizer(value)),result!==undefined)return result;if(!isObject(value))return value;var isArr=isArray(value);if(isArr){if(result=initCloneArray(value),!isDeep)return copyArray(value,result)}else{var tag=getTag(value),isFunc=tag==funcTag||tag==genTag;if(isBuffer(value))return cloneBuffer(value,isDeep);if(tag==objectTag||tag==argsTag||isFunc&&!object){if(isHostObject(value))return object?value:{};if(result=initCloneObject(isFunc?{}:value),!isDeep)return copySymbols(value,baseAssign(result,value))}else{if(!cloneableTags[tag])return object?value:{};result=initCloneByTag(value,tag,baseClone,isDeep)}}stack||(stack=new Stack);var stacked=stack.get(value);if(stacked)return stacked;if(stack.set(value,result),!isArr)var props=isFull?getAllKeys(value):keys(value);return arrayEach(props||value,function(subValue,key){props&&(key=subValue,subValue=value[key]),assignValue(result,key,baseClone(subValue,isDeep,isFull,customizer,key,value,stack))}),result}function baseConforms(source){var props=keys(source);return function(object){return baseConformsTo(object,source,props)}}function baseConformsTo(object,source,props){var length=props.length;if(null==object)return!length;for(object=Object(object);length--;){var key=props[length],predicate=source[key],value=object[key];if(value===undefined&&!(key in object)||!predicate(value))return!1}return!0}function baseCreate(proto){return isObject(proto)?objectCreate(proto):{}}function baseDelay(func,wait,args){if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);return setTimeout(function(){func.apply(undefined,args)},wait)}function baseDifference(array,values,iteratee,comparator){var index=-1,includes=arrayIncludes,isCommon=!0,length=array.length,result=[],valuesLength=values.length;if(!length)return result;iteratee&&(values=arrayMap(values,baseUnary(iteratee))),comparator?(includes=arrayIncludesWith,isCommon=!1):values.length>=LARGE_ARRAY_SIZE&&(includes=cacheHas,isCommon=!1,values=new SetCache(values));outer:for(;++index<length;){var value=array[index],computed=iteratee?iteratee(value):value;if(value=comparator||0!==value?value:0,isCommon&&computed===computed){for(var valuesIndex=valuesLength;valuesIndex--;)if(values[valuesIndex]===computed)continue outer;result.push(value)}else includes(values,computed,comparator)||result.push(value)}return result}function baseEvery(collection,predicate){var result=!0;return baseEach(collection,function(value,index,collection){return result=!!predicate(value,index,collection)}),result}function baseExtremum(array,iteratee,comparator){for(var index=-1,length=array.length;++index<length;){var value=array[index],current=iteratee(value);if(null!=current&&(computed===undefined?current===current&&!isSymbol(current):comparator(current,computed)))var computed=current,result=value}return result}function baseFill(array,value,start,end){var length=array.length;for(start=toInteger(start),start<0&&(start=-start>length?0:length+start),end=end===undefined||end>length?length:toInteger(end),end<0&&(end+=length),end=start>end?0:toLength(end);start<end;)array[start++]=value;return array}function baseFilter(collection,predicate){var result=[];return baseEach(collection,function(value,index,collection){predicate(value,index,collection)&&result.push(value)}),result}function baseFlatten(array,depth,predicate,isStrict,result){var index=-1,length=array.length;for(predicate||(predicate=isFlattenable),result||(result=[]);++index<length;){var value=array[index];depth>0&&predicate(value)?depth>1?baseFlatten(value,depth-1,predicate,isStrict,result):arrayPush(result,value):isStrict||(result[result.length]=value)}return result}function baseForOwn(object,iteratee){return object&&baseFor(object,iteratee,keys)}function baseForOwnRight(object,iteratee){return object&&baseForRight(object,iteratee,keys)}function baseFunctions(object,props){return arrayFilter(props,function(key){return isFunction(object[key])})}function baseGet(object,path){path=isKey(path,object)?[path]:castPath(path);for(var index=0,length=path.length;null!=object&&index<length;)object=object[toKey(path[index++])];return index&&index==length?object:undefined}function baseGetAllKeys(object,keysFunc,symbolsFunc){var result=keysFunc(object);return isArray(object)?result:arrayPush(result,symbolsFunc(object))}function baseGetTag(value){return objectToString.call(value)}function baseGt(value,other){return value>other}function baseHas(object,key){return null!=object&&hasOwnProperty.call(object,key)}function baseHasIn(object,key){return null!=object&&key in Object(object)}function baseInRange(number,start,end){return number>=nativeMin(start,end)&&number<nativeMax(start,end)}function baseIntersection(arrays,iteratee,comparator){for(var includes=comparator?arrayIncludesWith:arrayIncludes,length=arrays[0].length,othLength=arrays.length,othIndex=othLength,caches=Array(othLength),maxLength=1/0,result=[];othIndex--;){var array=arrays[othIndex];othIndex&&iteratee&&(array=arrayMap(array,baseUnary(iteratee))),maxLength=nativeMin(array.length,maxLength),caches[othIndex]=!comparator&&(iteratee||length>=120&&array.length>=120)?new SetCache(othIndex&&array):undefined}array=arrays[0];var index=-1,seen=caches[0];outer:for(;++index<length&&result.length<maxLength;){var value=array[index],computed=iteratee?iteratee(value):value;if(value=comparator||0!==value?value:0,!(seen?cacheHas(seen,computed):includes(result,computed,comparator))){for(othIndex=othLength;--othIndex;){var cache=caches[othIndex];if(!(cache?cacheHas(cache,computed):includes(arrays[othIndex],computed,comparator)))continue outer}seen&&seen.push(computed),result.push(value)}}return result}function baseInverter(object,setter,iteratee,accumulator){return baseForOwn(object,function(value,key,object){setter(accumulator,iteratee(value),key,object)}),accumulator}function baseInvoke(object,path,args){isKey(path,object)||(path=castPath(path),object=parent(object,path),path=last(path));var func=null==object?object:object[toKey(path)];return null==func?undefined:apply(func,object,args)}function baseIsArrayBuffer(value){return isObjectLike(value)&&objectToString.call(value)==arrayBufferTag}function baseIsDate(value){return isObjectLike(value)&&objectToString.call(value)==dateTag}function baseIsEqual(value,other,customizer,bitmask,stack){return value===other||(null==value||null==other||!isObject(value)&&!isObjectLike(other)?value!==value&&other!==other:baseIsEqualDeep(value,other,baseIsEqual,customizer,bitmask,stack))}function baseIsEqualDeep(object,other,equalFunc,customizer,bitmask,stack){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=arrayTag,othTag=arrayTag;objIsArr||(objTag=getTag(object),objTag=objTag==argsTag?objectTag:objTag),othIsArr||(othTag=getTag(other),othTag=othTag==argsTag?objectTag:othTag);var objIsObj=objTag==objectTag&&!isHostObject(object),othIsObj=othTag==objectTag&&!isHostObject(other),isSameTag=objTag==othTag;if(isSameTag&&!objIsObj)return stack||(stack=new Stack),objIsArr||isTypedArray(object)?equalArrays(object,other,equalFunc,customizer,bitmask,stack):equalByTag(object,other,objTag,equalFunc,customizer,bitmask,stack);if(!(bitmask&PARTIAL_COMPARE_FLAG)){var objIsWrapped=objIsObj&&hasOwnProperty.call(object,"__wrapped__"),othIsWrapped=othIsObj&&hasOwnProperty.call(other,"__wrapped__");if(objIsWrapped||othIsWrapped){var objUnwrapped=objIsWrapped?object.value():object,othUnwrapped=othIsWrapped?other.value():other;return stack||(stack=new Stack),equalFunc(objUnwrapped,othUnwrapped,customizer,bitmask,stack)}}return!!isSameTag&&(stack||(stack=new Stack),equalObjects(object,other,equalFunc,customizer,bitmask,stack))}function baseIsMap(value){return isObjectLike(value)&&getTag(value)==mapTag}function baseIsMatch(object,source,matchData,customizer){var index=matchData.length,length=index,noCustomizer=!customizer;if(null==object)return!length;for(object=Object(object);index--;){var data=matchData[index];if(noCustomizer&&data[2]?data[1]!==object[data[0]]:!(data[0]in object))return!1}for(;++index<length;){data=matchData[index];var key=data[0],objValue=object[key],srcValue=data[1];if(noCustomizer&&data[2]){if(objValue===undefined&&!(key in object))return!1}else{var stack=new Stack;if(customizer)var result=customizer(objValue,srcValue,key,object,source,stack);if(!(result===undefined?baseIsEqual(srcValue,objValue,customizer,UNORDERED_COMPARE_FLAG|PARTIAL_COMPARE_FLAG,stack):result))return!1}}return!0}function baseIsNative(value){if(!isObject(value)||isMasked(value))return!1;var pattern=isFunction(value)||isHostObject(value)?reIsNative:reIsHostCtor;return pattern.test(toSource(value))}function baseIsRegExp(value){return isObject(value)&&objectToString.call(value)==regexpTag}function baseIsSet(value){return isObjectLike(value)&&getTag(value)==setTag}function baseIsTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[objectToString.call(value)]}function baseIteratee(value){return"function"==typeof value?value:null==value?identity:"object"==typeof value?isArray(value)?baseMatchesProperty(value[0],value[1]):baseMatches(value):property(value)}function baseKeys(object){if(!isPrototype(object))return nativeKeys(object);var result=[];for(var key in Object(object))hasOwnProperty.call(object,key)&&"constructor"!=key&&result.push(key);return result}function baseKeysIn(object){if(!isObject(object))return nativeKeysIn(object);var isProto=isPrototype(object),result=[];for(var key in object)("constructor"!=key||!isProto&&hasOwnProperty.call(object,key))&&result.push(key);return result}function baseLt(value,other){return value<other}function baseMap(collection,iteratee){var index=-1,result=isArrayLike(collection)?Array(collection.length):[];return baseEach(collection,function(value,key,collection){result[++index]=iteratee(value,key,collection)}),result}function baseMatches(source){var matchData=getMatchData(source);return 1==matchData.length&&matchData[0][2]?matchesStrictComparable(matchData[0][0],matchData[0][1]):function(object){return object===source||baseIsMatch(object,source,matchData)}}function baseMatchesProperty(path,srcValue){return isKey(path)&&isStrictComparable(srcValue)?matchesStrictComparable(toKey(path),srcValue):function(object){var objValue=get(object,path);return objValue===undefined&&objValue===srcValue?hasIn(object,path):baseIsEqual(srcValue,objValue,undefined,UNORDERED_COMPARE_FLAG|PARTIAL_COMPARE_FLAG)}}function baseMerge(object,source,srcIndex,customizer,stack){if(object!==source){if(!isArray(source)&&!isTypedArray(source))var props=baseKeysIn(source);arrayEach(props||source,function(srcValue,key){if(props&&(key=srcValue,srcValue=source[key]),isObject(srcValue))stack||(stack=new Stack),baseMergeDeep(object,source,key,srcIndex,baseMerge,customizer,stack);else{var newValue=customizer?customizer(object[key],srcValue,key+"",object,source,stack):undefined;newValue===undefined&&(newValue=srcValue),assignMergeValue(object,key,newValue)}})}}function baseMergeDeep(object,source,key,srcIndex,mergeFunc,customizer,stack){var objValue=object[key],srcValue=source[key],stacked=stack.get(srcValue);if(stacked)return void assignMergeValue(object,key,stacked);var newValue=customizer?customizer(objValue,srcValue,key+"",object,source,stack):undefined,isCommon=newValue===undefined;isCommon&&(newValue=srcValue,isArray(srcValue)||isTypedArray(srcValue)?isArray(objValue)?newValue=objValue:isArrayLikeObject(objValue)?newValue=copyArray(objValue):(isCommon=!1,newValue=baseClone(srcValue,!0)):isPlainObject(srcValue)||isArguments(srcValue)?isArguments(objValue)?newValue=toPlainObject(objValue):!isObject(objValue)||srcIndex&&isFunction(objValue)?(isCommon=!1,newValue=baseClone(srcValue,!0)):newValue=objValue:isCommon=!1),isCommon&&(stack.set(srcValue,newValue),mergeFunc(newValue,srcValue,srcIndex,customizer,stack),stack.delete(srcValue)),assignMergeValue(object,key,newValue)}function baseNth(array,n){var length=array.length;if(length)return n+=n<0?length:0,isIndex(n,length)?array[n]:undefined}function baseOrderBy(collection,iteratees,orders){var index=-1;iteratees=arrayMap(iteratees.length?iteratees:[identity],baseUnary(getIteratee()));var result=baseMap(collection,function(value,key,collection){var criteria=arrayMap(iteratees,function(iteratee){return iteratee(value)});return{criteria:criteria,index:++index,value:value}});return baseSortBy(result,function(object,other){return compareMultiple(object,other,orders)})}function basePick(object,props){return object=Object(object),basePickBy(object,props,function(value,key){return key in object})}function basePickBy(object,props,predicate){for(var index=-1,length=props.length,result={};++index<length;){var key=props[index],value=object[key];predicate(value,key)&&(result[key]=value)}return result}function basePropertyDeep(path){return function(object){return baseGet(object,path)}}function basePullAll(array,values,iteratee,comparator){var indexOf=comparator?baseIndexOfWith:baseIndexOf,index=-1,length=values.length,seen=array;for(array===values&&(values=copyArray(values)),iteratee&&(seen=arrayMap(array,baseUnary(iteratee)));++index<length;)for(var fromIndex=0,value=values[index],computed=iteratee?iteratee(value):value;(fromIndex=indexOf(seen,computed,fromIndex,comparator))>-1;)seen!==array&&splice.call(seen,fromIndex,1),splice.call(array,fromIndex,1);return array}function basePullAt(array,indexes){for(var length=array?indexes.length:0,lastIndex=length-1;length--;){var index=indexes[length];if(length==lastIndex||index!==previous){var previous=index;if(isIndex(index))splice.call(array,index,1);else if(isKey(index,array))delete array[toKey(index)];else{var path=castPath(index),object=parent(array,path);null!=object&&delete object[toKey(last(path))]}}}return array}function baseRandom(lower,upper){return lower+nativeFloor(nativeRandom()*(upper-lower+1))}function baseRange(start,end,step,fromRight){for(var index=-1,length=nativeMax(nativeCeil((end-start)/(step||1)),0),result=Array(length);length--;)result[fromRight?length:++index]=start,start+=step;return result}function baseRepeat(string,n){var result="";if(!string||n<1||n>MAX_SAFE_INTEGER)return result;do n%2&&(result+=string),n=nativeFloor(n/2),n&&(string+=string);while(n);return result}function baseRest(func,start){return start=nativeMax(start===undefined?func.length-1:start,0),function(){for(var args=arguments,index=-1,length=nativeMax(args.length-start,0),array=Array(length);++index<length;)array[index]=args[start+index];index=-1;for(var otherArgs=Array(start+1);++index<start;)otherArgs[index]=args[index];return otherArgs[start]=array,apply(func,this,otherArgs)}}function baseSet(object,path,value,customizer){if(!isObject(object))return object;path=isKey(path,object)?[path]:castPath(path);for(var index=-1,length=path.length,lastIndex=length-1,nested=object;null!=nested&&++index<length;){var key=toKey(path[index]),newValue=value;if(index!=lastIndex){var objValue=nested[key];newValue=customizer?customizer(objValue,key,nested):undefined,newValue===undefined&&(newValue=isObject(objValue)?objValue:isIndex(path[index+1])?[]:{})}assignValue(nested,key,newValue),nested=nested[key]}return object}function baseSlice(array,start,end){var index=-1,length=array.length;start<0&&(start=-start>length?0:length+start),end=end>length?length:end,end<0&&(end+=length),length=start>end?0:end-start>>>0,start>>>=0;for(var result=Array(length);++index<length;)result[index]=array[index+start];return result}function baseSome(collection,predicate){var result;return baseEach(collection,function(value,index,collection){return result=predicate(value,index,collection),!result}),!!result}function baseSortedIndex(array,value,retHighest){var low=0,high=array?array.length:low;if("number"==typeof value&&value===value&&high<=HALF_MAX_ARRAY_LENGTH){for(;low<high;){var mid=low+high>>>1,computed=array[mid];null!==computed&&!isSymbol(computed)&&(retHighest?computed<=value:computed<value)?low=mid+1:high=mid}return high}return baseSortedIndexBy(array,value,identity,retHighest)}function baseSortedIndexBy(array,value,iteratee,retHighest){value=iteratee(value);for(var low=0,high=array?array.length:0,valIsNaN=value!==value,valIsNull=null===value,valIsSymbol=isSymbol(value),valIsUndefined=value===undefined;low<high;){var mid=nativeFloor((low+high)/2),computed=iteratee(array[mid]),othIsDefined=computed!==undefined,othIsNull=null===computed,othIsReflexive=computed===computed,othIsSymbol=isSymbol(computed);if(valIsNaN)var setLow=retHighest||othIsReflexive;else setLow=valIsUndefined?othIsReflexive&&(retHighest||othIsDefined):valIsNull?othIsReflexive&&othIsDefined&&(retHighest||!othIsNull):valIsSymbol?othIsReflexive&&othIsDefined&&!othIsNull&&(retHighest||!othIsSymbol):!othIsNull&&!othIsSymbol&&(retHighest?computed<=value:computed<value);setLow?low=mid+1:high=mid}return nativeMin(high,MAX_ARRAY_INDEX)}function baseSortedUniq(array,iteratee){for(var index=-1,length=array.length,resIndex=0,result=[];++index<length;){var value=array[index],computed=iteratee?iteratee(value):value;if(!index||!eq(computed,seen)){var seen=computed;result[resIndex++]=0===value?0:value}}return result}function baseToNumber(value){return"number"==typeof value?value:isSymbol(value)?NAN:+value}function baseToString(value){if("string"==typeof value)return value;if(isSymbol(value))return symbolToString?symbolToString.call(value):"";var result=value+"";return"0"==result&&1/value==-INFINITY?"-0":result}function baseUniq(array,iteratee,comparator){var index=-1,includes=arrayIncludes,length=array.length,isCommon=!0,result=[],seen=result;if(comparator)isCommon=!1,includes=arrayIncludesWith;else if(length>=LARGE_ARRAY_SIZE){var set=iteratee?null:createSet(array);if(set)return setToArray(set);isCommon=!1,includes=cacheHas,seen=new SetCache}else seen=iteratee?[]:result;outer:for(;++index<length;){var value=array[index],computed=iteratee?iteratee(value):value;if(value=comparator||0!==value?value:0,isCommon&&computed===computed){for(var seenIndex=seen.length;seenIndex--;)if(seen[seenIndex]===computed)continue outer;iteratee&&seen.push(computed),result.push(value)}else includes(seen,computed,comparator)||(seen!==result&&seen.push(computed),result.push(value))}return result}function baseUnset(object,path){path=isKey(path,object)?[path]:castPath(path),object=parent(object,path);var key=toKey(last(path));return!(null!=object&&hasOwnProperty.call(object,key))||delete object[key]}function baseUpdate(object,path,updater,customizer){return baseSet(object,path,updater(baseGet(object,path)),customizer);
}function baseWhile(array,predicate,isDrop,fromRight){for(var length=array.length,index=fromRight?length:-1;(fromRight?index--:++index<length)&&predicate(array[index],index,array););return isDrop?baseSlice(array,fromRight?0:index,fromRight?index+1:length):baseSlice(array,fromRight?index+1:0,fromRight?length:index)}function baseWrapperValue(value,actions){var result=value;return result instanceof LazyWrapper&&(result=result.value()),arrayReduce(actions,function(result,action){return action.func.apply(action.thisArg,arrayPush([result],action.args))},result)}function baseXor(arrays,iteratee,comparator){for(var index=-1,length=arrays.length;++index<length;)var result=result?arrayPush(baseDifference(result,arrays[index],iteratee,comparator),baseDifference(arrays[index],result,iteratee,comparator)):arrays[index];return result&&result.length?baseUniq(result,iteratee,comparator):[]}function baseZipObject(props,values,assignFunc){for(var index=-1,length=props.length,valsLength=values.length,result={};++index<length;){var value=index<valsLength?values[index]:undefined;assignFunc(result,props[index],value)}return result}function castArrayLikeObject(value){return isArrayLikeObject(value)?value:[]}function castFunction(value){return"function"==typeof value?value:identity}function castPath(value){return isArray(value)?value:stringToPath(value)}function castSlice(array,start,end){var length=array.length;return end=end===undefined?length:end,!start&&end>=length?array:baseSlice(array,start,end)}function cloneBuffer(buffer,isDeep){if(isDeep)return buffer.slice();var result=new buffer.constructor(buffer.length);return buffer.copy(result),result}function cloneArrayBuffer(arrayBuffer){var result=new arrayBuffer.constructor(arrayBuffer.byteLength);return new Uint8Array(result).set(new Uint8Array(arrayBuffer)),result}function cloneDataView(dataView,isDeep){var buffer=isDeep?cloneArrayBuffer(dataView.buffer):dataView.buffer;return new dataView.constructor(buffer,dataView.byteOffset,dataView.byteLength)}function cloneMap(map,isDeep,cloneFunc){var array=isDeep?cloneFunc(mapToArray(map),!0):mapToArray(map);return arrayReduce(array,addMapEntry,new map.constructor)}function cloneRegExp(regexp){var result=new regexp.constructor(regexp.source,reFlags.exec(regexp));return result.lastIndex=regexp.lastIndex,result}function cloneSet(set,isDeep,cloneFunc){var array=isDeep?cloneFunc(setToArray(set),!0):setToArray(set);return arrayReduce(array,addSetEntry,new set.constructor)}function cloneSymbol(symbol){return symbolValueOf?Object(symbolValueOf.call(symbol)):{}}function cloneTypedArray(typedArray,isDeep){var buffer=isDeep?cloneArrayBuffer(typedArray.buffer):typedArray.buffer;return new typedArray.constructor(buffer,typedArray.byteOffset,typedArray.length)}function compareAscending(value,other){if(value!==other){var valIsDefined=value!==undefined,valIsNull=null===value,valIsReflexive=value===value,valIsSymbol=isSymbol(value),othIsDefined=other!==undefined,othIsNull=null===other,othIsReflexive=other===other,othIsSymbol=isSymbol(other);if(!othIsNull&&!othIsSymbol&&!valIsSymbol&&value>other||valIsSymbol&&othIsDefined&&othIsReflexive&&!othIsNull&&!othIsSymbol||valIsNull&&othIsDefined&&othIsReflexive||!valIsDefined&&othIsReflexive||!valIsReflexive)return 1;if(!valIsNull&&!valIsSymbol&&!othIsSymbol&&value<other||othIsSymbol&&valIsDefined&&valIsReflexive&&!valIsNull&&!valIsSymbol||othIsNull&&valIsDefined&&valIsReflexive||!othIsDefined&&valIsReflexive||!othIsReflexive)return-1}return 0}function compareMultiple(object,other,orders){for(var index=-1,objCriteria=object.criteria,othCriteria=other.criteria,length=objCriteria.length,ordersLength=orders.length;++index<length;){var result=compareAscending(objCriteria[index],othCriteria[index]);if(result){if(index>=ordersLength)return result;var order=orders[index];return result*("desc"==order?-1:1)}}return object.index-other.index}function composeArgs(args,partials,holders,isCurried){for(var argsIndex=-1,argsLength=args.length,holdersLength=holders.length,leftIndex=-1,leftLength=partials.length,rangeLength=nativeMax(argsLength-holdersLength,0),result=Array(leftLength+rangeLength),isUncurried=!isCurried;++leftIndex<leftLength;)result[leftIndex]=partials[leftIndex];for(;++argsIndex<holdersLength;)(isUncurried||argsIndex<argsLength)&&(result[holders[argsIndex]]=args[argsIndex]);for(;rangeLength--;)result[leftIndex++]=args[argsIndex++];return result}function composeArgsRight(args,partials,holders,isCurried){for(var argsIndex=-1,argsLength=args.length,holdersIndex=-1,holdersLength=holders.length,rightIndex=-1,rightLength=partials.length,rangeLength=nativeMax(argsLength-holdersLength,0),result=Array(rangeLength+rightLength),isUncurried=!isCurried;++argsIndex<rangeLength;)result[argsIndex]=args[argsIndex];for(var offset=argsIndex;++rightIndex<rightLength;)result[offset+rightIndex]=partials[rightIndex];for(;++holdersIndex<holdersLength;)(isUncurried||argsIndex<argsLength)&&(result[offset+holders[holdersIndex]]=args[argsIndex++]);return result}function copyArray(source,array){var index=-1,length=source.length;for(array||(array=Array(length));++index<length;)array[index]=source[index];return array}function copyObject(source,props,object,customizer){object||(object={});for(var index=-1,length=props.length;++index<length;){var key=props[index],newValue=customizer?customizer(object[key],source[key],key,object,source):undefined;assignValue(object,key,newValue===undefined?source[key]:newValue)}return object}function copySymbols(source,object){return copyObject(source,getSymbols(source),object)}function createAggregator(setter,initializer){return function(collection,iteratee){var func=isArray(collection)?arrayAggregator:baseAggregator,accumulator=initializer?initializer():{};return func(collection,setter,getIteratee(iteratee,2),accumulator)}}function createAssigner(assigner){return baseRest(function(object,sources){var index=-1,length=sources.length,customizer=length>1?sources[length-1]:undefined,guard=length>2?sources[2]:undefined;for(customizer=assigner.length>3&&"function"==typeof customizer?(length--,customizer):undefined,guard&&isIterateeCall(sources[0],sources[1],guard)&&(customizer=length<3?undefined:customizer,length=1),object=Object(object);++index<length;){var source=sources[index];source&&assigner(object,source,index,customizer)}return object})}function createBaseEach(eachFunc,fromRight){return function(collection,iteratee){if(null==collection)return collection;if(!isArrayLike(collection))return eachFunc(collection,iteratee);for(var length=collection.length,index=fromRight?length:-1,iterable=Object(collection);(fromRight?index--:++index<length)&&iteratee(iterable[index],index,iterable)!==!1;);return collection}}function createBaseFor(fromRight){return function(object,iteratee,keysFunc){for(var index=-1,iterable=Object(object),props=keysFunc(object),length=props.length;length--;){var key=props[fromRight?length:++index];if(iteratee(iterable[key],key,iterable)===!1)break}return object}}function createBind(func,bitmask,thisArg){function wrapper(){var fn=this&&this!==root&&this instanceof wrapper?Ctor:func;return fn.apply(isBind?thisArg:this,arguments)}var isBind=bitmask&BIND_FLAG,Ctor=createCtor(func);return wrapper}function createCaseFirst(methodName){return function(string){string=toString(string);var strSymbols=hasUnicode(string)?stringToArray(string):undefined,chr=strSymbols?strSymbols[0]:string.charAt(0),trailing=strSymbols?castSlice(strSymbols,1).join(""):string.slice(1);return chr[methodName]()+trailing}}function createCompounder(callback){return function(string){return arrayReduce(words(deburr(string).replace(reApos,"")),callback,"")}}function createCtor(Ctor){return function(){var args=arguments;switch(args.length){case 0:return new Ctor;case 1:return new Ctor(args[0]);case 2:return new Ctor(args[0],args[1]);case 3:return new Ctor(args[0],args[1],args[2]);case 4:return new Ctor(args[0],args[1],args[2],args[3]);case 5:return new Ctor(args[0],args[1],args[2],args[3],args[4]);case 6:return new Ctor(args[0],args[1],args[2],args[3],args[4],args[5]);case 7:return new Ctor(args[0],args[1],args[2],args[3],args[4],args[5],args[6])}var thisBinding=baseCreate(Ctor.prototype),result=Ctor.apply(thisBinding,args);return isObject(result)?result:thisBinding}}function createCurry(func,bitmask,arity){function wrapper(){for(var length=arguments.length,args=Array(length),index=length,placeholder=getHolder(wrapper);index--;)args[index]=arguments[index];var holders=length<3&&args[0]!==placeholder&&args[length-1]!==placeholder?[]:replaceHolders(args,placeholder);if(length-=holders.length,length<arity)return createRecurry(func,bitmask,createHybrid,wrapper.placeholder,undefined,args,holders,undefined,undefined,arity-length);var fn=this&&this!==root&&this instanceof wrapper?Ctor:func;return apply(fn,this,args)}var Ctor=createCtor(func);return wrapper}function createFind(findIndexFunc){return function(collection,predicate,fromIndex){var iterable=Object(collection);if(!isArrayLike(collection)){var iteratee=getIteratee(predicate,3);collection=keys(collection),predicate=function(key){return iteratee(iterable[key],key,iterable)}}var index=findIndexFunc(collection,predicate,fromIndex);return index>-1?iterable[iteratee?collection[index]:index]:undefined}}function createFlow(fromRight){return baseRest(function(funcs){funcs=baseFlatten(funcs,1);var length=funcs.length,index=length,prereq=LodashWrapper.prototype.thru;for(fromRight&&funcs.reverse();index--;){var func=funcs[index];if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);if(prereq&&!wrapper&&"wrapper"==getFuncName(func))var wrapper=new LodashWrapper([],!0)}for(index=wrapper?index:length;++index<length;){func=funcs[index];var funcName=getFuncName(func),data="wrapper"==funcName?getData(func):undefined;wrapper=data&&isLaziable(data[0])&&data[1]==(ARY_FLAG|CURRY_FLAG|PARTIAL_FLAG|REARG_FLAG)&&!data[4].length&&1==data[9]?wrapper[getFuncName(data[0])].apply(wrapper,data[3]):1==func.length&&isLaziable(func)?wrapper[funcName]():wrapper.thru(func)}return function(){var args=arguments,value=args[0];if(wrapper&&1==args.length&&isArray(value)&&value.length>=LARGE_ARRAY_SIZE)return wrapper.plant(value).value();for(var index=0,result=length?funcs[index].apply(this,args):value;++index<length;)result=funcs[index].call(this,result);return result}})}function createHybrid(func,bitmask,thisArg,partials,holders,partialsRight,holdersRight,argPos,ary,arity){function wrapper(){for(var length=arguments.length,args=Array(length),index=length;index--;)args[index]=arguments[index];if(isCurried)var placeholder=getHolder(wrapper),holdersCount=countHolders(args,placeholder);if(partials&&(args=composeArgs(args,partials,holders,isCurried)),partialsRight&&(args=composeArgsRight(args,partialsRight,holdersRight,isCurried)),length-=holdersCount,isCurried&&length<arity){var newHolders=replaceHolders(args,placeholder);return createRecurry(func,bitmask,createHybrid,wrapper.placeholder,thisArg,args,newHolders,argPos,ary,arity-length)}var thisBinding=isBind?thisArg:this,fn=isBindKey?thisBinding[func]:func;return length=args.length,argPos?args=reorder(args,argPos):isFlip&&length>1&&args.reverse(),isAry&&ary<length&&(args.length=ary),this&&this!==root&&this instanceof wrapper&&(fn=Ctor||createCtor(fn)),fn.apply(thisBinding,args)}var isAry=bitmask&ARY_FLAG,isBind=bitmask&BIND_FLAG,isBindKey=bitmask&BIND_KEY_FLAG,isCurried=bitmask&(CURRY_FLAG|CURRY_RIGHT_FLAG),isFlip=bitmask&FLIP_FLAG,Ctor=isBindKey?undefined:createCtor(func);return wrapper}function createInverter(setter,toIteratee){return function(object,iteratee){return baseInverter(object,setter,toIteratee(iteratee),{})}}function createMathOperation(operator,defaultValue){return function(value,other){var result;if(value===undefined&&other===undefined)return defaultValue;if(value!==undefined&&(result=value),other!==undefined){if(result===undefined)return other;"string"==typeof value||"string"==typeof other?(value=baseToString(value),other=baseToString(other)):(value=baseToNumber(value),other=baseToNumber(other)),result=operator(value,other)}return result}}function createOver(arrayFunc){return baseRest(function(iteratees){return iteratees=1==iteratees.length&&isArray(iteratees[0])?arrayMap(iteratees[0],baseUnary(getIteratee())):arrayMap(baseFlatten(iteratees,1),baseUnary(getIteratee())),baseRest(function(args){var thisArg=this;return arrayFunc(iteratees,function(iteratee){return apply(iteratee,thisArg,args)})})})}function createPadding(length,chars){chars=chars===undefined?" ":baseToString(chars);var charsLength=chars.length;if(charsLength<2)return charsLength?baseRepeat(chars,length):chars;var result=baseRepeat(chars,nativeCeil(length/stringSize(chars)));return hasUnicode(chars)?castSlice(stringToArray(result),0,length).join(""):result.slice(0,length)}function createPartial(func,bitmask,thisArg,partials){function wrapper(){for(var argsIndex=-1,argsLength=arguments.length,leftIndex=-1,leftLength=partials.length,args=Array(leftLength+argsLength),fn=this&&this!==root&&this instanceof wrapper?Ctor:func;++leftIndex<leftLength;)args[leftIndex]=partials[leftIndex];for(;argsLength--;)args[leftIndex++]=arguments[++argsIndex];return apply(fn,isBind?thisArg:this,args)}var isBind=bitmask&BIND_FLAG,Ctor=createCtor(func);return wrapper}function createRange(fromRight){return function(start,end,step){return step&&"number"!=typeof step&&isIterateeCall(start,end,step)&&(end=step=undefined),start=toFinite(start),end===undefined?(end=start,start=0):end=toFinite(end),step=step===undefined?start<end?1:-1:toFinite(step),baseRange(start,end,step,fromRight)}}function createRelationalOperation(operator){return function(value,other){return"string"==typeof value&&"string"==typeof other||(value=toNumber(value),other=toNumber(other)),operator(value,other)}}function createRecurry(func,bitmask,wrapFunc,placeholder,thisArg,partials,holders,argPos,ary,arity){var isCurry=bitmask&CURRY_FLAG,newHolders=isCurry?holders:undefined,newHoldersRight=isCurry?undefined:holders,newPartials=isCurry?partials:undefined,newPartialsRight=isCurry?undefined:partials;bitmask|=isCurry?PARTIAL_FLAG:PARTIAL_RIGHT_FLAG,bitmask&=~(isCurry?PARTIAL_RIGHT_FLAG:PARTIAL_FLAG),bitmask&CURRY_BOUND_FLAG||(bitmask&=~(BIND_FLAG|BIND_KEY_FLAG));var newData=[func,bitmask,thisArg,newPartials,newHolders,newPartialsRight,newHoldersRight,argPos,ary,arity],result=wrapFunc.apply(undefined,newData);return isLaziable(func)&&setData(result,newData),result.placeholder=placeholder,setWrapToString(result,func,bitmask)}function createRound(methodName){var func=Math[methodName];return function(number,precision){if(number=toNumber(number),precision=nativeMin(toInteger(precision),292)){var pair=(toString(number)+"e").split("e"),value=func(pair[0]+"e"+(+pair[1]+precision));return pair=(toString(value)+"e").split("e"),+(pair[0]+"e"+(+pair[1]-precision))}return func(number)}}function createToPairs(keysFunc){return function(object){var tag=getTag(object);return tag==mapTag?mapToArray(object):tag==setTag?setToPairs(object):baseToPairs(object,keysFunc(object))}}function createWrap(func,bitmask,thisArg,partials,holders,argPos,ary,arity){var isBindKey=bitmask&BIND_KEY_FLAG;if(!isBindKey&&"function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);var length=partials?partials.length:0;if(length||(bitmask&=~(PARTIAL_FLAG|PARTIAL_RIGHT_FLAG),partials=holders=undefined),ary=ary===undefined?ary:nativeMax(toInteger(ary),0),arity=arity===undefined?arity:toInteger(arity),length-=holders?holders.length:0,bitmask&PARTIAL_RIGHT_FLAG){var partialsRight=partials,holdersRight=holders;partials=holders=undefined}var data=isBindKey?undefined:getData(func),newData=[func,bitmask,thisArg,partials,holders,partialsRight,holdersRight,argPos,ary,arity];if(data&&mergeData(newData,data),func=newData[0],bitmask=newData[1],thisArg=newData[2],partials=newData[3],holders=newData[4],arity=newData[9]=null==newData[9]?isBindKey?0:func.length:nativeMax(newData[9]-length,0),!arity&&bitmask&(CURRY_FLAG|CURRY_RIGHT_FLAG)&&(bitmask&=~(CURRY_FLAG|CURRY_RIGHT_FLAG)),bitmask&&bitmask!=BIND_FLAG)result=bitmask==CURRY_FLAG||bitmask==CURRY_RIGHT_FLAG?createCurry(func,bitmask,arity):bitmask!=PARTIAL_FLAG&&bitmask!=(BIND_FLAG|PARTIAL_FLAG)||holders.length?createHybrid.apply(undefined,newData):createPartial(func,bitmask,thisArg,partials);else var result=createBind(func,bitmask,thisArg);var setter=data?baseSetData:setData;return setWrapToString(setter(result,newData),func,bitmask)}function equalArrays(array,other,equalFunc,customizer,bitmask,stack){var isPartial=bitmask&PARTIAL_COMPARE_FLAG,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isPartial&&othLength>arrLength))return!1;var stacked=stack.get(array);if(stacked&&stack.get(other))return stacked==other;var index=-1,result=!0,seen=bitmask&UNORDERED_COMPARE_FLAG?new SetCache:undefined;for(stack.set(array,other),stack.set(other,array);++index<arrLength;){var arrValue=array[index],othValue=other[index];if(customizer)var compared=isPartial?customizer(othValue,arrValue,index,other,array,stack):customizer(arrValue,othValue,index,array,other,stack);if(compared!==undefined){if(compared)continue;result=!1;break}if(seen){if(!arraySome(other,function(othValue,othIndex){if(!seen.has(othIndex)&&(arrValue===othValue||equalFunc(arrValue,othValue,customizer,bitmask,stack)))return seen.add(othIndex)})){result=!1;break}}else if(arrValue!==othValue&&!equalFunc(arrValue,othValue,customizer,bitmask,stack)){result=!1;break}}return stack.delete(array),stack.delete(other),result}function equalByTag(object,other,tag,equalFunc,customizer,bitmask,stack){switch(tag){case dataViewTag:if(object.byteLength!=other.byteLength||object.byteOffset!=other.byteOffset)return!1;object=object.buffer,other=other.buffer;case arrayBufferTag:return!(object.byteLength!=other.byteLength||!equalFunc(new Uint8Array(object),new Uint8Array(other)));case boolTag:case dateTag:case numberTag:return eq(+object,+other);case errorTag:return object.name==other.name&&object.message==other.message;case regexpTag:case stringTag:return object==other+"";case mapTag:var convert=mapToArray;case setTag:var isPartial=bitmask&PARTIAL_COMPARE_FLAG;if(convert||(convert=setToArray),object.size!=other.size&&!isPartial)return!1;var stacked=stack.get(object);if(stacked)return stacked==other;bitmask|=UNORDERED_COMPARE_FLAG,stack.set(object,other);var result=equalArrays(convert(object),convert(other),equalFunc,customizer,bitmask,stack);return stack.delete(object),result;case symbolTag:if(symbolValueOf)return symbolValueOf.call(object)==symbolValueOf.call(other)}return!1}function equalObjects(object,other,equalFunc,customizer,bitmask,stack){var isPartial=bitmask&PARTIAL_COMPARE_FLAG,objProps=keys(object),objLength=objProps.length,othProps=keys(other),othLength=othProps.length;if(objLength!=othLength&&!isPartial)return!1;for(var index=objLength;index--;){var key=objProps[index];if(!(isPartial?key in other:hasOwnProperty.call(other,key)))return!1}var stacked=stack.get(object);if(stacked&&stack.get(other))return stacked==other;var result=!0;stack.set(object,other),stack.set(other,object);for(var skipCtor=isPartial;++index<objLength;){key=objProps[index];var objValue=object[key],othValue=other[key];if(customizer)var compared=isPartial?customizer(othValue,objValue,key,other,object,stack):customizer(objValue,othValue,key,object,other,stack);if(!(compared===undefined?objValue===othValue||equalFunc(objValue,othValue,customizer,bitmask,stack):compared)){result=!1;break}skipCtor||(skipCtor="constructor"==key)}if(result&&!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;objCtor!=othCtor&&"constructor"in object&&"constructor"in other&&!("function"==typeof objCtor&&objCtor instanceof objCtor&&"function"==typeof othCtor&&othCtor instanceof othCtor)&&(result=!1)}return stack.delete(object),stack.delete(other),result}function getAllKeys(object){return baseGetAllKeys(object,keys,getSymbols)}function getAllKeysIn(object){return baseGetAllKeys(object,keysIn,getSymbolsIn)}function getFuncName(func){for(var result=func.name+"",array=realNames[result],length=hasOwnProperty.call(realNames,result)?array.length:0;length--;){var data=array[length],otherFunc=data.func;if(null==otherFunc||otherFunc==func)return data.name}return result}function getHolder(func){var object=hasOwnProperty.call(lodash,"placeholder")?lodash:func;return object.placeholder}function getIteratee(){var result=lodash.iteratee||iteratee;return result=result===iteratee?baseIteratee:result,arguments.length?result(arguments[0],arguments[1]):result}function getMapData(map,key){var data=map.__data__;return isKeyable(key)?data["string"==typeof key?"string":"hash"]:data.map}function getMatchData(object){for(var result=keys(object),length=result.length;length--;){var key=result[length],value=object[key];result[length]=[key,value,isStrictComparable(value)]}return result}function getNative(object,key){var value=getValue(object,key);return baseIsNative(value)?value:undefined}function getView(start,end,transforms){for(var index=-1,length=transforms.length;++index<length;){var data=transforms[index],size=data.size;switch(data.type){case"drop":start+=size;break;case"dropRight":end-=size;break;case"take":end=nativeMin(end,start+size);break;case"takeRight":start=nativeMax(start,end-size)}}return{start:start,end:end}}function getWrapDetails(source){var match=source.match(reWrapDetails);return match?match[1].split(reSplitDetails):[]}function hasPath(object,path,hasFunc){path=isKey(path,object)?[path]:castPath(path);for(var result,index=-1,length=path.length;++index<length;){var key=toKey(path[index]);if(!(result=null!=object&&hasFunc(object,key)))break;object=object[key]}if(result)return result;var length=object?object.length:0;return!!length&&isLength(length)&&isIndex(key,length)&&(isArray(object)||isArguments(object))}function initCloneArray(array){var length=array.length,result=array.constructor(length);return length&&"string"==typeof array[0]&&hasOwnProperty.call(array,"index")&&(result.index=array.index,result.input=array.input),result}function initCloneObject(object){return"function"!=typeof object.constructor||isPrototype(object)?{}:baseCreate(getPrototype(object))}function initCloneByTag(object,tag,cloneFunc,isDeep){var Ctor=object.constructor;switch(tag){case arrayBufferTag:return cloneArrayBuffer(object);case boolTag:case dateTag:return new Ctor(+object);case dataViewTag:return cloneDataView(object,isDeep);case float32Tag:case float64Tag:case int8Tag:case int16Tag:case int32Tag:case uint8Tag:case uint8ClampedTag:case uint16Tag:case uint32Tag:return cloneTypedArray(object,isDeep);case mapTag:return cloneMap(object,isDeep,cloneFunc);case numberTag:case stringTag:return new Ctor(object);case regexpTag:return cloneRegExp(object);case setTag:return cloneSet(object,isDeep,cloneFunc);case symbolTag:return cloneSymbol(object)}}function insertWrapDetails(source,details){var length=details.length,lastIndex=length-1;return details[lastIndex]=(length>1?"& ":"")+details[lastIndex],details=details.join(length>2?", ":" "),source.replace(reWrapComment,"{\n/* [wrapped with "+details+"] */\n")}function isFlattenable(value){return isArray(value)||isArguments(value)||!!(spreadableSymbol&&value&&value[spreadableSymbol])}function isIndex(value,length){return length=null==length?MAX_SAFE_INTEGER:length,!!length&&("number"==typeof value||reIsUint.test(value))&&value>-1&&value%1==0&&value<length}function isIterateeCall(value,index,object){if(!isObject(object))return!1;var type=typeof index;return!!("number"==type?isArrayLike(object)&&isIndex(index,object.length):"string"==type&&index in object)&&eq(object[index],value)}function isKey(value,object){if(isArray(value))return!1;var type=typeof value;return!("number"!=type&&"symbol"!=type&&"boolean"!=type&&null!=value&&!isSymbol(value))||(reIsPlainProp.test(value)||!reIsDeepProp.test(value)||null!=object&&value in Object(object))}function isKeyable(value){var type=typeof value;return"string"==type||"number"==type||"symbol"==type||"boolean"==type?"__proto__"!==value:null===value}function isLaziable(func){var funcName=getFuncName(func),other=lodash[funcName];if("function"!=typeof other||!(funcName in LazyWrapper.prototype))return!1;if(func===other)return!0;var data=getData(other);return!!data&&func===data[0]}function isMasked(func){return!!maskSrcKey&&maskSrcKey in func}function isPrototype(value){var Ctor=value&&value.constructor,proto="function"==typeof Ctor&&Ctor.prototype||objectProto;return value===proto}function isStrictComparable(value){return value===value&&!isObject(value)}function matchesStrictComparable(key,srcValue){return function(object){return null!=object&&(object[key]===srcValue&&(srcValue!==undefined||key in Object(object)))}}function mergeData(data,source){var bitmask=data[1],srcBitmask=source[1],newBitmask=bitmask|srcBitmask,isCommon=newBitmask<(BIND_FLAG|BIND_KEY_FLAG|ARY_FLAG),isCombo=srcBitmask==ARY_FLAG&&bitmask==CURRY_FLAG||srcBitmask==ARY_FLAG&&bitmask==REARG_FLAG&&data[7].length<=source[8]||srcBitmask==(ARY_FLAG|REARG_FLAG)&&source[7].length<=source[8]&&bitmask==CURRY_FLAG;if(!isCommon&&!isCombo)return data;srcBitmask&BIND_FLAG&&(data[2]=source[2],newBitmask|=bitmask&BIND_FLAG?0:CURRY_BOUND_FLAG);var value=source[3];if(value){var partials=data[3];data[3]=partials?composeArgs(partials,value,source[4]):value,data[4]=partials?replaceHolders(data[3],PLACEHOLDER):source[4]}return value=source[5],value&&(partials=data[5],data[5]=partials?composeArgsRight(partials,value,source[6]):value,data[6]=partials?replaceHolders(data[5],PLACEHOLDER):source[6]),value=source[7],value&&(data[7]=value),srcBitmask&ARY_FLAG&&(data[8]=null==data[8]?source[8]:nativeMin(data[8],source[8])),null==data[9]&&(data[9]=source[9]),data[0]=source[0],data[1]=newBitmask,data}function mergeDefaults(objValue,srcValue,key,object,source,stack){return isObject(objValue)&&isObject(srcValue)&&(stack.set(srcValue,objValue),baseMerge(objValue,srcValue,undefined,mergeDefaults,stack),stack.delete(srcValue)),objValue}function nativeKeysIn(object){var result=[];if(null!=object)for(var key in Object(object))result.push(key);return result}function parent(object,path){return 1==path.length?object:baseGet(object,baseSlice(path,0,-1))}function reorder(array,indexes){for(var arrLength=array.length,length=nativeMin(indexes.length,arrLength),oldArray=copyArray(array);length--;){var index=indexes[length];array[length]=isIndex(index,arrLength)?oldArray[index]:undefined}return array}function toKey(value){if("string"==typeof value||isSymbol(value))return value;var result=value+"";return"0"==result&&1/value==-INFINITY?"-0":result}function toSource(func){if(null!=func){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}function updateWrapDetails(details,bitmask){return arrayEach(wrapFlags,function(pair){var value="_."+pair[0];bitmask&pair[1]&&!arrayIncludes(details,value)&&details.push(value)}),details.sort()}function wrapperClone(wrapper){if(wrapper instanceof LazyWrapper)return wrapper.clone();var result=new LodashWrapper(wrapper.__wrapped__,wrapper.__chain__);return result.__actions__=copyArray(wrapper.__actions__),result.__index__=wrapper.__index__,result.__values__=wrapper.__values__,result}function chunk(array,size,guard){size=(guard?isIterateeCall(array,size,guard):size===undefined)?1:nativeMax(toInteger(size),0);var length=array?array.length:0;if(!length||size<1)return[];for(var index=0,resIndex=0,result=Array(nativeCeil(length/size));index<length;)result[resIndex++]=baseSlice(array,index,index+=size);return result}function compact(array){for(var index=-1,length=array?array.length:0,resIndex=0,result=[];++index<length;){var value=array[index];value&&(result[resIndex++]=value)}return result}function concat(){for(var length=arguments.length,args=Array(length?length-1:0),array=arguments[0],index=length;index--;)args[index-1]=arguments[index];return length?arrayPush(isArray(array)?copyArray(array):[array],baseFlatten(args,1)):[]}function drop(array,n,guard){var length=array?array.length:0;return length?(n=guard||n===undefined?1:toInteger(n),baseSlice(array,n<0?0:n,length)):[]}function dropRight(array,n,guard){var length=array?array.length:0;return length?(n=guard||n===undefined?1:toInteger(n),n=length-n,baseSlice(array,0,n<0?0:n)):[]}function dropRightWhile(array,predicate){return array&&array.length?baseWhile(array,getIteratee(predicate,3),!0,!0):[]}function dropWhile(array,predicate){return array&&array.length?baseWhile(array,getIteratee(predicate,3),!0):[]}function fill(array,value,start,end){var length=array?array.length:0;return length?(start&&"number"!=typeof start&&isIterateeCall(array,value,start)&&(start=0,end=length),baseFill(array,value,start,end)):[]}function findIndex(array,predicate,fromIndex){var length=array?array.length:0;if(!length)return-1;var index=null==fromIndex?0:toInteger(fromIndex);return index<0&&(index=nativeMax(length+index,0)),baseFindIndex(array,getIteratee(predicate,3),index)}function findLastIndex(array,predicate,fromIndex){var length=array?array.length:0;if(!length)return-1;var index=length-1;return fromIndex!==undefined&&(index=toInteger(fromIndex),index=fromIndex<0?nativeMax(length+index,0):nativeMin(index,length-1)),baseFindIndex(array,getIteratee(predicate,3),index,!0)}function flatten(array){var length=array?array.length:0;return length?baseFlatten(array,1):[]}function flattenDeep(array){var length=array?array.length:0;return length?baseFlatten(array,INFINITY):[]}function flattenDepth(array,depth){var length=array?array.length:0;return length?(depth=depth===undefined?1:toInteger(depth),baseFlatten(array,depth)):[]}function fromPairs(pairs){for(var index=-1,length=pairs?pairs.length:0,result={};++index<length;){var pair=pairs[index];result[pair[0]]=pair[1]}return result}function head(array){return array&&array.length?array[0]:undefined}function indexOf(array,value,fromIndex){var length=array?array.length:0;if(!length)return-1;var index=null==fromIndex?0:toInteger(fromIndex);return index<0&&(index=nativeMax(length+index,0)),baseIndexOf(array,value,index)}function initial(array){var length=array?array.length:0;return length?baseSlice(array,0,-1):[]}function join(array,separator){return array?nativeJoin.call(array,separator):""}function last(array){var length=array?array.length:0;return length?array[length-1]:undefined}function lastIndexOf(array,value,fromIndex){var length=array?array.length:0;if(!length)return-1;var index=length;if(fromIndex!==undefined&&(index=toInteger(fromIndex),index=(index<0?nativeMax(length+index,0):nativeMin(index,length-1))+1),value!==value)return baseFindIndex(array,baseIsNaN,index-1,!0);for(;index--;)if(array[index]===value)return index;return-1}function nth(array,n){return array&&array.length?baseNth(array,toInteger(n)):undefined}function pullAll(array,values){return array&&array.length&&values&&values.length?basePullAll(array,values):array}function pullAllBy(array,values,iteratee){return array&&array.length&&values&&values.length?basePullAll(array,values,getIteratee(iteratee,2)):array}function pullAllWith(array,values,comparator){return array&&array.length&&values&&values.length?basePullAll(array,values,undefined,comparator):array}function remove(array,predicate){var result=[];if(!array||!array.length)return result;var index=-1,indexes=[],length=array.length;for(predicate=getIteratee(predicate,3);++index<length;){var value=array[index];predicate(value,index,array)&&(result.push(value),indexes.push(index))}return basePullAt(array,indexes),result}function reverse(array){return array?nativeReverse.call(array):array}function slice(array,start,end){var length=array?array.length:0;return length?(end&&"number"!=typeof end&&isIterateeCall(array,start,end)?(start=0,end=length):(start=null==start?0:toInteger(start),end=end===undefined?length:toInteger(end)),baseSlice(array,start,end)):[]}function sortedIndex(array,value){return baseSortedIndex(array,value);
}function sortedIndexBy(array,value,iteratee){return baseSortedIndexBy(array,value,getIteratee(iteratee,2))}function sortedIndexOf(array,value){var length=array?array.length:0;if(length){var index=baseSortedIndex(array,value);if(index<length&&eq(array[index],value))return index}return-1}function sortedLastIndex(array,value){return baseSortedIndex(array,value,!0)}function sortedLastIndexBy(array,value,iteratee){return baseSortedIndexBy(array,value,getIteratee(iteratee,2),!0)}function sortedLastIndexOf(array,value){var length=array?array.length:0;if(length){var index=baseSortedIndex(array,value,!0)-1;if(eq(array[index],value))return index}return-1}function sortedUniq(array){return array&&array.length?baseSortedUniq(array):[]}function sortedUniqBy(array,iteratee){return array&&array.length?baseSortedUniq(array,getIteratee(iteratee,2)):[]}function tail(array){var length=array?array.length:0;return length?baseSlice(array,1,length):[]}function take(array,n,guard){return array&&array.length?(n=guard||n===undefined?1:toInteger(n),baseSlice(array,0,n<0?0:n)):[]}function takeRight(array,n,guard){var length=array?array.length:0;return length?(n=guard||n===undefined?1:toInteger(n),n=length-n,baseSlice(array,n<0?0:n,length)):[]}function takeRightWhile(array,predicate){return array&&array.length?baseWhile(array,getIteratee(predicate,3),!1,!0):[]}function takeWhile(array,predicate){return array&&array.length?baseWhile(array,getIteratee(predicate,3)):[]}function uniq(array){return array&&array.length?baseUniq(array):[]}function uniqBy(array,iteratee){return array&&array.length?baseUniq(array,getIteratee(iteratee,2)):[]}function uniqWith(array,comparator){return array&&array.length?baseUniq(array,undefined,comparator):[]}function unzip(array){if(!array||!array.length)return[];var length=0;return array=arrayFilter(array,function(group){if(isArrayLikeObject(group))return length=nativeMax(group.length,length),!0}),baseTimes(length,function(index){return arrayMap(array,baseProperty(index))})}function unzipWith(array,iteratee){if(!array||!array.length)return[];var result=unzip(array);return null==iteratee?result:arrayMap(result,function(group){return apply(iteratee,undefined,group)})}function zipObject(props,values){return baseZipObject(props||[],values||[],assignValue)}function zipObjectDeep(props,values){return baseZipObject(props||[],values||[],baseSet)}function chain(value){var result=lodash(value);return result.__chain__=!0,result}function tap(value,interceptor){return interceptor(value),value}function thru(value,interceptor){return interceptor(value)}function wrapperChain(){return chain(this)}function wrapperCommit(){return new LodashWrapper(this.value(),this.__chain__)}function wrapperNext(){this.__values__===undefined&&(this.__values__=toArray(this.value()));var done=this.__index__>=this.__values__.length,value=done?undefined:this.__values__[this.__index__++];return{done:done,value:value}}function wrapperToIterator(){return this}function wrapperPlant(value){for(var result,parent=this;parent instanceof baseLodash;){var clone=wrapperClone(parent);clone.__index__=0,clone.__values__=undefined,result?previous.__wrapped__=clone:result=clone;var previous=clone;parent=parent.__wrapped__}return previous.__wrapped__=value,result}function wrapperReverse(){var value=this.__wrapped__;if(value instanceof LazyWrapper){var wrapped=value;return this.__actions__.length&&(wrapped=new LazyWrapper(this)),wrapped=wrapped.reverse(),wrapped.__actions__.push({func:thru,args:[reverse],thisArg:undefined}),new LodashWrapper(wrapped,this.__chain__)}return this.thru(reverse)}function wrapperValue(){return baseWrapperValue(this.__wrapped__,this.__actions__)}function every(collection,predicate,guard){var func=isArray(collection)?arrayEvery:baseEvery;return guard&&isIterateeCall(collection,predicate,guard)&&(predicate=undefined),func(collection,getIteratee(predicate,3))}function filter(collection,predicate){var func=isArray(collection)?arrayFilter:baseFilter;return func(collection,getIteratee(predicate,3))}function flatMap(collection,iteratee){return baseFlatten(map(collection,iteratee),1)}function flatMapDeep(collection,iteratee){return baseFlatten(map(collection,iteratee),INFINITY)}function flatMapDepth(collection,iteratee,depth){return depth=depth===undefined?1:toInteger(depth),baseFlatten(map(collection,iteratee),depth)}function forEach(collection,iteratee){var func=isArray(collection)?arrayEach:baseEach;return func(collection,getIteratee(iteratee,3))}function forEachRight(collection,iteratee){var func=isArray(collection)?arrayEachRight:baseEachRight;return func(collection,getIteratee(iteratee,3))}function includes(collection,value,fromIndex,guard){collection=isArrayLike(collection)?collection:values(collection),fromIndex=fromIndex&&!guard?toInteger(fromIndex):0;var length=collection.length;return fromIndex<0&&(fromIndex=nativeMax(length+fromIndex,0)),isString(collection)?fromIndex<=length&&collection.indexOf(value,fromIndex)>-1:!!length&&baseIndexOf(collection,value,fromIndex)>-1}function map(collection,iteratee){var func=isArray(collection)?arrayMap:baseMap;return func(collection,getIteratee(iteratee,3))}function orderBy(collection,iteratees,orders,guard){return null==collection?[]:(isArray(iteratees)||(iteratees=null==iteratees?[]:[iteratees]),orders=guard?undefined:orders,isArray(orders)||(orders=null==orders?[]:[orders]),baseOrderBy(collection,iteratees,orders))}function reduce(collection,iteratee,accumulator){var func=isArray(collection)?arrayReduce:baseReduce,initAccum=arguments.length<3;return func(collection,getIteratee(iteratee,4),accumulator,initAccum,baseEach)}function reduceRight(collection,iteratee,accumulator){var func=isArray(collection)?arrayReduceRight:baseReduce,initAccum=arguments.length<3;return func(collection,getIteratee(iteratee,4),accumulator,initAccum,baseEachRight)}function reject(collection,predicate){var func=isArray(collection)?arrayFilter:baseFilter;return func(collection,negate(getIteratee(predicate,3)))}function sample(collection){var array=isArrayLike(collection)?collection:values(collection),length=array.length;return length>0?array[baseRandom(0,length-1)]:undefined}function sampleSize(collection,n,guard){var index=-1,result=toArray(collection),length=result.length,lastIndex=length-1;for(n=(guard?isIterateeCall(collection,n,guard):n===undefined)?1:baseClamp(toInteger(n),0,length);++index<n;){var rand=baseRandom(index,lastIndex),value=result[rand];result[rand]=result[index],result[index]=value}return result.length=n,result}function shuffle(collection){return sampleSize(collection,MAX_ARRAY_LENGTH)}function size(collection){if(null==collection)return 0;if(isArrayLike(collection))return isString(collection)?stringSize(collection):collection.length;var tag=getTag(collection);return tag==mapTag||tag==setTag?collection.size:baseKeys(collection).length}function some(collection,predicate,guard){var func=isArray(collection)?arraySome:baseSome;return guard&&isIterateeCall(collection,predicate,guard)&&(predicate=undefined),func(collection,getIteratee(predicate,3))}function after(n,func){if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);return n=toInteger(n),function(){if(--n<1)return func.apply(this,arguments)}}function ary(func,n,guard){return n=guard?undefined:n,n=func&&null==n?func.length:n,createWrap(func,ARY_FLAG,undefined,undefined,undefined,undefined,n)}function before(n,func){var result;if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);return n=toInteger(n),function(){return--n>0&&(result=func.apply(this,arguments)),n<=1&&(func=undefined),result}}function curry(func,arity,guard){arity=guard?undefined:arity;var result=createWrap(func,CURRY_FLAG,undefined,undefined,undefined,undefined,undefined,arity);return result.placeholder=curry.placeholder,result}function curryRight(func,arity,guard){arity=guard?undefined:arity;var result=createWrap(func,CURRY_RIGHT_FLAG,undefined,undefined,undefined,undefined,undefined,arity);return result.placeholder=curryRight.placeholder,result}function debounce(func,wait,options){function invokeFunc(time){var args=lastArgs,thisArg=lastThis;return lastArgs=lastThis=undefined,lastInvokeTime=time,result=func.apply(thisArg,args)}function leadingEdge(time){return lastInvokeTime=time,timerId=setTimeout(timerExpired,wait),leading?invokeFunc(time):result}function remainingWait(time){var timeSinceLastCall=time-lastCallTime,timeSinceLastInvoke=time-lastInvokeTime,result=wait-timeSinceLastCall;return maxing?nativeMin(result,maxWait-timeSinceLastInvoke):result}function shouldInvoke(time){var timeSinceLastCall=time-lastCallTime,timeSinceLastInvoke=time-lastInvokeTime;return lastCallTime===undefined||timeSinceLastCall>=wait||timeSinceLastCall<0||maxing&&timeSinceLastInvoke>=maxWait}function timerExpired(){var time=now();return shouldInvoke(time)?trailingEdge(time):void(timerId=setTimeout(timerExpired,remainingWait(time)))}function trailingEdge(time){return timerId=undefined,trailing&&lastArgs?invokeFunc(time):(lastArgs=lastThis=undefined,result)}function cancel(){timerId!==undefined&&clearTimeout(timerId),lastInvokeTime=0,lastArgs=lastCallTime=lastThis=timerId=undefined}function flush(){return timerId===undefined?result:trailingEdge(now())}function debounced(){var time=now(),isInvoking=shouldInvoke(time);if(lastArgs=arguments,lastThis=this,lastCallTime=time,isInvoking){if(timerId===undefined)return leadingEdge(lastCallTime);if(maxing)return timerId=setTimeout(timerExpired,wait),invokeFunc(lastCallTime)}return timerId===undefined&&(timerId=setTimeout(timerExpired,wait)),result}var lastArgs,lastThis,maxWait,result,timerId,lastCallTime,lastInvokeTime=0,leading=!1,maxing=!1,trailing=!0;if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);return wait=toNumber(wait)||0,isObject(options)&&(leading=!!options.leading,maxing="maxWait"in options,maxWait=maxing?nativeMax(toNumber(options.maxWait)||0,wait):maxWait,trailing="trailing"in options?!!options.trailing:trailing),debounced.cancel=cancel,debounced.flush=flush,debounced}function flip(func){return createWrap(func,FLIP_FLAG)}function memoize(func,resolver){if("function"!=typeof func||resolver&&"function"!=typeof resolver)throw new TypeError(FUNC_ERROR_TEXT);var memoized=function(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache=memoized.cache;if(cache.has(key))return cache.get(key);var result=func.apply(this,args);return memoized.cache=cache.set(key,result),result};return memoized.cache=new(memoize.Cache||MapCache),memoized}function negate(predicate){if("function"!=typeof predicate)throw new TypeError(FUNC_ERROR_TEXT);return function(){var args=arguments;switch(args.length){case 0:return!predicate.call(this);case 1:return!predicate.call(this,args[0]);case 2:return!predicate.call(this,args[0],args[1]);case 3:return!predicate.call(this,args[0],args[1],args[2])}return!predicate.apply(this,args)}}function once(func){return before(2,func)}function rest(func,start){if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);return start=start===undefined?start:toInteger(start),baseRest(func,start)}function spread(func,start){if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);return start=start===undefined?0:nativeMax(toInteger(start),0),baseRest(function(args){var array=args[start],otherArgs=castSlice(args,0,start);return array&&arrayPush(otherArgs,array),apply(func,this,otherArgs)})}function throttle(func,wait,options){var leading=!0,trailing=!0;if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);return isObject(options)&&(leading="leading"in options?!!options.leading:leading,trailing="trailing"in options?!!options.trailing:trailing),debounce(func,wait,{leading:leading,maxWait:wait,trailing:trailing})}function unary(func){return ary(func,1)}function wrap(value,wrapper){return wrapper=null==wrapper?identity:wrapper,partial(wrapper,value)}function castArray(){if(!arguments.length)return[];var value=arguments[0];return isArray(value)?value:[value]}function clone(value){return baseClone(value,!1,!0)}function cloneWith(value,customizer){return baseClone(value,!1,!0,customizer)}function cloneDeep(value){return baseClone(value,!0,!0)}function cloneDeepWith(value,customizer){return baseClone(value,!0,!0,customizer)}function conformsTo(object,source){return null==source||baseConformsTo(object,source,keys(source))}function eq(value,other){return value===other||value!==value&&other!==other}function isArguments(value){return isArrayLikeObject(value)&&hasOwnProperty.call(value,"callee")&&(!propertyIsEnumerable.call(value,"callee")||objectToString.call(value)==argsTag)}function isArrayLike(value){return null!=value&&isLength(value.length)&&!isFunction(value)}function isArrayLikeObject(value){return isObjectLike(value)&&isArrayLike(value)}function isBoolean(value){return value===!0||value===!1||isObjectLike(value)&&objectToString.call(value)==boolTag}function isElement(value){return!!value&&1===value.nodeType&&isObjectLike(value)&&!isPlainObject(value)}function isEmpty(value){if(isArrayLike(value)&&(isArray(value)||"string"==typeof value||"function"==typeof value.splice||isBuffer(value)||isArguments(value)))return!value.length;var tag=getTag(value);if(tag==mapTag||tag==setTag)return!value.size;if(nonEnumShadows||isPrototype(value))return!nativeKeys(value).length;for(var key in value)if(hasOwnProperty.call(value,key))return!1;return!0}function isEqual(value,other){return baseIsEqual(value,other)}function isEqualWith(value,other,customizer){customizer="function"==typeof customizer?customizer:undefined;var result=customizer?customizer(value,other):undefined;return result===undefined?baseIsEqual(value,other,customizer):!!result}function isError(value){return!!isObjectLike(value)&&(objectToString.call(value)==errorTag||"string"==typeof value.message&&"string"==typeof value.name)}function isFinite(value){return"number"==typeof value&&nativeIsFinite(value)}function isFunction(value){var tag=isObject(value)?objectToString.call(value):"";return tag==funcTag||tag==genTag}function isInteger(value){return"number"==typeof value&&value==toInteger(value)}function isLength(value){return"number"==typeof value&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}function isObject(value){var type=typeof value;return!!value&&("object"==type||"function"==type)}function isObjectLike(value){return!!value&&"object"==typeof value}function isMatch(object,source){return object===source||baseIsMatch(object,source,getMatchData(source))}function isMatchWith(object,source,customizer){return customizer="function"==typeof customizer?customizer:undefined,baseIsMatch(object,source,getMatchData(source),customizer)}function isNaN(value){return isNumber(value)&&value!=+value}function isNative(value){if(isMaskable(value))throw new Error("This method is not supported with core-js. Try https://github.com/es-shims.");return baseIsNative(value)}function isNull(value){return null===value}function isNil(value){return null==value}function isNumber(value){return"number"==typeof value||isObjectLike(value)&&objectToString.call(value)==numberTag}function isPlainObject(value){if(!isObjectLike(value)||objectToString.call(value)!=objectTag||isHostObject(value))return!1;var proto=getPrototype(value);if(null===proto)return!0;var Ctor=hasOwnProperty.call(proto,"constructor")&&proto.constructor;return"function"==typeof Ctor&&Ctor instanceof Ctor&&funcToString.call(Ctor)==objectCtorString}function isSafeInteger(value){return isInteger(value)&&value>=-MAX_SAFE_INTEGER&&value<=MAX_SAFE_INTEGER}function isString(value){return"string"==typeof value||!isArray(value)&&isObjectLike(value)&&objectToString.call(value)==stringTag}function isSymbol(value){return"symbol"==typeof value||isObjectLike(value)&&objectToString.call(value)==symbolTag}function isUndefined(value){return value===undefined}function isWeakMap(value){return isObjectLike(value)&&getTag(value)==weakMapTag}function isWeakSet(value){return isObjectLike(value)&&objectToString.call(value)==weakSetTag}function toArray(value){if(!value)return[];if(isArrayLike(value))return isString(value)?stringToArray(value):copyArray(value);if(iteratorSymbol&&value[iteratorSymbol])return iteratorToArray(value[iteratorSymbol]());var tag=getTag(value),func=tag==mapTag?mapToArray:tag==setTag?setToArray:values;return func(value)}function toFinite(value){if(!value)return 0===value?value:0;if(value=toNumber(value),value===INFINITY||value===-INFINITY){var sign=value<0?-1:1;return sign*MAX_INTEGER}return value===value?value:0}function toInteger(value){var result=toFinite(value),remainder=result%1;return result===result?remainder?result-remainder:result:0}function toLength(value){return value?baseClamp(toInteger(value),0,MAX_ARRAY_LENGTH):0}function toNumber(value){if("number"==typeof value)return value;if(isSymbol(value))return NAN;if(isObject(value)){var other="function"==typeof value.valueOf?value.valueOf():value;value=isObject(other)?other+"":other}if("string"!=typeof value)return 0===value?value:+value;value=value.replace(reTrim,"");var isBinary=reIsBinary.test(value);return isBinary||reIsOctal.test(value)?freeParseInt(value.slice(2),isBinary?2:8):reIsBadHex.test(value)?NAN:+value}function toPlainObject(value){return copyObject(value,keysIn(value))}function toSafeInteger(value){return baseClamp(toInteger(value),-MAX_SAFE_INTEGER,MAX_SAFE_INTEGER)}function toString(value){return null==value?"":baseToString(value)}function create(prototype,properties){var result=baseCreate(prototype);return properties?baseAssign(result,properties):result}function findKey(object,predicate){return baseFindKey(object,getIteratee(predicate,3),baseForOwn)}function findLastKey(object,predicate){return baseFindKey(object,getIteratee(predicate,3),baseForOwnRight)}function forIn(object,iteratee){return null==object?object:baseFor(object,getIteratee(iteratee,3),keysIn)}function forInRight(object,iteratee){return null==object?object:baseForRight(object,getIteratee(iteratee,3),keysIn)}function forOwn(object,iteratee){return object&&baseForOwn(object,getIteratee(iteratee,3))}function forOwnRight(object,iteratee){return object&&baseForOwnRight(object,getIteratee(iteratee,3))}function functions(object){return null==object?[]:baseFunctions(object,keys(object))}function functionsIn(object){return null==object?[]:baseFunctions(object,keysIn(object))}function get(object,path,defaultValue){var result=null==object?undefined:baseGet(object,path);return result===undefined?defaultValue:result}function has(object,path){return null!=object&&hasPath(object,path,baseHas)}function hasIn(object,path){return null!=object&&hasPath(object,path,baseHasIn)}function keys(object){return isArrayLike(object)?arrayLikeKeys(object):baseKeys(object)}function keysIn(object){return isArrayLike(object)?arrayLikeKeys(object,!0):baseKeysIn(object)}function mapKeys(object,iteratee){var result={};return iteratee=getIteratee(iteratee,3),baseForOwn(object,function(value,key,object){result[iteratee(value,key,object)]=value}),result}function mapValues(object,iteratee){var result={};return iteratee=getIteratee(iteratee,3),baseForOwn(object,function(value,key,object){result[key]=iteratee(value,key,object)}),result}function omitBy(object,predicate){return pickBy(object,negate(getIteratee(predicate)))}function pickBy(object,predicate){return null==object?{}:basePickBy(object,getAllKeysIn(object),getIteratee(predicate))}function result(object,path,defaultValue){path=isKey(path,object)?[path]:castPath(path);var index=-1,length=path.length;for(length||(object=undefined,length=1);++index<length;){var value=null==object?undefined:object[toKey(path[index])];value===undefined&&(index=length,value=defaultValue),object=isFunction(value)?value.call(object):value}return object}function set(object,path,value){return null==object?object:baseSet(object,path,value)}function setWith(object,path,value,customizer){return customizer="function"==typeof customizer?customizer:undefined,null==object?object:baseSet(object,path,value,customizer)}function transform(object,iteratee,accumulator){var isArr=isArray(object)||isTypedArray(object);if(iteratee=getIteratee(iteratee,4),null==accumulator)if(isArr||isObject(object)){var Ctor=object.constructor;accumulator=isArr?isArray(object)?new Ctor:[]:isFunction(Ctor)?baseCreate(getPrototype(object)):{}}else accumulator={};return(isArr?arrayEach:baseForOwn)(object,function(value,index,object){return iteratee(accumulator,value,index,object)}),accumulator}function unset(object,path){return null==object||baseUnset(object,path)}function update(object,path,updater){return null==object?object:baseUpdate(object,path,castFunction(updater))}function updateWith(object,path,updater,customizer){return customizer="function"==typeof customizer?customizer:undefined,null==object?object:baseUpdate(object,path,castFunction(updater),customizer)}function values(object){return object?baseValues(object,keys(object)):[]}function valuesIn(object){return null==object?[]:baseValues(object,keysIn(object))}function clamp(number,lower,upper){return upper===undefined&&(upper=lower,lower=undefined),upper!==undefined&&(upper=toNumber(upper),upper=upper===upper?upper:0),lower!==undefined&&(lower=toNumber(lower),lower=lower===lower?lower:0),baseClamp(toNumber(number),lower,upper)}function inRange(number,start,end){return start=toFinite(start),end===undefined?(end=start,start=0):end=toFinite(end),number=toNumber(number),baseInRange(number,start,end)}function random(lower,upper,floating){if(floating&&"boolean"!=typeof floating&&isIterateeCall(lower,upper,floating)&&(upper=floating=undefined),floating===undefined&&("boolean"==typeof upper?(floating=upper,upper=undefined):"boolean"==typeof lower&&(floating=lower,lower=undefined)),lower===undefined&&upper===undefined?(lower=0,upper=1):(lower=toFinite(lower),upper===undefined?(upper=lower,lower=0):upper=toFinite(upper)),lower>upper){var temp=lower;lower=upper,upper=temp}if(floating||lower%1||upper%1){var rand=nativeRandom();return nativeMin(lower+rand*(upper-lower+freeParseFloat("1e-"+((rand+"").length-1))),upper)}return baseRandom(lower,upper)}function capitalize(string){return upperFirst(toString(string).toLowerCase())}function deburr(string){return string=toString(string),string&&string.replace(reLatin,deburrLetter).replace(reComboMark,"")}function endsWith(string,target,position){string=toString(string),target=baseToString(target);var length=string.length;position=position===undefined?length:baseClamp(toInteger(position),0,length);var end=position;return position-=target.length,position>=0&&string.slice(position,end)==target}function escape(string){return string=toString(string),string&&reHasUnescapedHtml.test(string)?string.replace(reUnescapedHtml,escapeHtmlChar):string}function escapeRegExp(string){return string=toString(string),string&&reHasRegExpChar.test(string)?string.replace(reRegExpChar,"\\$&"):string}function pad(string,length,chars){string=toString(string),length=toInteger(length);var strLength=length?stringSize(string):0;if(!length||strLength>=length)return string;var mid=(length-strLength)/2;return createPadding(nativeFloor(mid),chars)+string+createPadding(nativeCeil(mid),chars)}function padEnd(string,length,chars){string=toString(string),length=toInteger(length);var strLength=length?stringSize(string):0;return length&&strLength<length?string+createPadding(length-strLength,chars):string}function padStart(string,length,chars){string=toString(string),length=toInteger(length);var strLength=length?stringSize(string):0;return length&&strLength<length?createPadding(length-strLength,chars)+string:string}function parseInt(string,radix,guard){return guard||null==radix?radix=0:radix&&(radix=+radix),string=toString(string).replace(reTrim,""),nativeParseInt(string,radix||(reHasHexPrefix.test(string)?16:10))}function repeat(string,n,guard){return n=(guard?isIterateeCall(string,n,guard):n===undefined)?1:toInteger(n),baseRepeat(toString(string),n)}function replace(){var args=arguments,string=toString(args[0]);return args.length<3?string:string.replace(args[1],args[2])}function split(string,separator,limit){return limit&&"number"!=typeof limit&&isIterateeCall(string,separator,limit)&&(separator=limit=undefined),(limit=limit===undefined?MAX_ARRAY_LENGTH:limit>>>0)?(string=toString(string),string&&("string"==typeof separator||null!=separator&&!isRegExp(separator))&&(separator=baseToString(separator),!separator&&hasUnicode(string))?castSlice(stringToArray(string),0,limit):string.split(separator,limit)):[]}function startsWith(string,target,position){return string=toString(string),position=baseClamp(toInteger(position),0,string.length),target=baseToString(target),string.slice(position,position+target.length)==target}function template(string,options,guard){var settings=lodash.templateSettings;guard&&isIterateeCall(string,options,guard)&&(options=undefined),string=toString(string),options=assignInWith({},options,settings,assignInDefaults);var isEscaping,isEvaluating,imports=assignInWith({},options.imports,settings.imports,assignInDefaults),importsKeys=keys(imports),importsValues=baseValues(imports,importsKeys),index=0,interpolate=options.interpolate||reNoMatch,source="__p += '",reDelimiters=RegExp((options.escape||reNoMatch).source+"|"+interpolate.source+"|"+(interpolate===reInterpolate?reEsTemplate:reNoMatch).source+"|"+(options.evaluate||reNoMatch).source+"|$","g"),sourceURL="//# sourceURL="+("sourceURL"in options?options.sourceURL:"lodash.templateSources["+ ++templateCounter+"]")+"\n";string.replace(reDelimiters,function(match,escapeValue,interpolateValue,esTemplateValue,evaluateValue,offset){return interpolateValue||(interpolateValue=esTemplateValue),source+=string.slice(index,offset).replace(reUnescapedString,escapeStringChar),escapeValue&&(isEscaping=!0,source+="' +\n__e("+escapeValue+") +\n'"),evaluateValue&&(isEvaluating=!0,source+="';\n"+evaluateValue+";\n__p += '"),interpolateValue&&(source+="' +\n((__t = ("+interpolateValue+")) == null ? '' : __t) +\n'"),index=offset+match.length,match}),source+="';\n";var variable=options.variable;variable||(source="with (obj) {\n"+source+"\n}\n"),source=(isEvaluating?source.replace(reEmptyStringLeading,""):source).replace(reEmptyStringMiddle,"$1").replace(reEmptyStringTrailing,"$1;"),source="function("+(variable||"obj")+") {\n"+(variable?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(isEscaping?", __e = _.escape":"")+(isEvaluating?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+source+"return __p\n}";var result=attempt(function(){return Function(importsKeys,sourceURL+"return "+source).apply(undefined,importsValues)});if(result.source=source,isError(result))throw result;return result}function toLower(value){return toString(value).toLowerCase()}function toUpper(value){return toString(value).toUpperCase()}function trim(string,chars,guard){if(string=toString(string),string&&(guard||chars===undefined))return string.replace(reTrim,"");if(!string||!(chars=baseToString(chars)))return string;var strSymbols=stringToArray(string),chrSymbols=stringToArray(chars),start=charsStartIndex(strSymbols,chrSymbols),end=charsEndIndex(strSymbols,chrSymbols)+1;return castSlice(strSymbols,start,end).join("")}function trimEnd(string,chars,guard){if(string=toString(string),string&&(guard||chars===undefined))return string.replace(reTrimEnd,"");if(!string||!(chars=baseToString(chars)))return string;var strSymbols=stringToArray(string),end=charsEndIndex(strSymbols,stringToArray(chars))+1;return castSlice(strSymbols,0,end).join("")}function trimStart(string,chars,guard){if(string=toString(string),string&&(guard||chars===undefined))return string.replace(reTrimStart,"");if(!string||!(chars=baseToString(chars)))return string;var strSymbols=stringToArray(string),start=charsStartIndex(strSymbols,stringToArray(chars));return castSlice(strSymbols,start).join("")}function truncate(string,options){var length=DEFAULT_TRUNC_LENGTH,omission=DEFAULT_TRUNC_OMISSION;if(isObject(options)){var separator="separator"in options?options.separator:separator;length="length"in options?toInteger(options.length):length,omission="omission"in options?baseToString(options.omission):omission}string=toString(string);var strLength=string.length;if(hasUnicode(string)){var strSymbols=stringToArray(string);strLength=strSymbols.length}if(length>=strLength)return string;var end=length-stringSize(omission);if(end<1)return omission;var result=strSymbols?castSlice(strSymbols,0,end).join(""):string.slice(0,end);if(separator===undefined)return result+omission;if(strSymbols&&(end+=result.length-end),isRegExp(separator)){if(string.slice(end).search(separator)){var match,substring=result;for(separator.global||(separator=RegExp(separator.source,toString(reFlags.exec(separator))+"g")),separator.lastIndex=0;match=separator.exec(substring);)var newEnd=match.index;result=result.slice(0,newEnd===undefined?end:newEnd)}}else if(string.indexOf(baseToString(separator),end)!=end){var index=result.lastIndexOf(separator);index>-1&&(result=result.slice(0,index))}return result+omission}function unescape(string){return string=toString(string),string&&reHasEscapedHtml.test(string)?string.replace(reEscapedHtml,unescapeHtmlChar):string}function words(string,pattern,guard){return string=toString(string),pattern=guard?undefined:pattern,pattern===undefined?hasUnicodeWord(string)?unicodeWords(string):asciiWords(string):string.match(pattern)||[]}function cond(pairs){var length=pairs?pairs.length:0,toIteratee=getIteratee();return pairs=length?arrayMap(pairs,function(pair){if("function"!=typeof pair[1])throw new TypeError(FUNC_ERROR_TEXT);return[toIteratee(pair[0]),pair[1]]}):[],baseRest(function(args){for(var index=-1;++index<length;){var pair=pairs[index];if(apply(pair[0],this,args))return apply(pair[1],this,args)}})}function conforms(source){return baseConforms(baseClone(source,!0))}function constant(value){return function(){return value}}function defaultTo(value,defaultValue){return null==value||value!==value?defaultValue:value}function identity(value){return value}function iteratee(func){return baseIteratee("function"==typeof func?func:baseClone(func,!0))}function matches(source){return baseMatches(baseClone(source,!0))}function matchesProperty(path,srcValue){return baseMatchesProperty(path,baseClone(srcValue,!0))}function mixin(object,source,options){var props=keys(source),methodNames=baseFunctions(source,props);null!=options||isObject(source)&&(methodNames.length||!props.length)||(options=source,source=object,object=this,methodNames=baseFunctions(source,keys(source)));var chain=!(isObject(options)&&"chain"in options&&!options.chain),isFunc=isFunction(object);return arrayEach(methodNames,function(methodName){var func=source[methodName];object[methodName]=func,isFunc&&(object.prototype[methodName]=function(){var chainAll=this.__chain__;if(chain||chainAll){var result=object(this.__wrapped__),actions=result.__actions__=copyArray(this.__actions__);return actions.push({func:func,args:arguments,thisArg:object}),result.__chain__=chainAll,result}return func.apply(object,arrayPush([this.value()],arguments))})}),object}function noConflict(){return root._===this&&(root._=oldDash),this}function noop(){}function nthArg(n){return n=toInteger(n),baseRest(function(args){return baseNth(args,n)})}function property(path){return isKey(path)?baseProperty(toKey(path)):basePropertyDeep(path)}function propertyOf(object){return function(path){return null==object?undefined:baseGet(object,path)}}function stubArray(){return[]}function stubFalse(){return!1}function stubObject(){return{}}function stubString(){return""}function stubTrue(){return!0}function times(n,iteratee){if(n=toInteger(n),n<1||n>MAX_SAFE_INTEGER)return[];var index=MAX_ARRAY_LENGTH,length=nativeMin(n,MAX_ARRAY_LENGTH);iteratee=getIteratee(iteratee),n-=MAX_ARRAY_LENGTH;for(var result=baseTimes(length,iteratee);++index<n;)iteratee(index);return result}function toPath(value){return isArray(value)?arrayMap(value,toKey):isSymbol(value)?[value]:copyArray(stringToPath(value));
}function uniqueId(prefix){var id=++idCounter;return toString(prefix)+id}function max(array){return array&&array.length?baseExtremum(array,identity,baseGt):undefined}function maxBy(array,iteratee){return array&&array.length?baseExtremum(array,getIteratee(iteratee,2),baseGt):undefined}function mean(array){return baseMean(array,identity)}function meanBy(array,iteratee){return baseMean(array,getIteratee(iteratee,2))}function min(array){return array&&array.length?baseExtremum(array,identity,baseLt):undefined}function minBy(array,iteratee){return array&&array.length?baseExtremum(array,getIteratee(iteratee,2),baseLt):undefined}function sum(array){return array&&array.length?baseSum(array,identity):0}function sumBy(array,iteratee){return array&&array.length?baseSum(array,getIteratee(iteratee,2)):0}context=context?_.defaults(root.Object(),context,_.pick(root,contextProps)):root;var Array=context.Array,Date=context.Date,Error=context.Error,Function=context.Function,Math=context.Math,Object=context.Object,RegExp=context.RegExp,String=context.String,TypeError=context.TypeError,arrayProto=Array.prototype,funcProto=Function.prototype,objectProto=Object.prototype,coreJsData=context["__core-js_shared__"],maskSrcKey=function(){var uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return uid?"Symbol(src)_1."+uid:""}(),funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,idCounter=0,objectCtorString=funcToString.call(Object),objectToString=objectProto.toString,oldDash=root._,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Buffer=moduleExports?context.Buffer:undefined,Symbol=context.Symbol,Uint8Array=context.Uint8Array,getPrototype=overArg(Object.getPrototypeOf,Object),iteratorSymbol=Symbol?Symbol.iterator:undefined,objectCreate=Object.create,propertyIsEnumerable=objectProto.propertyIsEnumerable,splice=arrayProto.splice,spreadableSymbol=Symbol?Symbol.isConcatSpreadable:undefined,ctxClearTimeout=context.clearTimeout!==root.clearTimeout&&context.clearTimeout,ctxNow=Date&&Date.now!==root.Date.now&&Date.now,ctxSetTimeout=context.setTimeout!==root.setTimeout&&context.setTimeout,nativeCeil=Math.ceil,nativeFloor=Math.floor,nativeGetSymbols=Object.getOwnPropertySymbols,nativeIsBuffer=Buffer?Buffer.isBuffer:undefined,nativeIsFinite=context.isFinite,nativeJoin=arrayProto.join,nativeKeys=overArg(Object.keys,Object),nativeMax=Math.max,nativeMin=Math.min,nativeParseInt=context.parseInt,nativeRandom=Math.random,nativeReverse=arrayProto.reverse,DataView=getNative(context,"DataView"),Map=getNative(context,"Map"),Promise=getNative(context,"Promise"),Set=getNative(context,"Set"),WeakMap=getNative(context,"WeakMap"),nativeCreate=getNative(Object,"create"),defineProperty=function(){var func=getNative(Object,"defineProperty"),name=getNative.name;return name&&name.length>2?func:undefined}(),metaMap=WeakMap&&new WeakMap,nonEnumShadows=!propertyIsEnumerable.call({valueOf:1},"valueOf"),realNames={},dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap),symbolProto=Symbol?Symbol.prototype:undefined,symbolValueOf=symbolProto?symbolProto.valueOf:undefined,symbolToString=symbolProto?symbolProto.toString:undefined;lodash.templateSettings={escape:reEscape,evaluate:reEvaluate,interpolate:reInterpolate,variable:"",imports:{_:lodash}},lodash.prototype=baseLodash.prototype,lodash.prototype.constructor=lodash,LodashWrapper.prototype=baseCreate(baseLodash.prototype),LodashWrapper.prototype.constructor=LodashWrapper,LazyWrapper.prototype=baseCreate(baseLodash.prototype),LazyWrapper.prototype.constructor=LazyWrapper,Hash.prototype.clear=hashClear,Hash.prototype.delete=hashDelete,Hash.prototype.get=hashGet,Hash.prototype.has=hashHas,Hash.prototype.set=hashSet,ListCache.prototype.clear=listCacheClear,ListCache.prototype.delete=listCacheDelete,ListCache.prototype.get=listCacheGet,ListCache.prototype.has=listCacheHas,ListCache.prototype.set=listCacheSet,MapCache.prototype.clear=mapCacheClear,MapCache.prototype.delete=mapCacheDelete,MapCache.prototype.get=mapCacheGet,MapCache.prototype.has=mapCacheHas,MapCache.prototype.set=mapCacheSet,SetCache.prototype.add=SetCache.prototype.push=setCacheAdd,SetCache.prototype.has=setCacheHas,Stack.prototype.clear=stackClear,Stack.prototype.delete=stackDelete,Stack.prototype.get=stackGet,Stack.prototype.has=stackHas,Stack.prototype.set=stackSet;var baseEach=createBaseEach(baseForOwn),baseEachRight=createBaseEach(baseForOwnRight,!0),baseFor=createBaseFor(),baseForRight=createBaseFor(!0),baseSetData=metaMap?function(func,data){return metaMap.set(func,data),func}:identity,clearTimeout=ctxClearTimeout||function(id){return root.clearTimeout(id)},createSet=Set&&1/setToArray(new Set([,-0]))[1]==INFINITY?function(values){return new Set(values)}:noop,getData=metaMap?function(func){return metaMap.get(func)}:noop,getSymbols=nativeGetSymbols?overArg(nativeGetSymbols,Object):stubArray,getSymbolsIn=nativeGetSymbols?function(object){for(var result=[];object;)arrayPush(result,getSymbols(object)),object=getPrototype(object);return result}:stubArray,getTag=baseGetTag;(DataView&&getTag(new DataView(new ArrayBuffer(1)))!=dataViewTag||Map&&getTag(new Map)!=mapTag||Promise&&getTag(Promise.resolve())!=promiseTag||Set&&getTag(new Set)!=setTag||WeakMap&&getTag(new WeakMap)!=weakMapTag)&&(getTag=function(value){var result=objectToString.call(value),Ctor=result==objectTag?value.constructor:undefined,ctorString=Ctor?toSource(Ctor):undefined;if(ctorString)switch(ctorString){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return promiseTag;case setCtorString:return setTag;case weakMapCtorString:return weakMapTag}return result});var isMaskable=coreJsData?isFunction:stubFalse,setData=function(){var count=0,lastCalled=0;return function(key,value){var stamp=now(),remaining=HOT_SPAN-(stamp-lastCalled);if(lastCalled=stamp,remaining>0){if(++count>=HOT_COUNT)return key}else count=0;return baseSetData(key,value)}}(),setTimeout=ctxSetTimeout||function(func,wait){return root.setTimeout(func,wait)},setWrapToString=defineProperty?function(wrapper,reference,bitmask){var source=reference+"";return defineProperty(wrapper,"toString",{configurable:!0,enumerable:!1,value:constant(insertWrapDetails(source,updateWrapDetails(getWrapDetails(source),bitmask)))})}:identity,stringToPath=memoize(function(string){string=toString(string);var result=[];return reLeadingDot.test(string)&&result.push(""),string.replace(rePropName,function(match,number,quote,string){result.push(quote?string.replace(reEscapeChar,"$1"):number||match)}),result}),difference=baseRest(function(array,values){return isArrayLikeObject(array)?baseDifference(array,baseFlatten(values,1,isArrayLikeObject,!0)):[]}),differenceBy=baseRest(function(array,values){var iteratee=last(values);return isArrayLikeObject(iteratee)&&(iteratee=undefined),isArrayLikeObject(array)?baseDifference(array,baseFlatten(values,1,isArrayLikeObject,!0),getIteratee(iteratee,2)):[]}),differenceWith=baseRest(function(array,values){var comparator=last(values);return isArrayLikeObject(comparator)&&(comparator=undefined),isArrayLikeObject(array)?baseDifference(array,baseFlatten(values,1,isArrayLikeObject,!0),undefined,comparator):[]}),intersection=baseRest(function(arrays){var mapped=arrayMap(arrays,castArrayLikeObject);return mapped.length&&mapped[0]===arrays[0]?baseIntersection(mapped):[]}),intersectionBy=baseRest(function(arrays){var iteratee=last(arrays),mapped=arrayMap(arrays,castArrayLikeObject);return iteratee===last(mapped)?iteratee=undefined:mapped.pop(),mapped.length&&mapped[0]===arrays[0]?baseIntersection(mapped,getIteratee(iteratee,2)):[]}),intersectionWith=baseRest(function(arrays){var comparator=last(arrays),mapped=arrayMap(arrays,castArrayLikeObject);return comparator===last(mapped)?comparator=undefined:mapped.pop(),mapped.length&&mapped[0]===arrays[0]?baseIntersection(mapped,undefined,comparator):[]}),pull=baseRest(pullAll),pullAt=baseRest(function(array,indexes){indexes=baseFlatten(indexes,1);var length=array?array.length:0,result=baseAt(array,indexes);return basePullAt(array,arrayMap(indexes,function(index){return isIndex(index,length)?+index:index}).sort(compareAscending)),result}),union=baseRest(function(arrays){return baseUniq(baseFlatten(arrays,1,isArrayLikeObject,!0))}),unionBy=baseRest(function(arrays){var iteratee=last(arrays);return isArrayLikeObject(iteratee)&&(iteratee=undefined),baseUniq(baseFlatten(arrays,1,isArrayLikeObject,!0),getIteratee(iteratee,2))}),unionWith=baseRest(function(arrays){var comparator=last(arrays);return isArrayLikeObject(comparator)&&(comparator=undefined),baseUniq(baseFlatten(arrays,1,isArrayLikeObject,!0),undefined,comparator)}),without=baseRest(function(array,values){return isArrayLikeObject(array)?baseDifference(array,values):[]}),xor=baseRest(function(arrays){return baseXor(arrayFilter(arrays,isArrayLikeObject))}),xorBy=baseRest(function(arrays){var iteratee=last(arrays);return isArrayLikeObject(iteratee)&&(iteratee=undefined),baseXor(arrayFilter(arrays,isArrayLikeObject),getIteratee(iteratee,2))}),xorWith=baseRest(function(arrays){var comparator=last(arrays);return isArrayLikeObject(comparator)&&(comparator=undefined),baseXor(arrayFilter(arrays,isArrayLikeObject),undefined,comparator)}),zip=baseRest(unzip),zipWith=baseRest(function(arrays){var length=arrays.length,iteratee=length>1?arrays[length-1]:undefined;return iteratee="function"==typeof iteratee?(arrays.pop(),iteratee):undefined,unzipWith(arrays,iteratee)}),wrapperAt=baseRest(function(paths){paths=baseFlatten(paths,1);var length=paths.length,start=length?paths[0]:0,value=this.__wrapped__,interceptor=function(object){return baseAt(object,paths)};return!(length>1||this.__actions__.length)&&value instanceof LazyWrapper&&isIndex(start)?(value=value.slice(start,+start+(length?1:0)),value.__actions__.push({func:thru,args:[interceptor],thisArg:undefined}),new LodashWrapper(value,this.__chain__).thru(function(array){return length&&!array.length&&array.push(undefined),array})):this.thru(interceptor)}),countBy=createAggregator(function(result,value,key){hasOwnProperty.call(result,key)?++result[key]:result[key]=1}),find=createFind(findIndex),findLast=createFind(findLastIndex),groupBy=createAggregator(function(result,value,key){hasOwnProperty.call(result,key)?result[key].push(value):result[key]=[value]}),invokeMap=baseRest(function(collection,path,args){var index=-1,isFunc="function"==typeof path,isProp=isKey(path),result=isArrayLike(collection)?Array(collection.length):[];return baseEach(collection,function(value){var func=isFunc?path:isProp&&null!=value?value[path]:undefined;result[++index]=func?apply(func,value,args):baseInvoke(value,path,args)}),result}),keyBy=createAggregator(function(result,value,key){result[key]=value}),partition=createAggregator(function(result,value,key){result[key?0:1].push(value)},function(){return[[],[]]}),sortBy=baseRest(function(collection,iteratees){if(null==collection)return[];var length=iteratees.length;return length>1&&isIterateeCall(collection,iteratees[0],iteratees[1])?iteratees=[]:length>2&&isIterateeCall(iteratees[0],iteratees[1],iteratees[2])&&(iteratees=[iteratees[0]]),baseOrderBy(collection,baseFlatten(iteratees,1),[])}),now=ctxNow||function(){return root.Date.now()},bind=baseRest(function(func,thisArg,partials){var bitmask=BIND_FLAG;if(partials.length){var holders=replaceHolders(partials,getHolder(bind));bitmask|=PARTIAL_FLAG}return createWrap(func,bitmask,thisArg,partials,holders)}),bindKey=baseRest(function(object,key,partials){var bitmask=BIND_FLAG|BIND_KEY_FLAG;if(partials.length){var holders=replaceHolders(partials,getHolder(bindKey));bitmask|=PARTIAL_FLAG}return createWrap(key,bitmask,object,partials,holders)}),defer=baseRest(function(func,args){return baseDelay(func,1,args)}),delay=baseRest(function(func,wait,args){return baseDelay(func,toNumber(wait)||0,args)});memoize.Cache=MapCache;var overArgs=baseRest(function(func,transforms){transforms=1==transforms.length&&isArray(transforms[0])?arrayMap(transforms[0],baseUnary(getIteratee())):arrayMap(baseFlatten(transforms,1),baseUnary(getIteratee()));var funcsLength=transforms.length;return baseRest(function(args){for(var index=-1,length=nativeMin(args.length,funcsLength);++index<length;)args[index]=transforms[index].call(this,args[index]);return apply(func,this,args)})}),partial=baseRest(function(func,partials){var holders=replaceHolders(partials,getHolder(partial));return createWrap(func,PARTIAL_FLAG,undefined,partials,holders)}),partialRight=baseRest(function(func,partials){var holders=replaceHolders(partials,getHolder(partialRight));return createWrap(func,PARTIAL_RIGHT_FLAG,undefined,partials,holders)}),rearg=baseRest(function(func,indexes){return createWrap(func,REARG_FLAG,undefined,undefined,undefined,baseFlatten(indexes,1))}),gt=createRelationalOperation(baseGt),gte=createRelationalOperation(function(value,other){return value>=other}),isArray=Array.isArray,isArrayBuffer=nodeIsArrayBuffer?baseUnary(nodeIsArrayBuffer):baseIsArrayBuffer,isBuffer=nativeIsBuffer||stubFalse,isDate=nodeIsDate?baseUnary(nodeIsDate):baseIsDate,isMap=nodeIsMap?baseUnary(nodeIsMap):baseIsMap,isRegExp=nodeIsRegExp?baseUnary(nodeIsRegExp):baseIsRegExp,isSet=nodeIsSet?baseUnary(nodeIsSet):baseIsSet,isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray,lt=createRelationalOperation(baseLt),lte=createRelationalOperation(function(value,other){return value<=other}),assign=createAssigner(function(object,source){if(nonEnumShadows||isPrototype(source)||isArrayLike(source))return void copyObject(source,keys(source),object);for(var key in source)hasOwnProperty.call(source,key)&&assignValue(object,key,source[key])}),assignIn=createAssigner(function(object,source){copyObject(source,keysIn(source),object)}),assignInWith=createAssigner(function(object,source,srcIndex,customizer){copyObject(source,keysIn(source),object,customizer)}),assignWith=createAssigner(function(object,source,srcIndex,customizer){copyObject(source,keys(source),object,customizer)}),at=baseRest(function(object,paths){return baseAt(object,baseFlatten(paths,1))}),defaults=baseRest(function(args){return args.push(undefined,assignInDefaults),apply(assignInWith,undefined,args)}),defaultsDeep=baseRest(function(args){return args.push(undefined,mergeDefaults),apply(mergeWith,undefined,args)}),invert=createInverter(function(result,value,key){result[value]=key},constant(identity)),invertBy=createInverter(function(result,value,key){hasOwnProperty.call(result,value)?result[value].push(key):result[value]=[key]},getIteratee),invoke=baseRest(baseInvoke),merge=createAssigner(function(object,source,srcIndex){baseMerge(object,source,srcIndex)}),mergeWith=createAssigner(function(object,source,srcIndex,customizer){baseMerge(object,source,srcIndex,customizer)}),omit=baseRest(function(object,props){return null==object?{}:(props=arrayMap(baseFlatten(props,1),toKey),basePick(object,baseDifference(getAllKeysIn(object),props)))}),pick=baseRest(function(object,props){return null==object?{}:basePick(object,arrayMap(baseFlatten(props,1),toKey))}),toPairs=createToPairs(keys),toPairsIn=createToPairs(keysIn),camelCase=createCompounder(function(result,word,index){return word=word.toLowerCase(),result+(index?capitalize(word):word)}),kebabCase=createCompounder(function(result,word,index){return result+(index?"-":"")+word.toLowerCase()}),lowerCase=createCompounder(function(result,word,index){return result+(index?" ":"")+word.toLowerCase()}),lowerFirst=createCaseFirst("toLowerCase"),snakeCase=createCompounder(function(result,word,index){return result+(index?"_":"")+word.toLowerCase()}),startCase=createCompounder(function(result,word,index){return result+(index?" ":"")+upperFirst(word)}),upperCase=createCompounder(function(result,word,index){return result+(index?" ":"")+word.toUpperCase()}),upperFirst=createCaseFirst("toUpperCase"),attempt=baseRest(function(func,args){try{return apply(func,undefined,args)}catch(e){return isError(e)?e:new Error(e)}}),bindAll=baseRest(function(object,methodNames){return arrayEach(baseFlatten(methodNames,1),function(key){key=toKey(key),object[key]=bind(object[key],object)}),object}),flow=createFlow(),flowRight=createFlow(!0),method=baseRest(function(path,args){return function(object){return baseInvoke(object,path,args)}}),methodOf=baseRest(function(object,args){return function(path){return baseInvoke(object,path,args)}}),over=createOver(arrayMap),overEvery=createOver(arrayEvery),overSome=createOver(arraySome),range=createRange(),rangeRight=createRange(!0),add=createMathOperation(function(augend,addend){return augend+addend},0),ceil=createRound("ceil"),divide=createMathOperation(function(dividend,divisor){return dividend/divisor},1),floor=createRound("floor"),multiply=createMathOperation(function(multiplier,multiplicand){return multiplier*multiplicand},1),round=createRound("round"),subtract=createMathOperation(function(minuend,subtrahend){return minuend-subtrahend},0);return lodash.after=after,lodash.ary=ary,lodash.assign=assign,lodash.assignIn=assignIn,lodash.assignInWith=assignInWith,lodash.assignWith=assignWith,lodash.at=at,lodash.before=before,lodash.bind=bind,lodash.bindAll=bindAll,lodash.bindKey=bindKey,lodash.castArray=castArray,lodash.chain=chain,lodash.chunk=chunk,lodash.compact=compact,lodash.concat=concat,lodash.cond=cond,lodash.conforms=conforms,lodash.constant=constant,lodash.countBy=countBy,lodash.create=create,lodash.curry=curry,lodash.curryRight=curryRight,lodash.debounce=debounce,lodash.defaults=defaults,lodash.defaultsDeep=defaultsDeep,lodash.defer=defer,lodash.delay=delay,lodash.difference=difference,lodash.differenceBy=differenceBy,lodash.differenceWith=differenceWith,lodash.drop=drop,lodash.dropRight=dropRight,lodash.dropRightWhile=dropRightWhile,lodash.dropWhile=dropWhile,lodash.fill=fill,lodash.filter=filter,lodash.flatMap=flatMap,lodash.flatMapDeep=flatMapDeep,lodash.flatMapDepth=flatMapDepth,lodash.flatten=flatten,lodash.flattenDeep=flattenDeep,lodash.flattenDepth=flattenDepth,lodash.flip=flip,lodash.flow=flow,lodash.flowRight=flowRight,lodash.fromPairs=fromPairs,lodash.functions=functions,lodash.functionsIn=functionsIn,lodash.groupBy=groupBy,lodash.initial=initial,lodash.intersection=intersection,lodash.intersectionBy=intersectionBy,lodash.intersectionWith=intersectionWith,lodash.invert=invert,lodash.invertBy=invertBy,lodash.invokeMap=invokeMap,lodash.iteratee=iteratee,lodash.keyBy=keyBy,lodash.keys=keys,lodash.keysIn=keysIn,lodash.map=map,lodash.mapKeys=mapKeys,lodash.mapValues=mapValues,lodash.matches=matches,lodash.matchesProperty=matchesProperty,lodash.memoize=memoize,lodash.merge=merge,lodash.mergeWith=mergeWith,lodash.method=method,lodash.methodOf=methodOf,lodash.mixin=mixin,lodash.negate=negate,lodash.nthArg=nthArg,lodash.omit=omit,lodash.omitBy=omitBy,lodash.once=once,lodash.orderBy=orderBy,lodash.over=over,lodash.overArgs=overArgs,lodash.overEvery=overEvery,lodash.overSome=overSome,lodash.partial=partial,lodash.partialRight=partialRight,lodash.partition=partition,lodash.pick=pick,lodash.pickBy=pickBy,lodash.property=property,lodash.propertyOf=propertyOf,lodash.pull=pull,lodash.pullAll=pullAll,lodash.pullAllBy=pullAllBy,lodash.pullAllWith=pullAllWith,lodash.pullAt=pullAt,lodash.range=range,lodash.rangeRight=rangeRight,lodash.rearg=rearg,lodash.reject=reject,lodash.remove=remove,lodash.rest=rest,lodash.reverse=reverse,lodash.sampleSize=sampleSize,lodash.set=set,lodash.setWith=setWith,lodash.shuffle=shuffle,lodash.slice=slice,lodash.sortBy=sortBy,lodash.sortedUniq=sortedUniq,lodash.sortedUniqBy=sortedUniqBy,lodash.split=split,lodash.spread=spread,lodash.tail=tail,lodash.take=take,lodash.takeRight=takeRight,lodash.takeRightWhile=takeRightWhile,lodash.takeWhile=takeWhile,lodash.tap=tap,lodash.throttle=throttle,lodash.thru=thru,lodash.toArray=toArray,lodash.toPairs=toPairs,lodash.toPairsIn=toPairsIn,lodash.toPath=toPath,lodash.toPlainObject=toPlainObject,lodash.transform=transform,lodash.unary=unary,lodash.union=union,lodash.unionBy=unionBy,lodash.unionWith=unionWith,lodash.uniq=uniq,lodash.uniqBy=uniqBy,lodash.uniqWith=uniqWith,lodash.unset=unset,lodash.unzip=unzip,lodash.unzipWith=unzipWith,lodash.update=update,lodash.updateWith=updateWith,lodash.values=values,lodash.valuesIn=valuesIn,lodash.without=without,lodash.words=words,lodash.wrap=wrap,lodash.xor=xor,lodash.xorBy=xorBy,lodash.xorWith=xorWith,lodash.zip=zip,lodash.zipObject=zipObject,lodash.zipObjectDeep=zipObjectDeep,lodash.zipWith=zipWith,lodash.entries=toPairs,lodash.entriesIn=toPairsIn,lodash.extend=assignIn,lodash.extendWith=assignInWith,mixin(lodash,lodash),lodash.add=add,lodash.attempt=attempt,lodash.camelCase=camelCase,lodash.capitalize=capitalize,lodash.ceil=ceil,lodash.clamp=clamp,lodash.clone=clone,lodash.cloneDeep=cloneDeep,lodash.cloneDeepWith=cloneDeepWith,lodash.cloneWith=cloneWith,lodash.conformsTo=conformsTo,lodash.deburr=deburr,lodash.defaultTo=defaultTo,lodash.divide=divide,lodash.endsWith=endsWith,lodash.eq=eq,lodash.escape=escape,lodash.escapeRegExp=escapeRegExp,lodash.every=every,lodash.find=find,lodash.findIndex=findIndex,lodash.findKey=findKey,lodash.findLast=findLast,lodash.findLastIndex=findLastIndex,lodash.findLastKey=findLastKey,lodash.floor=floor,lodash.forEach=forEach,lodash.forEachRight=forEachRight,lodash.forIn=forIn,lodash.forInRight=forInRight,lodash.forOwn=forOwn,lodash.forOwnRight=forOwnRight,lodash.get=get,lodash.gt=gt,lodash.gte=gte,lodash.has=has,lodash.hasIn=hasIn,lodash.head=head,lodash.identity=identity,lodash.includes=includes,lodash.indexOf=indexOf,lodash.inRange=inRange,lodash.invoke=invoke,lodash.isArguments=isArguments,lodash.isArray=isArray,lodash.isArrayBuffer=isArrayBuffer,lodash.isArrayLike=isArrayLike,lodash.isArrayLikeObject=isArrayLikeObject,lodash.isBoolean=isBoolean,lodash.isBuffer=isBuffer,lodash.isDate=isDate,lodash.isElement=isElement,lodash.isEmpty=isEmpty,lodash.isEqual=isEqual,lodash.isEqualWith=isEqualWith,lodash.isError=isError,lodash.isFinite=isFinite,lodash.isFunction=isFunction,lodash.isInteger=isInteger,lodash.isLength=isLength,lodash.isMap=isMap,lodash.isMatch=isMatch,lodash.isMatchWith=isMatchWith,lodash.isNaN=isNaN,lodash.isNative=isNative,lodash.isNil=isNil,lodash.isNull=isNull,lodash.isNumber=isNumber,lodash.isObject=isObject,lodash.isObjectLike=isObjectLike,lodash.isPlainObject=isPlainObject,lodash.isRegExp=isRegExp,lodash.isSafeInteger=isSafeInteger,lodash.isSet=isSet,lodash.isString=isString,lodash.isSymbol=isSymbol,lodash.isTypedArray=isTypedArray,lodash.isUndefined=isUndefined,lodash.isWeakMap=isWeakMap,lodash.isWeakSet=isWeakSet,lodash.join=join,lodash.kebabCase=kebabCase,lodash.last=last,lodash.lastIndexOf=lastIndexOf,lodash.lowerCase=lowerCase,lodash.lowerFirst=lowerFirst,lodash.lt=lt,lodash.lte=lte,lodash.max=max,lodash.maxBy=maxBy,lodash.mean=mean,lodash.meanBy=meanBy,lodash.min=min,lodash.minBy=minBy,lodash.stubArray=stubArray,lodash.stubFalse=stubFalse,lodash.stubObject=stubObject,lodash.stubString=stubString,lodash.stubTrue=stubTrue,lodash.multiply=multiply,lodash.nth=nth,lodash.noConflict=noConflict,lodash.noop=noop,lodash.now=now,lodash.pad=pad,lodash.padEnd=padEnd,lodash.padStart=padStart,lodash.parseInt=parseInt,lodash.random=random,lodash.reduce=reduce,lodash.reduceRight=reduceRight,lodash.repeat=repeat,lodash.replace=replace,lodash.result=result,lodash.round=round,lodash.runInContext=runInContext,lodash.sample=sample,lodash.size=size,lodash.snakeCase=snakeCase,lodash.some=some,lodash.sortedIndex=sortedIndex,lodash.sortedIndexBy=sortedIndexBy,lodash.sortedIndexOf=sortedIndexOf,lodash.sortedLastIndex=sortedLastIndex,lodash.sortedLastIndexBy=sortedLastIndexBy,lodash.sortedLastIndexOf=sortedLastIndexOf,lodash.startCase=startCase,lodash.startsWith=startsWith,lodash.subtract=subtract,lodash.sum=sum,lodash.sumBy=sumBy,lodash.template=template,lodash.times=times,lodash.toFinite=toFinite,lodash.toInteger=toInteger,lodash.toLength=toLength,lodash.toLower=toLower,lodash.toNumber=toNumber,lodash.toSafeInteger=toSafeInteger,lodash.toString=toString,lodash.toUpper=toUpper,lodash.trim=trim,lodash.trimEnd=trimEnd,lodash.trimStart=trimStart,lodash.truncate=truncate,lodash.unescape=unescape,lodash.uniqueId=uniqueId,lodash.upperCase=upperCase,lodash.upperFirst=upperFirst,lodash.each=forEach,lodash.eachRight=forEachRight,lodash.first=head,mixin(lodash,function(){var source={};return baseForOwn(lodash,function(func,methodName){hasOwnProperty.call(lodash.prototype,methodName)||(source[methodName]=func)}),source}(),{chain:!1}),lodash.VERSION=VERSION,arrayEach(["bind","bindKey","curry","curryRight","partial","partialRight"],function(methodName){lodash[methodName].placeholder=lodash}),arrayEach(["drop","take"],function(methodName,index){LazyWrapper.prototype[methodName]=function(n){var filtered=this.__filtered__;if(filtered&&!index)return new LazyWrapper(this);n=n===undefined?1:nativeMax(toInteger(n),0);var result=this.clone();return filtered?result.__takeCount__=nativeMin(n,result.__takeCount__):result.__views__.push({size:nativeMin(n,MAX_ARRAY_LENGTH),type:methodName+(result.__dir__<0?"Right":"")}),result},LazyWrapper.prototype[methodName+"Right"]=function(n){return this.reverse()[methodName](n).reverse()}}),arrayEach(["filter","map","takeWhile"],function(methodName,index){var type=index+1,isFilter=type==LAZY_FILTER_FLAG||type==LAZY_WHILE_FLAG;LazyWrapper.prototype[methodName]=function(iteratee){var result=this.clone();return result.__iteratees__.push({iteratee:getIteratee(iteratee,3),type:type}),result.__filtered__=result.__filtered__||isFilter,result}}),arrayEach(["head","last"],function(methodName,index){var takeName="take"+(index?"Right":"");LazyWrapper.prototype[methodName]=function(){return this[takeName](1).value()[0]}}),arrayEach(["initial","tail"],function(methodName,index){var dropName="drop"+(index?"":"Right");LazyWrapper.prototype[methodName]=function(){return this.__filtered__?new LazyWrapper(this):this[dropName](1)}}),LazyWrapper.prototype.compact=function(){return this.filter(identity)},LazyWrapper.prototype.find=function(predicate){return this.filter(predicate).head()},LazyWrapper.prototype.findLast=function(predicate){return this.reverse().find(predicate)},LazyWrapper.prototype.invokeMap=baseRest(function(path,args){return"function"==typeof path?new LazyWrapper(this):this.map(function(value){return baseInvoke(value,path,args)})}),LazyWrapper.prototype.reject=function(predicate){return this.filter(negate(getIteratee(predicate)))},LazyWrapper.prototype.slice=function(start,end){start=toInteger(start);var result=this;return result.__filtered__&&(start>0||end<0)?new LazyWrapper(result):(start<0?result=result.takeRight(-start):start&&(result=result.drop(start)),end!==undefined&&(end=toInteger(end),result=end<0?result.dropRight(-end):result.take(end-start)),result)},LazyWrapper.prototype.takeRightWhile=function(predicate){return this.reverse().takeWhile(predicate).reverse()},LazyWrapper.prototype.toArray=function(){return this.take(MAX_ARRAY_LENGTH)},baseForOwn(LazyWrapper.prototype,function(func,methodName){var checkIteratee=/^(?:filter|find|map|reject)|While$/.test(methodName),isTaker=/^(?:head|last)$/.test(methodName),lodashFunc=lodash[isTaker?"take"+("last"==methodName?"Right":""):methodName],retUnwrapped=isTaker||/^find/.test(methodName);lodashFunc&&(lodash.prototype[methodName]=function(){var value=this.__wrapped__,args=isTaker?[1]:arguments,isLazy=value instanceof LazyWrapper,iteratee=args[0],useLazy=isLazy||isArray(value),interceptor=function(value){var result=lodashFunc.apply(lodash,arrayPush([value],args));return isTaker&&chainAll?result[0]:result};useLazy&&checkIteratee&&"function"==typeof iteratee&&1!=iteratee.length&&(isLazy=useLazy=!1);var chainAll=this.__chain__,isHybrid=!!this.__actions__.length,isUnwrapped=retUnwrapped&&!chainAll,onlyLazy=isLazy&&!isHybrid;if(!retUnwrapped&&useLazy){value=onlyLazy?value:new LazyWrapper(this);var result=func.apply(value,args);return result.__actions__.push({func:thru,args:[interceptor],thisArg:undefined}),new LodashWrapper(result,chainAll)}return isUnwrapped&&onlyLazy?func.apply(this,args):(result=this.thru(interceptor),isUnwrapped?isTaker?result.value()[0]:result.value():result)})}),arrayEach(["pop","push","shift","sort","splice","unshift"],function(methodName){var func=arrayProto[methodName],chainName=/^(?:push|sort|unshift)$/.test(methodName)?"tap":"thru",retUnwrapped=/^(?:pop|shift)$/.test(methodName);lodash.prototype[methodName]=function(){var args=arguments;if(retUnwrapped&&!this.__chain__){var value=this.value();return func.apply(isArray(value)?value:[],args)}return this[chainName](function(value){return func.apply(isArray(value)?value:[],args)})}}),baseForOwn(LazyWrapper.prototype,function(func,methodName){var lodashFunc=lodash[methodName];if(lodashFunc){var key=lodashFunc.name+"",names=realNames[key]||(realNames[key]=[]);names.push({name:methodName,func:lodashFunc})}}),realNames[createHybrid(undefined,BIND_KEY_FLAG).name]=[{name:"wrapper",func:undefined}],LazyWrapper.prototype.clone=lazyClone,LazyWrapper.prototype.reverse=lazyReverse,LazyWrapper.prototype.value=lazyValue,lodash.prototype.at=wrapperAt,lodash.prototype.chain=wrapperChain,lodash.prototype.commit=wrapperCommit,lodash.prototype.next=wrapperNext,lodash.prototype.plant=wrapperPlant,lodash.prototype.reverse=wrapperReverse,lodash.prototype.toJSON=lodash.prototype.valueOf=lodash.prototype.value=wrapperValue,lodash.prototype.first=lodash.prototype.head,iteratorSymbol&&(lodash.prototype[iteratorSymbol]=wrapperToIterator),lodash}var undefined,VERSION="4.15.0",LARGE_ARRAY_SIZE=200,FUNC_ERROR_TEXT="Expected a function",HASH_UNDEFINED="__lodash_hash_undefined__",PLACEHOLDER="__lodash_placeholder__",BIND_FLAG=1,BIND_KEY_FLAG=2,CURRY_BOUND_FLAG=4,CURRY_FLAG=8,CURRY_RIGHT_FLAG=16,PARTIAL_FLAG=32,PARTIAL_RIGHT_FLAG=64,ARY_FLAG=128,REARG_FLAG=256,FLIP_FLAG=512,UNORDERED_COMPARE_FLAG=1,PARTIAL_COMPARE_FLAG=2,DEFAULT_TRUNC_LENGTH=30,DEFAULT_TRUNC_OMISSION="...",HOT_COUNT=150,HOT_SPAN=16,LAZY_FILTER_FLAG=1,LAZY_MAP_FLAG=2,LAZY_WHILE_FLAG=3,INFINITY=1/0,MAX_SAFE_INTEGER=9007199254740991,MAX_INTEGER=1.7976931348623157e308,NAN=NaN,MAX_ARRAY_LENGTH=4294967295,MAX_ARRAY_INDEX=MAX_ARRAY_LENGTH-1,HALF_MAX_ARRAY_LENGTH=MAX_ARRAY_LENGTH>>>1,wrapFlags=[["ary",ARY_FLAG],["bind",BIND_FLAG],["bindKey",BIND_KEY_FLAG],["curry",CURRY_FLAG],["curryRight",CURRY_RIGHT_FLAG],["flip",FLIP_FLAG],["partial",PARTIAL_FLAG],["partialRight",PARTIAL_RIGHT_FLAG],["rearg",REARG_FLAG]],argsTag="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",promiseTag="[object Promise]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",weakMapTag="[object WeakMap]",weakSetTag="[object WeakSet]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",reEmptyStringLeading=/\b__p \+= '';/g,reEmptyStringMiddle=/\b(__p \+=) '' \+/g,reEmptyStringTrailing=/(__e\(.*?\)|\b__t\)) \+\n'';/g,reEscapedHtml=/&(?:amp|lt|gt|quot|#39|#96);/g,reUnescapedHtml=/[&<>"'`]/g,reHasEscapedHtml=RegExp(reEscapedHtml.source),reHasUnescapedHtml=RegExp(reUnescapedHtml.source),reEscape=/<%-([\s\S]+?)%>/g,reEvaluate=/<%([\s\S]+?)%>/g,reInterpolate=/<%=([\s\S]+?)%>/g,reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/,reLeadingDot=/^\./,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reHasRegExpChar=RegExp(reRegExpChar.source),reTrim=/^\s+|\s+$/g,reTrimStart=/^\s+/,reTrimEnd=/\s+$/,reWrapComment=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,reWrapDetails=/\{\n\/\* \[wrapped with (.+)\] \*/,reSplitDetails=/,? & /,reAsciiWord=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,reEscapeChar=/\\(\\)?/g,reEsTemplate=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,reFlags=/\w*$/,reHasHexPrefix=/^0x/i,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsHostCtor=/^\[object .+?Constructor\]$/,reIsOctal=/^0o[0-7]+$/i,reIsUint=/^(?:0|[1-9]\d*)$/,reLatin=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,reNoMatch=/($^)/,reUnescapedString=/['\n\r\u2028\u2029\\]/g,rsAstralRange="\\ud800-\\udfff",rsComboMarksRange="\\u0300-\\u036f\\ufe20-\\ufe23",rsComboSymbolsRange="\\u20d0-\\u20f0",rsDingbatRange="\\u2700-\\u27bf",rsLowerRange="a-z\\xdf-\\xf6\\xf8-\\xff",rsMathOpRange="\\xac\\xb1\\xd7\\xf7",rsNonCharRange="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",rsPunctuationRange="\\u2000-\\u206f",rsSpaceRange=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",rsUpperRange="A-Z\\xc0-\\xd6\\xd8-\\xde",rsVarRange="\\ufe0e\\ufe0f",rsBreakRange=rsMathOpRange+rsNonCharRange+rsPunctuationRange+rsSpaceRange,rsApos="['’]",rsAstral="["+rsAstralRange+"]",rsBreak="["+rsBreakRange+"]",rsCombo="["+rsComboMarksRange+rsComboSymbolsRange+"]",rsDigits="\\d+",rsDingbat="["+rsDingbatRange+"]",rsLower="["+rsLowerRange+"]",rsMisc="[^"+rsAstralRange+rsBreakRange+rsDigits+rsDingbatRange+rsLowerRange+rsUpperRange+"]",rsFitz="\\ud83c[\\udffb-\\udfff]",rsModifier="(?:"+rsCombo+"|"+rsFitz+")",rsNonAstral="[^"+rsAstralRange+"]",rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]",rsUpper="["+rsUpperRange+"]",rsZWJ="\\u200d",rsLowerMisc="(?:"+rsLower+"|"+rsMisc+")",rsUpperMisc="(?:"+rsUpper+"|"+rsMisc+")",rsOptLowerContr="(?:"+rsApos+"(?:d|ll|m|re|s|t|ve))?",rsOptUpperContr="(?:"+rsApos+"(?:D|LL|M|RE|S|T|VE))?",reOptMod=rsModifier+"?",rsOptVar="["+rsVarRange+"]?",rsOptJoin="(?:"+rsZWJ+"(?:"+[rsNonAstral,rsRegional,rsSurrPair].join("|")+")"+rsOptVar+reOptMod+")*",rsSeq=rsOptVar+reOptMod+rsOptJoin,rsEmoji="(?:"+[rsDingbat,rsRegional,rsSurrPair].join("|")+")"+rsSeq,rsSymbol="(?:"+[rsNonAstral+rsCombo+"?",rsCombo,rsRegional,rsSurrPair,rsAstral].join("|")+")",reApos=RegExp(rsApos,"g"),reComboMark=RegExp(rsCombo,"g"),reUnicode=RegExp(rsFitz+"(?="+rsFitz+")|"+rsSymbol+rsSeq,"g"),reUnicodeWord=RegExp([rsUpper+"?"+rsLower+"+"+rsOptLowerContr+"(?="+[rsBreak,rsUpper,"$"].join("|")+")",rsUpperMisc+"+"+rsOptUpperContr+"(?="+[rsBreak,rsUpper+rsLowerMisc,"$"].join("|")+")",rsUpper+"?"+rsLowerMisc+"+"+rsOptLowerContr,rsUpper+"+"+rsOptUpperContr,rsDigits,rsEmoji].join("|"),"g"),reHasUnicode=RegExp("["+rsZWJ+rsAstralRange+rsComboMarksRange+rsComboSymbolsRange+rsVarRange+"]"),reHasUnicodeWord=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,contextProps=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],templateCounter=-1,typedArrayTags={};
typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0,typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=!1;var cloneableTags={};cloneableTags[argsTag]=cloneableTags[arrayTag]=cloneableTags[arrayBufferTag]=cloneableTags[dataViewTag]=cloneableTags[boolTag]=cloneableTags[dateTag]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag]=cloneableTags[numberTag]=cloneableTags[objectTag]=cloneableTags[regexpTag]=cloneableTags[setTag]=cloneableTags[stringTag]=cloneableTags[symbolTag]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=!0,cloneableTags[errorTag]=cloneableTags[funcTag]=cloneableTags[weakMapTag]=!1;var deburredLetters={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"ss"},htmlEscapes={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},htmlUnescapes={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},stringEscapes={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},freeParseFloat=parseFloat,freeParseInt=parseInt,freeGlobal="object"==typeof global&&global&&global.Object===Object&&global,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),freeExports="object"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&"object"==typeof module&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,freeProcess=moduleExports&&freeGlobal.process,nodeUtil=function(){try{return freeProcess&&freeProcess.binding("util")}catch(e){}}(),nodeIsArrayBuffer=nodeUtil&&nodeUtil.isArrayBuffer,nodeIsDate=nodeUtil&&nodeUtil.isDate,nodeIsMap=nodeUtil&&nodeUtil.isMap,nodeIsRegExp=nodeUtil&&nodeUtil.isRegExp,nodeIsSet=nodeUtil&&nodeUtil.isSet,nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,asciiSize=baseProperty("length"),deburrLetter=basePropertyOf(deburredLetters),escapeHtmlChar=basePropertyOf(htmlEscapes),unescapeHtmlChar=basePropertyOf(htmlUnescapes),_=runInContext();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(root._=_,define(function(){return _})):freeModule?((freeModule.exports=_)._=_,freeExports._=_):root._=_}.call(this),function(root,factory){"function"==typeof define&&define.amd?define(["jquery"],factory):factory(root.jQuery)}(this,function($){var tempModule,callbacks=[],modules={};$.fn.extend({onready:function(cb){jsPlumb.ready(cb)},url:window.location,removeSelect:function(){$(this).each(function(){$(this).removeClass("selected")})},addSelect:function(){$(this).each(function(){$(this).addClass("selected")})},removeHidden:function(){$(this).each(function(){$(this).removeClass("hidden")})},addHidden:function(){$(this).each(function(){$(this).addClass("hidden")})},removeErrorInput:function(){$(this).each(function(){$(this).removeClass("error-input")})},addErrorInput:function(){$(this).each(function(){$(this).addClass("error-input")})},scrollToElement:function(){$(this).get(0).scrollIntoView()},registerCallback:function(identifier,fn){callbacks[identifier]=fn},actions:function(){function findModuleAndController(element,fnc){var controller=$(element).closest("[data-ml-controller]").data("ml-controller"),module=$(element).closest("[data-ml-module]").data("ml-module");return"undefined"==typeof modules[module]?(console.warn('MOONLIGHTUI - Module "'+module+'" is not defined'),!0):"undefined"==typeof modules[module].controllers[controller]?(console.warn('MOONLIGHTUI - Controller "'+controller+'" on module "'+module+'" is not defined'),!0):"undefined"==typeof modules[module].controllers[controller][fnc]&&(console.warn('MOONLIGHTUI - Controller "'+controller+'" on module "'+module+'" with function "'+fnc+'" is not defined'),!0)}this.each(function(){$(this).on("click",function(){var tabAction=$(this).data("ml-action"),controller=$(this).closest("[data-ml-controller]").data("ml-controller"),module=$(this).closest("[data-ml-module]").data("ml-module"),error=findModuleAndController(this,tabAction);if(error===!1)if(tabAction.indexOf(",")!==-1)for(var tabActions=tabAction.split(","),i=0;i<tabActions.length;i++)modules[module].controllers[controller][tabActions[i]](this);else modules[module].controllers[controller][tabAction](this)})})},module:function(name){return tempModule=name,"undefined"==typeof modules[name]&&(modules[name]={controllers:{},models:{},views:{}}),this},controller:function(name,controller){var ctrl=controller(),module=tempModule.slice(0);return ctrl.__module=module,modules[tempModule].controllers[name]=ctrl,this},view:function(name,view){var vw=view(),engine=this,module=tempModule.slice(0);return vw.__name=name,vw.__error="",vw.__module=module,vw.__template=!1,vw.__containerId=!1,vw.__container=!1,vw.__models=!1,vw.__initialized=!1,vw.__render=function(html){return html},vw.render=function(cb){modules[module].views[name].__template===!1&&console.warn('MOONLIGHTUI - The template is eighter not set with the variable "template" or "templateURL".'),modules[module].views[name].__container===!1&&console.warn('MOONLIGHTUI - The view does not have a property "container". Inside the variable "container" needs to be a CSS selector for an HTML element.'),"undefined"==typeof cb?(modules[module].views[name].__container.html(modules[module].views[name].__render(modules[module].views[name].__template)),modules[module].views[name].__initialized===!0?engine.reenergize(modules[module].views[name].container):engine.energize(modules[module].views[name].container)):modules[module].views[name].__loadTemplate(function(){modules[module].views[name].__container.html(modules[module].views[name].__render(modules[module].views[name].__template)),modules[module].views[name].__initialized===!0?engine.reenergize(modules[module].views[name].container):engine.energize(modules[module].views[name].container),cb(modules[module].views[name].__template,modules[module].views[name].__container)})},vw.__loadTemplate=function(cb){if("undefined"!=typeof modules[module].views[name].templateURL&&$.ajax({url:modules[module].views[name].templateURL,type:"GET"}).done(function(data){return modules[module].views[name].__template=data,"undefined"==typeof cb?data:void cb(data)}).fail(function(){return console.warn("MOONLIGHTUI - We cant load template with url: "+this.templateURL),"undefined"==typeof cb?"":void cb("")}),"undefined"!=typeof this.template){if(modules[module].views[name].__template=this.template,"undefined"==typeof cb)return this.template;cb(this.template)}return this.__template},vw.__loadModels=function(cb){"undefined"!=typeof this.models&&(modules[module].views[name].__models=this.models),cb()},vw.__init=function(){"undefined"!=typeof modules[module].views[name].container&&(modules[module].views[name].__container=$(modules[module].views[name].container));var self=this;this.__loadTemplate(function(){self.__loadModels(function(){self.render(),self.__initialized=!0})})},modules[module].views[name]=vw,vw.__init(),this},model:function(name,model){var mdl=model(),module=tempModule.slice(0);return mdl.__name=name,mdl.__error="",mdl.__module=module,mdl.removeError=function(){modules[module].models[name].__error="",$('[data-ml-module="'+module+'"]').find('[data-ml-error="'+name+'.error"]').each(function(){$(this).is("input")||$(this).is("textarea")||$(this).is("select")||$(this).is("checkbox")||$(this).is("radio")?$(this).val(""):$(this).html(""),$(this).addHidden()})},mdl.addError=function(value){modules[module].models[name].__error=value,$('[data-ml-module="'+module+'"]').find('[data-ml-error="'+name+'.error"]').each(function(){$(this).is("input")||$(this).is("textarea")||$(this).is("select")||$(this).is("checkbox")||$(this).is("radio")?$(this).val(modules[module].models[name].__error):$(this).html(modules[module].models[name].__error),$(this).removeHidden()})},mdl.getError=function(value){return modules[module].models[name].__error},mdl.get=function(param,defaultValue){return"undefined"==typeof defaultValue&&(defaultValue=""),"undefined"!=typeof modules[module].models[name][param]?modules[module].models[name][param]:(console.warn('MOONLIGHTUI - Model "'+mdl.__name+'" in module "'+mdl.__module+'" does not have property "'+param+'"'),defaultValue)},mdl.set=function(param,value){mdl[param]=value,$('[data-ml-module="'+mdl.__module+'"').find('[data-ml-model="'+mdl.__name+"."+param+'"]').each(function(){$(this).is("input")||$(this).is("textarea")||$(this).is("select")||$(this).is("checkbox")||$(this).is("radio")?$(this).val(value):$(this).html(value)})},mdl.__on={},mdl.receive=function(cb){mdl.__on=cb},mdl.__broadcast=function(model,param){$('[data-ml-module="'+module+'"]').find('[data-ml-model="'+model+"."+param+'"]').each(function(){$(this).is("input")||$(this).is("textarea")||$(this).is("select")||$(this).is("checkbox")||$(this).is("radio")?$(this).val(modules[module].models[model][param]):$(this).html(modules[module].models[model][param])}),modules[module].models[model].__on(param)},mdl.__initTwoWayBinding=function(){$('[data-ml-module="'+module+'"]').find('[data-ml-model*="'+name+'."]').each(function(){if($(this).data("ml-model").indexOf(".")!==-1){var modelParameter=$(this).data("ml-model").split("."),model=modelParameter[0],param=modelParameter[1];$(this).is("input")||$(this).is("textarea")||$(this).is("select")||$(this).is("checkbox")||$(this).is("radio")?($(this).val(modules[module].models[model][param]),($(this).is("input")||$(this).is("textarea"))&&$(this).on("keyup",function(){modules[module].models[model][param]=$(this).val(),modules[module].models[model].__broadcast(model,param)}),($(this).is("select")||$(this).is("checkbox")||$(this).is("radio"))&&$(this).on("change",function(){modules[module].models[model][param]=$(this).val(),modules[module].models[model].__broadcast(model,param)})):$(this).html(modules[module].models[model][param])}else console.warn('MOONLIGHTUI - You must specify a model and its parameter (example "modelName.param") in the ml-model attribute. I got: '+$(this).data("ml-model")+' in module "'+module+'"')})},modules[module].models[name]=mdl,mdl.__initTwoWayBinding(),this},getModel:function(parent,name){if("undefined"!=typeof modules[parent].models[name])return modules[parent].models[name]},getController:function(parent,name){if("undefined"!=typeof modules[parent].controllers[name])return modules[parent].controllers[name]},getView:function(parent,name){if("undefined"!=typeof modules[parent].views[name])return modules[parent].views[name]},tabs:function(){$(this).each(function(){$(this).on("click",function(){$(this).parent().find(".active").removeClass("active"),$(this).addClass("active");var tab=$(this).data("ml-tab");$("#"+tab).parent().find(".active").removeClass("active"),$("#"+tab).addClass("active")})})},tabSwitch:function(){$(this).each(function(){$(this).on("click",function(){var collection=$(this).data("ml-tab-switch"),tab={};if(collection.indexOf(",")!==-1)for(var tabs=collection.split(","),i=0;i<tabs.length;i++)$("#"+tabs[i]).parent().find(".active").removeClass("active"),$("#"+tabs[i]).addClass("active"),tab=$("#"+tabs[i]).data("ml-tab"),$("#"+tab).parent().find(".active").removeClass("active"),$("#"+tab).addClass("active");else $("#"+collection).parent().find(".active").removeClass("active"),$("#"+collection).addClass("active"),tab=$("#"+collection).data("ml-tab"),$("#"+tab).parent().find(".active").removeClass("active"),$("#"+tab).addClass("active")})})},buttons:function(){$(this).each(function(){$(this).on("mousedown",function(){$(this).addClass("down")}),$(this).on("mouseup",function(){if($(this).removeClass("down"),"undefined"!=typeof $(this).data("click")){var click=$(this).data("click");click()}})})},trees:function(){$(this).each(function(){$(this).jstree(),$(this).removeClass("hidden")})},showComponents:function(){$(this).each(function(){$(this).on("click",function(){var show=$(this).data("ml-show");if(show.indexOf(",")!==-1)for(var elements=show.split(","),i=0;i<elements.length;i++)$("#"+elements[i]).removeClass("hidden");else $("#"+show).removeClass("hidden")})})},hideComponents:function(){$(this).each(function(){$(this).on("click",function(){var hide=$(this).data("ml-hide");if(hide.indexOf(",")!==-1)for(var elements=hide.split(","),i=0;i<elements.length;i++)$("#"+elements[i]).addClass("hidden");else $("#"+hide).addClass("hidden")})})},draggableComponents:function(){$(".moonlightui-layout-left").droppable({accept:".moonlightui-component",drop:function(event,ui){$(this).append(ui.draggable)}}),$(".moonlightui-layout-right").droppable({accept:".moonlightui-component",drop:function(event,ui){$(this).append(ui.draggable)}}),$(".moonlightui-component-draggable").draggable({revert:!0,scroll:!1})},tooltips:function(){$('[data-ml-tooltip-active="true"]').on("mouseover",function(){var title=$(this).data("ml-tooltip");$(".moonlightui-tooltip").html(title),$(".moonlightui-tooltip").removeClass("hidden")}),$('[data-ml-tooltip-active="true"]').on("mousemove",function(event){$(".moonlightui-tooltip").css("left",event.pageX+"px"),$(".moonlightui-tooltip").css("top",event.pageY+10+"px")}),$('[data-ml-tooltip-active="true"]').on("mouseout",function(){$(this).data("ml-tooltip");$(".moonlightui-tooltip").css("left","-1000px"),$(".moonlightui-tooltip").css("top","-1000px"),$(".moonlightui-tooltip").html(""),$(".moonlightui-tooltip").addClass("hidden")})},showModal:function(){this.css({top:"50%",left:"50%",margin:"-"+$(this).height()/2+"px 0 0 -"+$(this).width()/2+"px"}),this.removeHidden()},hideModal:function(){this.addHidden()},centerModal:function(){return this.css({top:"50%",left:"50%",margin:"-"+$(this).height()/2+"px 0 0 -"+$(this).width()/2+"px"}),this},modals:function(){$(".moonlightui-modal").draggable({scroll:!1,start:function(){$(this).hasClass("max")&&($(this).css("left","0px"),$(this).css("top","0px"),$(this).css("bottom","0px"),$(this).css("right","0px"))},drag:function(){$(this).hasClass("max")&&($(this).css("left","0px"),$(this).css("top","0px"),$(this).css("bottom","0px"),$(this).css("right","0px"))},stop:function(){$(this).hasClass("max")&&($(this).css("left","0px"),$(this).css("top","0px"),$(this).css("bottom","0px"),$(this).css("right","0px"))}}),$(".moonlightui-modal-resizable").resizable({stop:function(){$(this).attr("data-ml-preheight",$(this).height()),$(this).attr("data-ml-prewidth",$(this).width())}}),$(".moonlightui-modal .moonlightui-modal-close").on("click",function(){$(this).hasClass("moonlightui-modal-disable")||$(this).parent().parent().addClass("hidden")}),$(".moonlightui-modal .moonlightui-modal-close.destroy").on("click",function(){$(this).hasClass("moonlightui-modal-disable")||$(this).remove()}),$(".moonlightui-modal .moonlightui-modal-close-btn.destroy").on("click",function(){$(this).remove()}),$(".moonlightui-modal .moonlightui-modal-ok-btn.destroy").on("click",function(){$(this).remove()}),$(".moonlightui-modal .moonlightui-modal-min").on("click",function(){$(this).hasClass("moonlightui-modal-disable")||($(this).parent().parent().hasClass("min")?($(this).parent().parent().removeClass("min"),$(this).parent().parent().hasClass("moonlightui-modal-fixed")||$(this).parent().find(".moonlightui-modal-max").removeClass("moonlightui-modal-disable"),$(this).parent().parent().find(".moonlightui-modal-body").removeClass("hidden"),$(this).parent().parent().css("height",$(this).parent().parent().attr("data-ml-preheight")+"px")):($(this).parent().parent().hasClass("moonlightui-modal-fixed")||$(this).parent().find(".moonlightui-modal-max").addClass("moonlightui-modal-disable"),$(this).parent().parent().attr("data-ml-preheight",$(this).parent().parent().height()),$(this).parent().parent().attr("data-ml-prewidth",$(this).parent().parent().width()),$(this).parent().parent().find(".moonlightui-modal-body").addClass("hidden"),$(this).parent().parent().css("height","22px"),$(this).parent().parent().addClass("min")))}),$(".moonlightui-modal .moonlightui-modal-max").on("click",function(){$(this).hasClass("moonlightui-modal-disable")||($(this).parent().parent().hasClass("max")?($(this).parent().find(".moonlightui-modal-min").removeClass("moonlightui-modal-disable"),$(this).parent().parent().removeClass("max"),$(this).parent().parent().css("height",$(this).parent().parent().attr("data-ml-preheight")+"px"),$(this).parent().parent().css("width",$(this).parent().parent().attr("data-ml-prewidth")+"px"),$(this).parent().parent().css("left",$(this).parent().parent().attr("data-ml-preleft")+"px"),$(this).parent().parent().css("top",$(this).parent().parent().attr("data-ml-pretop")+"px"),$(this).parent().parent().css("margin-left",$(this).parent().parent().attr("data-ml-premarginleft"))):($(this).parent().find(".moonlightui-modal-min").addClass("moonlightui-modal-disable"),$(this).parent().parent().attr("data-ml-preheight",$(this).parent().parent().height()),$(this).parent().parent().attr("data-ml-prewidth",$(this).parent().parent().width()),$(this).parent().parent().attr("data-ml-preleft",$(this).parent().parent().position().left),$(this).parent().parent().attr("data-ml-pretop",$(this).parent().parent().position().top),$(this).parent().parent().attr("data-ml-premarginleft",$(this).parent().parent().css("margin-left")),$(this).parent().parent().css("height",$(document).height()+"px"),$(this).parent().parent().css("width",$(document).width()+"px"),$(this).parent().parent().css("left","0px"),$(this).parent().parent().css("top","0px"),$(this).parent().parent().css("margin-left","0px"),$(this).parent().parent().addClass("max")))})},showHelp:function(){$(this).each(function(){var url=$(this).data("ml-help-url"),title=$(this).data("ml-help-title");"undefined"==typeof url&&console.warn("MOONLIGHTUI - You must specify url to load the help page from."),"undefined"==typeof title&&console.warn("MOONLIGHTUI - You must specify title for the help dialog."),$(this).on("click",function(){var newHelp=$("<div></div>").html('<div class="moonlightui-modal-header"><div class="moonlightui-modal-close destroy"></div><div class="moonlightui-modal-min moonlightui-modal-disable"></div><div class="moonlightui-modal-max moonlightui-modal-disable"></div>'+title+'</div><div class="moonlightui-modal-body table-add"><iframe src="'+url+'" target="_parent" class="moonlightui-modal-help-iframe"></iframe><div class="moonlightui-modal-body-btn-bottom-fixed"><div id="fillableAddOk" class="moonlightui-btn moonlightui-modal-ok-btn destroy"><div class="moonlightui-btn-inner">ok</div></div></div></div>');newHelp.addClass("moonlightui-modal moonlightui-modal-fixed"),$("body").append(newHelp),newHelp.draggable({scroll:!1}),newHelp.find(".moonlightui-modal-close.destroy").on("click",function(){$(newHelp).remove()}),newHelp.find(".moonlightui-modal-close-btn.destroy").on("click",function(){$(newHelp).remove()}),newHelp.find(".moonlightui-modal-ok-btn.destroy").on("click",function(){$(newHelp).remove()}),newHelp.css({top:"50%",left:"50%",margin:"-"+$(newHelp).height()/2+"px 0 0 -"+$(newHelp).width()/2+"px"})})})},lodash:_,async:async,jsPlumb:jsPlumb,laravel:{http:{get:function(url,data,cb,fail){$.ajax({url:url,method:"GET",data:data,context:document.body}).done(function(data){cb(data)}).fail(function(data){fail(data)})},post:function(url,data,cb,fail){var settings=$().getModel("moonlightui","settings");data._token=settings.get("csrfToken"),$.ajax({url:url,method:"POST",data:data,context:document.body}).done(function(data){cb(data)}).fail(function(data){fail(data)})},put:function(url,data,cb,fail){data._token=window.csrfToken,$.ajax({url:url,method:"PUT",data:data,context:document.body}).done(function(data){cb(data)}).fail(function(data){fail(data)})},delete:function(url,data,cb,fail){data._token=window.csrfToken,$.ajax({url:url,method:"DELETE",data:data,context:document.body}).done(function(data){cb(data)}).fail(function(data){fail(data)})}}},reenergize:function(element){$(element+" .moonlightui-tab").off(),$(element+" .moonlightui-main-tab").off(),$(element+" .moonlightui-tab-switch").off(),$(element+" .moonlightui-show").off(),$(element+" .moonlightui-hide").off(),$(element).find("[data-ml-action]").off(),$(element+" .moonlightui-btn-inner").off(),$(element+" .moonlightui-show-help").off(),$(element).find('[data-ml-tooltip-active="true"]').off(),$(element+" .moonlightui-modal .moonlightui-modal-close").off(),$(element+" .moonlightui-modal .moonlightui-modal-min").off(),$(element+" .moonlightui-modal .moonlightui-modal-max").off(),$(element).off(),$(element).find("[data-ml-model]").off();for(var module in modules)for(var model in modules[module].models)modules[module].models[model].__initTwoWayBinding();$(element).energize(element)},energize:function(element){$(element+" .moonlightui-tree").trees(),$(element+" .moonlightui-component-title-main-options").sortable(),$(element+" .moonlightui-tab").tabs(),$(element+" .moonlightui-main-tab").tabs(),$(element+" .moonlightui-tab-switch").tabSwitch(),$(element+" .moonlightui-show").showComponents(),$(element+" .moonlightui-hide").hideComponents(),$(element+" moonlightui").draggableComponents(),$(element).find("[data-ml-action]").actions(),$(element+" .moonlightui-show-help").showHelp(),$(element+" .moonlightui-btn-inner").buttons(),$(element+" .moonlightui-scrollbar-inner").scrollbar(),$(element+" .moonlightui").tooltips(),$(element+" .moonlightui").modals()}}),window.$ml=window.moonlightui=$.noConflict()});